function show_alert(){alert("hihi")}var count=1;alert(count),function(t){function i(i,e){var o=-1;return function(){var r=this,s=arguments;-1!==o&&t.clearTimeout(o),o=n(function(){o=-1,i.apply(r,s)},e)}}function n(i,n){return t.setTimeout(i,n)}function e(i,n){return t.setInterval(i,n)}function o(i){return t.document.createElement(i)}function r(t){throw Error(t)}function s(t,i){if(t.pa){var n="The object is frozen, so its properties cannot be set: "+t.toString();void 0!==i&&(n+="  to value: "+i),r(n)}}function a(t,i,n,e){t instanceof i||(n=X(n),void 0!==e&&(n+="."+e),f(t,i,n))}function h(t,i,n,e){typeof t!==i&&(n=X(n),void 0!==e&&(n+="."+e),f(t,i,n))}function l(t,i,n){"number"==typeof t&&isFinite(t)||(i=X(i),void 0!==n&&(i+="."+n),r(i+" must be a real number type, and not NaN or Infinity: "+t))}function u(t,i,n,e){t instanceof oi&&t.Td===i||(n=X(n),void 0!==e&&(n+="."+e),f(t,"a constant of class "+J(i),n))}function f(t,i,n,e){i=X(i),n=X(n),void 0!==e&&(n+="."+e),r("string"==typeof t?n+" value is not an instance of "+i+': "'+t+'"':n+" value is not an instance of "+i+": "+t)}function c(t,i,n,e){n=X(n),void 0!==e&&(n+="."+e),r(n+" is not in the range "+i+": "+t)}function p(t){r(J(t)+" constructor cannot take any arguments.")}function d(t){r("Collection was modified during iteration: "+t.toString()+"\n  Perhaps you should iterate over a copy of the collection,\n  or you could collect items to be removed from the collection after the iteration.")}function v(i){t.console&&t.console.log(i)}function y(t){return"object"==typeof t&&null!==t}function g(t){return Array.isArray(t)||t instanceof NodeList||t instanceof HTMLCollection}function m(t,i,n){g(t)||f(t,"Array or NodeList or HTMLCollection",i,n)}function x(t){return t.length}function b(t){return Array.prototype.slice.call(t)}function w(t,i){return Array.isArray(t),t[i]}function k(t,i,n){Array.isArray(t)?t[i]=n:r("Cannot replace an object in an HTMLCollection or NodeList at "+i)}function M(t,i){if(Array.isArray(t))return t.indexOf(i);for(var n=t.length,e=0;n>e;e++)if(t[e]===i)return e;return-1}function T(t,i,n){Array.isArray(t)?i>=t.length?t.push(n):t.splice(i,0,n):r("Cannot insert an object into an HTMLCollection or NodeList: "+n+" at "+i)}function S(t,i){Array.isArray(t)?i>=t.length?t.pop():t.splice(i,1):r("Cannot remove an object from an HTMLCollection or NodeList at "+i)}function C(){var t=ef.pop();return void 0===t?new wi:t}function N(t,i){var n=ef.pop();return void 0===n?new wi(t,i):(n.x=t,n.y=i,n)}function P(t){ef.push(t)}function j(){var t=of.pop();return void 0===t?new Ti:t}function L(t){of.push(t)}function D(){var t=rf.pop();return void 0===t?new Si:t}function A(t,i,n,e){var o=rf.pop();return void 0===o?new Si(t,i,n,e):(o.x=t,o.y=i,o.width=n,o.height=e,o)}function F(t){rf.push(t)}function O(){var t=sf.pop();return void 0===t?new Ai:t}function z(t){sf.push(t)}function B(){var t=af;return null!==t?(af=null,t):new _s}function q(t){t.reset(),af=t}function E(){var t=hf.pop();return void 0===t?[]:t}function R(t){t.length=0,hf.push(t)}function I(t){t.__gohashid=uf++}function G(t){var i=t.__gohashid;return void 0===i&&(i=uf++,t.__gohashid=i),i}function V(t){return t.__gohashid}function H(t,i){i.Xv=t,Xu[t]=i}function U(t,i){function n(){}n.prototype=i.prototype,t.prototype=new n,t.prototype.constructor=t}function K(t,i,n,e){h(t,"function","Util.defineProperty:classfunc"),h(i,"object","Util.defineProperty:propobj"),h(n,"function","Util.defineProperty:getter"),h(e,"function","Util.defineProperty:setter");for(var o in i){i=i[o],Object.defineProperty(t.prototype,o,{get:n,set:e}),n=Object.getOwnPropertyDescriptor(t.prototype,o),i&&n&&Object.defineProperty(t.prototype,i,n);break}}function Y(t,i,n,e){h(t,"function","Util.defineReadOnlyProperty:classfunc"),h(i,"object","Util.defineReadOnlyProperty:propobj"),h(n,"function","Util.defineReadOnlyProperty:getter");for(var o in i){var s=i[o];if(i={get:n,set:function(t){r('The property "'+s+'" is read-only and cannot be set to '+t)}},void 0!==e)for(var a in e)i[a]=e[a];Object.defineProperty(t.prototype,o,i),e=Object.getOwnPropertyDescriptor(t.prototype,o),s&&e&&Object.defineProperty(t.prototype,s,e);break}}function W(t,i){for(var n in i)i[n]=!0;t.prototype.IA=i}function X(t){return void 0===t?"":"string"==typeof t?t:"function"==typeof t?J(t):null===t?"*":""}function J(t){if("function"==typeof t){if(t.Xv)return t.Xv;if(t.name)return t.name;var i=t.toString(),n=i.indexOf("("),i=i.substring(9,n).trim();if(""!==i)return t.Xv=i}else if("object"==typeof t&&t.constructor)return J(t.constructor);return typeof t}function Z(t,i,n){h(t,"function","Util.defineEnumValue:classfunc"),h(i,"string","Util.defineEnumValue:name"),h(n,"number","Util.defineEnumValue:num"),n=new oi(t,i,n),Object.freeze(n),t[i]=n;var e=t.Es;return e instanceof bi||(e=new bi("string",oi),t.Es=e),e.add(i,n),n}function Q(t,i){if(!t||!i)return null;var n=void 0;try{"function"==typeof i?n=i(t):"function"==typeof t.getAttribute?(n=t.getAttribute(i),null===n&&(n=void 0)):n=t[i]}catch(e){}return n}function $(t,i,n){if(t&&i)try{"function"==typeof i?i(t,n):"function"==typeof t.setAttribute?t.setAttribute(i,n):t[i]=n}catch(e){}}function _(t,i){h(t,"object","Setting properties requires Objects as arguments"),h(i,"object","Setting properties requires Objects as arguments");var n,e=t instanceof rs,o=t instanceof Ke;for(n in i){""===n&&r("Setting properties requires non-empty property names");var s=t,a=n;if(e||o){var l=n.indexOf(".");if(l>0){var u=n.substring(0,l);e?s=t.Cd(u):(s=t[u],(void 0===s||null===s)&&(s=t.Xa[u])),y(s)?a=n.substr(l+1):r("Unable to find object named: "+u+" in "+t.toString()+" when trying to set property: "+n)}}if("_"!==a[0]&&!ti(s,a))if(o&&ti(t.Xa,a))s=t.Xa;else{if(o&&sr(t,a)){t.zx(a,i[a]);continue}r('Trying to set undefined property "'+a+'" on object: '+s.toString())}s[a]=i[n],"_"===a[0]&&(l=s.Ik,g(l)||(l=[],s.Ik=l),l.push(a))}}function ti(t,i){if(t.hasOwnProperty(i))return!0;for(var n=Object.getPrototypeOf(t);n&&n!==Function;){if(n.hasOwnProperty(i))return!0;var e=n.IA;if(e&&e[i])return!0;n=Object.getPrototypeOf(n)}return!1}function ii(t,i){if(!y(i)||i instanceof Element||i instanceof CanvasRenderingContext2D||i instanceof Ki||i instanceof si)return"";var n,e="";for(n in i)if("string"!=typeof n)""===e&&(e=i+"\n"),e+="  "+n+" is not a string property\n";else if("_"!==n.charAt(0)&&!(2>=n.length)){var o=Q(i,n);null===o||"function"==typeof o||ti(i,n)||(""===e&&(e=i+"\n"),e+='  unknown property "'+n+'" has value: '+o+" at "+t+"\n")}return e}function ni(t,i){if(null!==i&&"number"!=typeof i&&"string"!=typeof i&&"boolean"!=typeof i&&"function"!=typeof i)if(void 0!==V(i)){if(!Ju.contains(i))if(Ju.add(i),Zu.add(ii(t,i)),i instanceof ci||i instanceof di||i instanceof bi)for(var n=i.i;n.next();)ni(t+"["+n.key+"]",n.value);else for(n in i){var e=Q(i,n);if(void 0!==e&&null!==e&&y(e)&&e!==i.IA){if(i instanceof qs){if(e===i.qi)continue}else if(i instanceof rs){if("data"===n||e===i.Cg)continue;if("itemArray"===n||e===i.uh)continue;if(i instanceof sa&&e===i.Lj)continue}else if(!(i instanceof Ke))if(i instanceof Nn){if("archetypeGroupData"===n||e===i.Tv)continue}else if(i instanceof le){if("archetypeLinkData"===n||e===i.Vv)continue;if("archetypeLabelNodeData"===n||e===i.Uv)continue}else if(i instanceof xe){if("archetypeNodeData"===n||e===i.sj)continue}else if(i instanceof sn){if("nodeDataArray"===n||e===i.De)continue;if("linkDataArray"===n||e===i.Ng||e===i.Yk)continue;if(e===i.Vb)continue;if(e===i.Gg)continue}else if(i instanceof Ah||i instanceof qh||i instanceof Eh)continue;ni(t+"."+n,e)}}}else if(Array.isArray(i))for(n=0;n<i.length;n++)ni(t+"["+n+"]",i[n]);else Zu.add(ii(t,i))}function ei(t){for(var i=[],n=0;256>n;n++)i["0123456789abcdef".charAt(n>>4)+"0123456789abcdef".charAt(15&n)]=String.fromCharCode(n);t.length%2&&(t="0"+t);for(var e=[],o=0,n=0;n<t.length;n+=2)e[o++]=i[t.substr(n,2)];for(t=e.join(""),t=""===t?"0":t,i=[],n=0;256>n;n++)i[n]=n;for(n=o=e=0;256>n;n++)e=(e+i[n]+119)%256,o=i[n],i[n]=i[e],i[e]=o;for(var e=n=0,r="",s=0;s<t.length;s++)n=(n+1)%256,e=(e+i[n])%256,o=i[n],i[n]=i[e],i[e]=o,r+=String.fromCharCode(t.charCodeAt(s)^i[(i[n]+i[e])%256]);return r}function oi(t,i,n){I(this),this.vz=t,this.yb=i,this.oE=n}function ri(){this.sz=[]}function si(){}function ai(t){void 0===t&&(t=42),this.seed=t,this.Kv=48271,this.Ds=2147483647,this.lz=this.Ds/this.Kv,this.SD=this.Ds%this.Kv,this.OD=1/this.Ds,this.random()}function hi(){}function li(t){this.key=-1,this.value=t}function ui(t){this.Sc=t,this.Ei=null,this.reset()}function fi(t){this.Sc=t,this.reset()}function ci(t){I(this),this.pa=!1,this.l=[],this.K=0,this.Mm=this.Rc=null,void 0===t||null===t?this.da=null:"string"==typeof t?"object"===t||"string"===t||"number"===t||"boolean"===t||"function"===t?this.da=t:c(t,"the string 'object', 'number', 'string', 'boolean', or 'function'","List constructor: type"):"function"==typeof t?this.da=t===Object?"object":t===String?"string":t===Number?"number":t===Boolean?"boolean":t===Function?"function":t:c(t,"null, a primitive type name, or a class type","List constructor: type")}function pi(t){this.Qj=t,this.reset()}function di(t){I(this),this.pa=!1,void 0===t||null===t?this.da=null:"string"==typeof t?"object"===t||"string"===t||"number"===t?this.da=t:c(t,"the string 'object', 'number' or 'string'","Set constructor: type"):"function"==typeof t?this.da=t===Object?"object":t===String?"string":t===Number?"number":t:c(t,"null, a primitive type name, or a class type","Set constructor: type"),this.vc={},this.uc=0,this.Rc=null,this.K=0,this.Mg=this.La=null}function vi(t){this.Fa=t,this.reset()}function yi(t){I(this),this.pa=!0,this.Fa=t}function gi(t){this.Fa=t,this.reset()}function mi(t,i){this.key=t,this.value=i,this.Ym=this.wb=null}function xi(t){this.Fa=t,this.reset()}function bi(t,i){I(this),this.pa=!1,void 0===t||null===t?this.Ap=null:"string"==typeof t?"object"===t||"string"===t||"number"===t?this.Ap=t:c(t,"the string 'object', 'number' or 'string'","Map constructor: keytype"):"function"==typeof t?this.Ap=t===Object?"object":t===String?"string":t===Number?"number":t:c(t,"null, a primitive type name, or a class type","Map constructor: keytype"),void 0===i||null===i?this.ru=null:"string"==typeof i?"object"===i||"string"===i||"boolean"===i||"number"===i||"function"===i?this.ru=i:c(i,"the string 'object', 'number', 'string', 'boolean', or 'function'","Map constructor: valtype"):"function"==typeof i?this.ru=i===Object?"object":i===String?"string":i===Number?"number":i===Boolean?"boolean":i===Function?"function":i:c(i,"null, a primitive type name, or a class type","Map constructor: valtype"),this.vc={},this.uc=0,this.Nm=this.Rc=null,this.K=0,this.Mg=this.La=null}function wi(t,i){void 0===t?this.y=this.x=0:(this.x=t,this.y=i),this.pa=!1}function ki(t,i){if(0===t)return i>0?90:0>i?270:0;if(0===i)return t>0?0:180;if(isNaN(t)||isNaN(i))return 0;var n=180*Math.atan(Math.abs(i/t))/Math.PI;return 0>t?n=0>i?n+180:180-n:0>i&&(n=360-n),n}function Mi(t,i){return i.ah(t),t}function Ti(t,i){void 0===t?this.height=this.width=0:(this.width=t,this.height=i),this.pa=!1}function Si(t,i,n,e){void 0===t?this.height=this.width=this.y=this.x=0:t instanceof wi?i instanceof wi?(this.x=Math.min(t.x,i.x),this.y=Math.min(t.y,i.y),this.width=Math.abs(t.x-i.x),this.height=Math.abs(t.y-i.y)):i instanceof Ti?(this.x=t.x,this.y=t.y,this.width=i.width,this.height=i.height):r("Incorrect arguments supplied to Rect constructor"):(this.x=t,this.y=i,this.width=n,this.height=e),this.pa=!1}function Ci(t,i,n){t.width=i,t.height=n}function Ni(t,i,n,e,o){t.kb();var r=t.width;return-r>=n+o?(t.x+=r/2,t.width=0):(t.x-=o,t.width+=n+o),n=t.height,-n>=i+e?(t.y+=n/2,t.height=0):(t.y-=i,t.height+=i+e),t}function Pi(t,i,n,e,o){t.kb();var r=Math.max(t.x,i),s=Math.max(t.y,n);return i=Math.min(t.x+t.width,i+e),n=Math.min(t.y+t.height,n+o),t.x=r,t.y=s,t.width=Math.max(0,i-r),t.height=Math.max(0,n-s),t}function ji(t,i){var n=t.width,e=i.width+10+10,o=t.x,r=i.x-10;return o>e+r||r>n+o?!1:(n=t.height,e=i.height+10+10,o=t.y,r=i.y-10,o>e+r||r>n+o?!1:!0)}function Li(t,i,n,e,o){var r=Math.min(t.x,i),s=Math.min(t.y,n);return i=Math.max(t.x+t.width,i+e),n=Math.max(t.y+t.height,n+o),t.x=r,t.y=s,t.width=i-r,t.height=n-s,t}function Di(t,i,n,e){void 0===t?this.left=this.bottom=this.right=this.top=0:void 0===i?this.left=this.bottom=this.right=this.top=t:void 0===n?(e=i,this.top=t,this.right=i,this.bottom=t,this.left=e):void 0!==e?(this.top=t,this.right=i,this.bottom=n,this.left=e):r("Invalid arguments to Margin constructor"),this.pa=!1}function Ai(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}function Fi(t,i,n,e){void 0===t?this.offsetY=this.offsetX=this.y=this.x=0:(void 0===i&&(i=0),void 0===n&&(n=0),void 0===e&&(e=0),this.x=t,this.y=i,this.offsetX=n,this.offsetY=e),this.pa=!1}function Oi(t,i){return t.x=0/0,t.y=0/0,t.offsetX=i,t}function zi(){this.re=[1,0,0,1,0,0]}function Bi(t){this.type=t,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.KB=[]}function qi(t,i,n){this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.iv=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.document=i||document,this.YB=n,this.fv=null,this.path=[],this.Qh=new zi,this.stack=[],this.Ie=[],this.qD=this.lC=this.Ju=0,this.Ou=t,this.kG="http://www.w3.org/2000/svg",this.width=this.Ou.width,this.height=this.Ou.height,this.Bk=Ei(this,"svg",{width:this.width+"px",height:this.height+"px",eJ:"0 0 "+this.Ou.width+" "+this.Ou.height}),this.Bk.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.Bk.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),Ui(this,1,0,0,1,0,0),t=Ei(this,"clipPath",{id:"mainClip"}),t.appendChild(Ei(this,"rect",{x:0,y:0,width:this.width,height:this.height})),this.Bk.appendChild(t),this.Ie[0].setAttributeNS(null,"clip-path","url(#mainClip)")}function Ei(t,i,n,e){if(t=t.document.createElementNS(t.kG,i),y(n))for(var o in n)t.setAttributeNS("href"===o?"http://www.w3.org/1999/xlink":"",o,n[o]);return void 0!==e&&(t.textContent=e),t}function Ri(t,i,n,e,o){1!==t.globalAlpha&&(n.opacity=t.globalAlpha),"fill"==i?(/^rgba\(/.test(t.fillStyle)?(t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),n.fill="rgb("+t[1]+","+t[2]+","+t[3]+")",n["fill-opacity"]=t[4]):n.fill=t.fillStyle instanceof Bi?Ii(t,t.fillStyle):t.fillStyle,n.stroke="none"):"stroke"==i&&(n.fill="none",/^rgba\(/.test(t.strokeStyle)?(i=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.strokeStyle),n.stroke="rgb("+i[1]+","+i[2]+","+i[3]+")",n["stroke-opacity"]=i[4]):n.stroke=t.strokeStyle instanceof Bi?Ii(t,t.strokeStyle):t.strokeStyle,n["stroke-width"]=t.lineWidth,n["stroke-linecap"]=t.lineCap,n["stroke-linejoin"]=t.lineJoin,n["stroke-miterlimit"]=t.miterLimit),e=e.re,e="matrix("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")",void 0!==o&&(e+=o),n.transform=e}function Ii(t,i){var n="GRAD"+t.lC;t.lC++;var e;if("linear"===i.type)e={x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2,id:n,gradientUnits:"userSpaceOnUse"},e=Ei(t,"linearGradient",e);else{if("radial"!==i.type)throw Error("invalid gradient");e={x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2,r1:i.r1,r2:i.r2,id:n},e=Ei(t,"radialGradient",e)}for(var o=i.KB,r=o.length,s=[],a=0;r>a;a++){var h=o[a],l=h.color,h={offset:h.offset,"stop-color":l};/^rgba\(/.test(l)&&(l=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(l),h["stop-color"]="rgb("+l[1]+","+l[2]+","+l[3]+")",h["stop-opacity"]=l[4]),s.push(h)}for(s.sort(function(t,i){return t.offset>i.offset?1:-1}),a=0;r>a;a++)e.appendChild(Ei(t,"stop",s[a]));return t.Bk.appendChild(e),"url(#"+n+")"}function Gi(t,i,n,e){n={x:n[0],y:n[1],width:n[2],height:n[3]},Ri(t,i,n,e),t.addElement("rect",n)}function Vi(t,i,n,e){for(var o=[],r=0;r<n.length;r++){var s=b(n[r]),a=[s.shift()];if("A"==a[0])a.push(s.shift()+","+s.shift(),s.shift(),s.shift()+","+s.shift(),s.shift()+","+s.shift());else for(;s.length;)a.push(s.shift()+","+s.shift());o.push(a.join(" "))}n={d:o.join(" ")},Ri(t,i,n,e),"clipPath"===i?(i="CLIP"+t.Ju,t.Ju++,e=Ei(t,"clipPath",{id:i}),e.appendChild(Ei(t,"path",n)),t.Bk.appendChild(e),0<t.Ie.length&&t.Ie[t.Ie.length-1].setAttributeNS(null,"clip-path","url(#"+i+")")):t.addElement("path",n)}function Hi(t,i,n,e,o,r,s){var a=Math.abs(o-r);if(o!=r){var h=i+e*Math.cos(r);r=n+e*Math.sin(r),a>=2*Math.PI?(Hi(t,i,n,e,o,o+Math.PI,s),Hi(t,i,n,e,o+Math.PI,o+2*Math.PI,s),t.path.push(["M",h,r])):(i+=e*Math.cos(o),n+=e*Math.sin(o),a=180*a/Math.PI,o=s?0:1,s=a>=180==!!s?0:1,t.path.push(0!==t.path.length?["L",i,n]:["M",i,n]),t.path.push(["A",e,e,a,s,o,h,r]))}}function Ui(t,i,n,e,o,r,s){var a=new zi;a.re=[i,n,e,o,r,s],i={},Ri(t,"g",i,a),a=t.addElement("g",i),t.Ie.push(a)}function Ki(t,i){this.ownerDocument=void 0===i?document:i;var n=this.ownerDocument.createElement("canvas");n.tabIndex=0,this.Yc=n,n.getContext&&n.getContext("2d")||r("Browser does not support HTML Canvas Element"),this.LE=n.getContext("2d"),n.N=t,Object.seal(this)}function Yi(t){1<arguments.length&&r("Geometry constructor can take at most one optional argument, the Geometry type."),I(this),this.pa=!1,void 0===t&&(t=ic),this.da=t,this.fb=this.Wa=this.Wb=this.Pb=0,this.ki=new ci($i),this.kt=this.ki.K,this.Vs=(new Si).freeze(),this.Ca=!0,this.Fh=wf,this.Gh=jf,this.Gm=this.Hm=0/0,this.ph=wp}function Wi(t,i){if(t.type!==$f||i.type!==ic)return!1;if(1===i.Ya.count){var n=i.Ya.Y(0);if(1===n.ra.count&&Qf.q(t.ia,n.ia)&&Qf.q(t.ja,n.ja)&&(n=n.ra.Y(0),n.type===sc&&Qf.q(t.s,n.s)&&Qf.q(t.u,n.u)))return!0}return!1}function Xi(t,i){for(var n=t.length,e=C(),o=0;n>o;o++){var r=t[o];e.x=r[0],e.y=r[1],i.Ka(e),r[0]=e.x,r[1]=e.y,e.x=r[2],e.y=r[3],i.Ka(e),r[2]=e.x,r[3]=e.y,e.x=r[4],e.y=r[5],i.Ka(e),r[4]=e.x,r[5]=e.y,e.x=r[6],e.y=r[7],i.Ka(e),r[6]=e.x,r[7]=e.y}P(e)}function Ji(t,i,n){switch(t.type){case $f:case _f:case tc:n?i.k(t.Pb,t.Wb,0,0):Li(i,t.Pb,t.Wb,0,0),Li(i,t.Wa,t.fb,0,0);break;case ic:var e=t.Ya;t=e.l;for(var e=e.length,o=0;e>o;o++){var s=t[o];n&&0===o?i.k(s.ia,s.ja,0,0):Li(i,s.ia,s.ja,0,0);for(var a=s.ra.l,h=a.length,l=s.ia,u=s.ja,f=0;h>f;f++){var c=a[f];switch(c.type){case sc:case rc:l=c.s,u=c.u,Li(i,l,u,0,0);break;case ac:Qf.rn(l,u,c.vb,c.Lb,c.ve,c.we,c.s,c.u,.5,i),l=c.s,u=c.u;break;case hc:Qf.Ey(l,u,c.vb,c.Lb,c.s,c.u,.5,i),l=c.s,u=c.u;break;case lc:case uc:for(var c=c.type===lc?tn(c,s):nn(c,s,l,u),p=c.length,d=null,v=0;p>v;v++)d=c[v],Qf.rn(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],.5,i);null!==d&&(l=d[6],u=d[7]);break;default:r("Unknown Segment type: "+c.type)}}}break;default:r("Unknown Geometry type: "+t.type)}}function Zi(t,i,n,e,o,r,s,a){if(Qf.bd(o,r,s,a,.05,t,i))return 0/0;var h=(t-n)*(r-a);if(0===h)return 0;var l=((t*e-i*n)*(o-s)-(t-n)*(o*a-r*s))/h;if(i=(t*e-i*n)*(r-a)/h,l>=t)return 0;if((r>a?r-a:a-r)>(o>s?o-s:s-o)){if(o=t=0,a>r?(t=r,o=a):(t=a,o=r),t>i||i>o)return 0}else if(s>o?(t=o,o=s):t=s,t>l||l>o)return 0;return h>0?1:-1}function Qi(t,i,n,e){t=t.Ya.l;for(var o=t.length,r=0;o>r;r++)if(t[r].na(i,n,e))return!0;return!1}function $i(t,i,n,e){I(this),this.pa=!1,void 0===n&&(n=!0),this.Pk=n,void 0===e&&(e=!0),this.Im=e,this.Pb=void 0!==t?t:0,this.Wb=void 0!==i?i:0,this.bn=new ci(_i),this.bu=this.bn.K,this.Ca=!0}function _i(t,i,n,e,o,r,s,a){I(this),this.pa=!1,void 0===t&&(t=sc),this.da=t,this.Wa=void 0!==i?i:0,this.fb=void 0!==n?n:0,t===uc?(void 0!==r&&(t=r%360,0>t&&(t+=360),this.xc=t),void 0!==e&&(this.uf=Math.max(e,0)),void 0!==o&&(this.vf=Math.max(o,0)),this.Pm=!!s,this.gm=!!a):(void 0!==e&&(this.xc=e),void 0!==o&&(this.Rd=o),void 0!==r&&(t===lc&&(r=Math.max(r,0)),this.uf=r),void 0!==s&&"number"==typeof s&&(t===lc&&(s=Math.max(s,0)),this.vf=s)),this.Lg=!1,this.Ca=!0,this.ci=null}function tn(t,i){if(null!==t.ci&&!1===i.Ca)return t.ci;var n=t.radiusX,e=t.radiusY;void 0===e&&(e=n);var o=t.xc,r=t.Rd,s=Qf.SB(0,0,e>n?n:e,t.be,t.be+t.gf,!1);if(n!==e){var a=O();a.reset(),e>n?a.scale(1,e/n):a.scale(n/e,1),Xi(s,a),z(a)}for(n=s.length,e=0;n>e;e++)a=s[e],a[0]+=o,a[1]+=r,a[2]+=o,a[3]+=r,a[4]+=o,a[5]+=r,a[6]+=o,a[7]+=r;return t.ci=s,t.ci}function nn(t,i,n,e){function o(t,i,n,e){return(i*n>t*e?-1:1)*Math.acos(r(t,i,n,e))}function r(t,i,n,e){return(t*n+i*e)/(Math.sqrt(t*t+i*i)*Math.sqrt(n*n+e*e))}if(null!==t.ci&&!1===i.Ca)return t.ci;i=t.uf;var s=t.vf,a=Math.PI/180*t.xc,h=t.Pm,l=t.gm,u=t.Wa,f=t.fb,c=Math.cos(a),p=Math.sin(a),d=c*(n-u)/2+p*(e-f)/2,a=-p*(n-u)/2+c*(e-f)/2,v=d*d/(i*i)+a*a/(s*s);return v>1&&(i*=Math.sqrt(v),s*=Math.sqrt(v)),v=(h===l?-1:1)*Math.sqrt((i*i*s*s-i*i*a*a-s*s*d*d)/(i*i*a*a+s*s*d*d)),isNaN(v)&&(v=0),h=v*i*a/s,v=v*-s*d/i,isNaN(h)&&(h=0),isNaN(v)&&(v=0),n=(n+u)/2+c*h-p*v,e=(e+f)/2+p*h+c*v,f=o(1,0,(d-h)/i,(a-v)/s),c=(d-h)/i,u=(a-v)/s,d=(-d-h)/i,h=(-a-v)/s,a=o(c,u,d,h),d=r(c,u,d,h),-1>=d?a=Math.PI:d>=1&&(a=0),!l&&a>0&&(a-=2*Math.PI),l&&0>a&&(a+=2*Math.PI),l=i>s?1:i/s,d=i>s?s/i:1,i=Qf.SB(0,0,i>s?i:s,f,f+a,!0),s=O(),s.reset(),s.translate(n,e),s.rotate(t.xc,0,0),s.scale(l,d),Xi(i,s),z(s),t.ci=i,t.ci}function en(){this.N=null,this.wx=new wi(0,0).freeze(),this.qw=new wi(0,0).freeze(),this.Ss=this.Mt=0,this.Bt="",this.pu=this.ht=!1,this.dt=this.Us=0,this.di=this.ot=this.xt=!1,this.Yo=null,this.ou=0,this.wf=this.mu=null}function on(){this.N=null,this.yb="",this.Vt=this.hu=null,this.Ts=!1}function rn(){this.Eo=cc,this.dl=this.Lt="",this.$p=this.aq=this.eq=this.fq=this.dq=this.N=this.gd=null}function sn(t){1<arguments.length&&r("Model constructor can only take one optional argument, the Array of node data."),I(this),this.kw=this.yb="",this.Fj=!1,this.Sw={},this.De=[],this.Vb=new bi(null,Object),this.$k="key",this.Ys=this.Ft=null,this.cw=this.dw=!1,this.bq="category",this.Gg=new bi(null,di),this.vi=null,this.Eh=!1,this.vx=null,this.V=new Sn,void 0!==t&&(this.pg=t)}function an(t,i,n){void 0===n&&(n=!1);var e=x(i);if(0>=e)return"[]";var o=new ri;o.add("[ "),n&&e>1&&o.add("\n");for(var r=0;e>r;r++){var s=w(i,r);void 0!==s&&(r>0&&(o.add(","),n&&o.add("\n")),o.add(t.Cs(s)))}return n&&e>1&&o.add("\n"),o.add(" ]"),o.toString()}function hn(t,i){return void 0===i||"__gohashid"===t||"_"===t[0]||"function"==typeof i?!0:!1}function ln(t){return isNaN(t)?"NaN":1/0===t?"9e9999":-1/0===t?"-9e9999":t}function un(t,i){var n=i;if(n instanceof wi){var e=n;i={"class":"go.Point",x:ln(e.x),y:ln(e.y)}}else if(n instanceof Ti){var o=n;i={"class":"go.Size",width:ln(o.width),height:ln(o.height)}}else if(n instanceof Si)i={"class":"go.Rect",x:ln(n.x),y:ln(n.y),width:ln(n.width),height:ln(n.height)};else if(n instanceof Di)i={"class":"go.Margin",top:ln(n.top),right:ln(n.right),bottom:ln(n.bottom),left:ln(n.left)};else if(n instanceof Fi)o=n,i=o.Kc()?{"class":"go.Spot",x:ln(o.x),y:ln(o.y),offsetX:ln(o.offsetX),offsetY:ln(o.offsetY)}:{"class":"go.Spot","enum":o.toString()};else if(n instanceof Nr){if(i={"class":"go.Brush",type:n.type.name},n.type===cp?i.color=n.color:(n.type===pp||n.type===dp)&&(i.start=n.start,i.end=n.end,n.type===dp&&(0!==n.vs&&(i.startRadius=ln(n.vs)),isNaN(n.ur)||(i.endRadius=ln(n.ur)))),null!==n.or){for(var r={},s=n.or.i;s.next();)r[s.key]=s.value;i.colorStops=r}}else if(n instanceof Yi)i={"class":"go.Geometry",type:n.type.name},0!==n.ia&&(i.startX=ln(n.ia)),0!==n.ja&&(i.startY=ln(n.ja)),0!==n.s&&(i.endX=ln(n.s)),0!==n.u&&(i.endY=ln(n.u)),n.o.A(wf)||(i.spot1=n.o),n.p.A(jf)||(i.spot2=n.p),n.type===ic&&(i.path=nc(n));else if(n instanceof Pr||n instanceof Ke||n instanceof He||n instanceof sn||n instanceof Dn||n instanceof Nn||n instanceof Lh||n instanceof Ah||n instanceof Sn||n instanceof Tn)return v("ERROR: trying to convert a GraphObject or Diagram or Model or Tool or Layout or UndoManager into JSON text: "+n.toString()),"{}";r="{",n=!0;for(e in i)if(o=Q(i,e),!hn(e,o))if(n?n=!1:r+=", ",r+='"'+e+'":',"points"===e&&o instanceof ci&&o.da===wi){for(s=o,o="[",s=s.i;s.next();){var a=s.value;1<o.length&&(o+=","),o+=t.Cs(a.x),o+=",",o+=t.Cs(a.y)}o+="]",r+=o}else r+=t.Cs(o);return r+"}"}function fn(t){return"number"==typeof t?t:"NaN"===t?0/0:"9e9999"===t?1/0:"-9e9999"===t?-1/0:parseFloat(t)}function cn(t,i,n,e,o,r,s,a,h){void 0===a&&(a=null),void 0===h&&(h=null);var l=new rn;l.U=t,l.Vc=n,l.bf=i,l.propertyName=e,l.object=o,l.oldValue=r,l.Pf=a,l.newValue=s,l.Nf=h,t.Hu(l)}function pn(t,i,n){"string"!=typeof t&&"function"!=typeof t&&f(t,"string or function",i,n)}function dn(t){return"number"==typeof t||"string"==typeof t}function vn(t,i,n){if(void 0!==i){var e=t.Gg.ha(i);null===e&&(e=new di(Object),t.Gg.add(i,e)),e.add(n)}}function yn(t,i,n){if(void 0!==i){var e=t.Gg.ha(i);e instanceof di&&(void 0===n||null===n?t.Gg.remove(i):(e.remove(n),0===e.count&&t.Gg.remove(i)))}}function gn(t,i){if(void 0===i)return null;var n=t.Gg.ha(i);return n instanceof di?n:null}function mn(t,i,n){if(t.Kx&&Array.isArray(i)){var e=[];for(n=0;n<i.length;n++){var o=mn(t,i[n],t.Jx);e.push(o)}return I(e),e}if(n&&y(i)){n=(n=i.constructor)?new n:{};for(e in i)if("__gohashid"!==e){var r,o=Q(i,e);r=o,r instanceof Pr||r instanceof Ke||r instanceof He||r instanceof Cs||r instanceof Le||r instanceof Dn||r instanceof Nn||r instanceof Lh||r instanceof en||r instanceof on?("_"!==e[0]&&v('Warning: found GraphObject or Diagram reference when copying model data on property "'+e+'" of data object: '+i.toString()+"  \nModel data should not have any references to a Diagram or any part of a diagram, such as: "+r.toString()),r=!0):r=r instanceof sn||r instanceof Sn||r instanceof Tn||r instanceof rn?!0:!1,r||(o=mn(t,o,!1)),$(n,e,o)}return I(n),n}return i}function xn(t,i){2<arguments.length&&r("GraphLinksModel constructor can only take two optional arguments, the Array of node data and the Array of link data."),sn.call(this),this.Ng=[],this.Yk=new di(Object),this.sj=this.Xs=null,this.ri="from",this.ui="to",this.Hp=this.Gp="",this.Dp="category",this.Og="",this.Ot="isGroup",this.Bi="group",this.ew=!1,void 0!==t&&(this.pg=t),void 0!==i&&(this.aj=i)}function bn(t,i){var n=t.ik(i),n=t.Ll(n);null===t.He(n)&&vn(t,n,i),n=t.lk(i),n=t.Ll(n),null===t.He(n)&&vn(t,n,i);var e=t.$i(i);if(g(e))for(var o=x(e),r=0;o>r;r++)n=w(e,r),null===t.He(n)&&vn(t,n,i)}function wn(t){1<arguments.length&&r("TreeModel constructor can only take one optional argument, the Array of node data."),sn.call(this),this.Ci="parent",this.fw=!1,this.iq="parentLinkCategory",void 0!==t&&(this.pg=t)}function kn(t,i,n){I(this),this.pa=!1,void 0===t?t="":h(t,"string",kn,"constructor:targetprop"),void 0===i?i=t:h(i,"string",kn,"constructor:sourceprop"),void 0===n?n=null:null!==n&&h(n,"function",kn,"constructor:conv"),this.aB=-1,this.wf=null,this.nu=t,this.lu=this.nx=0,this.WA=null,this.tx=!1,this.eu=i,this.bw=n,this.Rw=yc,this.Wv=null}function Mn(t,i,n){t=t.Sl;var e=null;return e=null===t||""===t?i:"."===t?n:".."===t?n.I:i.Cd(t)}function Tn(){this.XD=new ci(rn).freeze(),this.yb="",this.bA=!1}function Sn(){this.Tw=new di(sn),this.fe=!1,this.dE=new ci(Tn).freeze(),this.Yf=-1,this.qA=999,this.th=!1,this.ct=null,this.Tj=0,this.uz=!1,this.dg=new ci("string").freeze(),this.Um=new ci("number"),this.yw=!0,this.Mw=!1}function Cn(t,i,n){if(t.Ua)return!1;t.Ex&&1>t.de&&v("Ending transaction without having started a transaction: "+n);var e=1===t.de;e&&i&&t.isEnabled&&t.pc("CommittingTransaction",n,t.Ph);var o=0;if(0<t.de&&(t.Tj--,t.isEnabled)){var r=t.dg.count;r>0&&(""===n&&(n=t.dg.Y(0)),t.dg.wa(),t.dg.Dc(r-1),t.dg.freeze()),r=t.Um.count,r>0&&(o=t.Um.Y(r-1),t.Um.Dc(r-1))}if(r=t.Ph,e){if(i){if(t.Mw=!1,t.isEnabled&&null!==r){for(i=r,i.Lr=!0,i.name=n,e=t.history,e.wa(),o=e.count-1;o>t.Uh;o--)r=e.Y(o),null!==r&&r.clear(),e.Dc(o),t.Mw=!0;o=t.EC,0===o&&(o=1),o>0&&e.count>=o&&(r=e.Y(0),null!==r&&r.clear(),e.Dc(0),t.Yf--),e.add(i),t.Yf++,e.freeze(),r=i}t.pc("CommittedTransaction",n,r)}else{t.th=!0;try{t.isEnabled&&null!==r&&(r.Lr=!0,r.undo())}finally{t.pc("RolledBackTransaction",n,r),t.th=!1}null!==r&&r.clear()}return t.ct=null,!0}if(t.isEnabled&&!i&&null!==r){for(t=o,n=r.ig,i=n.count-1;i>=t;i--)e=n.Y(i),null!==e&&e.undo(),n.wa(),n.Dc(i);n.freeze()}return!1}function Nn(){0<arguments.length&&p(Nn),I(this),this.N=null,this.xz=!0,this.zz=this.Az=this.Lz=this.Bz=!1,this.Kj=this.Tv=null,this.sB=1.05,this.Jz=1,this.Nw=0/0,this.nA=null,this.tB=0/0}function Pn(t,i,n,e,o,r){if(void 0===r&&(r=null),!(t.contains(i)||null!==r&&!r(i)||i instanceof Ca))if(t.add(i),i instanceof Na){if(n&&i instanceof Th)for(var s=i.mc;s.next();)Pn(t,s.value,n,e,o,r);if(o)for(s=i.Hd;s.next();){var a=s.value;if(!t.contains(a)){var h=a.M,l=a.R;null!==h&&t.contains(h)&&null!==l&&t.contains(l)?Pn(t,a,n,e,o,r):null!==h&&null!==l||Pn(t,a,n,e,o,r)}}if(e>1)for(i=i.dC();i.next();)Pn(t,i.value,n,e-1,o,r)}else if(i instanceof Ra)for(s=i.Kf;s.next();)Pn(t,s.value,n,e,o,r)}function jn(t,i,n,e,o){if(null===i||o&&!i.canCopy())return null;if(e.contains(i))return e.ha(i);var r=null,s=i.data;if(null!==s&&null!==n){var a=n.U;i instanceof Ra?a instanceof xn&&(s=a.RB(s),y(s)&&(a.vu(s),r=n.Ef(s))):(s=a.copyNodeData(s),y(s)&&(a.rl(s),r=n.$g(s)))}else ws(i),r=i.copy(),null!==n&&null!==r&&n.add(r);if(!(r instanceof sa))return null;if(r.Ia=!1,r.kg=!1,e.add(i,r),i instanceof Na){for(a=i.Hd;a.next();){if(s=a.value,s.M===i){var h=e.ha(s);null!==h&&(h.M=r)}s.R===i&&(h=e.ha(s),null!==h&&(h.R=r))}if(i instanceof Th&&r instanceof Th)for(a=r,i=i.mc;i.next();)s=jn(t,i.value,n,e,o),s instanceof Ra||null===s||(s.Ba=a)}else if(i instanceof Ra)for(a=i.M,null!==a&&(a=e.ha(a),null!==a&&(r.M=a)),a=i.R,null!==a&&(a=e.ha(a),null!==a&&(r.R=a)),i=i.Kf;i.next();)a=jn(t,i.value,n,e,o),null!==a&&(a.vd=r);return r}function Ln(t){var i=E();for(t=t.i;t.next();){var n=t.value;n instanceof Ra||i.push(n)}t=new di(sa);for(var n=i.length,e=0;n>e;e++){for(var o=i[e],r=!0,s=0;n>s;s++)if(o.bh(i[s])){r=!1;break}r&&t.add(o)}return R(i),t}function Dn(){0<arguments.length&&p(Dn),I(this),this.N=null,this.yb="",this.fe=!0,this.$z=!1,this.oB=null,this.tu=-1}function An(t,i,n){var e=0;i.left?e=1===i.le?1:2===i.le?2:1:i.right&&1===i.le&&(e=3);var o="";if(null!==t){switch(e){case 1:o="ObjectSingleClicked";break;case 2:o="ObjectDoubleClicked";break;case 3:o="ObjectContextClicked"}0!==e&&n.ma(o,t)}else{switch(e){case 1:o="BackgroundSingleClicked";break;case 2:o="BackgroundDoubleClicked";break;case 3:o="BackgroundContextClicked"}0!==e&&n.ma(o)}if(null!==t)for(i.rc=!1;null!==t;){switch(n=null,e){case 1:n=t.click;break;case 2:n=t.tr?t.tr:t.click;break;case 3:n=t.Hx}if(null!==n&&(n(i,t),i.rc))break;t=t.I}else{switch(t=null,e){case 1:t=n.click;break;case 2:t=n.tr?n.tr:n.click;break;case 3:t=n.Hx}null!==t&&t(i)}}function Fn(){0<arguments.length&&p(Fn),Dn.call(this),this.name="Dragging",this.yz=this.dA=!0,this.lp=this.Rz=!1,this.hA=!0,this.Aw=new Ti(0/0,0/0).freeze(),this.Bw=wf,this.Cw=new wi(0/0,0/0).freeze(),this.Qz=!1,this.Oz=this.wz=this.Pz=this.Ez=this.Dh=null,this.Uo=this.fA=!1,this.fn=new wi(0/0,0/0),this.fu=new wi,this.iu=!1,this.du=this.cA=!0,this.tm=100,this.ji=[],this.cE=new di(sa).freeze()}function On(t,i){if(t.Sh){var n=t.g;null!==n&&n.tl&&(n.U instanceof xn&&1===i.count&&i.first()instanceof Ra?(t.qc=i.first(),t.qc.canRelinkFrom()&&t.qc.canRelinkTo()&&t.qc.nr(),t.Dh=n.Xa.SC,null===t.Dh&&(t.Dh=new ue,t.Dh.fc(n))):(t.qc=null,t.Dh=null))}}function zn(t){return new ne(void 0===t?Qf.fj:t.copy())}function Bn(t,i,n,e){if(!i.contains(n)&&(!e||n.canMove()||n.canCopy()))if(n instanceof Na){if(i.add(n,zn(n.location)),n instanceof Th)for(var o=n.mc;o.next();)Bn(t,i,o.value,e);for(o=n.Hd;o.next();){var r=o.value;if(!i.contains(r)){var s=r.M,a=r.R;null!==s&&i.contains(s)&&null!==a&&i.contains(a)&&Bn(t,i,r,e)}}if(t.dF)for(n=n.dC();n.next();)Bn(t,i,n.value,e)}else if(n instanceof Ra)for(r=n,i.add(r,zn()),o=r.Kf;o.next();)Bn(t,i,o.value,e);else n instanceof Ca||i.add(n,zn(n.location))}function qn(t){var i=t.g;if(null!==i){var n=i.Ma;i.Ma=!0,Zn(t,i.C,null),i.Ma=n}t.ji.length=0}function En(){var t=kc;Hn(t),Wn(t);var i=t.g;null!==i&&t.fn.w()&&(i.position=t.fn),null!==i&&dr(i)}function Rn(t,i){if(null!==i){t.iu=!0;for(var n=i.i;n.next();){var e=n.key;
e instanceof Ra&&(e.mo=!0)}}}function In(t,i){if(null!==i){for(var n=i.i;n.next();){var e=n.key;e instanceof Ra&&(e.mo=!1,e.nk&&Za(e)&&e.zb())}t.iu=!1}}function Gn(t,i){for(var n=1/0,e=1/0,o=-1/0,r=-1/0,s=t.i;s.next();){var a=s.value;if(a.$c()&&a.qa()){var h=a.location,a=h.x,h=h.y;isNaN(a)||isNaN(h)||(n>a&&(n=a),e>h&&(e=h),a>o&&(o=a),h>r&&(r=h))}}1/0===n?i.k(0,0,0,0):i.k(n,e,o-n,r-e)}function Vn(t,i){if(null===t.Qb){var n=t.g;if(!(null===n||i&&(n.Ta||n.Le))&&null!==t.Hb){var e=n.V;for(e.isEnabled&&e.wC?null!==e.Ph&&0<e.Ph.ig.count&&(n.V.co(),n.Ab("Drag")):Wn(t),n.Ma=!i,n.$l=!i,t.dj=n.Yb.S,e=t.OE?t.Hb.Zh():n.selection,e=n.wn(e,n,!0),n=e.i;n.next();)n.value.location=n.key.location;n=D(),Gn(e,n),F(n);for(var n=new bi(sa),o=t.Hb.i;o.next();){var r=o.key;r.$c()&&r.canCopy()&&(r=e.ha(r),null!==r&&(r.Ge(),n.add(r,zn(r.location))))}for(e=e.i;e.next();)o=e.value,o instanceof Ra&&o.canCopy()&&n.add(o,zn());t.Qb=n,On(t,n.Zh()),null!==t.qc&&(n=t.qc,e=n.Rl,n.uk(t.dj.x-(e.x+e.width/2),t.dj.y-(e.y+e.height/2)))}}}function Hn(t){var i=t.g;if(null!==i){if(null!==t.Qb&&(i.Ny(t.Qb.Zh(),!1),t.Qb=null,null!==t.Hb))for(var n=t.Hb.i;n.next();)n.key instanceof Ra&&(n.value.point=new wi(0,0));i.Ma=!1,i.$l=!1,t.dj=i.Yb.S}}function Un(t){if(null!==t.qc){if(t.Sh&&null!==t.Dh){var i=t.Dh;i.g.remove(i.Kd),i.g.remove(i.Ld)}t.qc=null,t.Dh=null}}function Kn(t,i,n){var e=t.g;if(null!==e){var o=t.dj,r=C();r.assign(e.C.S),t.moveParts(i,r.ws(o),n),P(r)}}function Yn(t,i,n){if(i=i.Ba,null!==i){if(t=Yn(t,i,n),null!==t)return t;if(t=n.ha(i),null!==t)return t}return null}function Wn(t){if(null!==t.Hb){for(var i=t.g,n=t.Hb.i;n.next();){var e=n.key;e.$c()&&(e.location=n.value.point)}for(n=t.Hb.i;n.next();)if(e=n.key,e instanceof Ra&&e.mo){var o=n.value.point;t.Hb.add(e,zn()),e.uk(-o.x,-o.y)}i.te()}}function Xn(t,i){if(null===i)return!0;var n=i.J;return null===n||n instanceof Ca||n.layer.bc||t.Hb&&t.Hb.contains(n)||t.Qb&&t.Qb.contains(n)?!0:!1}function Jn(t,i,n,e){var o=t.g;if(null!==o){t.Sh&&(null!==t.qc&&(t.qc.M=null,t.qc.R=null),_n(t,!1));var r=!1;!1===t.du&&(r=o.Ma,o.Ma=!0);var s=oo(o,i,null,function(i){return!Xn(t,i)}),a=o.C;a.Jd=s;var h=o.Ma;o.Ma=!0;var l=Zn(t,a,s);if(t.ca||null!==kc){if(null===s){var u=o.gG;null!==u&&(u(a),l=!0)}(t.ca||null!==kc)&&(t.doDragOver(i,s),(t.ca||null!==kc)&&(o.Ma=h,l&&o.te(),!1===t.du&&(o.Ma=r),(o.je||o.ke)&&(n||e)&&cr(o,a.xe)))}}}function Zn(t,i,n){var e=!1,o=t.ji.length,r=o>0?t.ji[0]:null;if(n===r)return!1;i.rc=!1;for(var s=0;o>s;s++){var a=t.ji[s],h=a.fG;if(null!==h&&(h(i,a,n),e=!0,i.rc))break}if(t.ji.length=0,!t.ca&&null===kc||null===n)return e;for(i.rc=!1;null!==n;)t.ji.push(n),n=Qn(n);for(o=t.ji.length,s=0;o>s&&(a=t.ji[s],h=a.eG,null===h||(h(i,a,r),e=!0,!i.rc));s++);return e}function Qn(t){var i=t.I;return null!==i?i:t instanceof sa&&!(t instanceof Th)&&(t=t.Ba,null!==t&&t.vF)?t:null}function $n(t,i,n){var e=t.Dh;if(null===e)return null;var o=t.g.Fl(i,e.PC,function(t){return e.findValidLinkablePort(t,n)});t=C();for(var r=1/0,s=null,o=o.i;o.next();){var a=o.value;if(null!==a.J){var h=a.Ra(Sf,t),h=i.Xi(h);r>h&&(s=a,r=h)}}return P(t),s}function _n(t,i){var n=t.qc;if(null!==n&&!(2>n.Z)){var e=t.g;if(null!==e&&!e.Ta&&(e=t.Dh,null!==e)){var o=null,r=null;null===n.M&&(o=$n(t,n.j(0),!1),null!==o&&(r=o.J));var s=null,a=null;null===n.R&&(s=$n(t,n.j(n.Z-1),!0),null!==s&&(a=s.J)),e.isValidLink(r,o,a,s)?i?(n.nm=n.j(0).copy(),n.rm=n.j(n.Z-1).copy(),n.mo=!1,n.M=r,null!==o&&(n.Gf=o.cd),n.R=a,null!==s&&(n.yg=s.cd)):fe(e,r,o,a,s):fe(e,null,null,null,null)}}}function te(t,i){var n=t.g;if(null!==n){t.Sh&&_n(t,!0),qn(t);var e=oo(n,i,null,function(i){return!Xn(t,i)}),o=n.C;if(o.Jd=e,null!==e){o.rc=!1;for(var r=e;null!==r;){var s=r.ty;if(null!==s&&(s(o,r),o.rc))break;r=Qn(r)}}else s=n.ty,null!==s&&s(o);if((t.ca||null!==kc)&&(t.doDropOnto(i,e),t.ca||null!==kc))for(e=n.selection.i;e.next();)o=e.value,o instanceof Na&&hr(n,o.Q)}}function ie(t,i,n){if(null===t.Qb){var e=t.g;if(null!==e&&!e.Ta&&!e.Le){e.Ma=!n,e.$l=!n,t.dj=e.C.S,e=e.wn(i,e,!0),n=D(),Gn(i,n);var o=n.x+n.width/2,r=n.y+n.height/2;F(n);var s=t.fu;n=new bi(sa);var a=C();for(i=i.i;i.next();){var h=i.value;if(h.$c()&&h.canCopy()){var l=h.location,h=e.ha(h);a.k(s.x-(o-l.x),s.y-(r-l.y)),h.location=a,h.Ge(),n.add(h,zn(a))}}for(P(a),e=e.i;e.next();)o=e.value,o instanceof Ra&&o.canCopy()&&n.add(o,zn());t.Qb=n,On(t,n.Zh()),null!==t.qc&&(n=t.qc,e=n.Rl,n.uk(t.dj.x-(e.x+e.width/2),t.dj.y-(e.y+e.height/2)))}}}function ne(t){this.point=t,this.rD=Qf.fj}function ee(t,i,n){this.dc=t,this.info=i,this.sF=n}function oe(){0<arguments.length&&p(oe),Dn.call(this),this.LA=100,this.lA=!1;var t=new Ra,i=new Ps;i.Jf=!0,i.stroke="blue",t.add(i),i=new Ps,i.no="Standard",i.fill="blue",i.stroke="blue",t.add(i),t.Ne="Tool",this.hB=t,t=new Na,i=new Ps,i.cd="",i.jb="Rectangle",i.fill=null,i.stroke="magenta",i.Na=2,i.ka=Qf.Ov,t.add(i),t.yk=!1,t.Ne="Tool",this.fB=t,this.gB=i,t=new Na,i=new Ps,i.cd="",i.jb="Rectangle",i.fill=null,i.stroke="magenta",i.Na=2,i.ka=Qf.Ov,t.add(i),t.yk=!1,t.Ne="Tool",this.iB=t,this.jB=i,this.HA=this.GA=this.CA=this.BA=this.DA=null,this.gA=!0,this.nE=new bi(Pr,"boolean"),this.MA=this.Hj=this.bB=null}function re(t,i,n,e){if(i===n)return!0;var o=i.M;return null!==o&&o.Ke&&(e.add(o),re(t,o.vd,n,e))?!0:(i=i.R,null!==i&&i.Ke&&(e.add(i),re(t,i.vd,n,e))?!0:!1)}function se(t,i,n,e,o){if(i===n)return!0;if(null===i||null===n)return!1;for(var r=i.Hd;r.next();){var s=r.value;if(s!==e&&(!o||s.cc)&&s.R===i&&(s=s.M,s!==i&&se(t,s,n,e,o)))return!0}return!1}function ae(t,i,n,e,o){if(n===e)return!0;if(null===n||null===e||i.contains(n))return!1;i.add(n);for(var r=n.Hd;r.next();){var s=r.value;if(s!==o&&s.R===n&&(s=s.M,s!==n&&ae(t,i,s,e,o)))return!0}return!1}function he(t,i,n,e,o){if(n===e)return!0;if(null===n||null===e||i.contains(n))return!1;i.add(n);for(var r=n.Hd;r.next();){var s=r.value;if(s!==o){var a=s.M,s=s.R,a=a===n?s:a;if(a!==n&&he(t,i,a,e,o))return!0}}return!1}function le(){0<arguments.length&&p(le),oe.call(this),this.name="Linking",this.Vv={},this.Uv=null,this.aa=Tc,this.lx=this.YA=null}function ue(){0<arguments.length&&p(ue),oe.call(this),this.name="Relinking";var t=new Ps;t.jb="Diamond",t.ka=Qf.Lv,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="pointer",t.ff=0,this.Vz=t,t=new Ps,t.jb="Diamond",t.ka=Qf.Lv,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="pointer",t.ff=-1,this.kB=t,this.Cb=null,this.EA=new Si}function fe(t,i,n,e,o){null!==i?(t.copyPortProperties(i,n,t.Kd,t.Tl,!1),t.g.add(t.Kd)):t.g.remove(t.Kd),null!==e?(t.copyPortProperties(e,o,t.Ld,t.Ul,!0),t.g.add(t.Ld)):t.g.remove(t.Ld)}function ce(){0<arguments.length&&p(ce),Dn.call(this),this.name="LinkReshaping";var t=new Ps;t.jb="Rectangle",t.ka=Qf.qo,t.fill="lightblue",t.stroke="dodgerblue",this.zj=t,t=new Ps,t.jb="Diamond",t.ka=Qf.qo,t.fill="lightblue",t.stroke="dodgerblue",this.rA=t,this.NA=3,this.Sv=this.Cb=null,this.FA=new wi,this.Yw=null}function pe(t,i,n,e,o,r){return r?Math.abs(i.y-n.y)<t.ug&&Math.abs(n.y-e.y)<t.ug&&Math.abs(e.y-o.y)<t.ug:Math.abs(i.x-n.x)<t.ug&&Math.abs(n.x-e.x)<t.ug&&Math.abs(e.x-o.x)<t.ug}function de(){0<arguments.length&&p(de),Dn.call(this),this.name="Resizing",this.zi=new Ti(1,1).freeze(),this.xi=new Ti(9999,9999).freeze(),this.ei=new Ti(0/0,0/0).freeze(),this.lp=!1,this.lb=null;var t=new Ps;t.Ti=Sf,t.jb="Rectangle",t.ka=Qf.qo,t.fill="lightblue",t.stroke="dodgerblue",t.Na=1,t.cursor="pointer",this.zj=t,this.Cb=null,this.Tt=new Ti,this.Xw=new wi,this.xw=new Ti(0,0),this.ww=new Ti(1/0,1/0),this.vw=new Ti(1,1),this.yA=!0}function ve(t,i,n){if(null!==i)if(i.alignment.lc()||""===i.cursor){if(i instanceof rs)for(i=i.elements;i.next();)ve(t,i.value,n)}else t:{if(t=i.alignment,t.Gd()&&(t=Sf),0>=t.x)n=0>=t.y?n+225:1<=t.y?n+135:n+180;else if(1<=t.x)0>=t.y?n+=315:1<=t.y&&(n+=45);else if(0>=t.y)n+=270;else{if(!(1<=t.y))break t;n+=90}0>n?n+=360:n>=360&&(n-=360),i.cursor=22.5>n?"e-resize":67.5>n?"se-resize":112.5>n?"s-resize":157.5>n?"sw-resize":202.5>n?"w-resize":247.5>n?"nw-resize":292.5>n?"n-resize":337.5>n?"ne-resize":"e-resize"}}function ye(){0<arguments.length&&p(ye),Dn.call(this),this.name="Rotating",this.VA=45,this.UA=2,this.lb=null;var t=new Ps;t.jb="Ellipse",t.ka=Qf.Lv,t.fill="lightblue",t.stroke="dodgerblue",t.Na=1,t.cursor="pointer",this.zj=t,this.Cb=null,this.St=0,this.PA=new wi}function ge(){0<arguments.length&&p(ge),Dn.call(this),this.name="ClickSelecting"}function me(){0<arguments.length&&p(me),Dn.call(this),this.name="Action",this.Zl=null}function xe(){0<arguments.length&&p(xe),Dn.call(this),this.name="ClickCreating",this.sj=null,this.eA=!0,this.Uz=new wi(0,0)}function be(t,i,n){this.text=t,this.LB=i,this.visible=n}function we(){0<arguments.length&&p(we),Dn.call(this),this.name="ContextMenu",this.km=this.Cz=null,this.vA=new wi,this.lw=this.sm=null,ke(this)}function ke(i){if(i.sm=new Ca,i.lB=function(){i.stopTool()},!1===Dc){var n=o("div"),e=o("div");n.style.cssText="top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",e.style.cssText="z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;-moz-opacity: 0.8;opacity:.80;filter: alpha(opacity=80);";var r=o("style");t.document.getElementsByTagName("head")[0].appendChild(r),r.sheet.insertRule(".defaultCXul { list-style: none; }",0),r.sheet.insertRule(".defaultCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),r.sheet.insertRule(".defaultCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),n.addEventListener("contextmenu",function(t){return t.preventDefault(),!1},!1),n.addEventListener("selectstart",function(t){return t.preventDefault(),!1},!1),e.addEventListener("contextmenu",function(t){return t.preventDefault(),!1},!1),t.document.body&&(t.document.body.appendChild(n),t.document.body.appendChild(e)),Fc=n,Ac=e,Dc=!0}}function Me(t,i,n){void 0===n&&(n=null),t.ca=!0,i&&t.standardMouseSelect(),t.standardMouseClick(),t.km=null,null===n&&(n=t.findObjectWithContextMenu()),null!==n?(i=n.contextMenu,null!==i?(t.km=n instanceof Pr?n:null,t.showContextMenu(i,t.km)):t.showDefaultContextMenu()):t.showDefaultContextMenu()}function Te(){0<arguments.length&&p(Te),Dn.call(this),this.name="DragSelecting",this.tm=175,this.jA=!1;var t=new sa;t.Ne="Tool",t.yk=!1;var i=new Ps;i.name="SHAPE",i.jb="Rectangle",i.fill=null,i.stroke="magenta",t.add(i),this.Gk=t}function Se(){0<arguments.length&&p(Se),Dn.call(this),this.name="Panning",this.Zw=new wi,this.di=!1;var i=this;this.$A=function(){t.document.removeEventListener("scroll",i.$A,!1),i.stopTool()}}function Ce(){0<arguments.length&&p(Ce),Dn.call(this),this.name="TextEditing",this.dB=null,this.Ew=0,this.Fz=this.sx=null,this.ZA=Ec,this.Rj=null,this.Ga=Rc,this.Nj=null,this.sA=1,this.SA=!0;var t=o("textarea");t.nz=!0,this.Kz=t,t.addEventListener("input",function(){var t=this.textEditingTool,i=t.dB;i.text=this.value,Or(i,t.Ew,1/0),this.rows=i.RF},!1),t.addEventListener("keydown",function(t){var i=t.which,n=this.textEditingTool;if(null!==n)if(13===i)n.acceptText(qc);else{if(9===i)return n.acceptText(Bc),t.preventDefault(),!1;27===i&&(n.doCancel(),null!==n.g&&n.g.focus())}},!1),t.addEventListener("focus",function(){var t=this.textEditingTool;t.Ga===Ic?t.Ga=Gc:t.Ga===Uc?t.Ga=Vc:t.Ga===Vc&&(t.Ga=Gc),"function"==typeof this.select&&t.Ry&&this.select()},!1),t.addEventListener("blur",function(){"function"==typeof this.focus&&this.focus();var t=this.textEditingTool;"function"==typeof this.select&&t.Ry&&this.select()},!1)}function Ne(t){if(null!==t.xg&&null!==t.Df){var i=t.xg,n=t.xg.text,e=t.Df.value,o="",o="function"==typeof e?e():e;if(!t.isValidText(t.xg,n,o))return t.Ga=Gc,null!==i.Qx&&i.Qx(t,n,o),null===t.Nj&&(t.Nj=t.Df.style.border,t.Df.style.border="3px solid red"),void("function"==typeof t.Df.focus&&t.Df.focus());t.Ab(t.name),t.Ga=Uc,n!==o&&(t.xg.text=o),t.Qe=t.name,i=t.g,null!==i&&i.ma("TextEdited",t.xg,n),t.ej(),t.stopTool(),null!==i&&i.focus()}null!==t.Nj&&(t.Df.style.border=t.Nj,t.Nj=null)}function Pe(){Dn.call(this),this.name="ToolManager",this.eE=new ci(Dn),this.fE=new ci(Dn),this.gE=new ci(Dn),this.Yz=this.Zz=1e3,this.Nz=new Ti(2,2).va(),this.bt=this.jw=null,this.wA=Kc,this.Wz=Wc}function je(t,i,n,e){h(i,"string",Pe,"replaceStandardTool:name"),a(e,ci,Pe,"replaceStandardTool:list"),null!==n&&(a(n,Dn,Pe,"replaceStandardTool:newtool"),n.g&&n.g!==t.g&&r("Cannot share tools between Diagrams: "+n.toString()),n.name=i,n.fc(t.g)),t.findTool(i)?t.replaceTool(i,n):null!==n&&e.add(n)}function Le(){this.$D=De,this.Mk=this.Nk=this.N=null,this.pz=this.Gc=this.Jm=this.pi=!1,this.fe=!0,this.at=this.$s=this.Dz=null,this.hw=0,this.sw=600,this.iE=new wi(0,0),this.rz=this.qz=this.pB=!1,this.Wm=new bi(Pr,Ve)}function De(t,i,n,e){return t/=e/2,1>t?n/2*t*t+i:-n/2*(--t*(t-2)-1)+i}function Ae(t){t.fe&&requestAnimationFrame(function(){!1===t.Gc||t.pi||(t.N.pl=1,Ze(t.N),t.Gc=!1,t.N.ma("AnimationStarting"),ze(t))})}function Fe(t,i,n,e,o){if(t.Gc&&(!(i instanceof sa)||i.sC)){var r=t.Wm;if(r.contains(i)){i=r.ha(i),t=i.start;var s=i.end;void 0===t[n]&&(t[n]=Oe(e)),s[n]=Oe(o)}else t=new si,s=new si,t[n]=Oe(e),s[n]=Oe(o),r.add(i,new Ve(t,s))}}function Oe(t){return t instanceof wi?t.copy():t instanceof Ti?t.copy():t}function ze(t){var i;void 0===i&&(i=new si);var n=t.N;if(null!==n)if(0===t.Wm.count)t.pi=!1,Je(n,!1),n.te();else{t.pi=!0;var e=i.WH||t.$D,o=i.CI||null,r=i.DI||null,s=i.duration||t.sw;i=t.iE;for(var a=t.Wm.i;a.next();){var h=a.value.start.position;h instanceof wi&&(h.w()||h.assign(i))}t.Dz=e,t.$s=o,t.at=r,t.hw=s;var l=t.ZD=t.Wm;Be(t),Ee(t,n,l,e,0,s,null!==t.Nk&&null!==t.Mk),vo(t.N),qe(t),requestAnimationFrame(function(i){var o=i||+new Date,r=o+s;!function a(i){if(!1!==t.pi){i=i||+new Date;var h=i>r?s:i-o;Be(t),Ee(t,n,l,e,h,s,null!==t.Nk&&null!==t.Mk),t.$s&&t.$s(),vo(n),qe(t),i>r?Re(t):requestAnimationFrame(a)}}(o)})}}function Be(t){if(!t.Jm){var i=t.N;t.pB=i.Ma,t.qz=i.Dv,t.rz=i.us,i.Ma=!0,i.Dv=!0,i.us=!0,t.Jm=!0}}function qe(t){var i=t.N;i.Ma=t.pB,i.Dv=t.qz,i.us=t.rz,t.Jm=!1}function Ee(t,i,n,e,o,r,s){for(n=n.i;n.next();){var a,h=n.key,l=n.value,u=l.start,l=l.end;for(a in l)void 0!==Zc[a]&&Zc[a](h,u[a],l[a],e,o,r)}s&&(s=t.Nk,t=t.Mk,a=t.y-s.y,t=e(o,s.x,t.x-s.x,r),e=e(o,s.y,a,r),o=i.gy,i.gy=!0,i.position=new wi(t,e),i.gy=o)}function Re(t){t.pi=!1,t.Nk=null,t.Mk=null,t.Wm=new bi(Pr,Ve),Be(t);for(var i=t.N.links;i.next();){var n=i.value;null!==n.an&&(n.points=n.an,n.an=null)}i=t.N,Je(i,!1),i.Rb(),i.te(),co(i),qe(t),t.at&&t.at(),t.at=null,t.$s=null,i.ma("AnimationFinished"),i.wd()}function Ie(t,i,n){var e=i.Q,o=n.Q,r=null;n instanceof Th&&(r=n.placeholder),null!==r?(n=r.Ra(wf),n.x+=r.padding.left,n.y+=r.padding.top,Fe(t,i,"position",n,i.position)):Fe(t,i,"position",new wi(o.x+o.width/2-e.width/2,o.y+o.height/2-e.height/2),i.position),Fe(t,i,"opacity",.01,i.opacity)}function Ge(t,i,n){t.Gc&&(null===t.Nk&&i.w()&&null===t.Mk&&(t.Nk=i.copy()),t.Mk=n.copy())}function Ve(t,i){this.start=t,this.end=i}function He(){0<arguments.length&&p(He),I(this),this.N=null,this.hb=new ci(sa),this.yb="",this.ic=1,this.Kw=!1,this.Pj=this.xx=this.pj=this.oj=this.nj=this.mj=this.kj=this.lj=this.jj=this.rj=this.ij=this.qj=this.hj=this.gj=!0,this.Fw=!1,this.Ut=[]}function Ue(t,i,n,e){if(t.visible&&0!==t.ic){1!==t.ic&&(i.globalAlpha=t.ic);var o=t.Ut;o.length=0;var r=n.scale;t=t.hb.l;for(var s=t.length,a=e.length,h=0;s>h;h++){var l=t[h];if(ba(l)||Ss(l)){if(l instanceof Ra){var u=l;if(u.Ib&&o.push(u),!1===u.yf)continue}var f,u=ca(l,l.Q);t:{f=u;for(var c=e,p=a,d=2/r,v=4/r,y=0;p>y;y++){var g=c[y];if(0!==g.width&&0!==g.height&&f.rC(g.x-d,g.y-d,g.width+v,g.height+v)){f=!0;break t}}f=!1}f&&(1<u.width*r||1<u.height*r?l.oe(i,n):va(l,i))}}i.globalAlpha=1}}function Ke(i){function n(){t.document.removeEventListener("DOMContentLoaded",n,!1),We(e)}1<arguments.length&&r("Diagram constructor can only take one optional argument, the DIV HTML element or its id."),I(this),ed=[],this.Ub=!0,this.hh=new Le,this.hh.fc(this),this.Uc=17;var e=this;null!==t.document.body?We(this):t.document.addEventListener("DOMContentLoaded",n,!1),this.kA=!1,this.Db=new ci(He),this.cb=this.eb=0,this.Pg=this.ob=this.Wf=this.Oa=null,this.$C(),this.gp=null,this.ZC(),this.xa=new wi(0/0,0/0).freeze(),this.Eb=1,this.ut=new wi(0/0,0/0).freeze(),this.vt=0/0,this.Kt=1e-4,this.It=100,this.ld=new Ai,this.uu=new wi(0/0,0/0).freeze(),this.lt=new Si(0/0,0/0,0/0,0/0).freeze(),this.ix=new Di(0,0,0,0).freeze(),this.jx=sp,this.bx=this.$w=null,this.Ek=Qc,this.im=bf,this.Dj=Qc,this.Em=bf,this.wt=this.tt=wf,this.nf=new di(Pr),this.ed=!0,this.ip=!1,this.Lk=new bi(Ra,Si),this.um=!0,this.WD=250,this.dm=-1,this.Rs=new Di(16,16,16,16).freeze(),this.et=this.Ve=!1,this.ym=!0,this.xj=new en,this.jc=new en,this.sb=new en,this.fi=null,this.ku=-1,this.ju=!1,this.ow=this.pw=null,rr(this),this.Vm=new di(Na),this.Sj=new di(Th),this.Rm=new di(Ra),this.hb=new di(sa),this.zt=!0,this.aA=!1,this.qu=tp,this.si=10,this.iw=this.mw=this.ux=null,this.gw="",this.So="auto",this.mh=this.Hh=this.xh=this.Nt=this.yh=this.zh=this.Ah=this.lh=this.qh=this.jh=null,this.Cm=!0,this.Uw=!1,this.KA={},this.lq=0,this.Ue=[null,null],this.Yv=null,this.At=this.$l=this.nw=this.kx=this.TA=this.Eh=!1,this.mA=!0,this.Hw=this.Qc=!1,this.gd=null;var o=this;this.tA=function(t){if(t.U===o.U&&o.ya){o.ya=!1;try{var i=t.Vc;""===t.bf&&i===cc&&Oo(o,t.object,t.propertyName)}finally{o.ya=!0}}},this.uA=function(t){Fo(o,t)},this.rB=!0,this.Yf=-2,this.nh=new bi(Object,sa),this.vj=new bi(Object,Ra),this.Tk=new bi(Object,Array),this.Xm=new bi("string",Array),this.JA=new ci(Ys),this.Fj=!1,this.hj=this.gj=this.Hs=this.fe=!0,this.Js=this.Is=!1,this.Os=this.Ms=this.pj=this.oj=this.nj=this.mj=this.kj=this.lj=this.jj=this.Ls=this.rj=this.ij=this.qj=!0,this.Qk=this.iA=!1,this.Ns=this.Ks=this.rt=this.qt=!0,this.au=this.$t=16,this.ex=this.Zt=!1,this.hx=this.gx=this.Hi=this.Gi=null,this.he=new Di(5).freeze(),this.cu=new di(sa).freeze(),this.Jt=999999999,this.st=new di(sa).freeze(),this.Ej=this.Ok=this.sh=!0,this.Bj=this.Aj=!1,this.fd=null,this.Ps=!0,this.Ce=!1,this.Hc=null,this.AA=1,this.zw=!1,this.XA=0,this.qB=new Si(0/0,0/0,0/0,0/0).freeze(),this.ft=new Si(0/0,0/0,0/0,0/0).freeze(),this.al=new di(kr),$e(this),this.Et=this.nt=this.Pt=this.Hz=this.Gz=this.Iz=this.ti=this.yj=this.Bh=null,Ye(this),this.wc=null,this.mt=!1,this.jm=null,this.Xa=new Pe,this.Xa.initializeStandardTools(),this.Ea=this.Nx=this.Xa,this.ib=new Nn,this.U=new xn,this.Eh=!0,this.ub=new Lh,this.Eh=!1,this.Sz=this.rw=null,this.Ee=1,this.pl=null,this.Cj=new gr,void 0!==i&&br(this,i),this.Vk=1,this.Wk=0,this.oA=new wi,this.nB=500,this.Qs=new wi,this.Mq=null,this.Ub=this.Lw=!1}function Ye(t){t.Bh=new bi("string",sa);var i=new Na,n=new qs;n.bind(new kn("text","",mc)),i.add(n),t.Iz=i,t.Bh.add("",i),i=new Na,n=new qs,n.stroke="brown",n.bind(new kn("text","",mc)),i.add(n),t.Bh.add("Comment",i),i=new Na,i.yk=!1,i.GB=!1,n=new Ps,n.jb="Ellipse",n.fill="black",n.stroke=null,n.ka=new Ti(3,3).va(),i.add(n),t.Bh.add("LinkLabel",i),t.yj=new bi("string",Th),i=new Th,i.Qy="GROUPPANEL",i.type=jp,n=new qs,n.font="bold 12pt sans-serif",n.bind(new kn("text","",mc)),i.add(n),n=new rs(Dp),n.name="GROUPPANEL";var e=new Ps;e.jb="Rectangle",e.fill="rgba(128,128,128,0.2)",e.stroke="black",n.add(e),e=new jh,e.padding=new Di(5,5,5,5).va(),n.add(e),i.add(n),t.Gz=i,t.yj.add("",i),t.ti=new bi("string",Ra),i=new Ra,n=new Ps,n.Jf=!0,i.add(n),n=new Ps,n.no="Standard",n.fill="black",n.stroke=null,n.Na=0,i.add(n),t.Hz=i,t.ti.add("",i),i=new Ra,n=new Ps,n.Jf=!0,n.stroke="brown",i.add(n),t.ti.add("Comment",i),i=new Ca,i.type=Dp,n=new Ps,n.fill=null,n.stroke="dodgerblue",n.Na=3,i.add(n),n=new jh,n.margin=new Di(1.5,1.5,1.5,1.5).va(),i.add(n),t.Pt=i,t.nt=i,i=new Ca,i.type=zp,n=new Ps,n.Jf=!0,n.fill=null,n.stroke="dodgerblue",n.Na=3,i.add(n),t.Et=i}function We(i){var n=o("p");n.style.width="100%",n.style.height="200px",n.style.boxSizing="content-box";var e=o("div");e.style.position="absolute",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.style.boxSizing="content-box",e.appendChild(n),t.document.body.appendChild(e);var r=n.offsetWidth;e.style.overflow="scroll",n=n.offsetWidth,r===n&&(n=e.clientWidth),t.document.body.removeChild(e),i.Uc=r-n}function Xe(i){var n=i.Oa;n.addEventListener("touchstart",i.BD,!1),n.addEventListener("touchmove",i.AD,!1),n.addEventListener("touchend",i.zD,!1),n.addEventListener("mousemove",i.Tn,!1),n.addEventListener("mousedown",i.Sn,!1),n.addEventListener("mouseup",i.Vn,!1),n.addEventListener("mousewheel",i.ng,!1),n.addEventListener("DOMMouseScroll",i.ng,!1),n.addEventListener("mouseout",i.Un,!1),n.addEventListener("keydown",i.NF,!1),n.addEventListener("keyup",i.OF,!1),n.addEventListener("selectstart",function(t){return t.preventDefault(),!1},!1),n.addEventListener("contextmenu",function(t){return t.preventDefault(),!1},!1),n.addEventListener("gesturechange",function(t){i.Xa.En===Xc&&t.preventDefault()},!1),n.addEventListener("pointerdown",i.mG,!1),n.addEventListener("pointermove",i.oG,!1),n.addEventListener("pointerleave",i.nG,!1),t.addEventListener("resize",i.LD,!1)}function Je(t,i){t.pl=null,i&&t.RC()}function Ze(t){if(null!==t.Oa){var i=t.ob;if(0!==i.clientWidth&&0!==i.clientHeight){var n=t.Bj?t.Uc:0,e=t.Aj?t.Uc:0,o=t.Ee;t.Ee=t.computePixelRatio(),t.Ee!==o&&(t.ip=!0,t.wd()),(i.clientWidth!==t.eb+n||i.clientHeight!==t.cb+e)&&(t.Ok=!0,t.ed=!0,i=t.ub,null!==i&&i.ev&&i.v(),t.Qc||t.wd())}}}function Qe(t,i,n){void 0===i&&(i=t.Wf),void 0===n&&(n=!0),n&&(i.Fs=""),i.Yl="",i.Xl=""}function $e(t){var i=new He;i.name="Background",t.fr(i),i=new He,i.name="",t.fr(i),i=new He,i.name="Foreground",t.fr(i),i=new He,i.name="Adornment",i.bc=!0,t.fr(i),i=new He,i.name="Tool",i.bc=!0,i.tC=!0,t.fr(i),i=new He,i.name="Grid",i.Fe=!1,i.Qf=!1,i.bc=!0,t.uE(i,t.wr("Background"))}function _e(t){t.wc=new rs(Bp),t.wc.name="GRID";var i=new Ps;i.jb="LineH",i.stroke="lightgray",i.Na=.5,i.interval=1,t.wc.add(i),i=new Ps,i.jb="LineH",i.stroke="gray",i.Na=.5,i.interval=5,t.wc.add(i),i=new Ps,i.jb="LineH",i.stroke="gray",i.Na=1,i.interval=10,t.wc.add(i),i=new Ps,i.jb="LineV",i.stroke="lightgray",i.Na=.5,i.interval=1,t.wc.add(i),i=new Ps,i.jb="LineV",i.stroke="gray",i.Na=.5,i.interval=5,t.wc.add(i),i=new Ps,i.jb="LineV",i.stroke="gray",i.Na=1,i.interval=10,t.wc.add(i),i=new sa,i.add(t.wc),i.Ne="Grid",i.jy=!1,i.sC=!1,i.Qf=!1,i.py="GRID",t.add(i),t.hb.remove(i),t.wc.visible=!1}function to(t){if(t.eC.w()){var i=t.eC.copy();return i.wu(t.padding),i}for(var n=!0,e=t.Db.l,o=e.length,r=0;o>r;r++){var s=e[r];if(s.visible&&(!s.bc||s.tC))for(var s=s.hb.l,a=s.length,h=0;a>h;h++){var l=s[h];l.jy&&l.qa()&&(l=l.Q,l.w()&&(n?(n=!1,i=l.copy()):i.fh(l)))}}return n&&(i=new Si(0,0,0,0)),i.wu(t.padding),i}function io(t,i){if((i||t.Ce)&&!t.Ub&&null!==t.Oa&&!t.qb.jg&&t.Xc.w()){t.Ub=!0;var n=t.Ek;i&&t.Dj!==Qc&&(n=t.Dj);var e=n!==Qc?no(t,n):t.scale,n=t.Va.copy(),o=t.eb/e,r=t.cb/e,s=null,a=t.qb;a.Gc&&(s=t.xa.copy()),t.position.wa();var h=t.im;i&&!h.Kc()&&t.Em.Kc()&&(h=t.Em),eo(t,t.xa,t.Xc,o,r,h,i),t.position.freeze(),null!==s&&Ge(a,s,t.xa),t.scale=e,t.Ub=!1,e=t.Va,e.Wd(n)||t.ds(n,e)}}function no(t,i){var n=t.ib.Mu;if(null===t.Oa)return n;t.sh&&tr(t,t.Bf());var e=t.Xc;if(!e.w())return n;var o=e.width,e=e.height,r=t.eb,s=t.cb,a=r/o,h=s/e;return i===$c?(o=Math.min(h,a),o>n&&(o=n),o<t.mg&&(o=t.mg),o>t.lg&&(o=t.lg),o):i===_c?(o=h>a?(s-t.Uc)/e:(r-t.Uc)/o,o>n&&(o=n),o<t.mg&&(o=t.mg),o>t.lg&&(o=t.lg),o):t.scale}function eo(t,i,n,e,o,r,s){var a=i.x,h=i.y;(s||t.hD===sp)&&(r.Kc()&&(e>n.width&&(a=n.x+(r.x*n.width+r.offsetX)-(r.x*e-r.offsetX)),o>n.height&&(h=n.y+(r.y*n.height+r.offsetY)-(r.y*o-r.offsetY))),r=t.gD,s=e-n.width,e<n.width+r.left+r.right?(a=Math.min(a+e/2,n.right+Math.max(s,r.right)-e/2),a=Math.max(a,n.left-Math.max(s,r.left)+e/2),a-=e/2):a>n.left?a=n.left:a<n.right-e&&(a=n.right-e),e=o-n.height,o<n.height+r.top+r.bottom?(h=Math.min(h+o/2,n.bottom+Math.max(e,r.bottom)-o/2),h=Math.max(h,n.top-Math.max(e,r.top)+o/2),h-=o/2):h>n.top?h=n.top:h<n.bottom-o&&(h=n.bottom-o)),i.x=isFinite(a)?a:-t.padding.left,i.y=isFinite(h)?h:-t.padding.top,null!==t.QC&&(t=t.QC(t,i),i.x=t.x,i.y=t.y)}function oo(t,i,n,e){for(void 0===n&&(n=null),void 0===e&&(e=null),go(t),t=t.Db.Kl;t.next();){var o=t.value;if(o.visible&&!o.bc&&(o=o.Dd(i,n,e),null!==o))return o}return null}function ro(i){-1!==i.ku&&(t.clearTimeout(i.ku),i.ku=-1)}function so(t,i){var e=i.copy();t.ku=n(function(){e.button=2,t.C=e,t.ju=!0,t.doMouseUp()},850)}function ao(t,i,n,e,o){e.g=i,o?fo(t,n,e):(e.xe=i.sb.xe,e.S=i.sb.S),t=0,n.ctrlKey&&(t+=1),n.altKey&&(t+=2),n.shiftKey&&(t+=4),n.metaKey&&(t+=8),e.Cc=t,e.button=n.button,tf&&0===n.button&&n.ctrlKey&&(e.button=2),e.ek=!1,e.up=!1,e.le=1,e.ck=0,e.rc=!1,e.bubbles=!1,e.event=n,e.timestamp=Date.now(),e.Pr=!1,e.Sf=n.target.N?n.target.N:null,e.Jd=null}function ho(t,i,n,e,o){e.g=t,fo(t,n,e),e.Cc=0,e.button=0,e.ek=!0,e.up=!1,e.le=1,e.ck=0,e.rc=!1,e.bubbles=!0,e.event=i,e.timestamp=Date.now(),e.Pr=o,e.Sf=i.target.N?i.target.N:null,e.Jd=null,t.xj=e.copy(),kc=null}function lo(i,n,e,o,r){var s=null;if(o.g=i,null!==e){var a,s=t.document.elementFromPoint(e.clientX,e.clientY);s&&s.N?a=s.N:(e=n.changedTouches[0],a=i),fo(i,e,o)}else null!==i.jc?(o.S=i.jc.S,o.xe=i.jc.xe,o.Sf=i.jc.Sf):null!==i.xj&&(o.S=i.xj.S,o.xe=i.xj.xe,o.Sf=i.xj.Sf);o.Cc=0,o.button=0,o.ek=!1,o.up=!1,o.le=1,o.ck=0,o.rc=!1,o.bubbles=!1,o.event=n,o.timestamp=Date.now(),o.Pr=r,o.Sf=a,o.Jd=null}function uo(t,i){return t.bubbles?!0:(void 0!==i.stopPropagation&&i.stopPropagation(),(void 0===i.touches||2>i.touches.length)&&i.preventDefault(),i.cancelBubble=!0,!1)}function fo(t,i,n){var e=t.Oa,o=t.eb,r=t.cb,s=0,a=0;null!==e&&(e=e.getBoundingClientRect(),s=i.clientX-o/e.width*e.left,a=i.clientY-r/e.height*e.top),n.xe.k(s,a),null!==t.ld?(i=N(s,a),t.ld.ah(i),n.S.assign(i),P(i)):n.S.k(s,a)}function co(t){for(t.Qc||go(t),t.sh&&tr(t,t.Bf()),t=t.al.i;t.next();)co(t.value)}function po(t,i){t.Ub||!t.Ok||No(t)||(i&&go(t),io(t,!1))}function vo(t){if(!t.Qc&&(t.Ve=!1,null!==t.ob)){t.Qc=!0;var i=t.hh,e=t.JA;if(!i.Jm&&0!==e.length){for(var o=e.l,r=o.length,s=0;r>s;s++){var a=o[s];Qr(a,!1),a.H()}e.clear()}o=e=!1,i.jg&&(o=!0,e=t.Ma,t.Ma=!0),i.Gc||Ze(t),po(t,!1),null!==t.wc&&(t.wc.visible&&!t.mt&&(Lo(t),t.mt=!0),!t.wc.visible&&t.mt&&(t.mt=!1)),go(t),0!==t.Lk.count&&(ko(t),go(t)),r=!1,(!t.Ce||t.Ps)&&(t.Ce?er(t,!t.et):(t.Ab("Initial Layout"),!1===i.isEnabled&&i.Yh(),er(t,!1)),r=!0),t.et=!1,go(t),t.kx||i.jg||co(t),r&&(t.Ce||(i=t.Db.l,t.Oe(i,i.length,t),yo(t),Lo(t)),t.ma("LayoutCompleted")),po(t,!0),go(t),r&&!t.Ce&&(t.Ce=!0,t.pd("Initial Layout"),t.Ma||t.V.clear(),n(function(){t.dh=!1},1)),t.oe(),o&&(t.Ma=e),t.Qc=!1}}function yo(t){if(t.Dj!==Qc)t.scale=no(t,t.Dj);else if(t.Ek!==Qc)t.scale=no(t,t.Ek);else{var i=t.AF;isFinite(i)&&i>0&&(t.scale=i)}if(t.sh&&tr(t,t.Bf()),i=t.zF,i.w())t.position=i;else{i=C(),i.qs(t.Xc,t.yF);var n=t.Va,n=A(0,0,n.width,n.height),e=C();e.qs(n,t.BF),t.position=new wi(i.x-e.x,i.y-e.y),F(n),P(e),P(i),io(t,!0)}t.ma("InitialLayoutCompleted")}function go(t){if((t.Qc||!t.qb.jg)&&0!==t.nf.count)for(var i=0;23>i;i++){var n=t.nf.i;if(null===n||0===t.nf.count)break;t.nf=new di(Pr);var e=t,o=t.nf;for(n.reset();n.next();){var r=n.value;!r.$c()||r instanceof Th||!r.qa()||(r.qk()?(Or(r,1/0,1/0),r.ac()):o.add(r))}for(n.reset();n.next();)r=n.value,r instanceof Th&&r.qa()&&mo(e,r);for(n.reset();n.next();)r=n.value,r instanceof Ra&&(e=r,e.qa()&&(e.qk()?(Or(e,1/0,1/0),e.ac(),e.Xr()):o.add(e)));for(n.reset();n.next();)e=n.value,e instanceof Ca&&e.qa()&&(e.qk()?(Or(e,1/0,1/0),e.ac()):o.add(e))}}function mo(t,i){for(var n=E(),e=E(),o=i.mc;o.next();){var r=o.value;r.qa()&&(r instanceof Th?(Zr(r)||$r(r)||ga(r))&&mo(t,r):r instanceof Ra?r.M==i||r.R==i?e.push(r):n.push(r):(Or(r,1/0,1/0),r.ac()))}for(var o=n.length,s=0;o>s;s++)r=n[s],Or(r,1/0,1/0),r.ac();for(R(n),Or(i,1/0,1/0),i.ac(),o=e.length,s=0;o>s;s++)r=e[s],Or(r,1/0,1/0),r.ac();R(e)}function xo(t,i,n,e,o){null===t.ob&&r("No div specified");var s=t.Oa;null===s&&r("No canvas specified");var a=t.Wf;if(t.ed){So(t);var h=t.Ee;Qu?(s.width=s.width,Qe(t,a)):(a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,t.eb*h,t.cb*h)),a.qC=!1,a.drawImage(t.rw.Yc,e>0?0:Math.round(-e),o>0?0:Math.round(-o)),o=t.xa;var s=t.Eb,l=Math.round(o.x*s)/s,u=Math.round(o.y*s)/s;for(e=t.ld,e.reset(),1!==s&&e.scale(s),0===o.x&&0===o.y||e.translate(-l,-u),a.save(),a.beginPath(),o=n.length,s=0;o>s;s++)l=n[s],0!==l.width&&0!==l.height&&a.rect(Math.floor(l.x),Math.floor(l.y),Math.ceil(l.width),Math.ceil(l.height));for(a.clip(),a.setTransform(1,0,0,1,0,0),a.scale(h,h),a.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),n=t.Db.l,o=n.length,t.Oe(n,o,t),wo(t,a),s=0;o>s;s++)Ue(n[s],a,t,i);a.restore(),Qe(t),t.Cj?xr(t.Cj,t)&&t.Rv():t.cp=function(){return new wi(0,0)},t.Ej=!1,t.ed=!1,t.RC()}}function bo(t,i,n,e,o,s,a,h,l,u){null===t.ob&&r("No div specified"),null===t.Oa&&r("No canvas specified"),void 0===a&&(a=null),void 0===h&&(h=null),void 0===l&&(l=!1),void 0===u&&(u=!1),So(t),Qe(t),To(t),t.Hw=!0;var f=new Si(s.x,s.y,e.width/o,e.height/o),c=f.copy();c.wu(n),Lo(t,c),go(t);var c=t.Db.l,p=c.length;t.Oe(c,p,t,f);var d=t.Ee;if(i.setTransform(1,0,0,1,0,0),i.scale(d,d),i.clearRect(0,0,e.width,e.height),null!==h&&""!==h&&(i.fillStyle=h,i.fillRect(0,0,e.width,e.height)),e=O(),e.reset(),e.translate(n.left,n.top),e.scale(o),0===s.x&&0===s.y||e.translate(-s.x,-s.y),i.setTransform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),z(e),wo(t,i),null!==a){var v=new di(Pr);for(n=a.i,n.reset();n.next();)o=n.value,!1===u&&"Grid"===o.layer.name||null===o||v.add(o);n=function(n){var e=l;if(n.visible&&0!==n.ic&&(void 0===e&&(e=!0),e||!n.bc)){1!==n.ic&&(i.globalAlpha=n.ic),e=n.Ut,e.length=0;var o=t.scale;n=n.hb.l;for(var r=n.length,s=0;r>s;s++){var a=n[s];if((ba(a)||Ss(a))&&v.contains(a)){if(a instanceof Ra){var h=a;if(h.Ib&&e.push(h),!1===h.yf)continue}h=a.Q,1<h.width*o||1<h.height*o?a.oe(i,t):va(a,i)}}i.globalAlpha=1}}}else if(!l&&u){var y=t.Gr.J,g=y.layer;n=function(n){n===g?y.oe(i,t):n.oe(i,t,f,l,u)}}else n=function(n){n.oe(i,t,f,l,u)};for(o=0;p>o;o++)n(c[o]);t.Hw=!1,t.Cj?xr(t.Cj,t)&&t.Rv():t.cp=function(){return new wi(0,0)},Qe(t),To(t),t.Oe(c,p,t),Lo(t)}function wo(t,i){var n=t.Pg;if(null!==n){if(void 0!==n.imageSmoothingEnabled){var e=!!n.imageSmoothingEnabled;i.qC=e,i.AI=e}n=n.defaultFont,void 0!==n&&null!==n&&(i.font=n,i.Fs=n)}}function ko(t){if(0===t.V.de){for(var i=t.Lk.i;i.next();){var n=i.key,e=i.value;n.Ed(),sh(n,e)}t.Lk.clear()}}function Mo(t){!1===t.Ok&&(t.Ok=!0)}function To(t){!1===t.Ej&&(t.Ej=!0)}function So(t){!1!==t.ip&&(t.ip=!1,Co(t,t.eb,t.cb))}function Co(t,i,n){var e=t.Oa,o=t.Ee,r=i*o,o=n*o;(e.width!==r||e.height!==o)&&(e.width=r,e.height=o,e.style.width=i+"px",e.style.height=n+"px",t.ed=!0,Qe(t))}function No(t){var i=t.Oa;if(null===i)return!0;var n=t.ob,e=t.eb,o=t.cb,r=t.qB.copy(),s=!1,a=t.Bj?t.Uc:0,h=t.Aj?t.Uc:0,l=n.clientWidth||e+a,n=n.clientHeight||o+h;if((l!==e+a||n!==o+h)&&(t.Bj=!1,t.Aj=!1,h=a=0,t.eb=l,t.cb=n,s=t.ip=!0),t.Ok=!1,t.qb.jg)return s?(t.qb.Yh(),t.WE(),!1):!0;var u=t.Va,f=t.Xc,l=f.width,n=f.height,c=u.width,p=u.height,d=f.x,v=u.x,y=f.right,a=u.right+a,g=f.y,m=u.y,f=f.bottom,h=u.bottom+h,x=u="1px",b=t.scale;t.Yx&&t.je&&(u=1,v>d+1&&(u=Math.max((v-d)*b+t.eb,u)),y>a+1&&(u=Math.max((y-a)*b+t.eb,u)),l>c+1&&(u=Math.max((l-c)*b+t.eb,u)),u+="px"),t.Zx&&t.ke&&(x=1,m>g+1&&(x=Math.max((m-g)*b+t.cb,x)),f>h+1&&(x=Math.max((f-h)*b+t.cb,x)),n>p+1&&(x=Math.max((n-p)*b+t.cb,x)),x+="px");var w="1px"!==u,k="1px"!==x;return((!w||!k)&&w||k)&&(k&&(a-=t.Uc),w&&(h-=t.Uc),t.Yx&&t.je&&(u=1,v>d+1&&(u=Math.max((v-d)*b+t.eb,u)),y>a+1&&(u=Math.max((y-a)*b+t.eb,u)),l>c+1&&(u=Math.max((l-c)*b+t.eb,u)),u+="px"),t.Zx&&t.ke&&(x=1,m>g+1&&(x=Math.max((m-g)*b+t.cb,x)),f>h+1&&(x=Math.max((f-h)*b+t.cb,x)),n>p+1&&(x=Math.max((n-p)*b+t.cb,x)),x+="px"),w="1px"!==u,k="1px"!==x),t.Zt&&w===t.Aj&&k===t.Bj?(e===t.eb&&o===t.cb||t.te(),!1):(w!==t.Aj&&(t.cb="1px"===u?t.cb+t.Uc:Math.max(t.cb-t.Uc,1),s=!0),t.Aj=w,t.gx.style.width=u,k!==t.Bj&&(t.eb="1px"===x?t.eb+t.Uc:Math.max(t.eb-t.Uc,1),s=!0,t.kA&&(k?(i.style.left=t.Uc+"px",t.position=new wi(t.xa.x+t.Uc/t.scale,t.xa.y)):(i.style.left="0px",t.position=new wi(t.xa.x-t.Uc/t.scale,t.xa.y)))),t.Bj=k,t.hx.style.height=x,t.Yx&&t.je&&(l>c+1?t.Gi.scrollLeft=(t.position.x-d)*b:v>d+1?t.Gi.scrollLeft=t.Gi.scrollWidth-t.Gi.clientWidth:y>a+1&&(t.Gi.scrollLeft=t.position.x*b)),t.Zx&&t.ke&&(n>p+1?t.Hi.scrollTop=(t.position.y-g)*b:m>g+1?t.Hi.scrollTop=t.Hi.scrollHeight-t.Hi.clientHeight:f>h+1&&(t.Hi.scrollTop=t.position.y*b)),s&&(t.ip=!0),l=t.eb,n=t.cb,t.Hi.style.height=n+"px",t.Hi.style.width=l+(t.Bj?t.Uc:0)+"px",t.Gi.style.width=l+"px",t.Gi.style.height=n+(t.Aj?t.Uc:0)+"px",t.ex=!1,e!==l||o!==n||t.qb.Gc?(u=t.Va,t.ds(r,u,s),!1):!0)
}function Po(t,i,n){if(a(i,He,Ke,"addLayer:layer"),null!==i.g&&i.g!==t&&r("Cannot share a Layer with another Diagram: "+i+" of "+i.g),null===n?null!==i.g&&r("Cannot add an existing Layer to this Diagram again: "+i):(a(n,He,Ke,"addLayer:existingLayer"),n.g!==t&&r("Existing Layer must be in this Diagram: "+n+" not in "+n.g),i===n&&r("Cannot move a Layer before or after itself: "+i)),i.g!==t){i=i.name,t=t.Db,n=t.count;for(var e=0;n>e;e++)t.Y(e).name===i&&r("Cannot add Layer with the name '"+i+"'; a Layer with the same name is already present in this Diagram.")}}function jo(t,i,n){if(t.Ub||t.Qc)t.Eb=n;else if(t.Ub=!0,null===t.Oa)t.Eb=n;else{var e=t.Va.copy(),o=t.eb,r=t.cb;e.width=t.eb/i,e.height=t.cb/i;var s=t.Wl.copy();if(isNaN(s.x))switch(t.Gx){case qf:s.x=0;break;case Ef:s.x=o-1;break;case Sf:s.x=o/2;break;case bf:case Zf:s.x=o/2}if(isNaN(s.y))switch(t.Gx){case Bf:s.y=0;break;case Rf:s.y=r-1;break;case Sf:s.y=r/2;break;case bf:case Zf:s.y=r/2}null!==t.fD&&(n=t.fD(t,n)),n<t.mg&&(n=t.mg),n>t.lg&&(n=t.lg),t.position=new wi(t.xa.x+s.x/i-s.x/n,t.xa.y+s.y/i-s.y/n),t.Ub=!1,t.Eb=n,t.ds(e,t.Va),io(t,!1),t.ba(),Mo(t)}}function Lo(t,i){void 0===i&&(i=null);var n=t.wc;if(null!==n&&n.visible){for(var e=j(),o=1,r=1,s=n.la.l,a=s.length,h=0;a>h;h++){var l=s[h],u=l.interval;2>u||(us(l.jb)?r=r*u/Qf.hC(r,u):o=o*u/Qf.hC(o,u))}if(s=n.Xu,e.k(r*s.width,o*s.height),s=r=h=a=0,null!==i)a=i.width,h=i.height,r=i.x,s=i.y;else{for(o=D(),r=t.Va,o.k(r.x,r.y,r.width,r.height),s=t.al.i;s.next();)r=s.value.Va,r.w()&&Li(o,r.x,r.y,r.width,r.height);if(a=o.width,h=o.height,r=o.x,s=o.y,!o.w())return}n.width=a+2*e.width,n.height=h+2*e.height,o=C(),Qf.xr(r,s,0,0,e.width,e.height,o),o.offset(-e.width,-e.height),L(e),n.J.location=o,P(o)}}function Do(t){if(t=t.selection,0<t.count){for(var i=t.ce(),n=i.length,e=0;n>e;e++)i[e].Ia=!1;t.wa(),t.clear(),t.freeze()}}function Ao(t){var i=t.dh;t.rB!==i&&(t.rB=i,t.ma("Modified"))}function Fo(t,i){if(i.U===t.U){var e=i.Vc,o=i.propertyName;if(e===fc&&"S"===o[0])if("StartingFirstTransaction"===o)e=t.Xa,e.ue.each(function(i){i.fc(t)}),e.cf.each(function(i){i.fc(t)}),e.df.each(function(i){i.fc(t)}),t.Qc||t.Ce||(t.et=!0,t.ym&&(t.Ve=!0),t.hh.vk());else if("StartingUndo"===o||"StartingRedo"===o){var r=t.qb;r.jg&&!t.Ma&&r.Yh(),t.ma("ChangingSelection")}else"StartedTransaction"===o&&(r=t.qb,r.jg&&!t.Ma&&r.Yh(),t.At&&r.vk());else if(t.ya){t.ya=!1;try{var s=i.bf;if(""!==s)if(e===cc){if("linkFromKey"===s){var a=i.object,h=t.Ef(a);if(null!==h){var l=i.newValue,u=t.pe(l);h.M=u}}else if("linkToKey"===s)a=i.object,h=t.Ef(a),null!==h&&(l=i.newValue,u=t.pe(l),h.R=u);else if("linkFromPortId"===s){if(a=i.object,h=t.Ef(a),null!==h){var f=i.newValue;"string"==typeof f&&(h.Gf=f)}}else if("linkToPortId"===s)a=i.object,h=t.Ef(a),null!==h&&(f=i.newValue,"string"==typeof f&&(h.yg=f));else if("nodeGroupKey"===s){var a=i.object,c=t.$g(a);if(null!==c){var p=i.newValue;if(void 0!==p){var d=t.pe(p);c.Ba=d instanceof Th?d:null}else c.Ba=null}}else if("linkLabelKeys"===s){if(a=i.object,h=t.Ef(a),null!==h){var v=i.oldValue,m=i.newValue;if(g(v))for(var b=x(v),k=0;b>k;k++){var M=w(v,k),u=t.pe(M);null!==u&&(u.vd=null)}if(g(m))for(b=x(m),k=0;b>k;k++)M=w(m,k),u=t.pe(M),null!==u&&(u.vd=h)}}else if("nodeParentKey"===s){var T=i.object,S=t.pe(i.newValue),C=t.Uu(T);if(null!==C){var N=C.Ar();null!==N?null===S?t.remove(N):t.Lc?N.M=S:N.R=S:Yo(t,S,C)}}else if("parentLinkCategory"===s){var T=i.object,C=t.Uu(T),P=i.newValue;null!==C&&"string"==typeof P&&(N=C.Ar(),null!==N&&(N.kc=P))}else if("nodeCategory"===s){var a=i.object,j=t.$g(a),P=i.newValue;null!==j&&"string"==typeof P&&(j.kc=P)}else if("linkCategory"===s){var a=i.object,L=t.Ef(a),P=i.newValue;null!==L&&"string"==typeof P&&(L.kc=P)}else if("nodeDataArray"===s){var D=i.oldValue;Zo(t,D);var A=i.newValue;Vo(t,A)}else"linkDataArray"===s&&(D=i.oldValue,Zo(t,D),A=i.newValue,Wo(t,A));t.dh=!0}else e===pc?(A=i.newValue,"nodeDataArray"===s&&y(A)?Ho(t,A):"linkDataArray"===s&&y(A)?Xo(t,A):"linkLabelKeys"===s&&dn(A)&&(h=t.Ef(i.object),u=t.pe(A),null!==h&&null!==u&&(u.vd=h)),t.dh=!0):e===dc?(D=i.oldValue,"nodeDataArray"===s&&y(D)?Qo(t,D):"linkDataArray"===s&&y(D)?Qo(t,D):"linkLabelKeys"===s&&dn(D)&&(u=t.pe(D),null!==u&&(u.vd=null)),t.dh=!0):e===fc&&("SourceChanged"===s?Oo(t,i.object,i.propertyName):"ModelDisplaced"===s&&t.wk());else if(e===cc){var F=i.propertyName,a=i.object;a===t.U?("nodeKeyProperty"===F||"nodeCategoryProperty"===F||"linkFromKeyProperty"===F||"linkToKeyProperty"===F||"linkFromPortIdProperty"===F||"linkToPortIdProperty"===F||"linkLabelKeysProperty"===F||"nodeIsGroupProperty"===F||"nodeGroupKeyProperty"===F||"nodeParentKeyProperty"===F||"linkCategoryProperty"===F)&&(t.V.Ua||t.wk()):Oo(t,a,F),t.dh=!0}else e===pc||e===dc?(zo(t,i),t.dh=!0):e===fc&&(("FinishedUndo"===o||"FinishedRedo"===o)&&(t.V.th=!0,t.ma("ChangedSelection"),go(t),t.V.th=!1),t.et=!0,t.te(),r=t.hh,r.Gc&&0===t.V.de&&Ae(r),"CommittedTransaction"===o&&t.V.Mw&&(t.Yf=Math.min(t.Yf,t.V.Uh-1)),Ao(t),t.Uw||"CommittedTransaction"!==o&&"FinishedUndo"!==o&&"FinishedRedo"!==o||(t.Uw=!0,n(function(){t.Ea.standardMouseOver(),t.Uw=!1},10)))}finally{t.ya=!0}}}}function Oo(t,i,n){if("string"==typeof n){var e=t.$g(i);if(null!==e)e.rb(n),t.U instanceof wn&&(e=t.Ef(i),null!==e&&e.rb(n));else{for(var e=null,o=t.Tk.i;o.next();){for(var r=o.value,s=0;s<r.length;s++){var a=r[s];null!==a.of&&(a=a.of.ha(i),null!==a&&(null===e&&(e=E()),e.push(a)))}if(null!==e)break}if(null!==e){for(o=0;o<e.length;o++)e[o].rb(n);R(e)}}i===t.U.Zr&&t.dH(n)}}function zo(t,i){var n=i.Vc===pc,e=n?i.Nf:i.Pf,o=n?i.newValue:i.oldValue,r=t.Tk.ha(i.object);if(Array.isArray(r))for(var s=0;s<r.length;s++){var a=r[s];if(n)Ms(a,o,e);else{var h=e;if(!(0>h)){var l=h;ks(a)&&l++,a.Yd(l),Ts(a,l,h)}}}}function Bo(t,i){var n=i.uh;if(g(n)){var e=t.Tk.ha(n);if(null===e)e=[],e.push(i),t.Tk.add(n,e);else{for(n=0;n<e.length;n++)if(e[n]===i)return;e.push(i)}}}function qo(t,i){var n=i.uh;if(g(n)){var e=t.Tk.ha(n);if(null!==e)for(var o=0;o<e.length;o++)if(e[o]===i){e.splice(o,1),0===e.length&&t.Tk.remove(n);break}}}function Eo(t,i){for(var n=i.la.l,e=n.length,o=0;e>o;o++){var r=n[o];r instanceof Ys&&Ro(t,r)}}function Ro(t,i){var n=i.element;if(null!==n){var n=n.src,e=t.Xm.ha(n);if(null===e)e=[],e.push(i),t.Xm.add(n,e);else{for(n=0;n<e.length;n++)if(e[n]===i)return;e.push(i)}}}function Io(t,i){for(var n=i.la.l,e=n.length,o=0;e>o;o++){var r=n[o];r instanceof Ys&&Go(t,r)}}function Go(t,i){var n=i.element;if(null!==n){var n=n.src,e=t.Xm.ha(n);if(null!==e)for(var o=0;o<e.length;o++)if(e[o]===i){e.splice(o,1),0===e.length&&t.Xm.remove(n);break}}}function Vo(t,i){if(null!==i){for(var n=t.U,e=x(i),o=0;e>o;o++){var r=w(i,o);n.me(r)?Ho(t,r,!1):n instanceof xn&&Xo(t,r)}if(n instanceof xn||n instanceof wn){for(o=0;e>o;o++)r=w(i,o),n.me(r)&&Ko(t,r);if(n instanceof xn)for(n=t.links;n.next();)Ia(n.value)}ir(t,!1)}}function Ho(t,i,n){if(void 0!==i&&null!==i&&!t.V.Ua&&!t.nh.contains(i)){void 0===n&&(n=!0);var e=t.Tx(i),o=Uo(t,i,e);null!==o&&(ws(o),o=o.copy(),null!==o&&(o.ih=e,t.$l&&(o.Gj="Tool"),t.add(o),o.data=i,n&&Ko(t,i)))}}function Uo(t,i,n){var e=!1,o=t.U;return o instanceof xn&&(e=o.iy(i)),e?(i=t.Xx.ha(n),null===i&&(i=t.Xx.ha(""),null===i&&(lp||(lp=!0,v('No Group template found for category "'+n+'"'),v("  Using default group template")),i=t.Gz))):(i=t.Ay.ha(n),null===i&&(i=t.Ay.ha(""),null===i&&(hp||(hp=!0,v('No Node template found for category "'+n+'"'),v("  Using default node template")),i=t.Iz))),i}function Ko(t,i){var n=t.U;if(n instanceof xn||n instanceof wn){var e=n.$a(i);if(void 0!==e){var o=gn(n,e),r=t.$g(i);if(null!==o&&null!==r){for(o=o.i;o.next();){var s=o.value;if(n instanceof xn){var a=n;if(a.me(s)){if(r instanceof Th&&a.Il(s)===e){var h=r,s=t.$g(s);null!==s&&(s.Ba=h)}}else{var l=t.Ef(s);if(null!==l&&r instanceof Na&&(h=r,a.ik(s)===e&&(l.M=h),a.lk(s)===e&&(l.R=h),s=a.$i(s),g(s)))for(a=0;a<x(s);a++)if(w(s,a)===e){h.vd=l;break}}}else n instanceof wn&&(l=n,l.me(s)&&r instanceof Na&&(h=r,l.Jl(s)===e&&(s=t.Uu(s),Yo(t,h,s))))}yn(n,e)}n instanceof xn?(n=n.Il(i),void 0!==n&&(n=t.pe(n),n instanceof Th&&(r.Ba=n))):n instanceof wn&&(n=n.Jl(i),void 0!==n&&r instanceof Na&&(h=r,r=t.pe(n),Yo(t,r,h)))}}}function Yo(t,i,n){if(null!==i&&null!==n){var e=t.Xa.CC,o=i,r=n;if(t.Lc){for(i=r.Hd;i.next();)if(i.value.R===r)return}else for(o=n,r=i,i=o.Hd;i.next();)if(i.value.M===o)return;null!==e&&se(e,o,r,null,!0)||(e=t.Wu(n.data),i=Jo(t,e),null!==i&&(ws(i),i=i.copy(),null!==i&&(i.ih=e,i.M=o,i.R=r,t.add(i),i.data=n.data)))}}function Wo(t,i){if(null!==i){for(var n=x(i),e=0;n>e;e++){var o=w(i,e);Xo(t,o)}ir(t,!1)}}function Xo(t,i){if(void 0!==i&&null!==i&&!t.V.Ua&&!t.vj.contains(i)){var n=t.Wu(i),e=Jo(t,n);if(null!==e&&(ws(e),e=e.copy(),null!==e)){e.ih=n;var n=t.U,o=n.mF(i);if(""!==o&&(e.Gf=o),o=n.ik(i),void 0!==o&&(o=t.pe(o),o instanceof Na&&(e.M=o)),o=n.pF(i),""!==o&&(e.yg=o),o=n.lk(i),void 0!==o&&(o=t.pe(o),o instanceof Na&&(e.R=o)),n=n.$i(i),g(n))for(var o=x(n),r=0;o>r;r++){var s=w(n,r),s=t.pe(s);null!==s&&(s.vd=e)}t.add(e),e.data=i}}}function Jo(t,i){var n=t.ny.ha(i);return null===n&&(n=t.ny.ha(""),null===n&&(up||(up=!0,v('No Link template found for category "'+i+'"'),v("  Using default link template")),n=t.Hz)),n}function Zo(t,i){for(var n=x(i),e=0;n>e;e++){var o=w(i,e);Qo(t,o)}}function Qo(t,i){if(void 0!==i&&null!==i){var n=t.$g(i);if(null!==n){n.Ia=!1,n.kg=!1;var e=n.layer;if(null!==e&&e.g===t){var o=t.U;if(o instanceof xn&&n instanceof Na){var r=n,s=o.$a(r.data);if(void 0!==s){for(var a=r.Hd;a.next();)vn(o,s,a.value.data);if(r.Ke&&(a=r.vd,null!==a&&vn(o,s,a.data)),r instanceof Th)for(r=r.mc;r.next();)a=r.value.data,o.me(a)&&vn(o,s,a)}}else if(o instanceof wn&&n instanceof Na){if(r=n,a=t.Ef(r.data),null!==a){a.Ia=!1,a.kg=!1;var h=a.layer;if(null!==h){var l=h.Yd(-1,a,!1);l>=0&&t.ec(dc,"parts",h,a,null,l,null),l=a.Rr,null!==l&&l(a,h,null)}}for(a=t.Lc,r=r.Hd;r.next();)h=r.value,h=(a?h.R:h.M).data,o.me(h)&&vn(o,s,h)}o=e.Yd(-1,n,!1),o>=0&&t.ec(dc,"parts",e,n,null,o,null),o=n.Rr,null!==o&&o(n,e,null)}}}}function $o(t,i,n){for(var e in n){var o=i[e],r=n[e];if(g(r)){if(!g(o)||o.length>=r.length)return!1;for(var s=0;s<o.length;s++){var a=o[s],h=r[s];if(void 0!==h&&!_o(t,a,h))return!1}}else if(!_o(t,o,r))return!1}return!0}function _o(t,i,n){if("function"==typeof n){if(!n(i))return!1}else if(n instanceof RegExp){if(!i||!n.test(i.toString()))return!1}else if(y(i)&&y(n)){if(!$o(t,i,n))return!1}else if(i!==n)return!1;return!0}function tr(t,i){t.sh=!1;var n=t.ft;n.A(i)||(i=i.O(),t.ft=i,io(t,!1),t.ma("DocumentBoundsChanged",null,n.copy()),Mo(t))}function ir(t,i){for(var n=t.Sj.i;n.next();)nr(t,n.value,i);null!==t.ub&&(i?t.ub.Me=!1:t.ub.v())}function nr(t,i,n){if(null!==i){for(var e=i.Tm.i;e.next();)nr(t,e.value,n);null!==i.ub&&(n?i.ub.Me=!1:i.ub.v())}}function er(t,i){if(!t.nw){var n=t.ub,e=t.At;t.At=!0;var o=t.ya;t.ya=!0;try{t.Ab("Layout");for(var r=t.Sj.i;r.next();)or(t,r.value,i);n.Me||i&&!n.yC||(n.doLayout(t),go(t),n.Me=!0)}finally{t.pd("Layout"),t.Ps=!n.Me,t.At=e,t.ya=o}}}function or(t,i,n){if(null!==i){for(var e=i.Tm.i;e.next();)or(t,e.value,n);e=i.ub,null===e||e.Me||n&&!e.yC||(i.Vw=!i.location.w(),e.doLayout(i),i.v(ad),e.Me=!0,mo(t,i))}}function rr(t){function i(t){var i=t.toLowerCase(),o=new ci("function");n.add(t,o),n.add(i,o),e.add(t,t),e.add(i,t)}var n=new bi("string",ci),e=new bi("string","string");i("AnimationStarting"),i("AnimationFinished"),i("BackgroundSingleClicked"),i("BackgroundDoubleClicked"),i("BackgroundContextClicked"),i("ClipboardChanged"),i("ClipboardPasted"),i("DocumentBoundsChanged"),i("ExternalObjectsDropped"),i("InitialLayoutCompleted"),i("LayoutCompleted"),i("LinkDrawn"),i("LinkRelinked"),i("LinkReshaped"),i("Modified"),i("ObjectSingleClicked"),i("ObjectDoubleClicked"),i("ObjectContextClicked"),i("PartCreated"),i("PartResized"),i("PartRotated"),i("SelectionMoved"),i("SelectionCopied"),i("SelectionDeleting"),i("SelectionDeleted"),i("SelectionGrouped"),i("SelectionUngrouped"),i("ChangingSelection"),i("ChangedSelection"),i("SubGraphCollapsed"),i("SubGraphExpanded"),i("TextEdited"),i("TreeCollapsed"),i("TreeExpanded"),i("ViewportBoundsChanged"),t.pw=n,t.ow=e}function sr(t,i){var n=t.ow.ha(i);return null!==n?n:t.ow.ha(i.toLowerCase())}function ar(t,i){var n=t.pw.ha(i);return null!==n?n:(n=t.pw.ha(i.toLowerCase()),null!==n?n:(r("Unknown DiagramEvent name: "+i),null))}function hr(t,i){var n=!1;if(t.Va.Wi(i)&&(n=!0),n=t.Rx(i,function(t){return t.J},function(t){return t instanceof Ra},!0,function(t){return t instanceof Ra},n),0!==n.count)for(n=n.i;n.next();){var e=n.value;e.nk&&e.zb()}}function lr(t,i,n,e){if(null===t.Hc&&(t.Hc=new fh),t.Hc.Kr||t.Hc.group!==n||t.Hc.Xy!==e){if(null===n){i=t.sh?to(t):t.Xc.copy(),i.$e(100,100),t.Hc.initialize(i),i=D();for(var o=t.Of;o.next();){var r=o.value,s=r.layer;null!==s&&s.visible&&!s.bc&&ur(t,r,e,i)}}else for(n.Q.w()||n.Ge(),i=n.Q.copy(),i.$e(20,20),t.Hc.initialize(i),i=D(),o=n.mc;o.next();)r=o.value,r instanceof Na&&ur(t,r,e,i);F(i),t.Hc.group=n,t.Hc.Xy=e,t.Hc.Kr=!1}else i&&vh(t.Hc);return t.Hc}function ur(t,i,n,e){if(i!==n)if(i.qa()&&i.canAvoid()){n=i.getAvoidableRect(e),e=t.Hc.un,i=t.Hc.sn;for(var o=n.x+n.width,r=n.y+n.height,s=n.x;o>s;s+=e){for(var a=n.y;r>a;a+=i)dh(t.Hc,s,a);dh(t.Hc,s,r)}for(a=n.y;r>a;a+=i)dh(t.Hc,o,a);dh(t.Hc,o,r)}else if(i instanceof Th)for(i=i.mc;i.next();)o=i.value,o instanceof Na&&ur(t,o,n,e)}function fr(t,i){null===t.Hc||t.Hc.Kr||null!==i&&!i.canAvoid()||(t.Hc.Kr=!0)}function cr(t,i){t.Qs.assign(i),vr(t,t.Qs).Wd(t.position)?dr(t):pr(t)}function pr(t){-1===t.dm&&(t.dm=e(function(){if(-1!==t.dm){dr(t);var i=t.C.event;if(null!==i){var n=vr(t,t.Qs);n.Wd(t.position)||(t.position=n,t.C.S=t.GD(t.Qs),t.Cv(i,null,i.target.N)||t.doMouseMove(),t.sh=!0,tr(t,t.Bf()),t.ed=!0,t.te(),pr(t))}}},t.WD))}function dr(i){-1!==i.dm&&(t.clearInterval(i.dm),i.dm=-1)}function vr(t,i){var n=t.position,e=t.FB;if(0>=e.top&&0>=e.left&&0>=e.right&&0>=e.bottom)return n;var o=t.Va,r=t.scale,o=A(0,0,o.width*r,o.height*r),s=N(0,0);if(i.x>=o.x&&i.x<o.x+e.left){var a=Math.max(t.ns,1),a=0|a;s.x-=a,i.x<o.x+e.left/2&&(s.x-=a),i.x<o.x+e.left/4&&(s.x-=4*a)}else i.x<=o.x+o.width&&i.x>o.x+o.width-e.right&&(a=Math.max(t.ns,1),a|=0,s.x+=a,i.x>o.x+o.width-e.right/2&&(s.x+=a),i.x>o.x+o.width-e.right/4&&(s.x+=4*a));return i.y>=o.y&&i.y<o.y+e.top?(a=Math.max(t.os,1),a|=0,s.y-=a,i.y<o.y+e.top/2&&(s.y-=a),i.y<o.y+e.top/4&&(s.y-=4*a)):i.y<=o.y+o.height&&i.y>o.y+o.height-e.bottom&&(a=Math.max(t.os,1),a|=0,s.y+=a,i.y>o.y+o.height-e.bottom/2&&(s.y+=a),i.y>o.y+o.height-e.bottom/4&&(s.y+=4*a)),s.Wd(Qf.fj)||(n=new wi(n.x+s.x/r,n.y+s.y/r)),F(o),P(s),n}function yr(t,i){if(t.qb.Yh(),t.te(),null===t.Oa)return null;"object"!=typeof i&&r("properties argument must be an Object.");var n=!1,e=i.size||null,o=i.scale||null;void 0!==i.scale&&isNaN(i.scale)&&(o="NaN");var s=i.maxSize;void 0===i.maxSize&&(n=!0,s="svg"===i.context?new Ti(1/0,1/0):new Ti(2e3,2e3));var a=i.position||null,h=i.parts||null,l=void 0===i.padding?1:i.padding,u=i.background||null,f=i.omitTemporary;void 0===f&&(f=!0);var c=i.document||document,p=i.elementFinished||null,d=i.showTemporary;void 0===d&&(d=!f),f=i.showGrid,void 0===f&&(f=d),null!==e&&isNaN(e.width)&&isNaN(e.height)&&(e=null),"number"==typeof l?l=new Di(l):l instanceof Di||(l=new Di(0)),l.left=Math.max(l.left,0),l.right=Math.max(l.right,0),l.top=Math.max(l.top,0),l.bottom=Math.max(l.bottom,0),t.um=!1,Qe(t);var y=new Ki(null,c),g=y.getContext("2d"),m=y;if(!(e||o||h||a))return y.width=t.eb+Math.ceil(l.left+l.right),y.height=t.cb+Math.ceil(l.top+l.bottom),"svg"===i.context&&(g=m=new qi(y.Yc,c,p),g instanceof qi&&(t.um=!0)),bo(t,g,l,new Ti(y.width,y.height),t.Eb,t.xa,h,u,d,f),t.um=!0,m;var x=t.ib.Mu,b=new wi(0,0),w=t.Xc.copy();if(w.VG(t.padding),d)for(var k=!0,k=t.Db.l,M=k.length,T=0;M>T;T++){var S=k[T];if(S.visible&&S.bc)for(var C=S.hb.l,S=C.length,N=0;S>N;N++){var P=C[N];P.jy&&P.qa()&&(P=P.Q,P.w()&&w.fh(P))}}if(b.x=w.x,b.y=w.y,null!==h){var j,k=!0,C=h.i;for(C.reset();C.next();)M=C.value,M instanceof sa&&(P=M,S=P.layer,null!==S&&!S.visible||null!==S&&!d&&S.bc||!P.qa()||(P=P.Q,P.w()&&(k?(k=!1,j=P.copy()):j.fh(P))));k&&(j=new Si(0,0,0,0)),w.width=j.width,w.height=j.height,b.x=j.x,b.y=j.y}return null!==a&&a.w()&&(b=a,o||(o=x)),k=C=0,null!==l&&(C=l.left+l.right,k=l.top+l.bottom),T=M=0,null!==e&&(M=e.width,T=e.height,isFinite(M)&&(M=Math.max(0,M-C)),isFinite(T)&&(T=Math.max(0,T-k))),j=a=0,null!==e&&null!==o?("NaN"===o&&(o=x),e.w()?(a=M,j=T):isNaN(T)?(a=M,j=w.height*o):(a=w.width*o,j=T)):null!==e?e.w()?(o=Math.min(M/w.width,T/w.height),a=M,j=T):isNaN(T)?(o=M/w.width,a=M,j=w.height*o):(o=T/w.height,a=w.width*o,j=T):null!==o?"NaN"===o&&s.w()?(o=Math.min((s.width-C)/w.width,(s.height-k)/w.height),o>x?(o=x,a=w.width,j=w.height):(a=s.width,j=s.height)):(a=w.width*o,j=w.height*o):(o=x,a=w.width,j=w.height),null!==l?(a+=C,j+=k):l=new Di(0),null!==s&&(e=s.width,s=s.height,"svg"!==i.context&&n&&!fp&&(a>e||j>s)&&(v("Diagram.makeImage(data): Diagram width or height is larger than the default max size. ("+Math.ceil(a)+"x"+Math.ceil(j)+" vs 2000x2000) Consider increasing the max size."),fp=!0),isNaN(e)&&(e=2e3),isNaN(s)&&(s=2e3),isFinite(e)&&(a=Math.min(a,e)),isFinite(s)&&(j=Math.min(j,s))),y.width=Math.ceil(a),y.height=Math.ceil(j),"svg"===i.context&&(g=m=new qi(y.Yc,c,p),g instanceof qi&&(t.um=!0)),bo(t,g,l,new Ti(Math.ceil(a),Math.ceil(j)),o,b,h,u,d,f),t.um=!0,m}function gr(){this.mE="63ad05bbe23a1786468a4c741b6d2",this.mE===this._tk?this.Hg=!0:mr(this,!1)}function mr(i,n){var e="p",o=t[ei("76a715b2f73f148a")][ei("72ba13b5")];if(ei("77bb5bb2f32603de")===t[ei("76a715b2f73f148a")][ei("6aba19a7ec351488")])try{if(i.Hg=!t[ei("4da118b7ec2108")]([ei("5bb806bfea351a904a84515e1b6d38b6")])([ei("49bc19a1e6")])([ei("59bd04a1e6380fa5539b")])([ei("7bb8069ae7")]===ei("7da71ca0ad381e90")),!1===i.Hg)return;if(i.Hg=!t[ei("4da118b7ec2108")]([ei("5bb806bfea351a904a84515e1b6d38b6")])([ei("49bc19a1e6")])([ei("59bd04a1e6380fa5539b6c7a197c31bb4cfd3e")])([ei("7bb8069ae7")]===ei("7da71ca0ad381e90")),!1===i.Hg)return}catch(r){}for(var s=o[ei("76ad18b4f73e")],a=o[ei("73a612b6fb191d")](ei("35e7"))+2;s>a;a++)e+=o[a];o=e[ei("73a612b6fb191d")](ei("7da71ca0ad381e90")),0>=o&&ei("7da71ca0ad381e90")!==ei("7da71ca0ad381e90")&&(o=e[ei("73a612b6fb191d")](ei("76a715b2ef3e149757"))),i.Hg=!(o>0&&o<e[ei("73a612b6fb191d")](ei("35"))),i.Hg&&(e=t.document[ei("79ba13b2f7333e8846865a7d00")]("div"),o=ei("02cncncn"),"."===o[0]&&(o=o[ei("69bd14a0f724128a44")](1)),e[ei("79a417a0f0181a8946")]=o,t.document[ei("78a712aa")]?(t.document[ei("78a712aa")][ei("7bb806b6ed32388c4a875b")](e),o=t[ei("7dad0290ec3b0b91578e5b40007031bf")](e)[ei("7dad0283f1390b81519f4645156528bf")](ei("78a704b7e62456904c9b12701b6532a8")),t.document[ei("78a712aa")][ei("68ad1bbcf533388c4a875b")](e),o&&-1!==o.indexOf(ei("@COLOR1"))&&-1!==o.indexOf(ei("@COLOR2"))&&(i.Hg=!1)):(i.Hg=null,n&&(i.Hg=!1)))}function xr(t,i){return i.Wf.setTransform(i.Ee,0,0,i.Ee,0,0),null===t.Hg&&mr(t,!0),0<t.Hg&&t!==t.kE?!0:!1}function br(n,e){void 0!==e&&null!==e||r("Diagram setup requires an argument DIV."),null!==n.ob&&r("Diagram has already completed setup."),"string"==typeof e?n.ob=t.document.getElementById(e):e instanceof HTMLDivElement?n.ob=e:r("No DIV or DIV id supplied: "+e),null===n.ob&&r("Invalid DIV id; could not get element with id: "+e),void 0!==n.ob.N&&r("Invalid div id; div already has a Diagram associated with it."),"static"===t.getComputedStyle(n.ob,null).position&&(n.ob.style.position="relative"),n.ob.style["-webkit-tap-highlight-color"]="rgba(255, 255, 255, 0)",n.ob.style["-ms-touch-action"]="none",n.ob.innerHTML="",n.ob.N=n;var s=new Ki(n);s.Yc.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.",void 0!==s.style&&(s.style.position="absolute",s.style.top="0px",s.style.left="0px","rtl"===t.getComputedStyle(n.ob,null).getPropertyValue("direction")&&(n.kA=!0),s.style.zIndex="2",s.style.dJ="none",s.style.webkitUserSelect="none",s.style.MozUserSelect="none"),n.eb=n.ob.clientWidth||1,n.cb=n.ob.clientHeight||1,n.Oa=s,n.Wf=s.getContext("2d");var a=n.Wf;n.Ee=n.computePixelRatio(),Co(n,n.eb,n.cb),n.Rv=a[ei("7eba17a4ca3b1a8346")][ei("78a118b7")](a,ff,4,4),n.ob.insertBefore(s.Yc,n.ob.firstChild),s=new Ki(null),s.width=1,s.height=1,n.rw=s,n.Sz=s.getContext("2d");var s=o("div"),a=o("div"),h=o("div"),l=o("div");s.style.position="absolute",s.style.overflow="auto",s.style.width=n.eb+"px",s.style.height=n.cb+"px",s.style.zIndex="1",a.style.position="absolute",a.style.overflow="auto",a.style.width=n.eb+"px",a.style.height=n.cb+"px",a.style.zIndex="1",h.style.position="absolute",h.style.width="1px",h.style.height="1px",l.style.position="absolute",l.style.width="1px",l.style.height="1px",n.ob.appendChild(s),n.ob.appendChild(a),s.appendChild(h),a.appendChild(l),s.onscroll=n.zA,s.onmousedown=n.Rt,s.ontouchstart=n.Rt,s.N=n,s.QA=!0,a.onscroll=n.zA,a.onmousedown=n.Rt,a.ontouchstart=n.Rt,a.N=n,a.RA=!0,n.Gi=s,n.Hi=a,n.gx=h,n.hx=l,n.RC=i(function(){n.pl=null,n.ba()},300),n.LD=i(function(){Ze(n)},250),n.preventDefault=function(t){return t.preventDefault(),!1},n.Tn=function(t){if(n.isEnabled){n.Qk=!0;var i=n.jc;Qu&&i.sk?(t.preventDefault(),t.simulated=!0,n.Mq=t):(n.jc=n.sb,n.sb=i,ao(n,n,t,i,!0),n.Cv(t,null,t.target.N)||(n.doMouseMove(),n.Ea.isBeyondDragSize()&&(ro(n),n.Vk=0)))}},n.Sn=function(t){if(n.isEnabled){n.Qk=!0;var i=n.jc;if(Qu&&null!==n.Mq)n.Mq=t,t.preventDefault();else if(Qu&&400>t.timeStamp-n.Wk)t.preventDefault();else if(n.jc=n.sb,n.sb=i,ao(n,n,t,i,!0),i.ek=!0,i.le=t.detail,n.xj=i.copy(),!0===i.Yo.simulated)t.preventDefault(),t.simulated=!0;else if(kc=null,n.doMouseDown(),1===t.button)return t.preventDefault(),!1}},n.Vn=function(t){if(n.isEnabled){n.Qk=!0;var i=n.jc;if(Qu){if(400>t.timeStamp-n.Wk)return void t.preventDefault();n.Wk=t.timeStamp}Qu&&null!==n.Mq?(n.Mq=null,t.preventDefault()):(n.jc=n.sb,n.sb=i,ao(n,n,t,i,!0),i.up=!0,i.le=t.detail,($u||_u)&&(t.timeStamp-n.Wk<n.nB&&!n.Ea.isBeyondDragSize()?n.Vk++:n.Vk=1,n.Wk=t.timeStamp,i.le=n.Vk),i.bubbles=t.bubbles,t.target.N&&(i.Sf=t.target.N),n.sD(t,null,new wi,i.Sf)||(n.doMouseUp(),dr(n),uo(i,t)))}},n.ng=function(t){if(n.isEnabled){var i=n.jc;n.jc=n.sb,n.sb=i,ao(n,n,t,i,!0),i.bubbles=!0,i.ck=void 0!==t.wheelDelta?t.wheelDelta:-40*t.detail,n.doMouseWheel(),uo(i,t)}},n.Un=function(){if(n.isEnabled){n.Qk=!1;var t=n.Ea;t.cancelWaitAfter(),t instanceof Pe&&t.hideToolTip()}},n.BD=function(t){if(n.isEnabled){n.ju=!1,n.Lw=!0;var i=n.jc;n.jc=n.sb,n.sb=i,ho(n,t,t.targetTouches[0],i,1<t.touches.length),n.doMouseDown(),2>t.touches.length&&so(n,i),uo(i,t)}},n.AD=function(t){if(n.isEnabled){var i=n.jc;n.jc=n.sb,n.sb=i;var e=null;0<t.changedTouches.length?e=t.changedTouches[0]:0<t.targetTouches.length&&(e=t.targetTouches[0]),lo(n,t,e,i,1<t.touches.length),(n.Ea.isBeyondDragSize()||1<t.touches.length)&&ro(n),n.Cv(e?e:t,null,i.Sf)||(n.doMouseMove(),uo(i,t))}},n.zD=function(i){if(n.isEnabled){if(ro(n),n.ju)return i.preventDefault(),!1;var e=n.jc;if(n.jc=n.sb,n.sb=e,1<i.touches.length)n.Cm&&(n.zw=!1);else{var o=null,r=null;if(0<i.changedTouches.length?r=i.changedTouches[0]:0<i.targetTouches.length&&(r=i.targetTouches[0]),e.g=n,e.le=1,null!==r){var s,a,o=t.document.elementFromPoint(r.clientX,r.clientY);o&&o.N?(a=r,s=o.N):(a=i.changedTouches[0],s=n),fo(s,a,e),s=r.screenX,a=r.screenY;var h=n.oA;i.timeStamp-n.Wk<n.nB&&!(25<Math.abs(h.x-s)||25<Math.abs(h.y-a))?n.Vk++:n.Vk=1,e.le=n.Vk,n.Wk=i.timeStamp,n.oA.k(s,a)}e.Cc=0,e.button=0,e.ek=!1,e.up=!0,e.ck=0,e.rc=!1,e.bubbles=!1,e.event=i,e.timestamp=Date.now(),e.Sf=null===o?i.target.N:o.N?o.N:null,e.Jd=null,n.sD(r?r:i,null,new wi,e.Sf)||(n.doMouseUp(),uo(e,i),n.Lw=!1)}}},n.mG=function(t){if("touch"===t.pointerType){var i=n.KA;void 0===i[t.pointerId]&&(n.lq++,i[t.pointerId]=t),n.Ue[0]=null,n.Ue[1]=null;for(var e in i)if(null===n.Ue[0])n.Ue[0]=i[e];else if(null===n.Ue[1]){n.Ue[1]=i[e];break}n.isEnabled&&(n.ju=!1,i=n.jc,n.jc=n.sb,n.sb=i,ho(n,t,t,i,1<n.lq),n.doMouseDown(),2>n.lq&&so(n,i),uo(i,t))}},n.oG=function(t){if("touch"===t.pointerType&&!(2>n.lq)){var i=n.Ue;i[0].pointerId===t.pointerId&&(i[0]=t),i[1].pointerId===t.pointerId&&(i[1]=t),n.isEnabled&&(i=n.jc,n.jc=n.sb,n.sb=i,lo(n,t,t,i,!0),ro(n),n.Cv(t,null,i.Sf)||(n.doMouseMove(),uo(i,t)))}},n.nG=function(t){if("touch"===t.pointerType){var i=n.KA;void 0!==i[t.pointerId]&&(n.lq--,delete i[t.pointerId],i=n.Ue,null!==i[0]&&i[0].pointerId===t.pointerId&&(i[0]=null),null!==i[1]&&i[1].pointerId===t.pointerId&&(i[1]=null))}},Qe(n),Xe(n)}function wr(t){1<arguments.length&&r("Palette constructor can only take one optional argument, the DIV HTML element or its id."),Ke.call(this,t),this.yu=!0,this.Xj=!1,this.Ta=!0,this.Gx=kf,this.ub=new Rh}function kr(t){1<arguments.length&&r("Overview constructor can only take one optional argument, the DIV HTML element or its id."),Ke.call(this,t),this.hh.isEnabled=!1,this.Ub=!0,this.Di=null,this.bE=this.it=!0,this.KG("drawShadows",!1);var i=new sa,n=new Ps;n.stroke="magenta",n.Na=2,n.fill="transparent",n.name="BOXSHAPE",i.yk=!0,i.Qy="BOXSHAPE",i.py="BOXSHAPE",i.cD="BOXSHAPE",i.cursor="move",i.add(n),this.Gk=i,n=new Ca,n.type=Lp,n.qe=Sf;var e=new jh;e.Jf=!0,n.add(e),e=new Ps,e.Ti=Sf,e.jb="Rectangle",e.ka=new Ti(64,64),e.cursor="se-resize",e.alignment=jf,n.add(e),i.aD=n,this.sl=this.Ui=!1,this.Fe=this.kr=!0,this.FB=0,this.px=o("canvas"),this.lE=this.px.getContext("2d"),this.Xa.Zc=new Sr,this.Xa.dD=new Cr;var s=this;this.click=function(){var t=s.Di;if(null!==t){var i=t.Va,n=s.C.S;t.position=new wi(n.x-i.width/2,n.y-i.height/2)}},this.NC=function(){Tr(s)},this.MC=function(){null!==s.Di&&(s.Rb(),s.ba())},this.qn=$c,this.Ub=!1}function Mr(t){t.Ub||t.Qc||!1!==t.Ve||(t.Ve=!0,requestAnimationFrame(function(){if(t.Ve&&!t.Qc&&(t.Ve=!1,null!==t.ob)){if(t.Qc=!0,go(t),t.Xc.w()||tr(t,t.Bf()),null===t.ob&&r("No div specified"),null===t.Oa&&r("No canvas specified"),t.ed){var i=t.Di;if(null!==i&&!i.qb.jg&&!i.qb.Gc){var i=t.Wf,n=t.px;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.Oa.width,t.Oa.height),i.drawImage(n,0,0),n=t.ld,n.reset(),1!==t.Eb&&n.scale(t.scale),0===t.position.x&&0===t.position.y||n.translate(-t.xa.x,-t.xa.y),i.setTransform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy);for(var n=t.Db.l,e=n.length,o=0;e>o;o++)n[o].oe(i,t);t.Ej=!1,t.ed=!1}}t.Qc=!1}}))}function Tr(t){var i=t.hg;if(null!==i){var n=t.Di;if(null!==n){t.ed=!0;var n=n.Va,e=i.ps,o=j();o.k(n.width,n.height),e.ka=o,L(o),t=2/t.scale,e instanceof Ps&&(e.Na=t),i.location=new wi(n.x-t/2,n.y-t/2)}}}function Sr(){Fn.call(this),this.Mj=null}function Cr(){de.call(this)}function Nr(t){1<arguments.length&&r("Brush constructor can take at most one optional argument, the Brush type."),I(this),this.pa=!1,void 0===t?(this.da=cp,this.hm="black"):"string"==typeof t?(this.da=cp,this.hm=t):(this.da=t,this.hm="black");var i=this.da;i===pp?(this.en=kf,this.wm=Pf):this.wm=this.en=i===dp?Sf:xf,this.gu=0,this.jt=0/0,this.Vf=this.Wt=this.Uf=null,this.$v=this.aw=0}function Pr(){I(this),this.T=30723,this.ic=1,this.eg=null,this.yb="",this.Nb=this.nb=null,this.xa=new wi(0/0,0/0).freeze(),this.Ae=new Ti(0/0,0/0).freeze(),this.zi=Qf.so,this.xi=Qf.UD,this.ld=new Ai,this.bm=new Ai,this.Ij=new Ai,this.Eb=this.gt=1,this.cm=0,this.Vg=mp,this.Kp=Qf.ro,this.nc=new Si(0/0,0/0,0/0,0/0).freeze(),this.Bb=new Si(0/0,0/0,0/0,0/0).freeze(),this.hc=new Si(0,0,0/0,0/0).freeze(),this.Vq=this.Zo=this.G=this.mq=this.nq=null,this.Wq=this.$o=1/0,this.yo=this.Md=bf,this.Aq=0,this.Fi=1,this.Fo=0,this.hi=1,this.Eq=-1/0,this.Dq=0,this.Fq=Qf.fj,this.Gq=gd,this.Mo="",this.gc=this.F=null,this.em=-1,this.cl=this.kh=this.Ik=this.dn=null}function jr(t){t.F=new os}function Lr(t,i,n,e,o,r,s){var a=.001,h=r.length;t.moveTo(i,n),e-=i,a=o-n,0===e&&(e=.001),o=a/e;for(var l=Math.sqrt(e*e+a*a),u=0,f=!0,c=0===s?!1:!0;l>=.1;){if(c){for(a=r[u++%h],a-=s;0>a;)a+=r[u++%h],f=!f;c=!1}else a=r[u++%h];a>l&&(a=l);var p=Math.sqrt(a*a/(1+o*o));0>e&&(p=-p),i+=p,n+=o*p,f?t.lineTo(i,n):t.moveTo(i,n),l-=a,f=!f}}function Dr(t,i,n){var e=t.Cn();if(null!==e)for(var o=t.gc.i;o.next();){var r=o.value,s=null;if(null!==r.Sl){if(s=Mn(r,e,t),null===s)continue;r.Hv(t,s,n,null)}else if(r.ys){var a=i.g;null!==a&&r.Hv(t,a.U.Zr,n,a)}else{var h=e.data;if(null===h)continue;a=i.g,null!==a&&a.Dv||r.Hv(t,h,n,a)}null!==s&&(a=e.Su(r.Ck),null!==a&&r.JD(a,s,n))}}function Ar(t,i,n,e,o){var r=t.nc,s=t.Ij;s.reset(),Gr(t,s,i,n,e,o),t.Ij=s,r.x=i,r.y=n,r.width=e,r.height=o,s.Nr()||s.FD(r)}function Fr(t,i,n,e){return!1===t.Qf?!1:(e.multiply(t.transform),n?t.If(i,e):t.zl(i,e))}function Or(t,i,n,e,o){if(!1!==Zr(t)){var s=t.margin,a=s.right+s.left,s=s.top+s.bottom;i=Math.max(i-a,0),n=Math.max(n-s,0),o=o||0,e=Math.max((e||0)-a,0),o=Math.max(o-s,0);var a=t.angle,s=0,s=t.ka,h=0;t.Na&&(h=t.Na),90===a||270===a?(i=isFinite(s.height)?s.height+h:i,n=isFinite(s.width)?s.width+h:n):(i=isFinite(s.width)?s.width+h:i,n=isFinite(s.height)?s.height+h:n);var s=e||0,h=o||0,l=t instanceof rs;switch(Hr(t,!0)){case gp:h=s=0,l&&(n=i=1/0);break;case wp:isFinite(i)&&i>e&&(s=i),isFinite(n)&&n>o&&(h=n);break;case bp:isFinite(i)&&i>e&&(s=i),h=0,l&&(n=1/0);break;case xp:isFinite(n)&&n>o&&(h=n),s=0,l&&(i=1/0)}var l=t.se,u=t.Lf;s>l.width&&u.width<l.width&&(s=l.width),h>l.height&&u.height<l.height&&(h=l.height),e=Math.max(s/t.scale,u.width),o=Math.max(h/t.scale,u.height),l.width<e&&(e=Math.min(u.width,e)),l.height<o&&(o=Math.min(u.height,o)),i=Math.min(l.width,i),n=Math.min(l.height,n),i=Math.max(e,i),n=Math.max(o,n),(90===a||270===a)&&(s=i,i=n,n=s,s=e,e=o,o=s),t.nc.wa(),t.Rn(i,n,e,o),t.nc.freeze(),t.nc.w()||r("Non-real measuredBounds has been set. Object "+t+", measuredBounds: "+t.nc.toString()),Qr(t,!1)}}function zr(t,i,n,e,o){var r=t.Q;if(r.x=i,r.y=n,r.width=e,r.height=o,!t.ka.w()){r=t.nc,n=t.margin,i=n.right+n.left;var s=n.top+n.bottom;switch(n=r.width+i,r=r.height+s,e+=i,o+=s,i=Hr(t,!0),n===e&&r===o&&(i=gp),i){case gp:(n>e||r>o)&&(Qr(t,!0),Or(t,n>e?e:n,r>o?o:r));break;case wp:Qr(t,!0),Or(t,e,o,0,0);break;case bp:Qr(t,!0),Or(t,e,r,0,0);break;case xp:Qr(t,!0),Or(t,n,o,0,0)}}}function Br(t,i,n){var e=t.Bb;0===e.width||0===e.height||isNaN(e.x)||isNaN(e.y)||(null!==t.Nb&&(Rr(t,i,t.Nb,!0,!0),t.Nb instanceof Nr&&t.Nb.type===dp?(i.beginPath(),i.rect(e.x,e.y,e.width,e.height),qr(i,t.Nb)):i.fillRect(e.x,e.y,e.width,e.height)),null!==t.nb&&(Rr(t,i,t.nb,!0,!1),t.nb instanceof Nr&&t.nb.type===dp?(i.beginPath(),i.rect(e.x,e.y,e.width,e.height),qr(i,t.nb)):i.fillRect(e.x,e.y,e.width,e.height)),t.Yi(i,n))}function qr(t,i){if(i instanceof Nr&&i.type===dp&&!(t instanceof qi)){var n=i.aw,e=i.$v;e>n?(t.scale(n/e,1),t.translate((e-n)/2,0)):n>e&&(t.scale(1,e/n),t.translate(0,(n-e)/2)),t.Gs?t.clip():t.fill(),e>n?(t.translate(-(e-n)/2,0),t.scale(1/(n/e),1)):n>e&&(t.translate(0,-(n-e)/2),t.scale(1,1/(e/n)))}else t.Gs?t.clip():t.fill()}function Er(t){t.Gs||t.stroke()}function Rr(t,i,n,e,o){if(null!==n){var r=1,s=1;if("string"==typeof n)e?i.Xl!==n&&(i.fillStyle=n,i.Xl=n):i.Yl!==n&&(i.strokeStyle=n,i.Yl=n);else if(n.type===cp)n=n.color,e?i.Xl!==n&&(i.fillStyle=n,i.Xl=n):i.Yl!==n&&(i.strokeStyle=n,i.Yl=n);else{var a,s=t.sa,r=s.width,s=s.height;if(o)var h=t.Q,r=h.width,s=h.height;var l=i instanceof CanvasRenderingContext2D;if(l&&(n.Vf&&n.type===vp||n.aw===r&&n.$v===s))a=n.Vf;else{var u=h=0,c=0,p=0,d=0,v=0,v=d=0;if(o&&(h=t.Q,r=h.width,s=h.height,d=h.x,v=h.y),h=n.start.x*r+n.start.offsetX,u=n.start.y*s+n.start.offsetY,c=n.end.x*r+n.end.offsetX,p=n.end.y*s+n.end.offsetY,h+=d,c+=d,u+=v,p+=v,n.type===pp?a=i.createLinearGradient(h,u,c,p):n.type===dp?(v=isNaN(n.ur)?Math.max(r,s)/2:n.ur,isNaN(n.vs)?(d=0,v=Math.max(r,s)/2):d=n.vs,a=i.createRadialGradient(h,u,d,c,p,v)):n.type===vp?a=i.createPattern(n.pattern,"repeat"):f(n.type,"Brush type"),n.type!==vp&&(t=n.or,null!==t))for(t=t.i;t.next();)a.addColorStop(t.key,t.value);l&&(n.Vf=a,n.aw=r,n.$v=s)}e?i.Xl!==a&&(i.fillStyle=a,i.Xl=a):i.Yl!==a&&(i.strokeStyle=a,i.Yl=a)}}}function Ir(t){if(0!==(2048&t.T)==!0){var i=t.ld;if(i.reset(),!t.Bb.w()||!t.nc.w())return void Xr(t,!1);i.translate(t.Bb.x,t.Bb.y),i.translate(-t.oa.x,-t.oa.y);var n=t.sa;Gr(t,i,n.x,n.y,n.width,n.height),Xr(t,!1),Jr(t,!0)}0!==(4096&t.T)==!0&&(i=t.I,null===i?(t.bm.set(t.ld),t.gt=t.scale,Jr(t,!1)):null!==i.We&&(n=t.bm,n.reset(),i.jf()?n.multiply(i.bm):null!==i.I&&n.multiply(i.I.bm),n.multiply(t.ld),t.gt=t.scale*i.gt,Jr(t,!1)))
}function Gr(t,i,n,e,o,r){if(1!==t.scale&&i.scale(t.scale),0!==t.angle){var s=Sf;t.qe&&t.qe.Kc()&&(s=t.qe);var a=C();if(t instanceof sa&&t.Jb!==t)for(n=t.Jb,e=n.sa,a.ss(e.x,e.y,e.width,e.height,s),n.Ij.Ka(a),a.offset(-n.oa.x,-n.oa.y),s=n.I;null!==s&&s!==t;)s.Ij.Ka(a),a.offset(-s.oa.x,-s.oa.y),s=s.I;else a.ss(n,e,o,r,s);i.rotate(t.angle,a.x,a.y),P(a)}}function Vr(t){if(!1===$r(t)){if(null!==t.I)t.I.H();else{var i=t.g;null!==i&&(i.nf.add(t),t instanceof Na&&t.Je(),i.wd())}_r(t,!0)}}function Hr(t,i){var n=t.stretch,e=t.I;return null!==e&&e.da===Ap?Ur(t,e.Bc(t.Tb),e.Ac(t.column),i):null!==e&&e.da===Dp&&e.Ze()===t?Kr(t,wp,i):n===mp?null!==e?e.da===Lp&&e.Ze()===t?Kr(t,wp,i):(n=e.Wc,n===mp?Kr(t,gp,i):Kr(t,n,i)):Kr(t,gp,i):Kr(t,n,i)}function Ur(t,i,n,e){var o=t.stretch;if(o!==mp)return Kr(t,o,e);var r=o=null;switch(i.stretch){case xp:r=!0;break;case wp:r=!0}switch(n.stretch){case bp:o=!0;break;case wp:o=!0}return i=t.I.Wc,null===o&&(o=i===bp||i===wp),null===r&&(r=i===xp||i===wp),!0===o&&!0===r?Kr(t,wp,e):!0===o?Kr(t,bp,e):!0===r?Kr(t,xp,e):Kr(t,gp,e)}function Kr(t,i,n){if(n)return i;if(i===gp)return gp;if(n=t.ka,n.w())return gp;if(t=t.angle,!isNaN(n.width))if(90!==t&&270!==t){if(i===bp)return gp;if(i===wp)return xp}else{if(i===xp)return gp;if(i===wp)return bp}if(!isNaN(n.height))if(90!==t&&270!==t){if(i===xp)return gp;if(i===wp)return bp}else{if(i===bp)return gp;if(i===wp)return xp}return i}function Yr(t,i){t.T=i?512|t.T:-513&t.T}function Wr(t,i){t.T=i?1024|t.T:-1025&t.T}function Xr(t,i){t.T=i?2048|t.T:-2049&t.T}function Jr(t,i){t.T=i?4096|t.T:-4097&t.T}function Zr(t){return 0!==(8192&t.T)}function Qr(t,i){t.T=i?8192|t.T:-8193&t.T}function $r(t){return 0!==(16384&t.T)}function _r(t,i){t.T=i?16384|t.T:-16385&t.T}function ts(t){var i={value:null};return is(t,i),i.value}function is(t,i){var n=t.I;return null===n||!is(n,i)&&t.visible?(i.value=t,!1):!0}function ns(t){var i=t.J;i instanceof Na&&(t=t.g,null===t||t.V.Ua||i.Je())}function es(t,i){if("string"==typeof i)if(t instanceof qs)t.text=i;else if(t instanceof Ps)t.jb=i;else if(t instanceof Ys)t.source=i;else if(t instanceof rs){var n=cf(rs,i);null!==n?t.type=n:r("Unknown Panel type as an argument to GraphObject.make: "+i)}else t instanceof Nr?(n=cf(Nr,i),null!==n?t.type=n:r("Unknown Brush type as an argument to GraphObject.make: "+i)):t instanceof Yi?(n=cf(Yi,i),null!==n?t.type=n:r("Unknown Geometry type as an argument to GraphObject.make: "+i)):t instanceof _i?(n=cf(_i,i),null!==n?t.type=n:r("Unknown PathSegment type as an argument to GraphObject.make: "+i)):r("Unable to use a string as an argument to GraphObject.make: "+i);else if(i instanceof Pr)n=i,t instanceof rs||r("A GraphObject can only be added to a Panel, not to: "+t),t.add(n);else if(i instanceof Cs){var e,o=i,n=t;o.td&&n.Bc?e=n.Bc(o.index):!o.td&&n.Ac?e=n.Ac(o.index):r("A RowColumnDefinition can only be added to a Panel, not to: "+t),e.qr(o)}else if(i instanceof oi)t instanceof Ra&&i.Td===Ra?2===(2&i.value)?t.uv=i:i===md||i===xd||i===bd?t.ne=i:i===wd||i===kd||i===Md?t.hr=i:i!==vd&&i!==gd&&r("Unknown Link enum value for a Link property: "+i):t instanceof rs&&i.Td===rs?t.type=i:t instanceof qs&&i.Td===qs?t.MD=i:t instanceof Ps&&(i===gp||i===kp||i===Mp||i===mp)?t.iC=i:t instanceof Ys&&(i===gp||i===kp||i===Mp)?t.xF=i:t instanceof Pr&&i.Td===Ra?(n=t,0===i.name.indexOf("Orient")?n.xv=i:r("Unknown Link enum value for GraphObject.segmentOrientation property: "+i)):t instanceof Pr&&i.Td===Pr?t.stretch=i:t instanceof Cs&&i.Td===Cs?t.ts=i:t instanceof Ke&&i.Td===Ke?t.qn=i:t instanceof Nr&&i.Td===Nr?t.type=i:t instanceof Yi&&i.Td===Yi?t.type=i:t instanceof _i&&i.Td===_i?t.type=i:t instanceof kn&&i.Td===kn?t.mode=i:t instanceof rn&&i.Td===rn?t.Vc=i:t instanceof tu&&i.Td===tu?0===i.name.indexOf("Alignment")?t.alignment=i:0===i.name.indexOf("Arrangement")?t.Xe=i:0===i.name.indexOf("Compaction")?t.compaction=i:0===i.name.indexOf("Path")?t.path=i:0===i.name.indexOf("Sorting")?t.sorting=i:0===i.name.indexOf("Style")?t.bH=i:r("Unknown enum value: "+i):t instanceof gl&&i.Td===gl?0===i.name.indexOf("Aggressive")?t.wE=i:0===i.name.indexOf("Cycle")?t.SE=i:0===i.name.indexOf("Init")?t.CF=i:0===i.name.indexOf("Layer")?t.PF=i:r("Unknown enum value: "+i):t instanceof Rh&&i.Td===Rh?i===Id||i===Gd||i===Ed||i===Rd?t.sorting=i:i===Bd||i===qd?t.Xe=i:i===zd||i===Od?t.alignment=i:r("Unknown enum value: "+i):t instanceof Ih&&i.Td===Ih?i===$d||i===_d||i===Zd||i===Qd||i===tv?t.sorting=i:i===Xd||i===Jd||i===Yd||i===Wd?t.direction=i:i===Ud||i===Hd||i===Vd||i===Kd?t.Xe=i:i===nv||i===iv?t.lv=i:r("Unknown enum value: "+i):r("No property to set for this enum value: "+i);else if(i instanceof kn)t instanceof Pr?t.bind(i):t instanceof Cs?t.bind(i):r("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+t);else if(i instanceof $i)t instanceof Yi?t.Ya.add(i):r("A PathFigure can only be added to a Geometry, not to: "+t);else if(i instanceof _i)t instanceof $i?t.ra.add(i):r("A PathSegment can only be added to a PathFigure, not to: "+t);else if(i instanceof Lh)t instanceof Ke?t.ub=i:t instanceof Th?t.ub=i:r("A Layout can only be assigned to a Diagram or a Group, not to: "+t);else if(Array.isArray(i))for(n=0;n<i.length;n++)es(t,i[n]);else if("object"==typeof i&&null!==i)if(t instanceof Nr){e=new si;for(n in i)o=parseFloat(n),isNaN(o)?e[n]=i[n]:t.addColorStop(o,i[n]);_(t,e)}else if(t instanceof Cs){void 0!==i.row?(e=i.row,(void 0===e||null===e||1/0===e||isNaN(e)||0>e)&&r("Must specify non-negative integer row for RowColumnDefinition "+i),t.td=!0,t.index=e):void 0!==i.column&&(e=i.column,(void 0===e||null===e||1/0===e||isNaN(e)||0>e)&&r("Must specify non-negative integer column for RowColumnDefinition "+i),t.td=!1,t.index=e),e=new si;for(n in i)"row"!==n&&"column"!==n&&(e[n]=i[n]);_(t,e)}else _(t,i);else r('Unknown initializer "'+i+'" for object being constructed by GraphObject.make: '+t)}function os(){this.mh=this.Hh=this.to=this.wo=this.vo=this.uo=this.xh=this.Up=this.Tp=this.yh=this.zh=this.Ah=this.Wp=this.Vp=this.lh=this.qh=this.jh=null}function rs(t){Pr.call(this),void 0===t?0===arguments.length?this.da=Pp:r("invalid argument to Panel constructor: undefined"):(u(t,rs,rs,"type"),this.da=t),this.la=new ci(Pr),this.he=Qf.ro,this.$f=!1,this.da===Bp&&(this.$f=!0),this.jp=!1,this.Po=bf,this.ph=mp,this.da===Ap&&ss(this),this.mn=kp,this.dp=new Ti(10,10).freeze(),this.ep=Qf.fj,this.Fk=this.Cg=null,this.yp=0/0,this.pf=this.uh=null,this.Lm="category",this.of=null,this.Jh=new Si(0/0,0/0,0/0,0/0),this.ol=null,this.Jg=!1,this.Bq=null}function ss(t){t.ii=Qf.ro,t.Fg=1,t.oh=null,t.Kk=null,t.Eg=1,t.Dg=null,t.Jk=null,t.Tc=[],t.Mc=[],t.hl=Gp,t.Hk=Gp,t.Ih=0,t.vh=0}function as(t,i,n,e){for(var o=e.length,r=t.Q,s=n?t.Bc(0):t.Ac(0),a=0;o>a;a++){var h=e[a];if(void 0!==h&&h!==s&&0!==h.Aa){var l=h.io;isNaN(l)&&(l=n?t.Fg:t.Eg);var u=h.ho;if(null===u&&(u=n?t.oh:t.Dg),0!==l&&null!==u){Rr(t,i,u,!1,!1);var u=!1,f=!0,c=h.IG;null!==c&&(u=!0,void 0!==i.setLineDash?(i.setLineDash(c),i.lineDashOffset=t.yc):void 0!==i.webkitLineDash?(i.webkitLineDash=c,i.webkitLineDashOffset=t.yc):void 0!==i.mozDash?(i.mozDash=c,i.mozDashOffset=t.yc):f=!1),i.beginPath();var p=h.position+l;n?p>r.height&&(l-=p-r.height):p>r.width&&(l-=p-r.width),h=h.position+l/2,i.lineWidth=l,p=t.padding,n?(h+=p.top,l=p.left,p=r.width-p.right,u&&!f?Lr(i,l,h,p,h,c,0):(i.moveTo(l,h),i.lineTo(p,h))):(h+=p.left,l=p.top,p=r.height-p.bottom,u&&!f?Lr(i,h,l,h,p,c,0):(i.moveTo(h,l),i.lineTo(h,p))),i.stroke(),u&&(void 0!==i.setLineDash?(i.setLineDash(lf),i.lineDashOffset=0):void 0!==i.webkitLineDash?(i.webkitLineDash=lf,i.webkitLineDashOffset=0):void 0!==i.mozDash&&(i.mozDash=null,i.mozDashOffset=0))}}}}function hs(t,i,n,e,o){for(var r=e.length,s=t.Q,a=0;r>a;a++){var h=e[a];if(void 0!==h&&null!==h.background&&h.Mx!==o&&0!==h.Aa){var l=n?s.height:s.width;if(!(h.position>l)){var u=h.Cf(),f=h.io;isNaN(f)&&(f=n?t.Fg:t.Eg);var c=h.ho;null===c&&(c=n?t.oh:t.Dg),null===c&&(f=0),u-=f,f=h.position+f,u+=h.Aa,f+u>l&&(u=l-f),0>=u||(l=t.padding,Rr(t,i,h.background,!0,!1),n?i.fillRect(l.left,f+l.top,s.width-(l.left+l.right),u):i.fillRect(f+l.left,l.top,u,s.height-(l.top+l.bottom)))}}}}function ls(t,i,n){if(0!==t%i)return!1;i=n.length;for(var e=0;i>e;e++)if(0===t%n[e])return!1;return!0}function us(t){return"LineV"===t||"BarV"===t}function fs(t,i,n){if(n(t,i),i instanceof rs){i=i.la.l;for(var e=i.length,o=0;e>o;o++)fs(t,i[o],n)}}function cs(t,i){ps(t,t,i)}function ps(t,i,n){n(i),i=i.la.l;for(var e=i.length,o=0;e>o;o++){var r=i[o];r instanceof rs&&ps(t,r,n)}}function ds(t,i,n){if(n(i),i instanceof rs){i=i.la.l;for(var e=i.length,o=0;e>o;o++)ds(t,i[o],n)}}function vs(t,i,n){if(n(i))return i;if(i instanceof rs){i=i.la.l;for(var e=i.length,o=0;e>o;o++){var r=vs(t,i[o],n);if(null!==r)return r}}return null}function ys(t){t=t.la.l;for(var i=t.length,n=0,e=0;i>e;e++){var o=t[e];if(o instanceof rs)n=Math.max(n,ys(o));else if(o instanceof Ps){t:{if(!o.fg)switch(o.xm){case"None":case"Square":case"Ellipse":case"Circle":case"LineH":case"LineV":case"FramedRectangle":case"RoundedRectangle":case"Line1":case"Line2":case"Border":case"Cube1":case"Cube2":case"Junction":case"Cylinder1":case"Cylinder2":case"Cylinder3":case"Cylinder4":case"PlusLine":case"XLine":case"ThinCross":case"ThickCross":o=0;break t}o=o.gg/2*o.nl*o.Th()}n=Math.max(n,o)}}return n}function gs(t,i,n,e){for(var o=t.la.l,r=o.length;r--;){var s=o[r];if(s.visible){var a=s.Q,h=t.sa;a.x>h.width||a.y>h.height||0>a.x+a.width||0>a.y+a.height||(s instanceof rs&&gs(s,i,n,e),null!==i&&(s=i(s)),null===s||null!==n&&!n(s)||e.add(s))}}}function ms(t){var i=t.o;return(void 0===i||i===bf)&&(i=null),null===i&&t instanceof Ps&&(t=t.za,null!==t&&(i=t.o)),null===i&&(i=wf),i}function xs(t){var i=t.p;return(void 0===i||i===bf)&&(i=null),null===i&&t instanceof Ps&&(t=t.za,null!==t&&(i=t.p)),null===i&&(i=jf),i}function bs(t){return t=t.Fk,null!==t&&t.pa}function ws(t){var i=t.Fk;if(null===i)null!==t.data&&r("Template cannot have .data be non-null: "+t),t.Fk=i=new ci(kn);else if(i.pa)return;var n=new ci(Pr);fs(t,t,function(t,e){var o=e.gc;if(null!==o)for(Wr(e,!1),o=o.i;o.next();){var r=o.value;if(r.mode===gc&&Wr(e,!0),null!==r.Sl){var s=Mn(r,t,e);null!==s&&(n.add(s),null===s.dn&&(s.dn=new ci(kn)),s.dn.add(r))}i.add(r)}if(e instanceof rs&&e.type===Ap){if(0<e.Tc.length)for(o=e.Tc,r=o.length,s=0;r>s;s++){var a=o[s];if(void 0!==a&&null!==a.gc)for(var h=a.gc.i;h.next();){var l=h.value;l.wf=a,l.nx=2,l.lu=a.index,i.add(l)}}if(0<e.Mc.length)for(o=e.Mc,r=o.length,s=0;r>s;s++)if(a=o[s],void 0!==a&&null!==a.gc)for(h=a.gc.i;h.next();)l=h.value,l.wf=a,l.nx=1,l.lu=a.index,i.add(l)}});for(var e=n.i;e.next();){var o=e.value;if(null!==o.dn){Wr(o,!0);for(var s=o.dn.i;s.next();){var a=s.value;null===o.gc&&(o.gc=new ci(kn)),o.gc.add(a)}}o.dn=null}for(e=i.i;e.next();)if(o=e.value,s=o.wf,null!==s){o.wf=null;var h=o.Gv,l=h.indexOf(".");l>0&&s instanceof rs&&(a=h.substring(0,l),h=h.substr(l+1),l=s.Cd(a),null!==l?(s=l,o.Gv=h):v('Warning: unable to find GraphObject named "'+a+'" for Binding: '+o.toString())),s instanceof Cs?(o.Ck=V(s.I),s.I.em=o.Ck):(o.Ck=V(s),s.em=o.Ck)}i.freeze(),t instanceof sa&&t.$c()&&(Or(t,1/0,1/0),t.ac())}function ks(t){return t.type===Lp||t.type===Dp||t.type===zp||t.type===Ap&&0<t.la.length&&(t=t.la.Y(0),t.Jf&&t instanceof rs&&(t.type===Fp||t.type===Op))?!0:!1}function Ms(t,i,n){if(!(void 0===i||null===i||0>n)){var e=t.getCategoryForItemData(i,n),e=t.findTemplateForItemData(i,n,e);if(null!==e){ws(e),e=e.copy(),"object"==typeof i&&(null===t.of&&(t.of=new bi(Object,rs)),t.of.add(i,e));var o=n;ks(t)&&o++,t.qd(o,e),Ts(t,o,n),e.data=i}}}function Ts(t,i,n){for(t=t.la;i<t.length;){var e=t.Y(i);if(e instanceof rs){var o=i,r=n;e.type===Fp?e.Tb=o:e.type===Op&&(e.column=o),e.LF=r}i++,n++}}function Ss(t){t=t.la.l;for(var i=t.length,n=0;i>n;n++){var e=t[n];if(e instanceof Yu||e instanceof rs&&Ss(e))return!0}return!1}function Cs(){I(this),this.eg=null,this.yt=!0,this.Pc=0,this.ie=0/0,this.Ai=0,this.yi=1/0,this.Md=bf,this.xa=this.bb=0,this.gc=null,this.Nq=Rp,this.Vg=mp,this.Kq=this.Ii=null,this.Lq=0/0,this.nb=this.Rg=null,this.Lo=!1}function Ns(t){if(t.ts===Rp){var i=t.eg;return t.td?i.DG:i.GE}return t.ts}function Ps(){Pr.call(this),this.za=null,this.xm="None",this.fg=!1,this.bp=mp,this.tj=null,this.$b=this.Ec="black",this.gg=1,this.gn="butt",this.hn="miter",this.nl=10,this.ml=null,this.yc=0,this.Gh=this.Fh=bf,this.hq=this.gq=0/0,this.kp=!1,this.qp=!0,this.kq=null,this.Am=this.jn="None",this.hp=1}function js(t,i,n,e){var o=.001,r=e.oa,s=r.width,r=r.height,a=0,h=0,l=0,u=0,o=n.length;if(!(4>o)){for(var a=n[0],h=n[1],f=0,c=0,p=0,d=l=0,v=c=0,y=E(),g=2;o>g;g+=2)l=n[g],u=n[g+1],f=l-a,c=u-h,0===f&&(f=.001),p=c/f,d=Math.atan2(c,f),c=Math.sqrt(f*f+c*c),a=[],a[0]=f,a[1]=d,a[2]=p,a[3]=c,y.push(a),v+=c,a=l,h=u;a=n[0],h=n[1],n=0;for(var o=s,u=s/2,g=0===u?!1:!0,c=0,l=y[c],f=l[0],d=l[1],p=l[2],l=l[3],m=0;v>=.1;){if(0===m&&(g?(o=s,n++,o-=u,v-=u,g=!1):(o=s,n++),0===o&&(o=1)),o>v)return void R(y);o>l?(m=o-l,o=l):m=0;var x=Math.sqrt(o*o/(1+p*p));if(0>f&&(x=-x),a+=x,h+=p*x,t.translate(a,h),t.rotate(d),t.translate(-(s/2),-(r/2)),0===m&&e.Yi(t,i),t.translate(s/2,r/2),t.rotate(-d),t.translate(-a,-h),v-=o,l-=o,0!==m){if(c++,c===y.length)return void R(y);l=y[c],f=l[0],d=l[1],p=l[2],l=l[3],o=m}}R(y)}}function Ls(t,i,n,e){var o=.001,r=n.length,s=0,a=0,h=0,l=0,o=i.length;if(!(4>o))if(s=i[0],a=i[1],4===o)Lr(t,s,a,i[2],i[3],n,e);else{t.moveTo(s,a);for(var u=0,f=0,c=0,p=f=h=0,d=E(),v=2;o>v;v+=2)h=i[v],l=i[v+1],u=h-s,f=l-a,0===u&&(u=.001),c=f/u,f=Math.sqrt(u*u+f*f),s=[],s[0]=u,s[1]=c,s[2]=f,d.push(s),p+=f,s=h,a=l;s=i[0],a=i[1],i=0;for(var l=!0,o=n[i%r],v=0!==e,f=0,h=d[f],u=h[0],c=h[1],h=h[2],y=0;p>=.1;){0===y&&(o=n[i%r],i++,v&&(e%=o,o-=e,v=!1)),o>p&&(o=p),o>h?(y=o-h,o=h):y=0;var g=Math.sqrt(o*o/(1+c*c));if(0>u&&(g=-g),s+=g,a+=c*g,l?t.lineTo(s,a):t.moveTo(s,a),p-=o,h-=o,0!==y){if(f++,f===d.length)return void R(d);h=d[f],u=h[0],c=h[1],h=h[2],o=y}else l=!l}R(d)}}function Ds(t,i,n){if(!1!==Zr(t)){t.nc.wa();var e=t.gg;if(0===e){var o=t.J;o instanceof Ca&&o.type===zp&&o.Xb instanceof Ps&&(e=o.Xb.Na)}e*=t.Eb,Ar(t,-(e/2),-(e/2),i+e,n+e),i=t.nc,n=t.se,e=t.Lf,i.width=Math.min(n.width,i.width),i.height=Math.min(n.height,i.height),i.width=Math.max(e.width,i.width),i.height=Math.max(e.height,i.height),t.nc.freeze(),t.nc.w()||r("Non-real measuredBounds has been set. Object "+t+", measuredBounds: "+t.nc.toString()),Qr(t,!1)}}function As(t){var i=t.iC;return t.fg?i===mp?wp:i:i===mp?Qf.Pv[t.jb].Wc:i}function Fs(t,i,n,e,o){return t=n.x-t,i=n.y-i,i=t*t+i*i,e>i?(o.x=n.x,o.y=n.y,i):e}function Os(t,i,n,e,o,r,s,a,h){var l=!1,u=(o-s)*(i-e)-(r-a)*(t-n);return 0===u?!1:(h.x=((o*a-r*s)*(t-n)-(o-s)*(t*e-i*n))/u,h.y=((o*a-r*s)*(i-e)-(r-a)*(t*e-i*n))/u,(i>e?i-e:e-i)>(t>n?t-n:n-t)?(o=e>i?i:e,t=e>i?e:i,(h.y>o||Qf.Sa(h.y,o))&&(h.y<t||Qf.Sa(h.y,t))&&(l=!0)):(o=n>t?t:n,t=n>t?n:t,(h.x>o||Qf.Sa(h.x,o))&&(h.x<t||Qf.Sa(h.x,t))&&(l=!0)),l)}function zs(t,i,n,e){if(!t.kk(i,n,e))return!1;t=i.x,i=i.y;var o=n.x;n=n.y;var r=e.x;if(e=e.y,t===o){var s=0;return t=0,n>i?(s=i,t=n):(s=n,t=i),e>=s&&t>=e}return o>t?(s=t,t=o):s=o,r>=s&&t>=r}function Bs(t){var i=t.g;null!==i&&i.V.Ua||(t.xv=Td,"None"!==t.jn?(t.ff=-1,t.Ti=Af):"None"!==t.Am&&(t.ff=0,t.Ti=new Fi(1-Af.x,Af.y)))}function qs(){Pr.call(this),this.Bd="",this.$b="black",this.Xf="13px sans-serif",this.kd="start",this.np=!0,this.Rk=this.Sk=!1,this.Oj=$p,this.ql=Qp,this.Ht=this.Pd=0,this.zm=this.Pw=this.Qw=null,this.qi=new Ks,this.Wo=!1,this.Be=this.Rj=this.Uq=null,this.Li=this.Ki=0,this.wh=1/0}function Es(t,i){var n=t.Xf;null!==n&&i.Fs!==n&&(i.font=n,i.Fs=n)}function Rs(t,i,n,e){i=i.replace(/^\s+|\s+$/g,"");var o=0,r=0,s=0,a=t.Xf,r=t.Ki+t.Li,h=Math.max(0,Vs(t)+r),s=t.Oj===_p?Hs(a):0;if(t.Pd>=t.wh)return new Ti(0,h);if(t.ql===Jp){if(n.Kh=1,r=Gs(i,a),0===s||e>=r)return n.ge=r,n.ye.push(n.ge),n.Nd.push(i),new Ti(r,h);var l=Is(i);i=i.substr(l.length);for(var u=Is(i),r=Gs(l+u,a);0<u.length&&e>=r;)l+=u,i=i.substr(u.length),u=Is(i),r=Gs((l+u).replace(/^\s+|\s+$/g,""),a);for(l+=u.replace(/^\s+|\s+$/g,""),e=Math.max(1,e-s);Gs(l,a)>e&&1<l.length;)l=l.substr(0,l.length-1);return l+=Yp,s=Gs(l,a),n.ye.push(s),n.ge=s,n.Nd.push(l),new Ti(s,h)}var f=0;for(0===i.length&&(f=1,n.ye.push(0),n.Nd.push(i));0<i.length;){for(l=Is(i),i=i.substr(l.length);Gs(l,a)>e;){for(u=1,r=Gs(l.substr(0,u),a),s=0;e>=r;)u++,s=r,r=Gs(l.substr(0,u),a);if(1===u?(n.ye[t.Pd+f]=r,o=Math.max(o,r)):(n.ye[t.Pd+f]=s,o=Math.max(o,s)),u--,1>u&&(u=1),n.Nd[t.Pd+f]=l.substr(0,u),f++,l=l.substr(u),t.Pd+f>t.wh)break}for(u=Is(i),r=Gs(l+u,a);0<u.length&&e>=r;)l+=u,i=i.substr(u.length),u=Is(i),r=Gs((l+u).replace(/^\s+|\s+$/g,""),a);if(l=l.replace(/^\s+|\s+$/g,""),""!==l&&(0===u.length?(n.ye.push(r),o=Math.max(o,r)):(s=Gs(l,a),n.ye.push(s),o=Math.max(o,s)),n.Nd.push(l),f++,t.Pd+f>t.wh))break}return n.Kh=Math.min(t.wh,f),n.ge=Math.max(n.ge,o),new Ti(n.ge,h*n.Kh)}function Is(t){for(var i=t.length,n=0;i>n&&" "!==t.charAt(n);)n++;for(;i>n&&" "===t.charAt(n);)n++;return n>=i?t:t.substr(0,n)}function Gs(t,i){return Wp!==i&&(Wp=Xp.font=i),Xp.measureText(t).width}function Vs(t){if(null!==t.zm)return t.zm;var i=t.Xf;Wp!==i&&(Wp=Xp.font=i);var n=0;return void 0!==Vp[i]&&5e3>Hp?n=Vp[i]:(n=1.3*Xp.measureText("M").width,Vp[i]=n,Hp++),t.zm=n}function Hs(t){Wp!==t&&(Wp=Xp.font=t);var i=0;return void 0!==Up[t]&&5e3>Kp?i=Up[t]:(i=Xp.measureText(Yp).width,Up[t]=i,Kp++),i}function Us(t,i,n){var e=t.Bd.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),o=t.Ki+t.Li,o=Math.max(0,Vs(t)+o);if(0===e.length)return n.ge=0,t.Pd=1,o;if(!t.ly){var r=e.indexOf("\n",0);r>=0&&(e=e.substr(0,r))}for(var r=0,s=t.Pd=0,a=-1,h=!1;!h;)a=e.indexOf("\n",s),-1===a&&(a=e.length,h=!0),a>=s&&(s=e.substr(s,a-s),t.ql!==Jp?(n.Kh=0,s=Rs(t,s,n,i),r+=s.height,t.Pd+=n.Kh):(Rs(t,s,n,i),r+=o,t.Pd++),t.Pd===t.wh&&(h=!0)),s=a+1;return t.Ht=r}function Ks(){this.ge=this.Kh=0,this.ye=[],this.Nd=[]}function Ys(){Pr.call(this),this.ee=null,this.Pq="",this.Ji=new Si(0/0,0/0,0/0,0/0).freeze(),this.Dm=wp,this.Tq=this.Mi=this.Be=null,this.Gw=!1,this.cn=null,this.xA=0}function Ws(){var i=ed;if(0===i.length)for(var n=t.document.getElementsByTagName("canvas"),e=n.length,o=0;e>o;o++){var r=n[o];r.parentElement&&r.parentElement.N&&i.push(r.parentElement.N)}return i}function Xs(t,i){t.Iw=!0,t.pt=!1;for(var n=null,e=Ws(),o=e.length,r=0;o>r;r++){var s=e[r],a=s.Xm.ha(t.src);if(null!==a){for(o=a.length,r=0;o>r;r++)n=a[r],n.ka.w()||(s.JA.add(n),s.wd()),null!==n.Mi&&n.Mi(n,i);s.ba()}}}function Js(t,i){t.pt=i;for(var n=null,e=Ws(),o=e.length,r=0;o>r;r++)if(n=e[r].Xm.ha(t.src),null!==n){for(var o=n.length,s=E(),r=0;o>r;r++)s.push(n[r]);for(r=0;o>r;r++)n=s[r],null!==n.Be&&n.Be(n,i);R(s)}}function Zs(t){this.pn=[new $s(t,1)]}function Qs(t,i,n,e){var o=new Ki(null),r=o.getContext("2d"),s=1/i;o.width=n/i,o.height=e/i,i=new $s(o.Yc,i),n=t.pn[t.pn.length-1],r.setTransform(s*n.fs,0,0,s*n.fs,0,0),r.drawImage(n.source,0,0),t.pn.push(i)}function $s(t,i){this.source=t,this.fs=i}function _s(){this.m=new Yi,this.xb=null}function ta(t,i,n,e,o,s){null===t.m&&r("StreamGeometryContext has been closed"),void 0!==o&&!0===o?(null===t.xb&&r("Need to call beginFigure first"),e=new _i(rc),e.s=i,e.u=n,t.xb.ra.add(e)):(t.xb=new $i,t.xb.ia=i,t.xb.ja=n,t.xb.Mr=e,t.m.Ya.add(t.xb)),void 0!==s&&(t.xb.Im=s)}function ia(t){null===t.m&&r("StreamGeometryContext has been closed"),null===t.xb&&r("Need to call beginFigure first");var i=t.xb.ra.length;i>0&&t.xb.ra.Y(i-1).close()}function na(t){null===t.m&&r("StreamGeometryContext has been closed"),null===t.xb&&r("Need to call beginFigure first"),0<t.xb.ra.length&&(t.xb.Mr=!0)}function ea(t,i,n,e,o,s,a,h){void 0===h&&(h=!1),null===t.m&&r("StreamGeometryContext has been closed"),null===t.xb&&r("Need to call beginFigure first");var l=new _i(ac);l.vb=i,l.Lb=n,l.ve=e,l.we=o,l.s=s,l.u=a,h&&l.close(),t.xb.ra.add(l)}function oa(t,i,n,e,o){var s;void 0===s&&(s=!1),null===t.m&&r("StreamGeometryContext has been closed"),null===t.xb&&r("Need to call beginFigure first");var a=new _i(hc);a.vb=i,a.Lb=n,a.s=e,a.u=o,s&&a.close(),t.xb.ra.add(a)}function ra(t,i,n,e,o,s,a,h){var l;void 0===l&&(l=!1),null===t.m&&r("StreamGeometryContext has been closed"),null===t.xb&&r("Need to call beginFigure first"),i=new _i(uc,a,h,i,n,e,o,s),l&&i.close(),t.xb.ra.add(i)}function sa(t){0===arguments.length?rs.call(this):rs.call(this,t),this.D=311807,this.Gj=this.ih="",this.yq=this.vq=this.Hq=this.Bp=null,this.Jq="",this.gh=this.Iq=this.il=null,this.xq="",this.Zm=null,this.wq=new Ti(0/0,0/0).freeze(),this.zq="",this.$m=null,this.Bd="",this.Ct=this.Jo=this.uj=null,this.bg=new wi(0/0,0/0).freeze(),this.Ip="",this.Jj=null,this.Jp=wf,this.Sp=Qf.QD,this.Lp=Qf.PD,this.To=null,this.Cp=hd,this.ll=new wi(6,6).freeze(),this.kl="gray",this.jl=4,this.pA=-1,this.aE=new Si,this.Lj=null,this.wi=0/0}function aa(t,i){i.Xa.ue.each(function(i){i.isEnabled&&i.updateAdornments(t)})}function ha(t){0!==(16384&t.D)!=!1&&(t.updateAdornments(),t.D&=-16385,t=t.g,null!==t&&(t.ed=!0))}function la(t,i){if(!1===ga(t)){var n=t.g;null!==n&&(n.nf.add(t),t instanceof Na&&!n.V.Ua&&t.Je(),i||n.wd()),ma(t,!0)}}function ua(t){if(!1!==ga(t)){var i=t.position,n=t.location;n.w()&&i.w()||(pa(t,i,n),t.Zf());var i=t.xa,n=t.Bb,e=n.copy();n.wa(),n.x=i.x,n.y=i.y,n.freeze(),t.nv(e,n),ma(t,!1)}}function fa(t,i,n,e){void 0===e&&(e=new wi),n.Gd()&&(n=Sf);var o=i.sa;if(e.k(o.width*n.x+n.offsetX,o.height*n.y+n.offsetY),null===i||i===t)return e;for(i.transform.Ka(e),i=i.I;null!==i&&i!==t;)i.transform.Ka(e),i=i.I;return t.Ij.Ka(e),e.offset(-t.nc.x,-t.nc.y),e}function ca(t,i){var n;n=t.aE;var e;isNaN(t.wi)&&(t.wi=ys(t)),e=t.wi;var o=2*e;if(!t.rk)return n.k(i.x-1-e,i.y-1-e,i.width+2+o,i.height+2+o),n;e=i.x;var o=i.y,r=i.width,s=i.height,a=t.shadowBlur,h=t.MG,r=r+a,s=s+a;return e-=a/2,o-=a/2,0<h.x?r+=h.x:(e+=h.x,r-=h.x),0<h.y?s+=h.y:(o+=h.y,s-=h.y),n.k(e-1,o-1,r+2,s+2),n}function pa(t,i,n){var e=0/0,o=0/0,s=C(),a=t.qe,h=t.Jb;a.Gd()&&r("determineOffset: Part's locationSpot must be real: "+a.toString());var l=h.sa,e=0;if(h.Na&&(e=h.gg),s.ss(0,0,l.width+e,l.height+e,a),h!==t)for(h.Na&&s.offset(-e/2,-e/2),h.transform.Ka(s),a=h.I;null!==a&&a!==t;)a.transform.Ka(s),a=a.I;t.Ij.Ka(s),s.offset(-t.nc.x,-t.nc.y),a=t.g,n.w()?(h=i.x,l=i.y,e=n.x-s.x,o=n.y-s.y,i.k(e,o),n=!1,null!==a&&(e=a.hh,e.pi?n=!0:!e.Gc||t instanceof Ca||Fe(e,t,"position",new wi(h,l),i),n||i.x===h&&i.y===l||(e=a.Ma,a.Ma=!0,t.h("position",new wi(h,l),i),a.Ma=e))):i.w()&&(e=i.x,o=i.y,i=n.copy(),n.k(e+s.x,o+s.y),n.A(i)||null===a||(e=a.Ma,a.Ma=!0,t.h("location",i,n),a.Ma=e)),P(s)}function da(t,i,n){xa(t,!1),t instanceof Na&&fr(n,t),t.layer.bc||i||n.Rb(),i=t.Bb;var e=n.Va;e.w()?(ba(t)?ji(i,e)||t.Oe(!1):i.If(e)&&t.Oe(!0),t.updateAdornments()):n.Ej=!0}function va(t,i){var n=t.Bb;if(0!==n.width&&0!==n.height&&!isNaN(n.x)&&!isNaN(n.y)&&t.qa()){var e=t.transform,o=t.I,r=t.bm;r.reset(),null!==o&&(o.jf()?r.multiply(o.We):null!==o.I&&r.multiply(o.I.We)),r.multiply(t.ld),null!==t.Nb&&(Rr(t,i,t.Nb,!0,!0),i.fillRect(n.x,n.y,n.width,n.height)),null===t.Nb&&null===t.nb&&(Rr(t,i,"rgba(0,0,0,0.4)",!0,!1),i.fillRect(n.x,n.y,n.width,n.height)),null!==t.nb&&(e.Nr()||i.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),o=t.sa,n=o.width,o=o.height,Rr(t,i,t.nb,!0,!1),i.fillRect(0,0,n+0,o+0),e.Nr()||(n=1/(e.m11*e.m22-e.m12*e.m21),i.transform(e.m22*n,-e.m12*n,-e.m21*n,e.m11*n,n*(e.m21*e.dy-e.m22*e.dx),n*(e.m12*e.dx-e.m11*e.dy))))}}function ya(t,i,n,e){i.constructor===t.constructor||ld||(ld=!0,v('Should not change the class of the Part when changing category from "'+n+'" to "'+e+'"'),v("  Old class: "+J(t)+", new class: "+J(i)+", part: "+t.toString())),t.nr();var o=t.data;n=t.Ne;var r=t.Ia,s=t.kg,a=!0,h=!0,l=!1;if(t instanceof Na)var u=t,a=u.Vh,h=u.sc,l=u.oo;i.Zg(t),i.cloneProtected(t),t.ih=e,t.H(),t.ba(),i=t.g,e=!0,null!==i&&(e=i.Ma,i.Ma=!0),t.Cg=o,null!==o&&t.rb(),null!==i&&(i.Ma=e),o=t.Ne,o!==n&&(t.Gj=n,t.Ne=o),t instanceof Na&&(u=t,u.Vh=a,u.sc=h,u.oo=l,u.$c()&&u.v(64)),t.Ia=r,t.kg=s}function ga(t){return 0!==(32768&t.D)}function ma(t,i){t.D=i?32768|t.D:-32769&t.D}function xa(t,i){t.D=i?65536|t.D:-65537&t.D}function ba(t){return 0!==(131072&t.D)}function wa(t,i){t.D=i?1048576|t.D:-1048577&t.D}function ka(t,i){var n=i.Ba;return null!==n?1+ka(t,n):i instanceof Na&&(n=i.vd,null!==n)?ka(t,n):0}function Ma(t,i){var n=i.Ba;return null!==n?Ma(t,n):i instanceof Na&&(n=i.vd,null!==n)?Ma(t,n):i}function Ta(t,i,n){if(i===n||null===n)return!1;var e=i.Ba;return null===e||e!==n&&!Ta(t,e,n)?i instanceof Na&&(i=i.vd,null!==i)?Ta(t,i,n):!1:!0}function Sa(t){return t.qa()?(t=t.layer,null!==t&&t.bc?!1:!0):!1}function Ca(t){0===arguments.length?sa.call(this,Pp):sa.call(this,t),this.Ne="Adornment",this.lb=null,this.D&=-257,this.bg=new wi(0/0,0/0),this.gi=new ci(Si),this.tb=null}function Na(t){0===arguments.length?sa.call(this,Pp):sa.call(this,t),this.Kb=new ci(Ra),this.Om=this.Hj=this.Fp=this.Ep=null,this.tp=!0,this.cr=!1,this.Yq=null,this.Co=this.vp=!0,this.Do=Qf.TD,this.jd=this.zg=null,this.oq=pd,this.Ri=!1}function Pa(t,i){null!==i&&(null===t.zg&&(t.zg=new di(uh)),t.zg.add(i))}function ja(t,i){if(null!==i){i.nq=null;var n=t.Ba;null===n||n.ud||ja(n,n.fk(""))}}function La(t,i,n){if(ja(t,n),!t.Kb.contains(i)){t.Kb.add(i);var e=t.SF;if(null!==e){var o=!0,r=t.g;null!==r&&(o=r.ya,r.ya=!0),e(t,i,n),null!==r&&(r.ya=o)}i.cc&&(n=i.M,i=i.R,null!==n&&null!==i&&n!==i&&(e=!0,r=t.g,null!==r&&(e=r.Lc),t=e?i:n,o=e?n:i,t.Ri||(t.Ri=o),!o.Vh||null!==r&&r.V.Ua||(e?n===o&&(o.Vh=!1):i===o&&(o.Vh=!1))))}}function Da(t,i,n){if(ja(t,n),t.Kb.remove(i)){var e=t.TF,o=t.g;if(null!==e){var r=!0;null!==o&&(r=o.ya,o.ya=!0),e(t,i,n),null!==o&&(o.ya=r)}i.cc&&(n=!0,null!==o&&(n=o.Lc),t=n?i.R:i.M,i=n?i.M:i.R,null!==t&&(t.Ri=!1),null===i||i.Vh||(0===i.Kb.count?(i.Ri=null,null!==o&&o.V.Ua||(i.Vh=!0)):Aa(i)))}}function Aa(t){if(t.Ri=!1,0!==t.Kb.count){var i=!0,n=t.g;if(null===n||!n.V.Ua){for(null!==n&&(i=n.Lc),n=t.Kb.i;n.next();){var e=n.value;if(e.cc)if(i){if(e.M===t)return void(t.Vh=!1)}else if(e.R===t)return void(t.Vh=!1)}t.Vh=!0}}}function Fa(t){null===t.jd?t.jd=new bi("string",Pr):t.jd.clear(),fs(t,t,function(t,i){var n=i.cd;null!==n&&t.jd.add(n,i)}),0===t.jd.count&&t.jd.add("",t)}function Oa(t,i,n){var e=i.cd;if(null!==e&&(null!==t.jd&&t.jd.remove(e),i=t.g,null!==i&&n)){for(n=null,e=t.aC(e);e.next();)t=e.value,null===n&&(n=E()),n.push(t);if(null!==n){for(e=0;e<n.length;e++)t=n[e],i.remove(t);R(n)}}}function za(t,i){var n=i.Gl();return null===n?0:1+za(t,n)}function Ba(t,i,n,e,o){if(e>1)for(o=n?t.Tu():t.Ff();o.next();){var r=o.value;r.cc&&(r=r.Vx(t),null===r||r===t||i.contains(r)||(i.add(r),Ba(r,i,n,e-1,r.sc)))}else qa(t,i,n,o)}function qa(t,i,n,e){for(var o=n?t.Tu():t.Ff();o.next();){var r=o.value;r.cc&&(r=r.Vx(t),null===r||r===t||i.contains(r)||(i.add(r),e&&(r.mk(),r.$d(!1)),r.sc&&(r.oo=r.sc,qa(r,i,n,r.oo))))}t.sc=!1}function Ea(t,i,n,e,o,r,s){for(var a=n?t.Tu():t.Ff();a.next();){var h=a.value;h.cc&&(o||h.yf||h.zb(),h=h.Vx(t),null!==h&&h!==t&&!i.contains(h)&&(i.add(h),o||(h.$d(!0),h.mk(),Ie(r,h,s)),e>2||h.oo))&&(h.oo=!1,Ea(h,i,n,e-1,h.sc,r,s))}t.sc=!0}function Ra(){sa.call(this,zp),this.mf=null,this.Ig="",this.xf=this.ap=null,this.Wg="",this.Xq=null,this.uq=this.tq=this.sq=!1,this.wp=!0,this.xo=gd,this.Ko=0,this.No=gd,this.Oo=0/0,this.el=vd,this.Oq=.5,this.Od=null,this.oc=new ci(wi).freeze(),this.an=this.Qd=null,this.yf=!1,this.ax=null,this.mx=!1,this.fm=this.rh=this.za=null,this.ze=0,this.rm=this.nm=null,this.gi=new ci(Si),this.qx=new wi,this.eB=this.cB=null,this.Zv=!1,this.G=null}function Ia(t){var i=t.M,n=t.R;null!==i&&null!==n?Ga(t,i.fF(n)):Ga(t,null)}function Ga(t,i){var n=t.uj;if(n!==i){null!==n&&Ch(n,t),t.uj=i,null!==i&&Sh(i,t);var e=t.OB;if(null!==e){var o=!0,r=t.g;null!==r&&(o=r.ya,r.ya=!0),e(t,n,i),null!==r&&(r.ya=o)}!t.yf||t.cB!==n&&t.eB!==n||t.zb()}}function Va(t,i){null===t.Od&&(t.Od=new di(Na)),t.Od.add(i),t.H()}function Ha(t){0===t.oc.count?t.yf=!1:(t.yf=!0,t.nm=t.j(0).copy(),t.rm=t.j(t.Z-1).copy(),rh(t,!1))}function Ua(t,i){return Math.abs(i.x-t.x)>Math.abs(i.y-t.y)?(i.x=i.x>=t.x?t.x+9e9:t.x-9e9,i.y=t.y):(i.y=i.y>=t.y?t.y+9e9:t.y-9e9,i.x=t.x),i}function Ka(t,i){var n=i.nq;return null===n&&(n=new xh,n.port=i,n.dc=i.J,i.nq=n),wh(n,t)}function Ya(t,i){if(null===i)return Sf;var n=t.Za;return n.lc()&&(void 0===i&&(i=t.Jc),null!==i&&(n=i.Za)),n===bf?xf:n}function Wa(t,i){if(null===i)return Sf;var n=t.ab;return n.lc()&&(void 0===i&&(i=t.yd),null!==i&&(n=i.ab)),n===bf?xf:n}function Xa(t){var i=t.Fr;return isNaN(i)&&(t=t.Jc,null!==t&&(i=t.Fr)),isNaN(i)?0:i}function Ja(t){var i=t.zs;return isNaN(i)&&(t=t.yd,null!==t&&(i=t.zs)),isNaN(i)?0:i}function Za(t){if(!t.nk)return!1;var i=t.points.l,n=i.length;if(4>n)return!1;t=lr(t.g,!0,t.Ba,null);for(var e=1;n-2>e;e++){var o=i[e],r=i[e+1];if(!t.Mn(Math.min(o.x,r.x),Math.min(o.y,r.y),Math.abs(o.x-r.x),Math.abs(o.y-r.y)))return!0}return!1}function Qa(t,i,n,e,o,r){var s=i.un,a=i.sn,h=ph(i,n,e),l=n,u=e;for(0===o?l+=s:90===o?u+=a:180===o?l-=s:u-=a;h>1&&ph(i,l,u)===h-1;)n=l,e=u,0===o?l+=s:90===o?u+=a:180===o?l-=s:u-=a,h-=1;r?h>1&&(180===o||0===o?n=Math.floor(n/s)*s+s/2:(90===o||270===o)&&(e=Math.floor(e/a)*a+a/2)):(n=Math.floor(n/s)*s+s/2,e=Math.floor(e/a)*a+a/2),h>1&&(r=o,l=n,u=e,0===o?(r=90,u+=a):90===o?(r=180,l-=s):180===o?(r=270,u-=a):270===o&&(r=0,l+=s),ph(i,l,u)===h-1?Qa(t,i,l,u,r,!1):(l=n,u=e,0===o?(r=270,u-=a):90===o?(r=0,l+=s):180===o?(r=90,u+=a):270===o&&(r=180,l-=s),ph(i,l,u)===h-1&&Qa(t,i,l,u,r,!1))),t.Vj(n,e)}function $a(t,i,n,e){return t=n-t,isNaN(t)||1/0===t||-1/0===t?0/0:(0>t&&(t=-t),i=e-i,isNaN(i)||1/0===i||-1/0===i?0/0:(0>i&&(i=-i),Qf.Sa(t,0)?i:Qf.Sa(i,0)?t:Math.sqrt(t*t+i*i)))}function _a(t,i,n,e){var o=t.Z;if(!(2>o))if(n){var r=t.j(1);n=r.x-e.x,e=r.y-e.y,r=$a(i.x,i.y,n,e),0!==r&&(o=2===o?.5*r:r,t=Xa(t),t>o&&(t=o),n=t*(n-i.x)/r,t=t*(e-i.y)/r,i.x+=n,i.y+=t)}else r=t.j(o-2),n=r.x-e.x,e=r.y-e.y,r=$a(i.x,i.y,n,e),0!==r&&(o=2===o?.5*r:r,t=Ja(t),t>o&&(t=o),n=t*(i.x-n)/r,t=t*(i.y-e)/r,i.x-=n,i.y-=t)}function th(t,i,n,e){for(var o=t.Z,r=i;Qf.Sa(i.x,r.x)&&Qf.Sa(i.y,r.y);){if(n>=o)return o-1;r=t.j(n++)}if(!Qf.Sa(i.x,r.x)&&!Qf.Sa(i.y,r.y))return n-1;for(var s=r;Qf.Sa(i.x,r.x)&&Qf.Sa(r.x,s.x)&&(!e||(i.y>=r.y?r.y>=s.y:r.y<=s.y))||Qf.Sa(i.y,r.y)&&Qf.Sa(r.y,s.y)&&(!e||(i.x>=r.x?r.x>=s.x:r.x<=s.x));){if(n>=o)return o-1;s=t.j(n++)}return n-2}function ih(t,i,n,e,o,r,s){if(!s&&oh(t)){s=[];var a=0;t.qa()&&(a=nh(t,o,r,s));var h=o.x,h=o.y;if(a>0)if(Qf.q(o.y,r.y))if(o.x<r.x)for(var l=0;a>l;){var u=Math.max(o.x,Math.min(s[l++]-5,r.x-10));i.lineTo(u+n,r.y+e);for(var h=u+n,f=Math.min(u+10,r.x);a>l;){var c=s[l];if(!(f+10>c))break;l++,f=Math.min(c+5,r.x)}c=(u+f)/2+n,c=r.y-10+e,u=f+n,f=r.y+e,t.ne===xd?ta(i,u,f,!1,!1):ea(i,h,c,u,c,u,f)}else for(l=a-1;l>=0;){for(u=Math.min(o.x,Math.max(s[l--]+5,r.x+10)),i.lineTo(u+n,r.y+e),h=u+n,f=Math.max(u-10,r.x);l>=0&&(c=s[l],c>f-10);)l--,f=Math.max(c-5,r.x);c=r.y-10+e,u=f+n,f=r.y+e,t.ne===xd?ta(i,u,f,!1,!1):ea(i,h,c,u,c,u,f)}else if(Qf.q(o.x,r.x))if(o.y<r.y)for(l=0;a>l;){for(u=Math.max(o.y,Math.min(s[l++]-5,r.y-10)),i.lineTo(r.x+n,u+e),h=u+e,f=Math.min(u+10,r.y);a>l&&(c=s[l],f+10>c);)l++,f=Math.min(c+5,r.y);c=r.x-10+n,u=r.x+n,f+=e,t.ne===xd?ta(i,u,f,!1,!1):ea(i,c,h,c,f,u,f)}else for(l=a-1;l>=0;){for(u=Math.min(o.y,Math.max(s[l--]+5,r.y+10)),i.lineTo(r.x+n,u+e),h=u+e,f=Math.max(u-10,r.y);l>=0&&(c=s[l],c>f-10);)l--,f=Math.max(c-5,r.y);c=r.x-10+n,u=r.x+n,f+=e,t.ne===xd?ta(i,u,f,!1,!1):ea(i,c,h,c,f,u,f)}}i.lineTo(r.x+n,r.y+e)}function nh(t,i,n,e){var o=t.g;if(null===o||i.A(n))return 0;for(o=o.hv;o.next();){var r=o.value;if(null!==r&&r.visible)for(var r=r.hb.l,s=r.length,a=0;s>a;a++){var h=r[a];if(h instanceof Ra){if(h===t)return 0<e.length&&e.sort(function(t,i){return t-i}),e.length;if(h.qa()&&oh(h)){var l=h.Rl;l.w()&&t.Rl.If(l)&&!t.usesSamePort(h)&&(l=h.path,null!==l&&l.tk()&&eh(i,n,e,h))}}}}return 0<e.length&&e.sort(function(t,i){return t-i}),e.length}function eh(t,i,n,e){for(var o=Qf.q(t.y,i.y),r=e.Z,s=e.j(0),a=C(),h=1;r>h;h++){var l=e.j(h);if(r-1>h){var u=e.j(h+1);s.y===l.y&&l.y===u.y?(l.x>s.x&&u.x>l.x||l.x<s.x&&u.x<l.x)&&(l=u,h++):s.x===l.x&&l.x===u.x&&(l.y>s.y&&u.y>l.y||l.y<s.y&&u.y<l.y)&&(l=u,h++)}t:{var u=a,f=t.x,c=t.y,p=i.x,d=i.y,v=s.x,s=s.y,y=l.x,g=l.y;if(Qf.q(f,p)){if(!Qf.q(c,d)&&Qf.q(s,g)&&Math.min(c,d)<s&&Math.max(c,d)>s&&Math.min(v,y)<f&&Math.max(v,y)>f&&!Qf.q(v,y)){u.x=f,u.y=s,u=!0;
break t}}else if(Qf.q(c,d)&&Qf.q(v,y)&&Math.min(f,p)<v&&Math.max(f,p)>v&&Math.min(s,g)<c&&Math.max(s,g)>c&&!Qf.q(s,g)){u.x=v,u.y=c,u=!0;break t}u.x=0,u.y=0,u=!1}u&&n.push(o?a.x:a.y),s=l}P(a)}function oh(t){return t=t.ne,t===bd||t===xd}function rh(t,i){if(i||oh(t)){var n=t.g;null===n||n.Lk.contains(t)||null===t.ax||n.Lk.add(t,t.ax)}}function sh(t,i){var n=t.layer;if(null!==n&&n.visible&&!n.bc){var e=n.g;if(null!==e)for(var o=!1,e=e.hv;e.next();){var r=e.value;if(r.visible)if(r===n)for(var o=!0,s=!1,r=r.hb.l,a=r.length,h=0;a>h;h++){var l=r[h];l instanceof Ra&&(l===t?s=!0:s&&ah(t,l,i))}else if(o)for(r=r.hb.l,a=r.length,h=0;a>h;h++)l=r[h],l instanceof Ra&&ah(t,l,i)}}}function ah(t,i,n){if(null!==i&&null!==i.za&&oh(i)){var e=i.Rl;e.w()&&(t.Rl.If(e)||n.If(e))&&(t.usesSamePort(i)||i.Ed())}}function hh(t){var i=t.mf;if(null!==i){var n=t.xf;if(null!==n){var e=t.Ig,o=t.Wg;t:{if(null!==n&&null!==i.zg)for(t=i.zg.i;t.next();){var r=t.value;if(r.Xn===i&&r.as===n&&r.pv===e&&r.qv===o||r.Xn===n&&r.as===i&&r.pv===o&&r.qv===e){t=r;break t}}t=null}for(var s=null,a=null,h=i.Kb.l,l=h.length,r=0;l>r;r++){var u=h[r];(u.mf===i&&u.Ig===e&&u.xf===n&&u.Wg===o||u.mf===n&&u.Ig===o&&u.xf===i&&u.Wg===e)&&(null===a?a=u:(null===s&&(s=new ci(Ra),s.add(a)),s.add(u)))}if(null!==s)for(null===t&&(t=new uh,t.Xn=i,t.pv=e,t.as=n,t.qv=o,Pa(i,t),Pa(n,t)),t.links=s,i=s.l,r=0;r<i.length;r++)if(u=i[r],0===u.ze){for(n=1,e=0;e<i.length;e++)Math.abs(i[e].ze)===n&&(n++,e=-1);u.fm=t,u.ze=u.M===t.Xn?n:-n,n=u.g,(null===n||n.Ce)&&u.zb()}}}}function lh(t){var i=t.fm;if(null!==i){var n=t.ze;if(t.fm=null,t.ze=0,i.links.remove(t),2>i.links.count)1===i.links.count&&(n=i.links.l[0],n.fm=null,n.ze=0,n.zb()),n=i.Xn,null!==i&&null!==n.zg&&n.zg.remove(i),n=i.as,null!==i&&null!==n.zg&&n.zg.remove(i);else for(n=Math.abs(n),t=0===n%2,i=i.links.i;i.next();){var e=i.value,o=Math.abs(e.ze),r=0===o%2;o>n&&t===r&&(e.ze=0<e.ze?e.ze-2:e.ze+2,e.zb())}}}function uh(){I(this),this.links=this.qv=this.as=this.pv=this.Xn=null}function fh(){I(this),this.Xy=this.group=null,this.Kr=!0,this.abort=!1,this.sf=this.rf=1,this.Np=this.Mp=-1,this.Ad=this.zd=8,this.Ob=null,this.KD=!1,this.tD=22,this.BC=111}function ch(t,i,n){return t.rf<=i&&i<=t.Mp&&t.sf<=n&&n<=t.Np}function ph(t,i,n){return ch(t,i,n)?(i-=t.rf,i/=t.zd,n-=t.sf,n/=t.Ad,t.Ob[0|i][0|n]):0}function dh(t,i,n){ch(t,i,n)&&(i-=t.rf,i/=t.zd,n-=t.sf,n/=t.Ad,t.Ob[0|i][0|n]=0)}function vh(t){if(null!==t.Ob)for(var i=0;i<=t.kn;i++)for(var n=0;n<=t.ln;n++)1<=t.Ob[i][n]&&(t.Ob[i][n]|=999999)}function yh(t,i,n,e,o,r,s,a,h){if(!(r>i||i>s||a>n||n>h)){var l,u;l=0|i,u=0|n;var f=t.Ob[l][u];if(f>=1&&999999>f)for(o?u+=e:l+=e,f+=1;l>=r&&s>=l&&u>=a&&h>=u&&!(f>=t.Ob[l][u]);)t.Ob[l][u]=f,f+=1,o?u+=e:l+=e;if(l=o?u:l,o)if(e>0)for(n+=e;l>n;n+=e)yh(t,i,n,1,!o,r,s,a,h),yh(t,i,n,-1,!o,r,s,a,h);else for(n+=e;n>l;n+=e)yh(t,i,n,1,!o,r,s,a,h),yh(t,i,n,-1,!o,r,s,a,h);else if(e>0)for(i+=e;l>i;i+=e)yh(t,i,n,1,!o,r,s,a,h),yh(t,i,n,-1,!o,r,s,a,h);else for(i+=e;i>l;i+=e)yh(t,i,n,1,!o,r,s,a,h),yh(t,i,n,-1,!o,r,s,a,h)}}function gh(t,i,n,e,o,r,s,a,h,l,u){for(var f=0|i,c=0|n,p=t.Ob[f][c];0===p&&f>a&&h>f&&c>l&&u>c;)if(s?c+=r:f+=r,p=t.Ob[f][c],1>=Math.abs(f-e)&&1>=Math.abs(c-o))return t.abort=!0,0;for(f=0|i,c=0|n,p=t.Ob[f][c],i=1,t.Ob[f][c]=i;0===p&&f>a&&h>f&&c>l&&u>c;)s?c+=r:f+=r,p=t.Ob[f][c],t.Ob[f][c]=i,i+=1;return s?c:f}function mh(t,i,n,e,o,r){if(null!==t.Ob){t.abort=!1;var s=i.x,a=i.y;if(ch(t,s,a)){var s=s-t.rf,s=s/t.zd,a=a-t.sf,a=a/t.Ad,h=e.x,l=e.y;if(ch(t,h,l))if(h-=t.rf,h/=t.zd,l-=t.sf,l/=t.Ad,1>=Math.abs(s-h)&&1>=Math.abs(a-l))t.abort=!0;else{var u=r.x;i=r.y,e=r.x+r.width;var f=r.y+r.height,u=u-t.rf,u=u/t.zd;i-=t.sf,i/=t.Ad,e-=t.rf,e/=t.zd,f-=t.sf,f/=t.Ad,r=Math.max(0,Math.min(t.kn,0|u)),e=Math.min(t.kn,Math.max(0,0|e)),i=Math.max(0,Math.min(t.ln,0|i));var f=Math.min(t.ln,Math.max(0,0|f)),s=0|s,a=0|a,h=0|h,l=0|l,u=s,c=a,p=0===n||90===n?1:-1;if((n=90===n||270===n)?c=gh(t,s,a,h,l,p,n,r,e,i,f):u=gh(t,s,a,h,l,p,n,r,e,i,f),!t.abort){t:{n=0===o||90===o?1:-1,o=90===o||270===o;for(var p=0|h,d=0|l,v=t.Ob[p][d];0===v&&p>r&&e>p&&d>i&&f>d;)if(o?d+=n:p+=n,v=t.Ob[p][d],1>=Math.abs(p-s)&&1>=Math.abs(d-a)){t.abort=!0;break t}for(p=0|h,d=0|l,v=t.Ob[p][d],t.Ob[p][d]=999999;0===v&&p>r&&e>p&&d>i&&f>d;)o?d+=n:p+=n,v=t.Ob[p][d],t.Ob[p][d]=999999}t.abort||(yh(t,u,c,1,!1,r,e,i,f),yh(t,u,c,-1,!1,r,e,i,f),yh(t,u,c,1,!0,r,e,i,f),yh(t,u,c,-1,!0,r,e,i,f))}}}}}function xh(){I(this),this.port=this.dc=null,this.Mf=[],this.Wn=!1}function bh(t,i,n,e){switch(i=i.offsetY){case 8:return 90;case 2:return 180;case 1:return 270;case 4:return 0}switch(i){case 9:return n>180?270:90;case 6:return n>90&&270>=n?180:0}switch(t=180*Math.atan2(t.height,t.width)/Math.PI,i){case 3:return n>t&&180+t>=n?180:270;case 5:return n>180-t&&360-t>=n?270:0;case 12:return n>t&&180+t>=n?90:0;case 10:return n>180-t&&360-t>=n?180:90;case 7:return n>90&&180+t>=n?180:n>180+t&&360-t>=n?270:0;case 13:return n>180&&360-t>=n?270:n>t&&180>=n?90:0;case 14:return n>t&&180-t>=n?90:n>180-t&&270>=n?180:0;case 11:return n>180-t&&180+t>=n?180:n>180+t?270:90}return e&&15!==i&&(n-=15,0>n&&(n+=360)),n>t&&180-t>n?90:n>=180-t&&180+t>=n?180:n>180+t&&360-t>n?270:0}function wh(t,i){var n=t.Mf;if(0===n.length){t:if(!t.Wn){n=t.Wn,t.Wn=!0;var e,o=null,r=t.dc,r=r instanceof Th?r:null;if(null===r||r.ud)e=t.dc.aC(t.port.cd);else{if(!r.Q.w()){t.Wn=n;break t}o=r,e=o.$B()}var s=t.Mf.length=0,a=t.port.Ra(wf,C()),h=t.port.Ra(jf,C()),r=A(a.x,a.y,0,0);for(r.$h(h),P(a),P(h),a=N(r.x+r.width/2,r.y+r.height/2),e=e.i;e.next();)if(h=e.value,h.qa()){var l=xf,u=h.Jc===t.port||h.M.bh(o),l=u?Ya(h,t.port):Wa(h,t.port);if(l.Jn()&&(u=u?h.yd:h.Jc,null!==u)){var f=u.J;if(null!==f){var u=h.computeOtherPoint(f,u),f=a.Rh(u),l=bh(r,l,f,h.Ib),c=0;0===l?(c=4,f>180&&(f-=360)):c=90===l?8:180===l?2:1,l=t.Mf[s],void 0===l?(l=new kh(h,f,c),t.Mf[s]=l):(l.link=h,l.angle=f,l.xd=c),l.ov.set(u),s++}}}for(P(a),t.Mf.sort(xh.prototype.iG),o=t.Mf.length,a=-1,s=e=0;o>s;s++)l=t.Mf[s],void 0!==l&&(l.xd!==a&&(a=l.xd,e=0),l.Gn=e,e++);for(a=-1,e=0,s=o-1;s>=0;s--)l=t.Mf[s],void 0!==l&&(l.xd!==a&&(a=l.xd,e=l.Gn+1),l.Cl=e);s=t.Mf,u=t.port,o=t.dc.pG,a=C(),e=C(),h=C(),l=C(),u.Ra(wf,a),u.Ra(Mf,e),u.Ra(jf,h),u.Ra(Nf,l);var p=c=f=u=0;if(o===dd)for(var d=0;d<s.length;d++){var v=s[d];if(null!==v){var y=v.link.computeThickness();switch(v.xd){case 8:c+=y;break;case 2:p+=y;break;case 1:u+=y;break;default:case 4:f+=y}}}for(var g=0,m=0,x=1,d=0;d<s.length;d++)if(v=s[d],null!==v){var b,w;if(g!=v.xd){switch(g=v.xd){case 8:b=h,w=l;break;case 2:b=l,w=a;break;case 1:b=a,w=e;break;default:case 4:b=e,w=h}var k=w.x-b.x;switch(w=w.y-b.y,g){case 8:c>Math.abs(k)?(x=Math.abs(k)/c,c=Math.abs(k)):x=1;break;case 2:p>Math.abs(w)?(x=Math.abs(w)/p,p=Math.abs(w)):x=1;break;case 1:u>Math.abs(k)?(x=Math.abs(k)/u,u=Math.abs(k)):x=1;break;default:case 4:f>Math.abs(w)?(x=Math.abs(w)/f,f=Math.abs(w)):x=1}m=0}var M=v.On;if(o===dd){switch(y=v.link.computeThickness(),y*=x,M.set(b),g){case 8:M.x=b.x+k/2+c/2-m-y/2;break;case 2:M.y=b.y+w/2+p/2-m-y/2;break;case 1:M.x=b.x+k/2-u/2+m+y/2;break;default:case 4:M.y=b.y+w/2-f/2+m+y/2}m+=y}else y=.5,o===pd&&(y=(v.Gn+1)/(v.Cl+1)),M.x=b.x+k*y,M.y=b.y+w*y}for(P(a),P(e),P(h),P(l),b=t.Mf,k=0;k<b.length;k++)w=b[k],null!==w&&(w.Pu=t.computeEndSegmentLength(w));t.Wn=n,F(r)}n=t.Mf}for(r=0;r<n.length;r++)if(b=n[r],null!==b&&b.link===i)return b;return null}function kh(t,i,n){this.link=t,this.angle=i,this.xd=n,this.ov=new wi,this.Cl=this.Gn=0,this.On=new wi,this.Pu=0}function Mh(){this.Qi=this.oi=bf,this.Oi=this.mi=0/0,this.Ni=this.li=ud,this.Pi=this.ni=0/0}function Th(t){0===arguments.length?Na.call(this,Pp):Na.call(this,t),this.Pp=new di(sa),this.Tm=new di(Th),this.Kj=this.Qp=this.Op=null,this.ar=!1,this.sp=!0,this.br=!1,this.tb=this.Rq=null,this.Go=!1,this.Ho=!0,this.fp=this.Io=!1,this.fd=new Lh,this.fd.group=this,this.Vw=!1}function Sh(t,i){if(t.Pp.add(i)){i instanceof Th&&t.Tm.add(i);var n=t.$F;if(null!==n){var e=!0,o=t.g;null!==o&&(e=o.ya,o.ya=!0),n(t,i),null!==o&&(o.ya=e)}t.qa()&&t.ud||i.$d(!1)}n=t.tb,null===n&&(n=t),n.H()}function Ch(t,i){if(t.Pp.remove(i)){i instanceof Th&&t.Tm.remove(i);var n=t.aG;if(null!==n){var e=!0,o=t.g;null!==o&&(e=o.ya,o.ya=!0),n(t,i),null!==o&&(o.ya=e)}t.qa()&&t.ud||i.$d(!0)}n=t.tb,null===n&&(n=t),n.H()}function Nh(t,i){for(var n=t.mc;n.next();){var e=n.value;if(e.$d(!1),e instanceof Th){var o=e;o.ud&&(o.fz=o.ud,Nh(o,i))}if(e instanceof Na)e.Je(i);else if(e instanceof Ra)for(e=e.Kf;e.next();)e.value.Je(i)}t.ud=!1}function Ph(t,i,n,e){for(var o=t.mc;o.next();){var r=o.value;if(r.$d(!0),r instanceof Th){var s=r;s.fz&&(s.fz=!1,Ph(s,i,n,e))}if(r instanceof Na)r.Je(i),Ie(n,r,e);else if(r instanceof Ra)for(r=r.Kf;r.next();)r.value.Je(i)}t.ud=!0}function jh(){Pr.call(this),this.he=Qf.ro,this.Cq=new Si(0/0,0/0,0/0,0/0)}function Lh(){0<arguments.length&&p(Lh),I(this),this.Dw=this.N=null,this.mp=this.op=!0,this.xp=!1,this.zo=new wi(0,0).freeze(),this.pp=this.rp=!0,this.Mz="",this.Km=!1,this.Ww=null}function Dh(t,i,n,e,o,r,s,a){for(n=n.i;n.next();){var h=n.value;e&&!h.Kn||null!==o&&!o(h)||!h.canLayout()||(r&&h instanceof Na?h.Ke||(h instanceof Th&&null===h.ub?Dh(t,i,h.mc,!1,o,r,s,a):i.add(h)):s&&h instanceof Ra?i.add(h):!a||!h.$c()||h instanceof Na||i.add(h))}}function Ah(){I(this),this.fd=null,this.clear()}function Fh(t,i){if(null===i)return!1;var n=t.vertexes.remove(i);return n&&(t.By.remove(i.dc),i.network=null),n}function Oh(t,i){null!==i&&t.edges.remove(i)&&(t.oy.remove(i.link),i.network=null)}function zh(t){for(var i=E(),n=t.edges.i;n.next();){var e=n.value;null!==e.fromVertex&&null!==e.toVertex||i.push(e)}for(n=i.length,e=0;n>e;e++)t.yn(i[e]);R(i)}function Bh(t,i,n){if(null!==n&&n.network!==i){Fh(t,n),i.Wj(n);for(var e=n.Mb;e.next();){var o=e.value;o.network!==i&&(Oh(t,o),i.nn(o),Bh(t,i,o.fromVertex))}for(e=n.Gb;e.next();)n=e.value,n.network!==i&&(Oh(t,n),i.nn(n),Bh(t,i,n.toVertex))}}function qh(){I(this),this.network=null,this.P=new Si(0,0,10,10).freeze(),this.B=new wi(5,5).freeze(),this.clear()}function Eh(){I(this),this.network=null,this.clear()}function Rh(){0<arguments.length&&p(Rh),Lh.call(this),this.ev=!0,this.dr=this.er=0/0,this.ei=new Ti(0/0,0/0).freeze(),this.Ug=new Ti(10,10).freeze(),this.Md=zd,this.tc=Bd,this.Tg=Id,this.Bg=Fd}function Ih(){0<arguments.length&&p(Ih),Lh.call(this),this.uw=this.vm=this.Oc=0,this.Vo=360,this.tw=Vd,this.wj=0,this.Tz=Vd,this.Ws=this.Af=this.mB=0,this.su=new $h,this.Zs=this.bl=0,this.jE=600,this.pq=0/0,this.Bo=1,this.Qq=0,this.Sq=360,this.tc=Vd,this.aa=Yd,this.Tg=tv,this.Bg=Ad,this.Ug=6,this.cq=iv}function Gh(t,i,n,e,o){var r=t.Vo,s=t.Oc;t=t.Af,e=e*Math.PI/180,n=n*Math.PI/180;for(var a=i.length,h=0;a>h;h++){var l=e+(o===Yd?h*n/(r>=360?a:a-1):-(h*n)/a),u=i.Y(h),f=s*Math.tan(l)/t,f=Math.sqrt((s*s+t*t*f*f)/(1+f*f));u.ua=f*Math.cos(l),u.Da=f*Math.sin(l),u.actualAngle=180*l/Math.PI}}function Vh(t,i,n,e){var o=t.Oc,r=t.Af,s=t.wj;n=n*Math.PI/180;for(var a=i.length,h=0;a>h;h++){var l=i.Y(h),u=i.Y(h===a-1?0:h+1),f=r*Math.sin(n);l.ua=o*Math.cos(n),l.Da=f,l.actualAngle=180*n/Math.PI,isNaN(l.diameter)&&il(l,0),isNaN(u.diameter)&&il(u,0),l=Qh(t,o,r,e===Yd?n:-n,(l.diameter+u.diameter)/2+s),n+=e===Yd?l:-l}}function Hh(t,i,n,e){var o=t.Oc,r=t.Af,s=t.Ws;n=n*Math.PI/180;for(var a=i.length,h=0;a>h;h++){var l=i.Y(h);l.ua=o*Math.cos(n),l.Da=r*Math.sin(n),l.actualAngle=180*n/Math.PI,l=Qh(t,o,r,e===Yd?n:-n,s),n+=e===Yd?l:-l}}function Uh(t,i,n,e,o){var r=t.Zs,r=t.Vo;if(t.bl=0,t.su=new $h,360>n){for(r=e+(o===Yd?r:-r);0>r;)r+=360;r%=360,r>180&&(r-=360),r*=Math.PI/180,t.Zs=r,Yh(t,i,n,e,o)}else Kh(t,i,n,e,o);t.su.commit(i)}function Kh(t,i,n,e,o){var r=t.Oc,s=t.wj,a=t.vm,h=r*Math.cos(e*Math.PI/180),l=t.Af*Math.sin(e*Math.PI/180),u=i.ce();if(3===u.length)u[0].ua=r,u[0].Da=0,u[1].ua=u[0].ua-u[0].width/2-u[1].width/2-s,u[1].y=u[0].y,u[2].ua=(u[0].ua+u[1].ua)/2,u[2].y=u[0].y-u[2].height-s;else if(4===u.length)u[0].ua=r,u[0].Da=0,u[2].ua=-u[0].ua,u[2].Da=u[0].Da,u[1].ua=0,u[1].y=Math.min(u[0].y,u[2].y)-u[1].height-s,u[3].ua=0,u[3].y=Math.max(u[0].y+u[0].height+s,u[2].y+u[2].height+s);else{for(var r=C(),f=0;f<u.length&&(u[f].ua=h,u[f].Da=l,!(f>=u.length-1));f++)Wh(t,h,l,u,f,o,r)||Xh(t,h,l,u,f,o,r),h=r.x,l=r.y;if(P(r),t.bl++,!(23<t.bl)){var h=u[0].ua,l=u[0].Da,r=u[u.length-1].ua,f=u[u.length-1].Da,c=Math.abs(h-r)-((u[0].width+u[u.length-1].width)/2+s),p=Math.abs(l-f)-((u[0].height+u[u.length-1].height)/2+s),s=0;1>Math.abs(p)?Math.abs(h-r)<(u[0].width+u[u.length-1].width)/2&&(s=0):s=p>0?p:1>Math.abs(c)?0:c,c=!1,c=Math.abs(r)>Math.abs(f)?r>0!=l>f:f>0!=r>h,(c=o===Yd?c:!c)&&(s=-Math.abs(s),s=Math.min(s,-u[u.length-1].width),s=Math.min(s,-u[u.length-1].height)),t.su.compare(s,u),1<Math.abs(s)&&(t.Oc=8>t.bl?t.Oc-s/(2*Math.PI):5>u.length&&s>10?t.Oc/2:t.Oc-(s>0?1.7:-2.3),t.Af=t.Oc*a,Kh(t,i,n,e,o))}}}function Yh(t,i,n,e,o){for(var r=t.Oc,s=t.Af,a=t.vm,h=r*Math.cos(e*Math.PI/180),l=s*Math.sin(e*Math.PI/180),u=C(),f=i.ce(),c=0;c<f.length&&(f[c].ua=h,f[c].Da=l,!(c>=f.length-1));c++)Wh(t,h,l,f,c,o,u)||Xh(t,h,l,f,c,o,u),h=u.x,l=u.y;if(P(u),t.bl++,!(23<t.bl)){if(h=Math.atan2(l,h),h=o===Yd?t.Zs-h:h-t.Zs,h=Math.abs(h)<Math.abs(h-2*Math.PI)?h:h-2*Math.PI,r=h*(r+s)/2,s=t.su,Math.abs(r)<Math.abs(s.Dn))for(s.Dn=r,s.Vl=[],s.po=[],h=0;h<f.length;h++)s.Vl[h]=f[h].Qa.x,s.po[h]=f[h].Qa.y;1<Math.abs(r)&&(t.Oc=8>t.bl?t.Oc-r/(2*Math.PI):t.Oc-(r>0?1.7:-2.3),t.Af=t.Oc*a,Yh(t,i,n,e,o))}}function Wh(t,i,n,e,o,r,s){var a=t.Oc,h=t.Af,l=0,u=0;t=(e[o].width+e[o+1].width)/2+t.wj;var f=!1;if(n>=0!=(r===Yd)){if(l=i+t,l>a){if(l=i-t,-a>l)return s.x=l,s.y=u,!1;f=!0}}else if(l=i-t,-a>l){if(l=i+t,l>a)return s.x=l,s.y=u,!1;f=!0}return u=Math.sqrt(1-Math.min(1,l*l/(a*a)))*h,0>n!==f&&(u=-u),Math.abs(n-u)>(e[o].height+e[o+1].height)/2?(s.x=l,s.y=u,!1):(s.x=l,s.y=u,!0)}function Xh(t,i,n,e,o,r,s){var a=t.Oc,h=t.Af,l=0,u=0;if(t=(e[o].height+e[o+1].height)/2+t.wj,e=!1,i>=0!=(r===Yd)){if(u=n-t,-h>u){if(u=n+t,u>h)return s.x=l,void(s.y=u);e=!0}}else if(u=n+t,u>h){if(u=n-t,-h>u)return s.x=l,void(s.y=u);e=!0}l=Math.sqrt(1-Math.min(1,u*u/(h*h)))*a,0>i!==e&&(l=-l),s.x=l,s.y=u}function Jh(t,i,n,e,o){var r=t.jE;if(.001>Math.abs(t.vm-1))return void 0!==e&&void 0!==o?o*i:2*Math.PI*i;t=i>n?Math.sqrt(i*i-n*n)/i:Math.sqrt(n*n-i*i)/n;for(var s=0,a=0,a=void 0!==e&&void 0!==o?o/(r+1):Math.PI/(2*(r+1)),h=0,l=0;r>=l;l++)h=void 0!==e&&void 0!==o?e+l*o/r:l*Math.PI/(2*r),h=Math.sin(h),s+=Math.sqrt(1-t*t*h*h)*a;return void 0!==e&&void 0!==o?(i>n?i:n)*s:4*(i>n?i:n)*s}function Zh(t,i,n,e,o){var r=0,r=void 0!==e&&void 0!==o?Jh(t,1,n,e,o):Jh(t,1,n);return i/r}function Qh(t,i,n,e,o){if(.001>Math.abs(t.vm-1))return o/i;var r=i>n?Math.sqrt(i*i-n*n)/i:Math.sqrt(n*n-i*i)/n,s=0;t=2*Math.PI/(700*t.network.vertexes.count),i>n&&(e+=Math.PI/2);for(var a=0;;a++){var h=Math.sin(e+a*t),s=s+(i>n?i:n)*Math.sqrt(1-r*r*h*h)*t;if(s>=o)return a*t}}function $h(){this.Dn=-1/0,this.po=this.Vl=null}function _h(){Ah.call(this)}function tl(){qh.call(this),this.actualAngle=this.diameter=0/0}function il(t,i){var n=t.network;if(null===n)return 0/0;if(n=n.ub,null===n)return 0/0;if(n.Xe===Kd)if(n.lv===nv)t.diameter=Math.max(t.width,t.height);else{var n=Math.abs(Math.sin(i)),e=Math.abs(Math.cos(i));if(0===n)return t.width;if(0===e)return t.height;t.diameter=Math.min(t.height/n,t.width/e)}else t.diameter=n.lv===nv?Math.max(t.width,t.height):Math.sqrt(t.width*t.width+t.height*t.height);return t.diameter}function nl(){Eh.call(this)}function el(){0<arguments.length&&p(el),Lh.call(this),this.zf=null,this.zp=0,this.kf=new Ti(100,100).freeze(),this.Ao=!1,this.Sg=!0,this.Ag=!1,this.Sm=100,this.Xo=1,this.Kg=1e3,this.qq=Math,this.qm=.05,this.pm=50,this.mm=150,this.om=0,this.Ro=10,this.Qo=5}function ol(t,i,n){if(rl(t,i)){var e=t.Kg;t.Kg*=1+1/(i+1);var o=sl(t,i),r=Math.max(0,Math.max(Math.min(t.network.vertexes.count,n*(i+1)/11),10));for(t.qy+=r,ol(t,i+1,n),fl(t,r),al(t,o),i=t.zf,null===i?i=new ci(vl):i.clear(),i.md(o.vertexes),i.sort(function(t,i){return null===t||null===i||t===i?0:i.ef-t.ef}),o=i.i;o.next();)hl(t,o.value);t.Kg=e}}function rl(t,i){if(i>10||3>t.network.vertexes.count)return!1;null===t.zf?t.zf=new ci(vl):t.zf.clear(),t.zf.md(t.network.vertexes);var n=t.zf;n.sort(function(t,i){return null===t||null===i||t===i?0:i.ef-t.ef});for(var e=n.count-1;e>=0&&1>=n.Y(e).ef;)e--;return 1<n.count-e}function sl(t,i){for(var n=t.network,e=new dl,o=t.zf.i;o.next();){var r=o.value;if(!(1<r.ef))break;e.Wj(r);var s=new pl;s.Nv=r.ef,s.Qv=r.width,s.Mv=r.height,s.hz=r.B.x,s.iz=r.B.y,null===r.vg&&(r.vg=new ci(pl)),r.vg.add(s),r.Py=r.vg.count-1}for(var a=n.edges.i;a.next();)if(o=a.value,o.fromVertex.network===e&&o.toVertex.network===e)e.nn(o);else if(o.fromVertex.network===e){var h=o.fromVertex.yl;null===h&&(h=new ci(vl),o.fromVertex.yl=h),h.add(o.toVertex),o.fromVertex.ef--,o.fromVertex.bj+=o.toVertex.bj}else o.toVertex.network===e&&(h=o.toVertex.yl,null===h&&(h=new ci(vl),o.toVertex.yl=h),h.add(o.fromVertex),o.toVertex.ef--,o.toVertex.bj+=o.fromVertex.bj);for(o=e.edges.i;o.next();)r=o.value,r.length*=Math.max(1,Qf.sqrt((r.fromVertex.bj+r.toVertex.bj)/(4*i+1)));for(o=e.vertexes.i;o.next();)if(r=o.value,h=r.yl,null!==h&&0<h.count&&(s=r.vg.Y(r.vg.count-1),s=s.Nv-r.ef,!(0>=s))){for(var l=0,u=0,f=h.count-s;f<h.count;f++){for(var c=h.Y(f),p=null,a=c.edges.i;a.next();){var d=a.value;if(d.nF(c)===r){p=d;break}}null!==p&&(u+=p.length,l+=c.width*c.height)}h=r.ua,a=r.Da,f=r.width,c=r.height,p=r.B,d=f*c,1>d&&(d=1),l=Qf.sqrt((l+d+u*u*4/(s*s))/d),s=(l-1)*f/2,l=(l-1)*c/2,r.Qa=new Si(h-p.x-s,a-p.y-l,f+2*s,c+2*l),r.focus=new wi(p.x+s,p.y+l)}return t.network=e,n}function al(t,i){for(var n=t.network.vertexes.i;n.next();){var e=n.value;if(e.network=i,null!==e.vg){var o=e.vg.Y(e.Py);e.ef=o.Nv;var r=o.hz,s=o.iz;e.Qa=new Si(e.ua-r,e.Da-s,o.Qv,o.Mv),e.focus=new wi(r,s),e.Py--}}for(n=t.network.edges.i;n.next();)n.value.network=i;t.network=i}function hl(t,i){var n=i.yl;if(null!==n&&0!==n.count){var e=i.ua,o=i.Da,r=i.width,s=i.height;null!==i.vg&&0<i.vg.count&&(s=i.vg.Y(0),r=s.Qv,s=s.Mv);for(var r=Qf.sqrt(r*r+s*s)/2,a=!1,h=s=0,l=0,u=i.vertexes.i;u.next();){var f=u.value;1>=f.ef?h++:(a=!0,l++,s+=Math.atan2(i.Da-f.Da,i.ua-f.ua))}if(0!==h)for(l>0&&(s/=l),u=l=0,l=a?2*Math.PI/(h+1):2*Math.PI/h,0===h%2&&(u=l/2),1<n.count&&n.sort(function(t,i){return null===t||null===i||t===i?0:i.width*i.height-t.width*t.height}),a=0===h%2?0:1,n=n.i;n.next();)if(h=n.value,!(1<h.ef||t.isFixed(h))){for(var f=null,c=h.edges.i;c.next();){f=c.value;break}var c=h.width,p=h.height,c=Qf.sqrt(c*c+p*p)/2,f=r+f.length+c,c=s+(l*(a/2>>1)+u)*(0===a%2?1:-1);h.ua=e+f*Math.cos(c),h.Da=o+f*Math.sin(c),a++}}}function ll(t,i,n,e,o,r,s){var a=9e19,h=-1,l=0;t:for(;i>l;l++){var u=t[l],f=u.x-n,c=u.y-e,f=f*f+c*c;if(a>f){for(c=l-1;c>=0;c--)if(t[c].y>u.y&&t[c].x-u.x<o+s.width)continue t;for(c=l+1;i>c;c++)if(t[c].x>u.x&&t[c].y-u.y<r+s.height)continue t;h=l,a=f}}return h}function ul(t,i){var n=t.P,e=n.x,o=n.y,r=n.width,n=n.height,s=i.P,a=s.x,h=s.y,l=s.width,s=s.height;return a>e+r?o>h+s?(e=e+r-a,o=o-h-s,Qf.sqrt(e*e+o*o)):h>o+n?(e=e+r-a,o=o+n-h,Qf.sqrt(e*e+o*o)):a-(e+r):e>a+l?o>h+s?(e=e-a-l,o=o-h-s,Qf.sqrt(e*e+o*o)):h>o+n?(e=e-a-l,o=o+n-h,Qf.sqrt(e*e+o*o)):e-(a+l):o>h+s?o-(h+s):h>o+n?h-(o+n):.1}function fl(t,i){t.zf=null;for(var n=t.zp+i;t.zp<n&&(t.zp++,cl(t)););t.zf=null}function cl(t){null===t.zf&&(t.zf=new ci(vl),t.zf.md(t.network.vertexes));var i=t.zf.l;if(0>=i.length)return!1;var n=i[0];n.forceX=0,n.forceY=0;for(var e=n.ua,o=e,r=n.Da,s=r,n=1;n<i.length;n++){var a=i[n];a.forceX=0,a.forceY=0;var h=a.ua,a=a.Da,e=Math.min(e,h),o=Math.max(o,h),r=Math.min(r,a),s=Math.max(s,a)}i.sort((r=o-e>s-r)?function(t,i){return null===t||null===i||t===i?0:t.ua-i.ua}:function(t,i){return null===t||null===i||t===i?0:t.Da-i.Da});for(var s=t.Kg,l=0,u=0,f=0,n=0;n<i.length;n++){var a=i[n],h=a.P,c=a.B,e=h.x+c.x,h=h.y+c.y,u=a.charge*t.electricalFieldX(e,h),f=a.charge*t.electricalFieldY(e,h),u=u+a.mass*t.gravitationalFieldX(e,h),f=f+a.mass*t.gravitationalFieldY(e,h);for(a.forceX+=u,a.forceY+=f,c=n+1;c<i.length;c++)if(o=i[c],o!==a){var p=o.P,u=o.B,f=p.x+u.x,p=p.y+u.y;if(e-f>s||f-e>s){if(r)break}else if(h-p>s||p-h>s){if(!r)break}else{var d=ul(a,o);1>d?(u=t.sv,null===u&&(t.sv=u=new ai(0)),l=u.random(),d=u.random(),e>f?(u=Math.abs(o.P.right-a.P.x),u=(1+u)*l):f>e?(u=Math.abs(o.P.x-a.P.right),u=-(1+u)*l):(u=Math.max(o.width,a.width),u=(1+u)*l-u/2),h>p?(f=Math.abs(o.P.bottom-a.P.y),f=(1+f)*d):f>e?(f=Math.abs(o.P.y-a.P.bottom),f=-(1+f)*d):(f=Math.max(o.height,a.height),f=(1+f)*d-f/2)):(l=-(a.charge*o.charge)/(d*d),u=(f-e)/d*l,f=(p-h)/d*l),a.forceX+=u,a.forceY+=f,o.forceX-=u,o.forceY-=f}}}for(n=t.network.edges.i;n.next();)r=n.value,a=r.fromVertex,o=r.toVertex,h=a.P,c=a.B,e=h.x+c.x,h=h.y+c.y,p=o.P,u=o.B,f=p.x+u.x,p=p.y+u.y,d=ul(a,o),1>d?(u=t.sv,null===u&&(t.sv=u=new ai(0)),l=u.random(),d=u.random(),u=(e>f?1:-1)*(1+(o.width>a.width)?o.width:a.width)*l,f=(h>p?1:-1)*(1+(o.height>a.height)?o.height:a.height)*d):(l=r.stiffness*(d-r.length),u=(f-e)/d*l,f=(p-h)/d*l),a.forceX+=u,a.forceY+=f,o.forceX-=u,o.forceY-=f;for(n=0,e=Math.max(t.Kg/20,50),o=0;o<i.length;o++)a=i[o],t.isFixed(a)?t.moveFixedVertex(a):(r=a.forceX,s=a.forceY,-e>r?r=-e:r>e&&(r=e),-e>s?s=-e:s>e&&(s=e),a.ua+=r,a.Da+=s,n=Math.max(n,r*r+s*s));return n>t.ZB*t.ZB}function pl(){this.iz=this.hz=this.Mv=this.Qv=this.Nv=0}function dl(){Ah.call(this)}function vl(){qh.call(this),this.isFixed=!1,this.mass=this.charge=0/0,this.bj=this.ef=this.forceY=this.forceX=0,this.vg=this.yl=null,this.Py=0}function yl(){Eh.call(this),this.length=this.stiffness=0/0}function gl(){0<arguments.length&&p(gl),Lh.call(this),this.Nc=this.Xk=25,this.aa=0,this.lm=ev,this.Qm=rv,this.Fm=hv,this.Uk=4,this.am=cv,this.Ch=gv,this.Sg=!0,this.si=4,this.mb=this.Gt=this.Pa=-1,this.Te=this.Rp=0,this.pb=this.Se=this.qf=this.ag=this.dd=null,this.Yp=0,this.Xp=this.Zk=null,this.tf=0,this.Zp=null,this.cg=[],this.cg.length=100}function ml(t){var i=t.fromVertex.Fc;return t=t.toVertex.Fc,null===i&&null===t?8:null===i||null===t?4:1}function xl(t){null===t.Zk&&(t.Zk=[]);for(var i=0,n=t.network.vertexes.i;n.next();){var e=n.value;t.Zk[i]=e.layer,i++,t.Zk[i]=e.column,i++,t.Zk[i]=e.index,i++}return t.Zk}function bl(t,i){for(var n=0,e=t.network.vertexes.i;e.next();){var o=e.value;o.layer=i[n],n++,o.column=i[n],n++,o.index=i[n],n++}}function wl(t,i,n){var e=Xl(t,i),o=t.dd[i];(null===t.Xp||t.Xp.length<o*o)&&(t.Xp=[]);for(var r=t.Xp,s=0;o>s;s++){var a=0,h=e[s],l=h.near,u=0;if(null!==l&&l.layer===h.layer)if(u=l.index,u>s)for(var f=s+1;u>f;f++)h=e[f],h.near===l&&h.vl===l.vl||a++;else for(f=s-1;f>u;f--)h=e[f],h.near===l&&h.vl===l.vl||a++;var c,p,l=0,d=c=f=h=0,v=0,y=0;p=0;var g;if(n>=0)for(u=e[s].ae,l=0;l<u.count;l++)if(c=u.l[l],c.valid&&c.fromVertex.layer!==i)for(h=c.fromVertex.index,f=c.portToPos,c=c.portFromPos,d=l+1;d<u.count;d++)p=u.l[d],p.valid&&p.fromVertex.layer!==i&&(v=p.fromVertex.index,y=p.portToPos,p=p.portFromPos,y>f&&(h>v||h===v&&c>p)&&a++,f>y&&(v>h||v===h&&p>c)&&a++);if(0>=n)for(u=e[s].Vd,l=0;l<u.count;l++)if(c=u.l[l],c.valid&&c.toVertex.layer!==i)for(h=c.toVertex.index,f=c.portToPos,c=c.portFromPos,d=l+1;d<u.count;d++)p=u.l[d],p.valid&&p.toVertex.layer!==i&&(v=p.toVertex.index,y=p.portToPos,p=p.portFromPos,p>c&&(h>v||h===v&&f>y)&&a++,c>p&&(v>h||v===h&&y>f)&&a++);for(r[s*o+s]=a,u=s+1;o>u;u++){var m=0,x=0;if(n>=0)for(a=e[s].ae,g=e[u].ae,l=0;l<a.count;l++)if(c=a.l[l],c.valid&&c.fromVertex.layer!==i)for(h=c.fromVertex.index,c=c.portFromPos,d=0;d<g.count;d++)p=g.l[d],p.valid&&p.fromVertex.layer!==i&&(v=p.fromVertex.index,p=p.portFromPos,(v>h||h===v&&p>c)&&x++,(h>v||v===h&&c>p)&&m++);if(0>=n)for(a=e[s].Vd,g=e[u].Vd,l=0;l<a.count;l++)if(c=a.l[l],c.valid&&c.toVertex.layer!==i)for(h=c.toVertex.index,f=c.portToPos,d=0;d<g.count;d++)p=g.l[d],p.valid&&p.toVertex.layer!==i&&(v=p.toVertex.index,y=p.portToPos,(v>h||h===v&&y>f)&&x++,(h>v||v===h&&f>y)&&m++);r[s*o+u]=m,r[u*o+s]=x}}return Jl(t,i,e),r}function kl(t){for(var i=0,n=0;n<=t.Pa;n++){for(var e=t,o=n,r=Xl(e,o),s=e.dd[o],a=0,h=0;s>h;h++){var l,u=null,u=r[h].Vd,f=0,c=0;if(null!==u)for(var p=0;p<u.count;p++)l=u.l[p],l.valid&&l.toVertex.layer!==o&&(f=l.fromVertex.column+l.portFromColOffset,c=l.toVertex.column+l.portToColOffset,a+=(Math.abs(f-c)+1)*ml(l))}Jl(e,o,r),i+=a}return i}function Ml(t,i,n){for(var e=Xl(t,i),o=t.dd[i],r=[],s=0;o>s;s++){var a=e[s],h=null;0>=n&&(h=a.ae);var l=null;n>=0&&(l=a.Vd);var u=0,f=0,c=a.near;if(null!==c&&c.layer===a.layer&&(u+=c.column-1,f++),null!==h)for(c=0;c<h.count;c++){var a=h.l[c],p=a.fromVertex;a.valid&&!a.rev&&p.layer!==i&&(u+=p.column+a.portFromColOffset,f++)}if(null!==l)for(h=0;h<l.count;h++)a=l.l[h],c=a.toVertex,a.valid&&!a.rev&&c.layer!==i&&(u+=c.column+a.portToColOffset,f++);r[s]=0===f?-1:u/f}return Jl(t,i,e),r}function Tl(t,i,n){for(var e=Xl(t,i),o=t.dd[i],r=[],s=0;o>s;s++){var a=e[s],h=null;0>=n&&(h=a.ae);var l=null;n>=0&&(l=a.Vd);var u=0,f=[],c=a.near;if(null!==c&&c.layer===a.layer&&(f[u]=c.column-1,u++),null!==h)for(c=0;c<h.count;c++){var a=h.l[c],p=a.fromVertex;a.valid&&!a.rev&&p.layer!==i&&(f[u]=p.column+a.portFromColOffset,u++)}if(null!==l)for(h=0;h<l.count;h++)a=l.l[h],c=a.toVertex,a.valid&&!a.rev&&c.layer!==i&&(f[u]=c.column+a.portToColOffset,u++);0===u?r[s]=-1:(f.sort(function(t,i){return t-i}),l=u>>1,r[s]=1&u?f[l]:f[l-1]+f[l]>>1)}return Jl(t,i,e),r}function Sl(t,i,n,e,o,r){if(i.component===e){i.component=n;var s=0,a=0;if(o)for(var h=i.Gb;h.next();){var a=h.value,l=a.toVertex,s=i.layer-l.layer,a=t.linkMinLength(a);s===a&&Sl(t,l,n,e,o,r)}if(r)for(h=i.Mb;h.next();)a=h.value,l=a.fromVertex,s=l.layer-i.layer,a=t.linkMinLength(a),s===a&&Sl(t,l,n,e,o,r)}}function Cl(t,i,n,e,o,r){if(i.component===e){if(i.component=n,o)for(var s=i.Gb;s.next();)Cl(t,s.value.toVertex,n,e,o,r);if(r)for(i=i.Mb;i.next();)Cl(t,i.value.fromVertex,n,e,o,r)}}function Nl(t){for(t=t.vertexes.i;t.next();){var i=t.value;if(i.valid)return i}return null}function Pl(t){for(t=t.vertexes.i;t.next();){var i=t.value;if(i.valid){for(var n=!0,e=i.Gb;e.next();)if(e.value.toVertex.valid){n=!1;break}if(n)return i}}return null}function jl(t){for(t=t.vertexes.i;t.next();){var i=t.value;if(i.valid){for(var n=!0,e=i.Mb;e.next();)if(e.value.fromVertex.valid){n=!1;break}if(n)return i}}return null}function Ll(t,i){i.zn=t.Yp,t.Yp++;for(var n=i.Gb;n.next();){var e=n.value,o=e.toVertex;-1===o.zn&&(e.forest=!0,Ll(t,o))}i.finish=t.Yp,t.Yp++}function Dl(t){for(var i=t.network.vertexes.i;i.next();){var n=Al(t,i.value);t.Pa=Math.max(n,t.Pa)}}function Al(t,i){var n=0;if(-1===i.layer){for(var e=i.Gb;e.next();)var o=e.value,r=o.toVertex,o=t.linkMinLength(o),n=Math.max(n,Al(t,r)+o);i.layer=n}else n=i.layer;return n}function Fl(t,i){var n=0;if(-1===i.layer){for(var e=i.Mb;e.next();)var o=e.value,r=o.fromVertex,o=t.linkMinLength(o),n=Math.max(n,Fl(t,r)+o);i.layer=n}else n=i.layer;return n}function Ol(t,i){if(!i.valid){i.valid=!0;for(var n=i.Gb;n.next();)Ol(t,n.value.toVertex);for(n=t.network.vertexes.i;n.next();)n.value.component=-1;for(var e=i.ae.l,o=e.length,r=0;o>r;r++){var s=e[r],a=t.linkMinLength(s);s.fromVertex.layer-s.toVertex.layer>a&&Sl(t,s.fromVertex,0,-1,!0,!1)}for(Sl(t,i,1,-1,!0,!0);0!==i.component;){for(var a=0,e=1/0,h=0,l=null,u=t.network.vertexes.i;u.next();){var f=u.value;if(1===f.component){for(var c=0,p=!1,d=f.ae.l,o=d.length,r=0;o>r;r++){var s=d[r],v=s.fromVertex,c=c+1;1!==v.component&&(a+=1,v=v.layer-f.layer,s=t.linkMinLength(s),e=Math.min(e,v-s))}for(s=f.Vd.l,o=s.length,r=0;o>r;r++)d=s[r].toVertex,c-=1,1!==d.component?a-=1:p=!0;(null===l||h>c)&&!p&&(l=f,h=c)}}if(a>0){for(n.reset();n.next();)o=n.value,1===o.component&&(o.layer+=e);i.component=0}else l.component=0}for(n=t.network.vertexes.i;n.next();)n.value.component=-1;for(Sl(t,i,1,-1,!0,!1);0!==i.component;){for(r=0,o=1/0,e=0,a=null,h=t.network.vertexes.i;h.next();)if(l=h.value,1===l.component){for(u=0,f=!1,s=l.ae.l,c=s.length,p=0;c>p;p++)d=s[p].fromVertex,u+=1,1!==d.component?r+=1:f=!0;for(s=l.Vd.l,c=s.length,p=0;c>p;p++)d=s[p],v=d.toVertex,u-=1,1!==v.component&&(r-=1,v=l.layer-v.layer,d=t.linkMinLength(d),o=Math.min(o,v-d));(null===a||u>e)&&!f&&(a=l,e=u)}if(0>r){for(n.reset();n.next();)r=n.value,1===r.component&&(r.layer-=o);i.component=0}else a.component=0}}}function zl(t,i,n){return 90===t.aa?n&&!i.rev||!n&&i.rev?270:90:180===t.aa?n&&!i.rev||!n&&i.rev?0:180:270===t.aa?n&&!i.rev||!n&&i.rev?90:270:n&&!i.rev||!n&&i.rev?180:0}function Bl(t,i){var n=i.layer;i.index=t.dd[n],t.dd[n]++;for(var n=i.Vd.ce(),e=!0;e;)for(var e=!1,o=0;o<n.length-1;o++){var r=n[o],s=n[o+1];r.portFromColOffset>s.portFromColOffset&&(e=!0,n[o]=s,n[o+1]=r)}for(o=0;o<n.length;o++)e=n[o],e.valid&&(e=e.toVertex,-1===e.index&&Bl(t,e))}function ql(t,i){var n=i.layer;i.index=t.dd[n],t.dd[n]++;for(var n=i.ae.ce(),e=!0,o=0;e;)for(e=!1,o=0;o<n.length-1;o++){var r=n[o],s=n[o+1];r.portToColOffset>s.portToColOffset&&(e=!0,n[o]=s,n[o+1]=r)}for(o=0;o<n.length;o++)e=n[o],e.valid&&(e=e.fromVertex,-1===e.index&&ql(t,e))}function El(t,i,n){var e=0,o=Xl(t,i),r=t.dd[i],s=Tl(t,i,n);for(n=Ml(t,i,n),e=0;r>e;e++)-1===n[e]&&(n[e]=o[e].column),-1===s[e]&&(s[e]=o[e].column);for(var a,h=!0;h;)for(h=!1,e=0;r-1>e;e++)(s[e+1]<s[e]||s[e+1]===s[e]&&n[e+1]<n[e])&&(h=!0,a=s[e],s[e]=s[e+1],s[e+1]=a,a=n[e],n[e]=n[e+1],n[e+1]=a,a=o[e],o[e]=o[e+1],o[e+1]=a);for(e=s=0;r>e;e++)a=o[e],a.index=e,s+=t.nodeMinColumnSpace(a,!0),a.column=s,s+=1,s+=t.nodeMinColumnSpace(a,!1);Jl(t,i,o)}function Rl(t,i,n){var e=Xl(t,i),o=t.dd[i];n=wl(t,i,n);var r,s=0;for(r=[],s=0;o>s;s++)r[s]=-1;var a;for(a=[],s=0;o>s;s++)a[s]=-1;for(var h=!1,l=!0;l;)for(l=!1,s=0;o-1>s;s++){var u=n[e[s].index*o+e[s+1].index],f=n[e[s+1].index*o+e[s].index],c=0,p=0,d=e[s].column,v=e[s+1].column,y=t.nodeMinColumnSpace(e[s],!0),g=t.nodeMinColumnSpace(e[s],!1),m=t.nodeMinColumnSpace(e[s+1],!0),x=t.nodeMinColumnSpace(e[s+1],!1),y=d-y+m,g=v-g+x,m=m=0,b=e[s].Mb.i;for(b.reset();b.next();)if(x=b.value,x.valid&&x.fromVertex.layer===i){for(x=x.fromVertex,m=0;e[m]!==x;)m++;s>m&&(c+=2*(s-m),p+=2*(s+1-m)),m===s+1&&(c+=1),m>s+1&&(c+=4*(m-s),p+=4*(m-(s+1)))}for(b=e[s].Gb.i,b.reset();b.next();)if(x=b.value,x.valid&&x.toVertex.layer===i){for(x=x.toVertex,m=0;e[m]!==x;)m++;m===s+1&&(p+=1)}for(b=e[s+1].Mb.i,b.reset();b.next();)if(x=b.value,x.valid&&x.fromVertex.layer===i){for(x=x.fromVertex,m=0;e[m]!==x;)m++;s>m&&(c+=2*(s+1-m),p+=2*(s-m)),m===s&&(p+=1),m>s+1&&(c+=4*(m-(s+1)),p+=4*(m-s))}for(b=e[s+1].Gb.i,b.reset();b.next();)if(x=b.value,x.valid&&x.toVertex.layer===i){for(x=x.toVertex,m=0;e[m]!==x;)m++;m===s&&(c+=1)}var m=x=0,b=r[e[s].index],w=a[e[s].index],k=r[e[s+1].index],M=a[e[s+1].index];-1!==b&&(x+=Math.abs(b-d),m+=Math.abs(b-g)),-1!==w&&(x+=Math.abs(w-d),m+=Math.abs(w-g)),-1!==k&&(x+=Math.abs(k-v),m+=Math.abs(k-y)),-1!==M&&(x+=Math.abs(M-v),m+=Math.abs(M-y)),(c-.5>p||p===c&&u-.5>f||p===c&&f===u&&x-.5>m)&&(l=h=!0,e[s].column=g,e[s+1].column=y,u=e[s],e[s]=e[s+1],e[s+1]=u)}for(s=0;o>s;s++)e[s].index=s;return Jl(t,i,e),h}function Il(t,i,n){for(var e=!1;Gl(t,i,n);)e=!0;return e}function Gl(t,i,n){var e=0,o=Xl(t,i),r=t.dd[i],s=Ml(t,i,-1);if(n>0)for(e=0;r>e;e++)s[e]=-1;var a=Ml(t,i,1);if(0>n)for(e=0;r>e;e++)a[e]=-1;for(var h=!1,l=!0;l;)for(l=!1,e=0;r>e;e++){var u=o[e].column,f=t.nodeMinColumnSpace(o[e],!0),c=t.nodeMinColumnSpace(o[e],!1),p=0,p=0>e-1||u-o[e-1].column-1>f+t.nodeMinColumnSpace(o[e-1],!1)?u-1:u,f=0,f=e+1>=r||o[e+1].column-u-1>c+t.nodeMinColumnSpace(o[e+1],!0)?u+1:u,d=c=0,v=0,y=0,g=0,m=0;if(0>=n)for(var x=o[e].Mb.i;x.next();){var b=x.value;b.valid&&b.fromVertex.layer!==i&&(y=ml(b),g=b.portFromColOffset,m=b.portToColOffset,b=b.fromVertex.column,c+=(Math.abs(u+m-(b+g))+1)*y,d+=(Math.abs(p+m-(b+g))+1)*y,v+=(Math.abs(f+m-(b+g))+1)*y)}if(n>=0)for(x=o[e].Gb.i;x.next();)b=x.value,b.valid&&b.toVertex.layer!==i&&(y=ml(b),g=b.portFromColOffset,m=b.portToColOffset,b=b.toVertex.column,c+=(Math.abs(u+g-(b+m))+1)*y,d+=(Math.abs(p+g-(b+m))+1)*y,v+=(Math.abs(f+g-(b+m))+1)*y);m=g=y=0,x=s[o[e].index],b=a[o[e].index],-1!==x&&(y+=Math.abs(x-u),g+=Math.abs(x-p),m+=Math.abs(x-f)),-1!==b&&(y+=Math.abs(b-u),g+=Math.abs(b-p),m+=Math.abs(b-f)),(c>d||d===c&&y>g)&&(l=h=!0,o[e].column=p),(c>v||v===c&&y>m)&&(l=h=!0,o[e].column=f)}return Jl(t,i,o),t.normalize(),h}function Vl(t,i,n){var e=0,o=Xl(t,i),r=t.dd[i],s=Tl(t,i,n);for(n=[],e=0;r>e;e++)n[e]=s[e];for(s=!0;s;)for(s=!1,e=0;r>e;e++){var a=o[e].column,h=t.nodeMinColumnSpace(o[e],!0),l=t.nodeMinColumnSpace(o[e],!1),u=0,f=0,c=0,c=f=0;
-1===n[e]?0===e&&e===r-1?u=a:0===e?(f=o[e+1].column,u=f-a===l+t.nodeMinColumnSpace(o[e+1],!0)?a-1:a):e===r-1?(c=o[e-1].column,u=a-c===h+t.nodeMinColumnSpace(o[e-1],!1)?a+1:a):(c=o[e-1].column,c=c+t.nodeMinColumnSpace(o[e-1],!1)+h+1,f=o[e+1].column,f=f-t.nodeMinColumnSpace(o[e+1],!0)-l-1,u=(c+f)/2|0):0===e&&e===r-1?u=n[e]:0===e?(f=o[e+1].column,f=f-t.nodeMinColumnSpace(o[e+1],!0)-l-1,u=Math.min(n[e],f)):e===r-1?(c=o[e-1].column,c=c+t.nodeMinColumnSpace(o[e-1],!1)+h+1,u=Math.max(n[e],c)):(c=o[e-1].column,c=c+t.nodeMinColumnSpace(o[e-1],!1)+h+1,f=o[e+1].column,f=f-t.nodeMinColumnSpace(o[e+1],!0)-l-1,c<n[e]&&n[e]<f?u=n[e]:c>=n[e]?u=c:f<=n[e]&&(u=f)),u!==a&&(s=!0,o[e].column=u)}Jl(t,i,o),t.normalize()}function Hl(t,i){for(var n=!0,e=t.network.vertexes.i;e.next();){var o=e.value,r=t.nodeMinColumnSpace(o,!0),s=t.nodeMinColumnSpace(o,!1);if(o.column-r<=i&&o.column+s>=i){n=!1;break}}if(o=!1,n)for(e.reset();e.next();)n=e.value,n.column>i&&(n.column-=1,o=!0);return o}function Ul(t,i){for(var n=i,n=i+1,e=0,o=[],r=[],e=0;e<=t.Pa;e++)o[e]=!1,r[e]=!1;for(var s=t.network.vertexes.i;s.next();){var e=s.value,a=e.column-t.nodeMinColumnSpace(e,!0),h=e.column+t.nodeMinColumnSpace(e,!1);i>=a&&h>=i&&(o[e.layer]=!0),n>=a&&h>=n&&(r[e.layer]=!0)}for(a=!0,n=!1,e=0;e<=t.Pa;e++)a=a&&!(o[e]&&r[e]);if(a)for(s.reset();s.next();)o=s.value,o.column>i&&(o.column-=1,n=!0);return n}function Kl(t,i){for(var n=0;n<=t.mb;n++)for(;Hl(t,n););for(t.normalize(),n=0;n<t.mb;n++)for(;Ul(t,n););t.normalize();var e,n=0,o=0,r=0,s=0;if(i>0)for(n=0;n<=t.mb;n++)for(e=xl(t),o=kl(t),r=o+1;r>o;)r=o,Yl(t,n,1),s=kl(t),s>o?bl(t,e):o>s&&(o=s,e=xl(t));if(0>i)for(n=t.mb;n>=0;n--)for(e=xl(t),o=kl(t),r=o+1;r>o;)r=o,Yl(t,n,-1),s=kl(t),s>o?bl(t,e):o>s&&(o=s,e=xl(t));t.normalize()}function Yl(t,i,n){t.tf=0;for(var e=t.network.vertexes.i;e.next();)e.value.component=-1;if(n>0)for(e.reset();e.next();){var o=e.value;o.column-t.nodeMinColumnSpace(o,!0)<=i&&(o.component=t.tf)}if(0>n)for(e.reset();e.next();)o=e.value,o.column+t.nodeMinColumnSpace(o,!1)>=i&&(o.component=t.tf);for(t.tf++,e.reset();e.next();)i=e.value,-1===i.component&&(Cl(t,i,t.tf,-1,!0,!0),t.tf++);var r=0;for(i=[],r=0;r<t.tf*t.tf;r++)i[r]=!1;for(o=[],r=0;r<(t.Pa+1)*(t.mb+1);r++)o[r]=-1;for(e.reset();e.next();)for(var r=e.value,s=r.layer,a=Math.max(0,r.column-t.nodeMinColumnSpace(r,!0)),h=Math.min(t.mb,r.column+t.nodeMinColumnSpace(r,!1));h>=a;a++)o[s*(t.mb+1)+a]=r.component;for(r=0;r<=t.Pa;r++){if(n>0)for(a=0;a<t.mb;a++)-1!==o[r*(t.mb+1)+a]&&-1!==o[r*(t.mb+1)+a+1]&&o[r*(t.mb+1)+a]!==o[r*(t.mb+1)+a+1]&&(i[o[r*(t.mb+1)+a]*t.tf+o[r*(t.mb+1)+a+1]]=!0);if(0>n)for(a=t.mb;a>0;a--)-1!==o[r*(t.mb+1)+a]&&-1!==o[r*(t.mb+1)+a-1]&&o[r*(t.mb+1)+a]!==o[r*(t.mb+1)+a-1]&&(i[o[r*(t.mb+1)+a]*t.tf+o[r*(t.mb+1)+a-1]]=!0)}for(o=[],r=0;r<t.tf;r++)o[r]=!0;for(s=new ci("number"),s.add(0),h=0;0!==s.count;)if(h=s.l[s.count-1],s.Dc(s.count-1),o[h])for(o[h]=!1,r=0;r<t.tf;r++)i[h*t.tf+r]&&s.qd(0,r);if(n>0)for(e.reset();e.next();)t=e.value,o[t.component]&&(t.column-=1);if(0>n)for(e.reset();e.next();)n=e.value,o[n.component]&&(n.column+=1)}function Wl(t,i){return 270===t.aa?i?Lf:Ff:90===t.aa?i?Ff:Lf:180===t.aa?i?Df:Af:i?Af:Df}function Xl(t,i){var n,e=t.dd[i];if(e>=t.cg.length){n=[];for(var o=0;o<t.cg.length;o++)n[o]=t.cg[o];t.cg=n}for(void 0===t.cg[e]||null===t.cg[e]?n=[]:(n=t.cg[e],t.cg[e]=null),e=t.Zp[i],o=0;o<e.length;o++){var r=e[o];n[r.index]=r}return n}function Jl(t,i,n){t.cg[t.dd[i]]=n}function Zl(){this.index=this.od=this.Ud=this.ad=this.first=this.layer=0,this.link=null,this.eh=0}function Ql(){Ah.call(this)}function $l(){qh.call(this),this.index=this.column=this.layer=-1,this.component=0/0,this.near=null,this.valid=!1,this.finish=this.zn=0/0,this.vl=0,this.yy=this.zy=null}function _l(){Eh.call(this),this.forest=this.rev=this.valid=!1,this.portToPos=this.portFromPos=0/0,this.portToColOffset=this.portFromColOffset=0}function tu(){0<arguments.length&&p(tu),Lh.call(this),this.Ic=new di(Object),this.jq=mv,this.Re=xv,this.Zq=zv,this.Dt=Vv,this.oz=null,this.Ag=!0,this.tc=Rv,this.kf=new Ti(10,10).freeze(),this.fa=new Au,this.ea=new Au,this.ox=[]}function iu(t,i){if(null!==i){switch(t.Re){case xv:if(0<i.Gb.count){for(var n=new ci(Au),e=i.ZE;e.next();){var o=e.value;nu(t,i,o)&&n.add(o)}0<n.count&&(i.children=n.ce())}break;case bv:if(0<i.Mb.count){for(n=new ci(Au),e=i.PG;e.next();)o=e.value,nu(t,i,o)&&n.add(o);0<n.count&&(i.children=n.ce())}break;default:r("Unhandled path value"+t.Re.toString())}for(n=i.children,e=n.length,o=0;e>o;o++){var s=n[o];s.initialized=!0,s.level=i.level+1,s.parent=i,t.Ic.remove(s)}for(o=0;e>o;o++)s=n[o],iu(t,s)}}function nu(t,i,n){if(n.initialized){var e;if(null===i)e=!1;else{for(e=i.parent;null!==e&&e!==n;)e=e.parent;e=e===n}if(e||n.level>i.level)return!1;t.removeChild(n.parent,n)}return!0}function eu(t,i){if(null!==i){t.initializeTreeVertexValues(i),i.alignment===Lv&&t.sortTreeVertexChildren(i);for(var n=0,e=i.xl,o=0,r=i.children,s=r.length,a=0;s>a;a++){var h=r[a];eu(t,h),n+=h.descendantCount+1,e=Math.max(e,h.maxChildrenCount),o=Math.max(o,h.maxGenerationCount)}i.descendantCount=n,i.maxChildrenCount=e,i.maxGenerationCount=e>0?o+1:0}}function ou(t,i){switch(t.Zq){default:case zv:return null!==i.parent?i.parent:t.fa;case Ev:return null===i.parent?t.fa:null===i.parent.parent?t.ea:i.parent;case qv:if(null!==i.parent)return null!==i.parent.parent?i.parent.parent:t.ea;case Bv:var n=!0;if(0===i.xl)n=!1;else for(var e=i.children,o=e.length,r=0;o>r;r++)if(0<e[r].xl){n=!1;break}return n&&null!==i.parent?t.ea:null!==i.parent?i.parent:t.fa}}function ru(t,i){if(null!==i){t.assignTreeVertexValues(i);for(var n=i.children,e=n.length,o=0;e>o;o++)ru(t,n[o])}}function su(t,i){if(null!==i){i.alignment!==Lv&&t.sortTreeVertexChildren(i);for(var n=i.children,e=n.length,o=0;e>o;o++)su(t,n[o])}}function au(t){return t===jv||t===Lv||t===Dv||t===Av}function hu(t){return t===jv||t===Lv}function lu(t){var i=t.parent;if(null!==i){var n=i.alignment;if(au(n)){if(hu(n)){for(i=i.children,n=0;n<i.length&&t!==i[n];)n++;return 0===n%2}if(n===Dv)return!0}}return!1}function uu(t,i){if(0===i.xl){var n=!1,e=0,o=Cv;null!==i.parent&&(e=i.parent.angle,o=i.parent.alignment,n=au(o)),o=lu(i),i.W.k(0,0),i.Ha.k(i.width,i.height),null===i.parent||null===i.comments||(180!==e&&270!==e||n)&&!o?i.ta.k(0,0):180===e&&!n||(90===e||270===e)&&o?i.ta.k(i.width-2*i.B.x,0):i.ta.k(0,i.height-2*i.B.y)}else{for(var n=Pu(i),e=90===n||270===n,s=0,o=i.children,a=o.length,h=0;a>h;h++)var l=o[h],s=Math.max(s,e?l.Ha.width:l.Ha.height);var u=i.alignment,f=u===Nv,c=u===Pv,p=au(u),d=Math.max(0,i.breadthLimit),v=ju(i),y=i.nodeSpacing,g=Lu(i),m=f||c?0:g/2,x=i.rowSpacing,b=0;(f||c||i.eo||i.fo&&1===i.maxGenerationCount)&&(b=Math.max(0,i.rowIndent));var f=i.width,w=i.height,k=0,M=0,T=0,S=0,C=0,N=0,P=0,j=0,L=0,D=0;if(p&&!hu(u)&&n>135&&o.reverse(),hu(u))if(a>1)for(h=0;a>h;h++){var l=o[h],A=l.Ha;0===h%2&&h!==a-1?L=Math.max(L,(e?A.width:A.height)+pu(l)-y):0!==h%2&&(D=Math.max(D,(e?A.width:A.height)+pu(l)-y))}else 1===a&&(L=e?o[0].Ha.width:o[0].Ha.height);if(p)switch(u){case jv:case Lv:M=135>n?fu(i,o,L,k,M):cu(i,o,L,k,M),L=M.x,k=M.width,M=M.height;break;case Dv:for(h=0;a>h;h++)l=o[h],A=l.Ha,d=0===P?0:x,e?(l.W.k(s-A.width,C+d),k=Math.max(k,A.width),M=Math.max(M,C+d+A.height),C+=d+A.height):(l.W.k(S+d,s-A.height),k=Math.max(k,S+d+A.width),M=Math.max(M,A.height),S+=d+A.width),P++;break;case Av:for(s=0;a>s;s++)l=o[s],A=l.Ha,d=0===P?0:x,e?(l.W.k(y/2+i.B.x,C+d),k=Math.max(k,A.width),M=Math.max(M,C+d+A.height),C+=d+A.height):(l.W.k(S+d,y/2+i.B.y),k=Math.max(k,S+d+A.width),M=Math.max(M,A.height),S+=d+A.width),P++}else for(h=0;a>h;h++)l=o[h],A=l.Ha,e?(d>0&&P>0&&S+y+A.width>d&&(s>S&&xu(i,u,s-S,0,j,h-1),N++,P=0,j=h,T=M,S=0,C=n>135?-M-x:M+x),D=0===P?m:y,wu(t,l,0,C),l.W.k(S+D,C),k=Math.max(k,S+D+A.width),M=Math.max(M,T+(0===N?0:x)+A.height),S+=D+A.width):(d>0&&P>0&&C+y+A.height>d&&(s>C&&xu(i,u,0,s-C,j,h-1),N++,P=0,j=h,T=k,C=0,S=n>135?-k-x:k+x),D=0===P?m:y,wu(t,l,S,0),l.W.k(S,C+D),M=Math.max(M,C+D+A.height),k=Math.max(k,T+(0===N?0:x)+A.width),C+=D+A.height),P++;switch(N>0&&(e?(M+=Math.max(0,v),k>S&&xu(i,u,k-S,0,j,a-1),b>0&&(c||bu(i,b,0,0,a-1),k+=b)):(k+=Math.max(0,v),M>C&&xu(i,u,0,M-C,j,a-1),b>0&&(c||bu(i,0,b,0,a-1),M+=b))),b=c=0,u){case Sv:e?c+=k/2-i.B.x-g/2:b+=M/2-i.B.y-g/2;break;case Cv:N>0?e?c+=k/2-i.B.x-g/2:b+=M/2-i.B.y-g/2:e?(u=o[0].W.x+o[0].ta.x,y=o[a-1].W.x+o[a-1].ta.x+2*o[a-1].B.x,c+=u+(y-u)/2-i.B.x-g/2):(u=o[0].W.y+o[0].ta.y,y=o[a-1].W.y+o[a-1].ta.y+2*o[a-1].B.y,b+=u+(y-u)/2-i.B.y-g/2);break;case Nv:e?(c-=g,k+=g):(b-=g,M+=g);break;case Pv:e?(c+=k-i.width+g,k+=g):(b+=M-i.height+g,M+=g);break;case jv:case Lv:e?c=a>1?c+(L+y/2-i.B.x):c+(o[0].B.x-i.B.x+o[0].ta.x):b=a>1?b+(L+y/2-i.B.y):b+(o[0].B.y-i.B.y+o[0].ta.y);break;case Dv:e?c+=k+y/2-i.B.x:b+=M+y/2-i.B.y;break;case Av:break;default:r("Unhandled alignment value "+u.toString())}for(h=0;a>h;h++)l=o[h],e?l.W.k(l.W.x+l.ta.x-c,l.W.y+(n>135?(p?-M:-l.Ha.height)+l.ta.y-v:w+v+l.ta.y)):l.W.k(l.W.x+(n>135?(p?-k:-l.Ha.width)+l.ta.x-v:f+v+l.ta.x),l.W.y+l.ta.y-b);e?(k=yu(i,k,c),0>c&&(c=0),n>135&&(b+=M+v),M+=w+v):(n>135&&(c+=k+v),k+=f+v,M=gu(i,M,b),0>b&&(b=0)),i.ta.k(c,b),i.Ha.k(k,M)}}function fu(t,i,n,e,o){var r=i.length;if(0===r)return new Si(n,0,e,o);if(1===r){var s=i[0];return e=s.Ha.width,o=s.Ha.height,new Si(n,0,e,o)}for(var a=t.nodeSpacing,h=t.rowSpacing,l=90===Pu(t),u=0,f=0,c=0,p=0;r>p;p++)if(!(0!==p%2||r>1&&p===r-1)){var s=i[p],d=s.Ha,v=0===u?0:h;if(l){var y=pu(s)-a;s.W.k(n-(d.width+y),c+v),e=Math.max(e,d.width+y),o=Math.max(o,c+v+d.height),c+=v+d.height}else y=pu(s)-a,s.W.k(f+v,n-(d.height+y)),o=Math.max(o,d.height+y),e=Math.max(e,f+v+d.width),f+=v+d.width;u++}var u=0,g=f,m=c;for(l?(f=n+a,c=0):(f=0,c=n+a),p=0;r>p;p++)0!==p%2&&(s=i[p],d=s.Ha,v=0===u?0:h,l?(y=pu(s)-a,s.W.k(f+y,c+v),e=Math.max(e,f+d.width+y),o=Math.max(o,c+v+d.height),c+=v+d.height):(y=pu(s)-a,s.W.k(f+v,c+y),e=Math.max(e,f+v+d.width),o=Math.max(o,c+d.height+y),f+=v+d.width),u++);return r>1&&1===r%2&&(s=i[r-1],d=s.Ha,i=du(s,l?Math.max(Math.abs(m),Math.abs(c)):Math.max(Math.abs(g),Math.abs(f))),l?(s.W.k(n+a/2-s.B.x-s.ta.x,o+i),l=n+a/2-s.B.x-s.ta.x,e=Math.max(e,l+d.width),0>l&&(e-=l),o=Math.max(o,Math.max(m,c)+i+d.height),0>s.W.x&&(n=vu(t,s.W.x,!1,n,a))):(s.W.k(e+i,n+a/2-s.B.y-s.ta.y),e=Math.max(e,Math.max(g,f)+i+d.width),l=n+a/2-s.B.y-s.ta.y,o=Math.max(o,l+d.height),0>l&&(o-=l),0>s.W.y&&(n=vu(t,s.W.y,!0,n,a)))),new Si(n,0,e,o)}function cu(t,i,n,e,o){var r=i.length;if(0===r)return new Si(n,0,e,o);if(1===r){var s=i[0];return e=s.Ha.width,o=s.Ha.height,new Si(n,0,e,o)}for(var a=t.nodeSpacing,h=t.rowSpacing,l=270===Pu(t),u=0,f=0,c=0,p=0;r>p;p++)if(!(0!==p%2||r>1&&p===r-1)){var s=i[p],d=s.Ha,v=0===u?0:h;if(l){var y=pu(s)-a,c=c-(v+d.height);s.W.k(n-(d.width+y),c),e=Math.max(e,d.width+y),o=Math.max(o,Math.abs(c))}else y=pu(s)-a,f-=v+d.width,s.W.k(f,n-(d.height+y)),o=Math.max(o,d.height+y),e=Math.max(e,Math.abs(f));u++}var u=0,g=f,m=c;for(l?(f=n+a,c=0):(f=0,c=n+a),p=0;r>p;p++)0!==p%2&&(s=i[p],d=s.Ha,v=0===u?0:h,l?(y=pu(s)-a,c-=v+d.height,s.W.k(f+y,c),e=Math.max(e,f+d.width+y),o=Math.max(o,Math.abs(c))):(y=pu(s)-a,f-=v+d.width,s.W.k(f,c+y),o=Math.max(o,c+d.height+y),e=Math.max(e,Math.abs(f))),u++);for(r>1&&1===r%2&&(s=i[r-1],d=s.Ha,h=du(s,l?Math.max(Math.abs(m),Math.abs(c)):Math.max(Math.abs(g),Math.abs(f))),l?(s.W.k(n+a/2-s.B.x-s.ta.x,-o-d.height-h),f=n+a/2-s.B.x-s.ta.x,e=Math.max(e,f+d.width),0>f&&(e-=f),o=Math.max(o,Math.abs(Math.min(m,c))+h+d.height),0>s.W.x&&(n=vu(t,s.W.x,!1,n,a))):(s.W.k(-e-d.width-h,n+a/2-s.B.y-s.ta.y),e=Math.max(e,Math.abs(Math.min(g,f))+h+d.width),f=n+a/2-s.B.y-s.ta.y,o=Math.max(o,f+d.height),0>f&&(o-=f),0>s.W.y&&(n=vu(t,s.W.y,!0,n,a)))),p=0;r>p;p++)s=i[p],l?s.W.k(s.W.x,s.W.y+o):s.W.k(s.W.x+e,s.W.y);return new Si(n,0,e,o)}function pu(t){return null===t.parent?0:t.parent.nodeSpacing}function du(t){return null===t.parent?0:t.parent.rowSpacing}function vu(t,i,n,e,o){t=t.children;for(var r=t.length,s=0;r>s;s++)n?t[s].W.k(t[s].W.x,t[s].W.y-i):t[s].W.k(t[s].W.x-i,t[s].W.y);return i=t[r-1],Math.max(e,n?i.ta.y+i.B.y-o/2:i.ta.x+i.B.x-o/2)}function yu(t,i,n){switch(t.alignment){case Cv:case Sv:var e=i;return n+t.width>e&&(e=n+t.width),0>n&&(e-=n),e;case Nv:return t.width>i?t.width:i;case Pv:return 2*t.B.x>i?t.width:i+t.width-2*t.B.x;case jv:case Lv:return e=Math.min(0,n),n=Math.max(i,n+t.width),Math.max(t.width,n-e);case Dv:return t.width-t.B.x+t.nodeSpacing/2+i;case Av:return Math.max(t.width,t.B.x+t.nodeSpacing/2+i);default:return i}}function gu(t,i,n){switch(t.alignment){case Cv:case Sv:var e=i;return n+t.height>e&&(e=n+t.height),0>n&&(e-=n),e;case Nv:return t.height>i?t.height:i;case Pv:return 2*t.B.y>i?t.height:i+t.height-2*t.B.y;case jv:case Lv:return e=Math.min(0,n),n=Math.max(i,n+t.height),Math.max(t.height,n-e);case Dv:return t.height-t.B.y+t.nodeSpacing/2+i;case Av:return Math.max(t.height,t.B.y+t.nodeSpacing/2+i);default:return i}}function mu(t,i,n){switch(t){case Sv:i/=2,n/=2;break;case Cv:i/=2,n/=2;break;case Nv:n=i=0;break;case Pv:break;default:r("Unhandled alignment value "+t.toString())}return new wi(i,n)}function xu(t,i,n,e,o,r){i=mu(i,n,e),bu(t,i.x,i.y,o,r)}function bu(t,i,n,e,o){if(0!==i||0!==n)for(t=t.children;o>=e;e++){var r=t[e].W;r.x+=i,r.y+=n}}function wu(t,i,n,e){var o=i.parent;switch(t.Re){case xv:for(t=i.Mb;t.next();)i=t.value,i.fromVertex===o&&i.rq.k(n,e);break;case bv:for(t=i.Gb;t.next();)i=t.value,i.toVertex===o&&i.rq.k(n,e);break;default:r("Unhandled path value "+t.Re.toString())}}function ku(t,i,n){for(var e=0;e<t.length;e++){var o=t[e];o.x+=i,o.y+=n}}function Mu(t,i,n,e,o,r,s,a){var h=Pu(i),l=90===h||270===h,u=i.nodeSpacing;i=e;var f=o;e=r,o=s;var c=n.Sr,p=n.ls;s=n.Ha;var d=l?Math.max(o,s.height):Math.max(e,s.width);if((null===c||h!==Pu(n))&&(c=Tu(t,2),p=Tu(t,2),l?(c[0].k(0,0),c[1].k(0,s.height),p[0].k(s.width,0),p[1].k(p[0].x,c[1].y)):(c[0].k(0,0),c[1].k(s.width,0),p[0].k(0,s.height),p[1].k(c[1].x,p[0].y))),l){if(n=e,e=9999999,!(null===f||2>f.length||null===c||2>c.length))for(l=h=0;h<f.length&&l<c.length;){o=f[h];var v=c[l];r=v.x;var y=v.y;r+=n;var g=o;h+1<f.length&&(g=f[h+1]);var m=v,v=m.x,m=m.y;l+1<c.length&&(m=c[l+1],v=m.x,m=m.y,v+=n);var x=e;o.y===y?x=r-o.x:o.y>y&&o.y<m?x=r+(o.y-y)/(m-y)*(v-r)-o.x:y>o.y&&y<g.y&&(x=r-(o.x+(y-o.y)/(g.y-o.y)*(g.x-o.x))),e>x&&(e=x),g.y<=o.y?h++:y>=m?l++:(g.y<=m&&h++,m<=g.y&&l++)}if(n-=e,n+=u,h=c,l=n,null===i||2>i.length||null===h||2>h.length)e=null;else{for(u=Tu(t,i.length+h.length),e=r=o=0;r<h.length&&h[r].y<i[0].y;)y=h[r++],u[e++].k(y.x+l,y.y);for(;o<i.length;)y=i[o++],u[e++].k(y.x,y.y);for(o=i[i.length-1].y;r<h.length&&h[r].y<=o;)r++;for(;r<h.length&&h[r].y>o;)y=h[r++],u[e++].k(y.x+l,y.y);for(h=Tu(t,e),o=0;e>o;o++)h[o].assign(u[o]);Su(t,u),e=h}if(r=p,y=n,null===f||2>f.length||null===r||2>r.length)o=null;else{for(u=Tu(t,f.length+r.length),l=g=h=0;h<f.length&&f[h].y<r[0].y;)o=f[h++],u[l++].k(o.x,o.y);for(;g<r.length;)o=r[g++],u[l++].k(o.x+y,o.y);for(r=r[r.length-1].y;h<f.length&&f[h].y<=r;)h++;for(;h<f.length&&f[h].y>r;)o=f[h++],u[l++].k(o.x,o.y);for(o=Tu(t,l),h=0;l>h;h++)o[h].assign(u[h]);Su(t,u)}r=Math.max(0,n)+s.width,s=d}else{if(n=o,e=9999999,!(null===f||2>f.length||null===c||2>c.length))for(l=h=0;h<f.length&&l<c.length;)o=f[h],v=c[l],r=v.x,y=v.y,y+=n,g=o,h+1<f.length&&(g=f[h+1]),m=v,v=m.x,m=m.y,l+1<c.length&&(m=c[l+1],v=m.x,m=m.y,m+=n),x=e,o.x===r?x=y-o.y:o.x>r&&o.x<v?x=y+(o.x-r)/(v-r)*(m-y)-o.y:r>o.x&&r<g.x&&(x=y-(o.y+(r-o.x)/(g.x-o.x)*(g.y-o.y))),e>x&&(e=x),g.x<=o.x?h++:r>=v?l++:(g.x<=v&&h++,v<=g.x&&l++);if(n-=e,n+=u,h=c,l=n,null===i||2>i.length||null===h||2>h.length)e=null;else{for(u=Tu(t,i.length+h.length),e=r=o=0;r<h.length&&h[r].x<i[0].x;)y=h[r++],u[e++].k(y.x,y.y+l);for(;o<i.length;)y=i[o++],u[e++].k(y.x,y.y);for(o=i[i.length-1].x;r<h.length&&h[r].x<=o;)r++;for(;r<h.length&&h[r].x>o;)y=h[r++],u[e++].k(y.x,y.y+l);for(h=Tu(t,e),o=0;e>o;o++)h[o].assign(u[o]);Su(t,u),e=h}if(r=p,y=n,null===f||2>f.length||null===r||2>r.length)o=null;else{for(u=Tu(t,f.length+r.length),l=g=h=0;h<f.length&&f[h].x<r[0].x;)o=f[h++],u[l++].k(o.x,o.y);for(;g<r.length;)o=r[g++],u[l++].k(o.x,o.y+y);for(r=r[r.length-1].x;h<f.length&&f[h].x<=r;)h++;for(;h<f.length&&f[h].x>r;)o=f[h++],u[l++].k(o.x,o.y);for(o=Tu(t,l),h=0;l>h;h++)o[h].assign(u[h]);Su(t,u)}r=d,s=Math.max(0,n)+s.height}return Su(t,i),Su(t,c),Su(t,f),Su(t,p),a[0]=e,a[1]=o,new Si(n,0,r,s)}function Tu(t,i){var n=t.ox[i];if(void 0!==n&&(n=n.pop(),void 0!==n))return n;for(var n=[],e=0;i>e;e++)n[e]=new wi;return n}function Su(t,i){var n=i.length,e=t.ox[n];void 0===e&&(e=[],t.ox[n]=e),e.push(i)}function Cu(t,i,n,e){if(null!==i){i.x=n,i.y=e,i=i.children;for(var o=i.length,r=0;o>r;r++){var s=i[r];Cu(t,s,n+s.W.x,e+s.W.y)}}}function Nu(t,i){if(null!==i){t.setPortSpots(i);for(var n=i.children,e=n.length,o=0;e>o;o++)Nu(t,n[o])}}function Pu(t){return t=t.angle,45>=t?0:135>=t?90:225>=t?180:315>=t?270:0}function ju(t){var i=Pu(t),i=90===i||270===i,n=t.layerSpacing;if(0<t.layerSpacingParentOverlap)var e=Math.min(1,t.layerSpacingParentOverlap),n=n-(i?t.height*e:t.width*e);return n<(i?-t.height:-t.width)&&(n=i?-t.height:-t.width),n}function Lu(t){var i=Pu(t),i=90===i||270===i,n=t.nodeIndent;if(0<t.nodeIndentPastParent)var e=Math.min(1,t.nodeIndentPastParent),n=n+(i?t.width*e:t.height*e);return n=Math.max(0,n)}function Du(){Ah.call(this)}function Au(){qh.call(this),this.initialized=!1,this.parent=null,this.children=[],this.maxGenerationCount=this.maxChildrenCount=this.descendantCount=this.level=0,this.comments=null,this.W=new wi(0,0),this.Ha=new Ti(0,0),this.ta=new wi(0,0),this.fo=this.eo=this.CG=!1,this.ls=this.Sr=null,this.sorting=wv,this.comparer=Ad,this.angle=0,this.alignment=Cv,this.nodeIndentPastParent=this.nodeIndent=0,this.nodeSpacing=20,this.layerSpacing=50,this.layerSpacingParentOverlap=0,this.compaction=Ov,this.breadthLimit=0,this.rowSpacing=25,this.commentSpacing=this.rowIndent=10,this.commentMargin=20,this.setsPortSpot=!0,this.portSpot=bf,this.setsChildPortSpot=!0,this.childPortSpot=bf}function Fu(){Eh.call(this),this.rq=new wi(0,0)}function Ou(){this.Bm=[]}function zu(t){var i=new Ou,n=null;if("string"==typeof t?n=(new DOMParser).parseFromString(t,"text/xml"):t instanceof Document&&(n=t.implementation.createDocument("http://www.w3.org/2000/svg","svg",null),n.appendChild(n.importNode(t.documentElement,!0))),null===n)return null;if(t=n.getElementsByTagName("svg"),0===t.length)return null;var e=t[0],o=n.getElementsByTagName("linearGradient"),r=n.getElementsByTagName("radialGradient");for(t=0;t<o.length;t++){for(var s=o[t],a=Tp(Nr,pp,{start:Of,end:zf}),h=s.childNodes,l=0;l<h.length;l++)if("stop"===h[l].tagName){var u=qu(i,h[l],"stop-color");if(null!==u&&""!==u){var f=qu(i,h[l],"offset");(null===f||""===f)&&(f="0");var c=parseFloat(f);isNaN(c)&&(c=0),a.addColorStop((-1!==f.indexOf("%")?.01:1)*c,u)}}s=s.getAttribute("id"),"string"==typeof s&&(i["_brush"+s]=a)}for(t=0;t<r.length;t++){for(s=r[t],a=Tp(Nr,dp,{start:Sf,end:Sf}),h=s.childNodes,l=0;l<h.length;l++)"stop"===h[l].tagName&&(u=qu(i,h[l],"stop-color"),null!==u&&""!==u)&&(f=qu(i,h[l],"offset"),(null===f||""===f)&&(f="0"),c=parseFloat(f),isNaN(c)&&(c=0),a.addColorStop((-1!==f.indexOf("%")?.01:1)*c,u));s=s.getAttribute("id"),"string"==typeof s&&(i["_brush"+s]=a)}for(o=!0;o;)for(o=!1,r=n.getElementsByTagName("use"),t=0;t<r.length;t++)a=r[t],0===a.childNodes.length&&(s=a.href,void 0!==s&&(s=n.getElementById(s.baseVal.substring(1)),null!==s&&(s=s.cloneNode(!0),s.removeAttribute("id"),h=parseFloat(a.getAttribute("x")),isNaN(h)&&(h=0),l=parseFloat(a.getAttribute("y")),isNaN(l)&&(l=0),u=a.getAttribute("transform"),null===u&&(u=""),a.setAttribute("transform",u+" translate("+h+","+l+")"),a.appendChild(s),"use"===s.tagName&&(o=!0))));if(Eu(i,e,null),n=new rs,0===i.Bm.length)return n;if(1===i.Bm.length)return i.Bm[0];for(t=0;t<i.Bm.length;t++)n.add(i.Bm[t]);return n}function Bu(t,i){var n=t.getAttribute(i);return"string"!=typeof n&&t.style&&(n=t.style[i]),"string"!=typeof n?null:n}function qu(t,i,n){var e=i.getAttribute(n);return"string"!=typeof e&&i.style&&(e=i.style[n]),"string"!=typeof e||""===e||"inherit"===e?(i=i.parentNode,"g"===i.tagName||"use"===i.tagName?qu(t,i,n):null):e}function Eu(t,i,n){var e=i.tagName;if(("g"===e||"svg"===e||"use"===e||"symbol"===e)&&"none"!==qu(t,i,"display")){for(var e=i.childNodes,o=0;o<e.length;o++){var r=e[o],s=null;if(void 0!==r.getAttribute){var a=r.getAttribute("transform");switch(r.tagName){case"g":null===a?Eu(t,r,null):(s=new rs,Eu(t,r,s));break;case"use":null===a?Eu(t,r,null):(s=new rs,Eu(t,r,s));break;case"symbol":if("use"!==i.tagName)break;s=new rs,Eu(t,r,s);var h=s,l=t,u=r;qu(l,u,"preserveAspectRatio"),qu(l,u,"viewBox"),h.scale=1;break;case"path":h=r,s=new Ps,h=h.getAttribute("d"),"string"==typeof h&&(s.lF=ec(h));break;case"line":var f=r,s=new Ps,h=parseFloat(f.getAttribute("x1"));isNaN(h)&&(h=0),l=parseFloat(f.getAttribute("y1")),isNaN(l)&&(l=0),u=parseFloat(f.getAttribute("x2")),isNaN(u)&&(u=0),f=parseFloat(f.getAttribute("y2")),isNaN(f)&&(f=0);var c=new Yi($f);s.position=new wi(Math.min(h,u),Math.min(l,f)),(u-h)/(f-l)>0?(c.ia=0,c.ja=0,c.s=Math.abs(u-h),c.u=Math.abs(f-l)):(c.ia=0,c.ja=Math.abs(f-l),c.s=Math.abs(u-h),c.u=0),s.zc=c;break;case"circle":u=r,s=new Ps,h=parseFloat(u.getAttribute("r")),isNaN(h)||0>h?s=null:(l=parseFloat(u.getAttribute("cx")),isNaN(l)&&(l=0),u=parseFloat(u.getAttribute("cy")),isNaN(u)&&(u=0),f=new Yi(tc),f.ia=0,f.ja=0,f.s=2*h,f.u=2*h,s.position=new wi(l-h,u-h),s.zc=f);break;case"ellipse":f=r,s=new Ps,h=parseFloat(f.getAttribute("rx")),isNaN(h)||0>h?s=null:(l=parseFloat(f.getAttribute("ry")),isNaN(l)||0>l?s=null:(u=parseFloat(f.getAttribute("cx")),isNaN(u)&&(u=0),f=parseFloat(f.getAttribute("cy")),isNaN(f)&&(f=0),c=new Yi(tc),c.ia=0,c.ja=0,c.s=2*h,c.u=2*l,s.position=new wi(u-h,f-l),s.zc=c));break;case"rect":if(c=r,s=new Ps,h=parseFloat(c.getAttribute("width")),isNaN(h)||0>h)s=null;else if(l=parseFloat(c.getAttribute("height")),isNaN(l)||0>l)s=null;else{u=parseFloat(c.getAttribute("x")),isNaN(u)&&(u=0),f=parseFloat(c.getAttribute("y")),isNaN(f)&&(f=0);var p=c.getAttribute("rx"),d=c.getAttribute("ry"),c=parseFloat(p);(isNaN(c)||0>c)&&(c=0);var v=parseFloat(d);(isNaN(v)||0>v)&&(v=0),null!==p&&""!==p||null===d||""===d?null===p||""===p||null!==d&&""!==d||(v=c):c=v,c=Math.min(c,h/2),v=Math.min(v,l/2),d=void 0,0===c&&0===v?(d=new Yi(_f),d.ia=0,d.ja=0,d.s=h,d.u=l):(d=Qf.ga/2,p=B(),ta(p,c,0,!0),p.lineTo(h-c,0),ea(p,h-c*d,0,h,v*d,h,v),p.lineTo(h,l-v),ea(p,h,l-v*d,h-c*d,l,h-c,l),p.lineTo(c,l),ea(p,c*d,l,0,l-v*d,0,l-v),p.lineTo(0,v),ea(p,0,v*d,c*d,0,c,0),ia(p),d=p.m,q(p)),s.position=new wi(u,f),s.zc=d}break;case"polygon":s=Uu(r);break;case"polyline":s=Uu(r)}if(null!==s){if(s instanceof Ps){if(l=s,h=qu(t,r,"fill"),null!==h&&-1!==h.indexOf("url")?(h=h.substring(h.indexOf("#")+1,h.length-1),h=t["_brush"+h],l.fill=h instanceof Nr?h:"black"):l.fill=null===h?"black":"none"===h?null:h,h=qu(t,r,"stroke"),null!==h&&-1!==h.indexOf("url")?(h=h.substring(h.indexOf("#")+1,h.length-1),h=t["_brush"+h],l.stroke=h instanceof Nr?h:"black"):l.stroke="none"===h?null:h,h=parseFloat(qu(t,r,"stroke-width")),isNaN(h)||(l.Na=h),h=qu(t,r,"stroke-linecap"),null!==h&&(l.SG=h),h=qu(t,r,"stroke-dasharray"),null!==h&&""!==h){for(u=h.split(","),f=[],h=0;h<u.length;h++)c=parseFloat(u[h]),!isNaN(c)&&c>0&&f.push(c);l.Yy=f}r=qu(t,r,"stroke-dashoffset"),null!==r&&""!==r&&(r=parseFloat(r),isNaN(r)||(l.TG=r)),l.hy=!0}if(null!==a){for(a=a.split(")"),r=!0,h=0;h<a.length;h++)/\(.*[^0-9\.,\s-]/.test(a[h])&&(r=!1),/\(.*[0-9]-[0-9]/.test(a[h])&&(r=!1);if(r)for(h=a.length-1;h>=0;h--)if(l=a[h],""!==l)switch(u=l.indexOf("("),r=l.substring(0,u).replace(/\s*/,""),u=l.substring(u+1).split(/\s*[\s,]\s*/),r){case"rotate":Iu(t,s,u);break;case"translate":r=s,l=parseFloat(u[0]),isNaN(l)&&(l=0),u=parseFloat(u[1]),isNaN(u)&&(u=0),(0!==l||0!==u)&&(f=r.position.copy(),isNaN(f.x)&&(f.x=0),isNaN(f.y)&&(f.y=0),r.position=new wi(l+f.x,u+f.y));break;case"scale":Gu(t,s,u);break;case"skewX":Vu(t,s,u);break;case"skewY":Hu(t,s,u);break;case"matrix":Ru(t,s,u)}}if(s instanceof rs){for(a=s,h=r=0,l=a.position.copy(),isNaN(l.x)&&(l.x=0),isNaN(l.y)&&(l.y=0),u=a.elements.i;u.next();)f=u.value.position.copy(),isNaN(f.x)&&(f.x=0),isNaN(f.y)&&(f.y=0),f.x<r&&(r=f.x),f.y<h&&(h=f.y);l.x+=r,l.y+=h,a.position=l}null===n?t.Bm.push(s):n.add(s)}}}null!==s&&(t=Bu(i,"visibility"),("hidden"===t||"collapse"===t)&&(s.visible=!1),i=Bu(i,"opacity"),null!==i&&""!==i&&(i=parseFloat(i),isNaN(i)||(s.opacity=i)))}}function Ru(t,i,n){var e=parseFloat(n[0]),o=parseFloat(n[1]),r=parseFloat(n[2]),s=parseFloat(n[3]),a=parseFloat(n[4]),h=parseFloat(n[5]);if(!isNaN(e+o+r+s+a+h)){var l=i.position.copy();if(isNaN(l.x)&&(l.x=0),isNaN(l.y)&&(l.y=0),i instanceof Ps){if(n=i.zc.copy(),n.type===_f)n=t.$q(n);else if(n.type===tc)n=Ku(n);else if(n.type===$f){n.type=ic,t=new $i(n.ia,n.ja);var u=new _i(sc,n.s,n.u);t.ra.add(u),n.Ya.add(t)}n.offset(l.x,l.y),n.transform(e,o,r,s,a-l.x,h-l.y),t=n.normalize(),i.zc=n,l.x-=t.x,l.y-=t.y,i.position=l}else if(i instanceof rs){for(i=i.elements.i;i.next();)o=i.value,e=o.position.copy(),e.x+=l.x,e.y+=l.y,o.position=e;for(i.reset();i.next();)Ru(t,i.value,n);for(i.reset();i.next();)t=i.value,e=t.position.copy(),e.x-=l.x,e.y-=l.y,t.position=e}}}function Iu(t,i,n){var e=parseFloat(n[0]);isNaN(e)&&(e=0);var o=parseFloat(n[1]);isNaN(o)&&(o=0);var r=parseFloat(n[2]);if(isNaN(r)&&(r=0),0!==e){var s=e*Math.PI/180,a=i.position.copy();if(isNaN(a.x)&&(a.x=0),isNaN(a.y)&&(a.y=0),i instanceof Ps){if(n=i.zc.copy(),n.type===tc?n=Ku(n):n.type===_f&&(n=t.$q(n)),n.type===ic)n.rotate(e,o-a.x,r-a.y),r=n.normalize(),i.zc=n,a.x-=r.x,a.y-=r.y,i.position=a;else{var e=n.ia-o+a.x,h=n.ja-r+a.y,l=n.s-o+a.x,u=n.u-r+a.y;t=e*Math.cos(s)-h*Math.sin(s)+o-a.x,e=h*Math.cos(s)+e*Math.sin(s)+r-a.y,o=l*Math.cos(s)-u*Math.sin(s)+o-a.x,r=u*Math.cos(s)+l*Math.sin(s)+r-a.y,l=Math.min(t,o),u=Math.min(e,r),n.ia=t-l,n.ja=e-u,n.s=o-l,n.u=r-u,a.x+=l,a.y+=u,i.position=a,i.zc=n}i.fill instanceof Nr&&(a=i.fill.copy(),n=Math.atan((.5-a.start.y)/(.5-a.start.x)),isNaN(n)||(n+=s,a.start=new Fi((1-Math.cos(n))/2,(1-Math.sin(n))/2),a.end=new Fi((1+Math.cos(n))/2,(1+Math.sin(n))/2)),i.fill=a),i.stroke instanceof Nr&&(a=i.stroke.copy(),n=Math.atan((.5-a.start.y)/(.5-a.start.x)),isNaN(n)||(n+=s,a.start=new Fi((1-Math.cos(n))/2,(1-Math.sin(n))/2),a.end=new Fi((1+Math.cos(n))/2,(1+Math.sin(n))/2)),i.stroke=a)}else if(i instanceof rs){for(i=i.elements.i;i.next();)r=i.value,s=r.position.copy(),s.x+=a.x,s.y+=a.y,r.position=s;for(i.reset();i.next();)Iu(t,i.value,n);for(i.reset();i.next();)n=i.value,s=n.position.copy(),s.x-=a.x,s.y-=a.y,n.position=s}}}function Gu(t,i,n){var e=parseFloat(n[0]);isNaN(e)&&(e=1);var o=parseFloat(n[1]);if(isNaN(o)&&(o=e),1!==e||1!==o){var r=i.position.copy();if(isNaN(r.x)&&(r.x=0),isNaN(r.y)&&(r.y=0),i instanceof Ps)t=i.zc.copy(),r.x*=e,r.y*=o,i.position=r,t.scale(e,o),i.zc=t;else if(i instanceof rs){for(i=i.elements.i;i.next();)o=i.value,e=o.position.copy(),e.x+=r.x,e.y+=r.y,o.position=e;for(i.reset();i.next();)Gu(t,i.value,n);for(i.reset();i.next();)t=i.value,e=t.position.copy(),e.x-=r.x,e.y-=r.y,t.position=e}}}function Vu(t,i,n){var e=parseFloat(n[0]);if(!isNaN(e)){var e=e*Math.PI/180,o=i.position.copy();if(isNaN(o.x)&&(o.x=0),isNaN(o.y)&&(o.y=0),i instanceof Ps){if(n=i.zc.copy(),n.type===_f)n=t.$q(n);else if(n.type===tc)n=Ku(n);else if(n.type===$f){n.type=ic,t=new $i(n.ia,n.ja);var r=new _i(sc,n.s,n.u);t.ra.add(r),n.Ya.add(t)}n.offset(o.x,o.y),n.transform(1,0,Math.tan(e),1,-o.x,-o.y),t=n.normalize(),i.zc=n,o.x-=t.x,o.y-=t.y,i.position=o}else if(i instanceof rs){for(i=i.elements.i;i.next();)e=i.value.position.copy(),e.x+=o.x,e.y+=o.y,i.value.position=e;for(i.reset();i.next();)Vu(t,i.value,n);for(i.reset();i.next();)t=i.value,e=t.position.copy(),e.x-=o.x,e.y-=o.y,t.position=e}}}function Hu(t,i,n){var e=parseFloat(n[0]);if(!isNaN(e)){var e=e*Math.PI/180,o=i.position.copy();if(isNaN(o.x)&&(o.x=0),isNaN(o.y)&&(o.y=0),i instanceof Ps){if(n=i.zc.copy(),n.type===_f)n=t.$q(n);else if(n.type===tc)n=Ku(n);else if(n.type===$f){n.type=ic,t=new $i(n.ia,n.ja);var r=new _i(sc,n.s,n.u);t.ra.add(r),n.Ya.add(t)}n.offset(o.x,o.y),n.transform(1,Math.tan(e),0,1,-o.x,-o.y),t=n.normalize(),i.zc=n,o.x-=t.x,o.y-=t.y,i.position=o}else if(i instanceof rs){for(i=i.elements.i;i.next();)r=i.value,e=r.position.copy(),e.x+=o.x,e.y+=o.y,r.position=e;for(i.reset();i.next();)Hu(t,i.value,n);for(i.reset();i.next();)t=i.value,e=t.position.copy(),e.x-=o.x,e.y-=o.y,t.position=e}}}function Uu(t){var i=!1;if("polygon"===t.tagName)i=!0;else if("polyline"!==t.tagName)return null;var n=new Ps,e=t.getAttribute("points");t=new Yi;var o=new ci($i),r=e.split(/\s*[\s,]\s*/);if(4>r.length)return null;for(var e=null,s=new ci(_i),a=1;a<r.length;a+=2){var h=parseFloat(r[a-1]),l=parseFloat(r[a]);if("number"!=typeof h||isNaN(h)||"number"!=typeof l||isNaN(l))return null;1===a?e=new $i(h,l):s.add(new _i(sc,h,l))}return i&&(i=new _i(sc,e.ia,e.ja),i.close(),s.add(i)),e.ra=s,o.add(e),t.Ya=o,i=t.normalize(),n.position=new wi(-i.x,-i.y),n.zc=t,n}function Ku(t){var i=t.ia,n=t.ja,e=t.s,o=t.u,r=Math.abs(e-i)/2,s=Math.abs(o-n)/2,i=Math.min(i,e)+r,n=Math.min(n,o)+s,o=new $i(i,n-s),e=new _i(ac);return e.vb=i+Qf.ga*r,e.Lb=n-s,e.ve=i+r,e.we=n-Qf.ga*s,e.s=i+r,e.u=n,o.ra.add(e),e=new _i(ac),e.vb=i+r,e.Lb=n+Qf.ga*s,e.ve=i+Qf.ga*r,e.we=n+s,e.s=i,e.u=n+s,o.ra.add(e),e=new _i(ac),e.vb=i-Qf.ga*r,e.Lb=n+s,e.ve=i-r,e.we=n+Qf.ga*s,e.s=i-r,e.u=n,o.ra.add(e),e=new _i(ac),e.vb=i-r,e.Lb=n-Qf.ga*s,e.ve=i-Qf.ga*r,e.we=n-s,e.s=i,e.u=n-s,o.ra.add(e),t.type=ic,t.Ya.add(o),t}function Yu(){Pr.call(this),this.ee=null}var Wu,Xu={};if(!t.document||void 0===t.document.createElement("canvas").getContext)throw t.console&&t.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."),Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");if(!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");!function(){for(var i=0,n=["ms","moz","webkit","o"],e=0;e<n.length&&!t.requestAnimationFrame;++e)t.requestAnimationFrame=t[n[e]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[n[e]+"CancelAnimationFrame"]||t[n[e]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(n){var e=(new Date).getTime(),o=Math.max(8,16-(e-i)),r=t.setTimeout(function(){n(e+o)},o);return i=e+o,r}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(i){t.clearTimeout(i)})}(),Xu.Debug=null;var Ju,Zu,Qu=void 0!==t.navigator&&0<t.navigator.userAgent.indexOf("534.30")&&0<t.navigator.userAgent.indexOf("Android"),$u=void 0!==t.navigator&&0<t.navigator.userAgent.indexOf("MSIE 10.0"),_u=void 0!==t.navigator&&0<t.navigator.userAgent.indexOf("Trident/7"),tf=0<=navigator.platform.toUpperCase().indexOf("MAC"),nf=null!==navigator.platform.match(/(iPhone|iPod|iPad)/i),ef=[],of=[],rf=[],sf=[],af=null,hf=[],lf=Object.freeze([]),uf=1,ff=null,ff=function(){var i=t.document.createElement("canvas"),n=i.getContext("2d");n[ei("7ca11abfd022028846")]=ei("398c3597c01238");for(var e=["5da73c80a3330d854f9e5e671d6633","32ab5ff3b26f42dc0ed90f22412913b54ae6247590da4bb21c324ba3a84e385776","54a702f3e53909c447824c6706603faf4cfb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387","74bf19bce72555874c86"],o=1;5>o;o++)n[ei("7ca11abfd7330390")](ei(e[o-1]),10,15*o+0);for(n[ei("7ca11abfd022028846")]=ei("39f046ebb36e4b"),o=1;5>o;o++)n[ei("7ca11abfd7330390")](ei(e[o-1]),10,15*o+0);return(4!==e.length||"5"!==e[0][0]||"7"!==e[3][0])&&(Z=function(t,i){var n=new oi(t,i,2);Object.freeze(n),t[i]=n;var e=t.Es;return e instanceof bi||(e=new bi("string",oi),t.Es=e),e.add(i,n),n}),i}();oi.prototype.toString=function(){return J(this.vz)+"."+this.yb},Y(oi,{Td:"classType"},function(){return this.vz}),Y(oi,{name:"name"},function(){return this.yb}),Y(oi,{value:"value"},function(){return this.oE});var cf;oi.findName=cf=function(t,i){if(null===i||""===i)return null;h(t,"function","findName:classfunc"),h(i,"string","EnumValue.findName:name");var n=t.Es;return n instanceof bi?n.ha(i):null},ri.prototype.toString=function(){return this.sz.join("")},ri.prototype.add=function(t){""!==t&&this.sz.push(t)},ai.prototype.random=function(){var t=this.seed%this.lz*this.Kv-this.seed/this.lz*this.SD;
return this.seed=t>0?t:t+this.Ds,this.seed*this.OD},Y(hi,{i:"iterator"},function(){return this}),hi.prototype.reset=hi.prototype.reset=function(){},hi.prototype.next=hi.prototype.hasNext=hi.prototype.next=function(){return!1},hi.prototype.first=hi.prototype.first=function(){return null},hi.prototype.any=function(){return!1},hi.prototype.all=function(){return!0},hi.prototype.each=function(){},Y(hi,{count:"count"},function(){return 0}),hi.prototype.lf=function(){},hi.prototype.toString=function(){return"EmptyIterator"};var pf=new hi;W(li,{key:!0,value:!0}),Y(li,{i:"iterator"},function(){return this}),li.prototype.reset=li.prototype.reset=function(){this.key=-1},li.prototype.next=li.prototype.hasNext=li.prototype.next=function(){return-1===this.key?(this.key=0,!0):!1},li.prototype.first=li.prototype.first=function(){return this.key=0,this.value},li.prototype.any=function(t){return this.key=-1,t(this.value)},li.prototype.all=function(t){return this.key=-1,t(this.value)},li.prototype.each=function(t){this.key=-1,t(this.value)},Y(li,{count:"count"},function(){return 1}),li.prototype.lf=function(){this.value=null},li.prototype.toString=function(){return"SingletonIterator("+this.value+")"},W(ui,{key:!0,value:!0}),Y(ui,{i:"iterator"},function(){return this}),K(ui,{Pl:"predicate"},function(){return this.Ei},function(t){this.Ei=t}),ui.prototype.reset=ui.prototype.reset=function(){var t=this.Sc;t.Rc=null,this.Ga=t.K,this.Pc=-1},ui.prototype.next=ui.prototype.hasNext=ui.prototype.next=function(){var t=this.Sc;if(t.K!==this.Ga){if(0>this.key)return!1;d(t)}var t=t.l,i=t.length,n=++this.Pc,e=this.Ei;if(null!==e)for(;i>n;){var o=t[n];if(e(o))return this.key=this.Pc=n,this.value=o,!0;n++}else{if(i>n)return this.key=n,this.value=t[n],!0;this.lf()}return!1},ui.prototype.first=ui.prototype.first=function(){var t=this.Sc;this.Ga=t.K,this.Pc=0;var t=t.l,i=t.length,n=this.Ei;if(null!==n){for(var e=0;i>e;){var o=t[e];if(n(o))return this.key=this.Pc=e,this.value=o;e++}return null}return i>0?(o=t[0],this.key=0,this.value=o):null},ui.prototype.any=function(t){var i=this.Sc;i.Rc=null;var n=i.K;this.Pc=-1;for(var e=i.l,o=e.length,r=this.Ei,s=0;o>s;s++){var a=e[s];if(null===r||r(a)){if(t(a))return!0;i.K!==n&&d(i)}}return!1},ui.prototype.all=function(t){var i=this.Sc;i.Rc=null;var n=i.K;this.Pc=-1;for(var e=i.l,o=e.length,r=this.Ei,s=0;o>s;s++){var a=e[s];if(null===r||r(a)){if(!t(a))return!1;i.K!==n&&d(i)}}return!0},ui.prototype.each=function(t){var i=this.Sc;i.Rc=null;var n=i.K;this.Pc=-1;for(var e=i.l,o=e.length,r=this.Ei,s=0;o>s;s++){var a=e[s];(null===r||r(a))&&(t(a),i.K!==n&&d(i))}},Y(ui,{count:"count"},function(){var t=this.Ei;if(null!==t){for(var i=0,n=this.Sc.l,e=n.length,o=0;e>o;o++)t(n[o])&&i++;return i}return this.Sc.l.length}),ui.prototype.lf=function(){this.key=-1,this.value=null,this.Ga=-1,this.Ei=null,this.Sc.Rc=this},ui.prototype.toString=function(){return"ListIterator@"+this.Pc+"/"+this.Sc.count},W(fi,{key:!0,value:!0}),Y(fi,{i:"iterator"},function(){return this}),fi.prototype.reset=fi.prototype.reset=function(){var t=this.Sc;t.Mm=null,this.Ga=t.K,this.Pc=t.l.length},fi.prototype.next=fi.prototype.hasNext=fi.prototype.next=function(){var t=this.Sc;if(t.K!==this.Ga){if(0>this.key)return!1;d(t)}var i=--this.Pc;return i>=0?(this.key=i,this.value=t.l[i],!0):(this.lf(),!1)},fi.prototype.first=fi.prototype.first=function(){var t=this.Sc;this.Ga=t.K;var i=t.l;return this.Pc=t=i.length-1,t>=0?(i=i[t],this.key=t,this.value=i):null},fi.prototype.any=function(t){var i=this.Sc;i.Mm=null;var n=i.K,e=i.l,o=e.length;for(this.Pc=o,o-=1;o>=0;o++){if(t(e[o]))return!0;i.K!==n&&d(i)}return!1},fi.prototype.all=function(t){var i=this.Sc;i.Mm=null;var n=i.K,e=i.l,o=e.length;for(this.Pc=o,o-=1;o>=0;o++){if(!t(e[o]))return!1;i.K!==n&&d(i)}return!0},fi.prototype.each=function(t){var i=this.Sc;i.Mm=null;var n=i.K,e=i.l,o=e.length;for(this.Pc=o,o-=1;o>=0;o++)t(e[o]),i.K!==n&&d(i)},Y(fi,{count:"count"},function(){return this.Sc.l.length}),fi.prototype.lf=function(){this.key=-1,this.value=null,this.Ga=-1,this.Sc.Mm=this},fi.prototype.toString=function(){return"ListIteratorBackwards("+this.Pc+"/"+this.Sc.count+")"},H("List",ci),ci.prototype.hd=function(){var t=this.K;t++,t>999999999&&(t=0),this.K=t},ci.prototype.freeze=ci.prototype.freeze=function(){return this.pa=!0,this},ci.prototype.thaw=ci.prototype.wa=function(){return this.pa=!1,this},ci.prototype.toString=function(){return"List("+X(this.da)+")#"+V(this)},ci.prototype.add=ci.prototype.push=ci.prototype.add=function(t){null!==t&&(s(this,t),this.l.push(t),this.hd())},ci.prototype.addAll=ci.prototype.md=function(t){if(null===t)return this;s(this);var i=this.l;if(g(t))for(var n=x(t),e=0;n>e;e++){var o=w(t,e);i.push(o)}else for(t=t.i;t.next();)o=t.value,i.push(o);return this.hd(),this},ci.prototype.clear=ci.prototype.clear=function(){s(this),this.l.length=0,this.hd()},ci.prototype.contains=ci.prototype.has=ci.prototype.contains=function(t){return null===t?!1:-1!==this.l.indexOf(t)},ci.prototype.indexOf=ci.prototype.indexOf=function(t){return null===t?-1:this.l.indexOf(t)},ci.prototype.elt=ci.prototype.get=ci.prototype.Y=function(t){var i=this.l;return(0>t||t>=i.length)&&c(t,"0 <= i < length",ci,"elt:i"),i[t]},ci.prototype.setElt=ci.prototype.set=ci.prototype.Rf=function(t,i){var n=this.l;(0>t||t>=n.length)&&c(t,"0 <= i < length",ci,"setElt:i"),s(this,t),n[t]=i},ci.prototype.first=ci.prototype.first=function(){var t=this.l;return 0===t.length?null:t[0]},ci.prototype.last=ci.prototype.ad=function(){var t=this.l,i=t.length;return i>0?t[i-1]:null},ci.prototype.pop=ci.prototype.pop=function(){s(this);var t=this.l;return 0<t.length?t.pop():null},ci.prototype.any=function(t){for(var i=this.l,n=this.K,e=i.length,o=0;e>o;o++){if(t(i[o]))return!0;this.K!==n&&d(this)}return!1},ci.prototype.all=function(t){for(var i=this.l,n=this.K,e=i.length,o=0;e>o;o++){if(!t(i[o]))return!1;this.K!==n&&d(this)}return!0},ci.prototype.each=function(t){for(var i=this.l,n=this.K,e=i.length,o=0;e>o;o++)t(i[o]),this.K!==n&&d(this)},ci.prototype.insertAt=ci.prototype.qd=function(t,i){0>t&&c(t,">= 0",ci,"insertAt:i"),s(this,t);var n=this.l;return t>=n.length?n.push(i):n.splice(t,0,i),this.hd(),!0},ci.prototype.remove=ci.prototype["delete"]=ci.prototype.remove=function(t){if(null===t)return!1;s(this,t);var i=this.l;return t=i.indexOf(t),-1===t?!1:(t===i.length-1?i.pop():i.splice(t,1),this.hd(),!0)},ci.prototype.removeAt=ci.prototype.Dc=function(t){var i=this.l;(0>t||t>=i.length)&&c(t,"0 <= i < length",ci,"removeAt:i"),s(this,t),t===i.length-1?i.pop():i.splice(t,1),this.hd()},ci.prototype.removeRange=ci.prototype.removeRange=function(t,i){var n=this.l;(0>t||t>=n.length)&&c(t,"0 <= from < length",ci,"elt:from"),(0>i||i>=n.length)&&c(i,"0 <= to < length",ci,"elt:to"),s(this,t);var e=n.slice((i||t)+1||n.length);n.length=0>t?n.length+t:t,n.push.apply(n,e),this.hd()},ci.prototype.copy=function(){for(var t=new ci(this.da),i=this.l,n=this.count,e=0;n>e;e++)t.add(i[e]);return t},ci.prototype.toArray=ci.prototype.ce=function(){for(var t=this.l,i=this.count,n=Array(i),e=0;i>e;e++)n[e]=t[e];return n},ci.prototype.toSet=function(){for(var t=new di(this.da),i=this.l,n=this.count,e=0;n>e;e++)t.add(i[e]);return t},ci.prototype.sort=ci.prototype.sort=function(t){return s(this),this.l.sort(t),this.hd(),this},ci.prototype.sortRange=ci.prototype.lo=function(t,i,n){var e=this.l,o=e.length;void 0===i&&(i=0),void 0===n&&(n=o),s(this);var r=n-i;if(1>=r)return this;if((0>i||i>=o-1)&&c(i,"0 <= from < length",ci,"sortRange:from"),2===r)return n=e[i],o=e[i+1],0<t(n,o)&&(e[i]=o,e[i+1]=n,this.hd()),this;if(0===i)if(n>=o)e.sort(t);else for(r=e.slice(0,n),r.sort(t),t=0;n>t;t++)e[t]=r[t];else if(n>=o)for(r=e.slice(i),r.sort(t),t=i;o>t;t++)e[t]=r[t-i];else for(r=e.slice(i,n),r.sort(t),t=i;n>t;t++)e[t]=r[t-i];return this.hd(),this},ci.prototype.reverse=ci.prototype.reverse=function(){return s(this),this.l.reverse(),this.hd(),this},Y(ci,{count:"count"},function(){return this.l.length}),Y(ci,{size:"size"},function(){return this.l.length}),Y(ci,{length:"length"},function(){return this.l.length}),Y(ci,{i:"iterator"},function(){if(0>=this.l.length)return pf;var t=this.Rc;return null!==t?(t.reset(),t):new ui(this)}),Y(ci,{Kl:"iteratorBackwards"},function(){if(0>=this.l.length)return pf;var t=this.Mm;return null!==t?(t.reset(),t):new fi(this)}),W(pi,{key:!0,value:!0}),Y(pi,{i:"iterator"},function(){return this}),pi.prototype.reset=pi.prototype.reset=function(){var t=this.Qj;t.Rc=null,this.Ga=t.K,this.gb=null},pi.prototype.next=pi.prototype.hasNext=pi.prototype.next=function(){var t=this.Qj;if(t.K!==this.Ga){if(null===this.key)return!1;d(t)}var i=this.gb,i=null===i?t.La:i.wb;return null!==i?(this.gb=i,this.value=i.value,this.key=i.key,!0):(this.lf(),!1)},pi.prototype.first=pi.prototype.first=function(){var t=this.Qj;if(this.Ga=t.K,t=t.La,null!==t){this.gb=t;var i=t.value;return this.key=t.key,this.value=i}return null},pi.prototype.any=function(t){var i=this.Qj;i.Rc=null;var n=i.K;this.gb=null;for(var e=i.La;null!==e;){if(t(e.value))return!0;i.K!==n&&d(i),e=e.wb}return!1},pi.prototype.all=function(t){var i=this.Qj;i.Rc=null;var n=i.K;this.gb=null;for(var e=i.La;null!==e;){if(!t(e.value))return!1;i.K!==n&&d(i),e=e.wb}return!0},pi.prototype.each=function(t){var i=this.Qj;i.Rc=null;var n=i.K;this.gb=null;for(var e=i.La;null!==e;)t(e.value),i.K!==n&&d(i),e=e.wb},Y(pi,{count:"count"},function(){return this.Qj.uc}),pi.prototype.lf=function(){this.value=this.key=null,this.Ga=-1,this.Qj.Rc=this},pi.prototype.toString=function(){return null!==this.gb?"SetIterator@"+this.gb.value:"SetIterator"},H("Set",di),di.prototype.hd=function(){var t=this.K;t++,t>999999999&&(t=0),this.K=t},di.prototype.freeze=di.prototype.freeze=function(){return this.pa=!0,this},di.prototype.thaw=di.prototype.wa=function(){return this.pa=!1,this},di.prototype.toString=function(){return"Set("+X(this.da)+")#"+V(this)},di.prototype.add=di.prototype.add=function(t){if(null===t)return!1;s(this,t);var i=t;return y(t)&&(i=G(t)),void 0===this.vc[i]?(this.uc++,t=new mi(t,t),this.vc[i]=t,i=this.Mg,null===i?this.La=t:(t.Ym=i,i.wb=t),this.Mg=t,this.hd(),!0):!1},di.prototype.addAll=di.prototype.md=function(t){if(null===t)return this;if(s(this),g(t))for(var i=x(t),n=0;i>n;n++)this.add(w(t,n));else for(t=t.i;t.next();)this.add(t.value);return this},di.prototype.contains=di.prototype.has=di.prototype.contains=function(t){if(null===t)return!1;var i=t;return y(t)&&(i=V(t),void 0===i)?!1:void 0!==this.vc[i]},di.prototype.containsAll=function(t){if(null===t)return!0;for(t=t.i;t.next();)if(!this.contains(t.value))return!1;return!0},di.prototype.containsAny=function(t){if(null===t)return!0;for(t=t.i;t.next();)if(this.contains(t.value))return!0;return!1},di.prototype.first=di.prototype.first=function(){var t=this.La;return null===t?null:t.value},di.prototype.any=function(t){for(var i=this.K,n=this.La;null!==n;){if(t(n.value))return!0;this.K!==i&&d(this),n=n.wb}return!1},di.prototype.all=function(t){for(var i=this.K,n=this.La;null!==n;){if(!t(n.value))return!1;this.K!==i&&d(this),n=n.wb}return!0},di.prototype.each=function(t){for(var i=this.K,n=this.La;null!==n;)t(n.value),this.K!==i&&d(this),n=n.wb},di.prototype.remove=di.prototype["delete"]=di.prototype.remove=function(t){if(null===t)return!1;s(this,t);var i=t;if(y(t)&&(i=V(t),void 0===i))return!1;if(t=this.vc[i],void 0===t)return!1;var n=t.wb,e=t.Ym;return null!==n&&(n.Ym=e),null!==e&&(e.wb=n),this.La===t&&(this.La=n),this.Mg===t&&(this.Mg=e),delete this.vc[i],this.uc--,this.hd(),!0},di.prototype.removeAll=di.prototype.TC=function(t){if(null===t)return this;if(s(this),g(t))for(var i=x(t),n=0;i>n;n++)this.remove(w(t,n));else for(t=t.i;t.next();)this.remove(t.value);return this},di.prototype.retainAll=function(t){if(null===t||0===this.count)return this;s(this);var i=new di(this.da);i.md(t),t=new ci(this.da);for(var n=this.i;n.next();)i.contains(n.value)||t.add(n.value);for(i=t.i;i.next();)this.remove(i.value);return this},di.prototype.clear=di.prototype.clear=function(){s(this),this.vc={},this.uc=0,this.Mg=this.La=null,this.hd()},di.prototype.copy=function(){var t,i=new di(this.da),n=this.vc;for(t in n)i.add(n[t].value);return i},di.prototype.toArray=di.prototype.ce=function(){var t,i=Array(this.uc),n=this.vc,e=0;for(t in n)i[e]=n[t].value,e++;return i},di.prototype.toList=function(){var t,i=new ci(this.da),n=this.vc;for(t in n)i.add(n[t].value);return i},Y(di,{count:"count"},function(){return this.uc}),Y(di,{size:"size"},function(){return this.uc}),Y(di,{i:"iterator"},function(){if(0>=this.uc)return pf;var t=this.Rc;return null!==t?(t.reset(),t):new pi(this)}),W(vi,{key:!0,value:!0}),Y(vi,{i:"iterator"},function(){return this}),vi.prototype.reset=vi.prototype.reset=function(){this.Ga=this.Fa.K,this.gb=null},vi.prototype.next=vi.prototype.hasNext=vi.prototype.next=function(){var t=this.Fa;if(t.K!==this.Ga){if(null===this.key)return!1;d(t)}var i=this.gb,i=null===i?t.La:i.wb;return null!==i?(this.gb=i,this.value=this.key=t=i.key,!0):(this.lf(),!1)},vi.prototype.first=vi.prototype.first=function(){var t=this.Fa;return this.Ga=t.K,t=t.La,null!==t?(this.gb=t,this.value=this.key=t=t.key):null},vi.prototype.any=function(t){var i=this.Fa,n=i.K;this.gb=null;for(var e=i.La;null!==e;){if(t(e.key))return!0;i.K!==n&&d(i),e=e.wb}return!1},vi.prototype.all=function(t){var i=this.Fa,n=i.K;this.gb=null;for(var e=i.La;null!==e;){if(!t(e.key))return!1;i.K!==n&&d(i),e=e.wb}return!0},vi.prototype.each=function(t){var i=this.Fa,n=i.K;this.gb=null;for(var e=i.La;null!==e;)t(e.key),i.K!==n&&d(i),e=e.wb},Y(vi,{count:"count"},function(){return this.Fa.uc}),vi.prototype.lf=function(){this.value=this.key=null,this.Ga=-1},vi.prototype.toString=function(){return null!==this.gb?"MapKeySetIterator@"+this.gb.value:"MapKeySetIterator"},U(yi,di),yi.prototype.freeze=function(){return this},yi.prototype.wa=function(){return this},yi.prototype.toString=function(){return"MapKeySet("+this.Fa.toString()+")"},yi.prototype.add=yi.prototype.set=yi.prototype.add=function(){return r("This Set is read-only: "+this.toString()),!1},yi.prototype.contains=yi.prototype.has=yi.prototype.contains=function(t){return this.Fa.contains(t)},yi.prototype.remove=yi.prototype["delete"]=yi.prototype.remove=function(){return r("This Set is read-only: "+this.toString()),!1},yi.prototype.clear=yi.prototype.clear=function(){r("This Set is read-only: "+this.toString())},yi.prototype.first=yi.prototype.first=function(){var t=this.Fa.La;return null!==t?t.key:null},yi.prototype.any=function(t){for(var i=this.Fa.La;null!==i;){if(t(i.key))return!0;i=i.wb}return!1},yi.prototype.all=function(t){for(var i=this.Fa.La;null!==i;){if(!t(i.key))return!1;i=i.wb}return!0},yi.prototype.each=function(t){for(var i=this.Fa.La;null!==i;)t(i.key),i=i.wb},yi.prototype.copy=function(){return new yi(this.Fa)},yi.prototype.toSet=function(){var t,i=new di(this.Fa.Ap),n=this.Fa.vc;for(t in n)i.add(n[t].key);return i},yi.prototype.toArray=yi.prototype.ce=function(){var t,i=this.Fa.vc,n=Array(this.Fa.uc),e=0;for(t in i)n[e]=i[t].key,e++;return n},yi.prototype.toList=function(){var t,i=new ci(this.da),n=this.Fa.vc;for(t in n)i.add(n[t].key);return i},Y(yi,{count:"count"},function(){return this.Fa.uc}),Y(yi,{size:"size"},function(){return this.Fa.uc}),Y(yi,{i:"iterator"},function(){return 0>=this.Fa.uc?pf:new vi(this.Fa)}),W(gi,{key:!0,value:!0}),Y(gi,{i:"iterator"},function(){return this}),gi.prototype.reset=gi.prototype.reset=function(){var t=this.Fa;t.Nm=null,this.Ga=t.K,this.gb=null},gi.prototype.next=gi.prototype.hasNext=gi.prototype.next=function(){var t=this.Fa;if(t.K!==this.Ga){if(null===this.key)return!1;d(t)}var i=this.gb,i=null===i?t.La:i.wb;return null!==i?(this.gb=i,this.value=i.value,this.key=i.key,!0):(this.lf(),!1)},gi.prototype.first=gi.prototype.first=function(){var t=this.Fa;if(this.Ga=t.K,t=t.La,null!==t){this.gb=t;var i=t.value;return this.key=t.key,this.value=i}return null},gi.prototype.any=function(t){var i=this.Fa;i.Nm=null;var n=i.K;this.gb=null;for(var e=i.La;null!==e;){if(t(e.value))return!0;i.K!==n&&d(i),e=e.wb}return!1},gi.prototype.all=function(t){var i=this.Fa;i.Nm=null;var n=i.K;this.gb=null;for(var e=i.La;null!==e;){if(!t(e.value))return!1;i.K!==n&&d(i),e=e.wb}return!0},gi.prototype.each=function(t){var i=this.Fa;i.Nm=null;var n=i.K;this.gb=null;for(var e=i.La;null!==e;)t(e.value),i.K!==n&&d(i),e=e.wb},Y(gi,{count:"count"},function(){return this.Fa.uc}),gi.prototype.lf=function(){this.value=this.key=null,this.Ga=-1,this.Fa.Nm=this},gi.prototype.toString=function(){return null!==this.gb?"MapValueSetIterator@"+this.gb.value:"MapValueSetIterator"},W(mi,{key:!0,value:!0}),mi.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"},W(xi,{key:!0,value:!0}),Y(xi,{i:"iterator"},function(){return this}),xi.prototype.reset=xi.prototype.reset=function(){var t=this.Fa;t.Rc=null,this.Ga=t.K,this.gb=null},xi.prototype.next=xi.prototype.hasNext=xi.prototype.next=function(){var t=this.Fa;if(t.K!==this.Ga){if(null===this.key)return!1;d(t)}var i=this.gb,i=null===i?t.La:i.wb;return null!==i?(this.gb=i,this.key=i.key,this.value=i.value,!0):(this.lf(),!1)},xi.prototype.first=xi.prototype.first=function(){var t=this.Fa;return this.Ga=t.K,t=t.La,null!==t?(this.gb=t,this.key=t.key,this.value=t.value,t):null},xi.prototype.any=function(t){var i=this.Fa;i.Rc=null;var n=i.K;this.gb=null;for(var e=i.La;null!==e;){if(t(e))return!0;i.K!==n&&d(i),e=e.wb}return!1},xi.prototype.all=function(t){var i=this.Fa;i.Rc=null;var n=i.K;this.gb=null;for(var e=i.La;null!==e;){if(!t(e))return!1;i.K!==n&&d(i),e=e.wb}return!0},xi.prototype.each=function(t){var i=this.Fa;i.Rc=null;var n=i.K;this.gb=null;for(var e=i.La;null!==e;)t(e),i.K!==n&&d(i),e=e.wb},Y(xi,{count:"count"},function(){return this.Fa.uc}),xi.prototype.lf=function(){this.value=this.key=null,this.Ga=-1,this.Fa.Rc=this},xi.prototype.toString=function(){return null!==this.gb?"MapIterator@"+this.gb:"MapIterator"},H("Map",bi),bi.prototype.hd=function(){var t=this.K;t++,t>999999999&&(t=0),this.K=t},bi.prototype.freeze=bi.prototype.freeze=function(){return this.pa=!0,this},bi.prototype.thaw=bi.prototype.wa=function(){return this.pa=!1,this},bi.prototype.toString=function(){return"Map("+X(this.Ap)+","+X(this.ru)+")#"+V(this)},bi.prototype.add=bi.prototype.set=bi.prototype.add=function(t,i){s(this,t);var n=t;y(t)&&(n=G(t));var e=this.vc[n];return void 0===e?(this.uc++,e=new mi(t,i),this.vc[n]=e,n=this.Mg,null===n?this.La=e:(e.Ym=n,n.wb=e),this.Mg=e,this.hd(),!0):(e.value=i,!1)},bi.prototype.addAll=bi.prototype.md=function(t){if(null===t)return this;if(g(t))for(var i=x(t),n=0;i>n;n++){var e=w(t,n);this.add(e.key,e.value)}else for(t=t.i;t.next();)this.add(t.key,t.value);return this},bi.prototype.first=bi.prototype.first=function(){return this.La},bi.prototype.any=function(t){for(var i=this.K,n=this.La;null!==n;){if(t(n))return!0;this.K!==i&&d(this),n=n.wb}return!1},bi.prototype.all=function(t){for(var i=this.K,n=this.La;null!==n;){if(!t(n))return!1;this.K!==i&&d(this),n=n.wb}return!0},bi.prototype.each=function(t){for(var i=this.K,n=this.La;null!==n;)t(n),this.K!==i&&d(this),n=n.wb},bi.prototype.contains=bi.prototype.has=bi.prototype.contains=function(t){var i=t;return y(t)&&(i=V(t),void 0===i)?!1:void 0!==this.vc[i]},bi.prototype.getValue=bi.prototype.get=bi.prototype.ha=function(t){var i=t;return y(t)&&(i=V(t),void 0===i)?null:(t=this.vc[i],void 0===t?null:t.value)},bi.prototype.remove=bi.prototype["delete"]=bi.prototype.remove=function(t){if(null===t)return!1;s(this,t);var i=t;if(y(t)&&(i=V(t),void 0===i))return!1;if(t=this.vc[i],void 0===t)return!1;var n=t.wb,e=t.Ym;return null!==n&&(n.Ym=e),null!==e&&(e.wb=n),this.La===t&&(this.La=n),this.Mg===t&&(this.Mg=e),delete this.vc[i],this.uc--,this.hd(),!0},bi.prototype.clear=bi.prototype.clear=function(){s(this),this.vc={},this.uc=0,this.Mg=this.La=null,this.hd()},bi.prototype.copy=function(){var t,i=new bi(this.Ap,this.ru),n=this.vc;for(t in n){var e=n[t];i.add(e.key,e.value)}return i},bi.prototype.toArray=bi.prototype.ce=function(){var t,i=this.vc,n=Array(this.uc),e=0;for(t in i){var o=i[t];n[e]=new mi(o.key,o.value),e++}return n},bi.prototype.toKeySet=bi.prototype.Zh=function(){return new yi(this)},Y(bi,{count:"count"},function(){return this.uc}),Y(bi,{size:"size"},function(){return this.uc}),Y(bi,{i:"iterator"},function(){if(0>=this.count)return pf;var t=this.Rc;return null!==t?(t.reset(),t):new xi(this)}),Y(bi,{mI:"iteratorKeys"},function(){return 0>=this.count?pf:new vi(this)}),Y(bi,{AC:"iteratorValues"},function(){if(0>=this.count)return pf;var t=this.Nm;return null!==t?(t.reset(),t):new gi(this)}),H("Point",wi),wi.Qg=!0,W(wi,{x:!0,y:!0}),wi.prototype.assign=function(t){this.x=t.x,this.y=t.y},wi.prototype.setTo=wi.prototype.k=function(t,i){return this.x=t,this.y=i,this},wi.prototype.set=wi.prototype.set=function(t){return this.kb(),this.x=t.x,this.y=t.y,this},wi.prototype.copy=function(){var t=new wi;return t.x=this.x,t.y=this.y,t},Wu=wi.prototype,Wu.va=function(){return this.pa=!0,Object.freeze(this),this},Wu.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()},Wu.freeze=function(){return this.pa=!0,this},Wu.wa=function(){return Object.isFrozen(this)&&r("cannot thaw constant: "+this),this.pa=!1,this},Wu.kb=function(t){if(this.pa){var i="The Point is frozen, so its properties cannot be set: "+this.toString();void 0!==t&&(i+="  to value: "+t),r(i)}},wi.parse=function(t){if("string"==typeof t){t=t.split(" ");for(var i=0,n=0;""===t[i];)i++;var e=t[i++];e&&(n=parseFloat(e));for(var o=0;""===t[i];)i++;return(e=t[i++])&&(o=parseFloat(e)),new wi(n,o)}return new wi},wi.stringify=function(t){return t instanceof wi?t.x.toString()+" "+t.y.toString():t.toString()},wi.prototype.toString=function(){return"Point("+this.x+","+this.y+")"},wi.prototype.equals=wi.prototype.A=function(t){return t instanceof wi?this.x===t.x&&this.y===t.y:!1},wi.prototype.equalTo=wi.prototype.Qu=function(t,i){return this.x===t&&this.y===i},wi.prototype.equalsApprox=wi.prototype.Wd=function(t){return Qf.q(this.x,t.x)&&Qf.q(this.y,t.y)},wi.prototype.add=wi.prototype.add=function(t){return this.kb(),this.x+=t.x,this.y+=t.y,this},wi.prototype.subtract=wi.prototype.ws=function(t){return this.kb(),this.x-=t.x,this.y-=t.y,this},wi.prototype.offset=wi.prototype.offset=function(t,i){return this.kb(),this.x+=t,this.y+=i,this},wi.prototype.rotate=wi.prototype.rotate=function(t){if(this.kb(),0===t)return this;var i=this.x,n=this.y;if(0===i&&0===n)return this;var e=0,o=0;return t>=360?t-=360:0>t&&(t+=360),90===t?(e=0,o=1):180===t?(e=-1,o=0):270===t?(e=0,o=-1):(t=t*Math.PI/180,e=Math.cos(t),o=Math.sin(t)),this.x=e*i-o*n,this.y=o*i+e*n,this},wi.prototype.scale=wi.prototype.scale=function(t,i){return this.x*=t,this.y*=i,this},wi.prototype.distanceSquaredPoint=wi.prototype.Xi=function(t){var i=t.x-this.x;return t=t.y-this.y,i*i+t*t},wi.prototype.distanceSquared=wi.prototype.sr=function(t,i){var n=t-this.x,e=i-this.y;return n*n+e*e},wi.prototype.normalize=wi.prototype.normalize=function(){this.kb();var t=this.x,i=this.y,n=Math.sqrt(t*t+i*i);return n>0&&(this.x=t/n,this.y=i/n),this},wi.prototype.directionPoint=wi.prototype.Rh=function(t){return ki(t.x-this.x,t.y-this.y)},wi.prototype.direction=wi.prototype.direction=function(t,i){return ki(t-this.x,i-this.y)},wi.prototype.projectOntoLineSegment=function(t,i,n,e){return Qf.Ml(t,i,n,e,this.x,this.y,this),this},wi.prototype.projectOntoLineSegmentPoint=function(t,i){return Qf.Ml(t.x,t.y,i.x,i.y,this.x,this.y,this),this},wi.prototype.snapToGrid=function(t,i,n,e){return Qf.xr(this.x,this.y,t,i,n,e,this),this},wi.prototype.snapToGridPoint=function(t,i){return Qf.xr(this.x,this.y,t.x,t.y,i.width,i.height,this),this},wi.prototype.setRectSpot=wi.prototype.qs=function(t,i){return this.kb(),this.x=t.x+i.x*t.width+i.offsetX,this.y=t.y+i.y*t.height+i.offsetY,this},wi.prototype.setSpot=wi.prototype.ss=function(t,i,n,e,o){return this.kb(),this.x=t+o.x*n+o.offsetX,this.y=i+o.y*e+o.offsetY,this},wi.prototype.transform=function(t){return t.Ka(this),this};var df;wi.distanceLineSegmentSquared=df=function(t,i,n,e,o,r){var s=o-n,a=r-e,h=s*s+a*a;n-=t,e-=i;var l=-n*s-e*a;return 0>=l||l>=h?(s=o-t,a=r-i,Math.min(n*n+e*e,s*s+a*a)):(t=s*e-a*n,t*t/h)};var vf;wi.distanceSquared=vf=function(t,i,n,e){return t=n-t,i=e-i,t*t+i*i};var yf;wi.direction=yf=function(t,i,n,e){return t=n-t,i=e-i,0===t?i>0?90:0>i?270:0:0===i?t>0?0:180:isNaN(t)||isNaN(i)?0:(e=180*Math.atan(Math.abs(i/t))/Math.PI,0>t?e=0>i?e+180:180-e:0>i&&(e=360-e),e)},wi.prototype.isReal=wi.prototype.w=function(){return isFinite(this.x)&&isFinite(this.y)},H("Size",Ti),Ti.Qg=!0,W(Ti,{width:!0,height:!0}),Ti.prototype.assign=function(t){this.width=t.width,this.height=t.height},Ti.prototype.setTo=Ti.prototype.k=function(t,i){return this.width=t,this.height=i,this},Ti.prototype.set=Ti.prototype.set=function(t){return this.kb(),this.width=t.width,this.height=t.height,this},Ti.prototype.copy=function(){var t=new Ti;return t.width=this.width,t.height=this.height,t},Wu=Ti.prototype,Wu.va=function(){return this.pa=!0,Object.freeze(this),this},Wu.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()},Wu.freeze=function(){return this.pa=!0,this},Wu.wa=function(){return Object.isFrozen(this)&&r("cannot thaw constant: "+this),this.pa=!1,this},Wu.kb=function(t){if(this.pa){var i="The Size is frozen, so its properties cannot be set: "+this.toString();void 0!==t&&(i+="  to value: "+t),r(i)}},Ti.parse=function(t){if("string"==typeof t){t=t.split(" ");for(var i=0,n=0;""===t[i];)i++;var e=t[i++];e&&(n=parseFloat(e));for(var o=0;""===t[i];)i++;return(e=t[i++])&&(o=parseFloat(e)),new Ti(n,o)}return new Ti},Ti.stringify=function(t){return t instanceof Ti?t.width.toString()+" "+t.height.toString():t.toString()},Ti.prototype.toString=function(){return"Size("+this.width+","+this.height+")"},Ti.prototype.equals=Ti.prototype.A=function(t){return t instanceof Ti?this.width===t.width&&this.height===t.height:!1},Ti.prototype.equalTo=Ti.prototype.Qu=function(t,i){return this.width===t&&this.height===i},Ti.prototype.equalsApprox=Ti.prototype.Wd=function(t){return Qf.q(this.width,t.width)&&Qf.q(this.height,t.height)},Ti.prototype.isReal=Ti.prototype.w=function(){return isFinite(this.width)&&isFinite(this.height)},H("Rect",Si),Si.Qg=!0,W(Si,{x:!0,y:!0,width:!0,height:!0}),Si.prototype.assign=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},Si.prototype.setTo=Si.prototype.k=function(t,i,n,e){return this.x=t,this.y=i,this.width=n,this.height=e,this},Si.prototype.set=Si.prototype.set=function(t){return this.kb(),this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},Si.prototype.setPoint=Si.prototype.Pe=function(t){return this.kb(),this.x=t.x,this.y=t.y,this},Si.prototype.setSize=function(t){return this.kb(),this.width=t.width,this.height=t.height,this},Si.prototype.copy=function(){var t=new Si;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},Wu=Si.prototype,Wu.va=function(){return this.pa=!0,Object.freeze(this),this},Wu.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()},Wu.freeze=function(){return this.pa=!0,this},Wu.wa=function(){return Object.isFrozen(this)&&r("cannot thaw constant: "+this),this.pa=!1,this},Wu.kb=function(t){if(this.pa){var i="The Rect is frozen, so its properties cannot be set: "+this.toString();void 0!==t&&(i+="  to value: "+t),r(i)}},Si.parse=function(t){if("string"==typeof t){t=t.split(" ");for(var i=0,n=0;""===t[i];)i++;var e=t[i++];e&&(n=parseFloat(e));for(var o=0;""===t[i];)i++;(e=t[i++])&&(o=parseFloat(e));for(var r=0;""===t[i];)i++;(e=t[i++])&&(r=parseFloat(e));for(var s=0;""===t[i];)i++;return(e=t[i++])&&(s=parseFloat(e)),new Si(n,o,r,s)}return new Si},Si.stringify=function(t){return t instanceof Si?t.x.toString()+" "+t.y.toString()+" "+t.width.toString()+" "+t.height.toString():t.toString()},Si.prototype.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},Si.prototype.equals=Si.prototype.A=function(t){return t instanceof Si?this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height:!1},Si.prototype.equalTo=Si.prototype.Qu=function(t,i,n,e){return this.x===t&&this.y===i&&this.width===n&&this.height===e},Si.prototype.equalsApprox=Si.prototype.Wd=function(t){return Qf.q(this.x,t.x)&&Qf.q(this.y,t.y)&&Qf.q(this.width,t.width)&&Qf.q(this.height,t.height)},Si.prototype.containsPoint=Si.prototype.na=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},Si.prototype.containsRect=Si.prototype.Wi=function(t){return this.x<=t.x&&t.x+t.width<=this.x+this.width&&this.y<=t.y&&t.y+t.height<=this.y+this.height},Si.prototype.contains=Si.prototype.contains=function(t,i,n,e){return void 0===n&&(n=0),void 0===e&&(e=0),this.x<=t&&t+n<=this.x+this.width&&this.y<=i&&i+e<=this.y+this.height},Si.prototype.reset=function(){this.kb(),this.height=this.width=this.y=this.x=0},Si.prototype.offset=Si.prototype.offset=function(t,i){return this.kb(),this.x+=t,this.y+=i,this},Si.prototype.inflate=Si.prototype.$e=function(t,i){return Ni(this,i,t,i,t)},Si.prototype.addMargin=Si.prototype.wu=function(t){return Ni(this,t.top,t.right,t.bottom,t.left)},Si.prototype.subtractMargin=Si.prototype.VG=function(t){return Ni(this,-t.top,-t.right,-t.bottom,-t.left)},Si.prototype.grow=function(t,i,n,e){return Ni(this,t,i,n,e)},Si.prototype.intersectRect=function(t){return Pi(this,t.x,t.y,t.width,t.height)},Si.prototype.intersect=function(t,i,n,e){return Pi(this,t,i,n,e)},Si.prototype.intersectsRect=Si.prototype.If=function(t){return this.rC(t.x,t.y,t.width,t.height)},Si.prototype.intersects=Si.prototype.rC=function(t,i,n,e){var o=this.width,r=this.x;return 1/0!==o&&1/0!==n&&(o+=r,n+=t,isNaN(n)||isNaN(o)||r>n||t>o)?!1:(t=this.height,n=this.y,1/0!==t&&1/0!==e&&(t+=n,e+=i,isNaN(e)||isNaN(t)||n>e||i>t)?!1:!0)},Si.prototype.unionPoint=Si.prototype.$h=function(t){return Li(this,t.x,t.y,0,0)},Si.prototype.unionRect=Si.prototype.fh=function(t){return Li(this,t.x,t.y,t.width,t.height)},Si.prototype.union=Si.prototype.HD=function(t,i,n,e){return this.kb(),void 0===n&&(n=0),void 0===e&&(e=0),Li(this,t,i,n,e)},Si.prototype.setSpot=Si.prototype.ss=function(t,i,n){return this.kb(),this.x=t-n.offsetX-n.x*this.width,this.y=i-n.offsetY-n.y*this.height,this};var gf;Si.contains=gf=function(t,i,n,e,o,r,s,a){return void 0===s&&(s=0),void 0===a&&(a=0),o>=t&&t+n>=o+s&&r>=i&&i+e>=r+a},Si.intersects=function(t,i,n,e,o,r,s,a){return n+=t,s+=o,t>s||o>n?!1:(t=e+i,a+=r,i>a||r>t?!1:!0)},K(Si,{left:"left"},function(){return this.x},function(t){this.kb(t),this.x=t}),K(Si,{top:"top"},function(){return this.y},function(t){this.kb(t),this.y=t}),K(Si,{right:"right"},function(){return this.x+this.width},function(t){this.kb(t),this.x+=t-(this.x+this.width)}),K(Si,{bottom:"bottom"},function(){return this.y+this.height},function(t){this.kb(t),this.y+=t-(this.y+this.height)}),K(Si,{position:"position"},function(){return new wi(this.x,this.y)},function(t){this.kb(t),this.x=t.x,this.y=t.y}),K(Si,{size:"size"},function(){return new Ti(this.width,this.height)},function(t){this.kb(t),this.width=t.width,this.height=t.height}),K(Si,{Yj:"center"},function(){return new wi(this.x+this.width/2,this.y+this.height/2)},function(t){this.kb(t),this.x=t.x-this.width/2,this.y=t.y-this.height/2}),K(Si,{ua:"centerX"},function(){return this.x+this.width/2},function(t){this.kb(t),this.x=t-this.width/2}),K(Si,{Da:"centerY"},function(){return this.y+this.height/2},function(t){this.kb(t),this.y=t-this.height/2}),Si.prototype.isReal=Si.prototype.w=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},Si.prototype.isEmpty=function(){return 0===this.width&&0===this.height},H("Margin",Di),Di.Qg=!0,W(Di,{top:!0,right:!0,bottom:!0,left:!0}),Di.prototype.assign=function(t){this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left},Di.prototype.setTo=Di.prototype.k=function(t,i,n,e){return this.kb(),this.top=t,this.right=i,this.bottom=n,this.left=e,this
},Di.prototype.set=Di.prototype.set=function(t){return this.kb(),this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Di.prototype.copy=function(){var t=new Di;return t.top=this.top,t.right=this.right,t.bottom=this.bottom,t.left=this.left,t},Wu=Di.prototype,Wu.va=function(){return this.pa=!0,Object.freeze(this),this},Wu.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()},Wu.freeze=function(){return this.pa=!0,this},Wu.wa=function(){return Object.isFrozen(this)&&r("cannot thaw constant: "+this),this.pa=!1,this},Wu.kb=function(t){if(this.pa){var i="The Margin is frozen, so its properties cannot be set: "+this.toString();void 0!==t&&(i+="  to value: "+t),r(i)}},Di.parse=function(t){if("string"==typeof t){t=t.split(" ");for(var i=0,n=0/0;""===t[i];)i++;var e=t[i++];if(e&&(n=parseFloat(e)),isNaN(n))return new Di;for(var o=0/0;""===t[i];)i++;if((e=t[i++])&&(o=parseFloat(e)),isNaN(o))return new Di(n);for(var r=0/0;""===t[i];)i++;if((e=t[i++])&&(r=parseFloat(e)),isNaN(r))return new Di(n,o);for(var s=0/0;""===t[i];)i++;return(e=t[i++])&&(s=parseFloat(e)),isNaN(s)?new Di(n,o):new Di(n,o,r,s)}return new Di},Di.stringify=function(t){return t instanceof Di?t.top.toString()+" "+t.right.toString()+" "+t.bottom.toString()+" "+t.left.toString():t.toString()},Di.prototype.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},Di.prototype.equals=Di.prototype.A=function(t){return t instanceof Di?this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left:!1},Di.prototype.equalTo=Di.prototype.Qu=function(t,i,n,e){return this.top===t&&this.right===i&&this.bottom===n&&this.left===e},Di.prototype.equalsApprox=Di.prototype.Wd=function(t){return Qf.q(this.top,t.top)&&Qf.q(this.right,t.right)&&Qf.q(this.bottom,t.bottom)&&Qf.q(this.left,t.left)},Di.prototype.isReal=Di.prototype.w=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},Ai.Qg=!0,W(Ai,{m11:!0,m12:!0,m21:!0,m22:!0,dx:!0,dy:!0}),Ai.prototype.set=Ai.prototype.set=function(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this},Ai.prototype.copy=function(){var t=new Ai;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t},Ai.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},Ai.prototype.equals=Ai.prototype.A=function(t){return t instanceof Ai?this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy:!1},Ai.prototype.isIdentity=Ai.prototype.Nr=function(){return 1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22&&0===this.dx&&0===this.dy},Ai.prototype.reset=Ai.prototype.reset=function(){return this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0,this},Ai.prototype.multiply=Ai.prototype.multiply=function(t){var i=this.m12*t.m11+this.m22*t.m12,n=this.m11*t.m21+this.m21*t.m22,e=this.m12*t.m21+this.m22*t.m22,o=this.m11*t.dx+this.m21*t.dy+this.dx,r=this.m12*t.dx+this.m22*t.dy+this.dy;return this.m11=this.m11*t.m11+this.m21*t.m12,this.m12=i,this.m21=n,this.m22=e,this.dx=o,this.dy=r,this},Ai.prototype.multiplyInverted=Ai.prototype.KC=function(t){var i=1/(t.m11*t.m22-t.m12*t.m21),n=t.m22*i,e=-t.m12*i,o=-t.m21*i,r=t.m11*i,s=i*(t.m21*t.dy-t.m22*t.dx),a=i*(t.m12*t.dx-t.m11*t.dy);return t=this.m12*n+this.m22*e,i=this.m11*o+this.m21*r,o=this.m12*o+this.m22*r,r=this.m11*s+this.m21*a+this.dx,s=this.m12*s+this.m22*a+this.dy,this.m11=this.m11*n+this.m21*e,this.m12=t,this.m21=i,this.m22=o,this.dx=r,this.dy=s,this},Ai.prototype.invert=Ai.prototype.by=function(){var t=1/(this.m11*this.m22-this.m12*this.m21),i=-this.m12*t,n=-this.m21*t,e=this.m11*t,o=t*(this.m21*this.dy-this.m22*this.dx),r=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=this.m22*t,this.m12=i,this.m21=n,this.m22=e,this.dx=o,this.dy=r,this},Ai.prototype.rotate=Ai.prototype.rotate=function(t,i,n){if(t>=360?t-=360:0>t&&(t+=360),0===t)return this;this.translate(i,n);var e=0,o=0;90===t?(e=0,o=1):180===t?(e=-1,o=0):270===t?(e=0,o=-1):(o=t*Math.PI/180,e=Math.cos(o),o=Math.sin(o)),t=this.m12*e+this.m22*o;var r=this.m11*-o+this.m21*e,s=this.m12*-o+this.m22*e;return this.m11=this.m11*e+this.m21*o,this.m12=t,this.m21=r,this.m22=s,this.translate(-i,-n),this},Ai.prototype.translate=Ai.prototype.translate=function(t,i){return this.dx+=this.m11*t+this.m21*i,this.dy+=this.m12*t+this.m22*i,this},Ai.prototype.scale=Ai.prototype.scale=function(t,i){return void 0===i&&(i=t),this.m11*=t,this.m12*=t,this.m21*=i,this.m22*=i,this},Ai.prototype.transformPoint=Ai.prototype.Ka=function(t){var i=t.x,n=t.y;return t.x=i*this.m11+n*this.m21+this.dx,t.y=i*this.m12+n*this.m22+this.dy,t},Ai.prototype.invertedTransformPoint=Ai.prototype.ah=function(t){var i=1/(this.m11*this.m22-this.m12*this.m21),n=-this.m12*i,e=this.m11*i,o=i*(this.m12*this.dx-this.m11*this.dy),r=t.x,s=t.y;return t.x=r*this.m22*i+s*-this.m21*i+i*(this.m21*this.dy-this.m22*this.dx),t.y=r*n+s*e+o,t},Ai.prototype.transformRect=Ai.prototype.FD=function(t){var i=t.x,n=t.y,e=i+t.width,o=n+t.height,r=this.m11,s=this.m12,a=this.m21,h=this.m22,l=this.dx,u=this.dy,f=i*r+n*a+l,c=i*s+n*h+u,p=e*r+n*a+l,n=e*s+n*h+u,d=i*r+o*a+l,i=i*s+o*h+u,r=e*r+o*a+l,e=e*s+o*h+u,o=f,s=c,f=Math.min(f,p),o=Math.max(o,p),s=Math.min(s,n),c=Math.max(c,n),f=Math.min(f,d),o=Math.max(o,d),s=Math.min(s,i),c=Math.max(c,i),f=Math.min(f,r),o=Math.max(o,r),s=Math.min(s,e),c=Math.max(c,e);return t.x=f,t.y=s,t.width=o-f,t.height=c-s,t},H("Spot",Fi),Fi.Qg=!0,W(Fi,{x:!0,y:!0,offsetX:!0,offsetY:!0}),Fi.prototype.assign=function(t){this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY},Fi.prototype.setTo=Fi.prototype.k=function(t,i,n,e){return this.kb(),this.x=t,this.y=i,this.offsetX=n,this.offsetY=e,this},Fi.prototype.set=Fi.prototype.set=function(t){return this.kb(),this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},Fi.prototype.copy=function(){var t=new Fi;return t.x=this.x,t.y=this.y,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},Wu=Fi.prototype,Wu.va=function(){return this.pa=!0,Object.freeze(this),this},Wu.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()},Wu.freeze=function(){return this.pa=!0,this},Wu.wa=function(){return Object.isFrozen(this)&&r("cannot thaw constant: "+this),this.pa=!1,this},Wu.kb=function(t){if(this.pa){var i="The Spot is frozen, so its properties cannot be set: "+this.toString();void 0!==t&&(i+="  to value: "+t),r(i)}};var mf;Fi.parse=mf=function(t){if("string"==typeof t){if(t=t.trim(),"None"===t)return xf;if("TopLeft"===t)return wf;if("Top"===t||"TopCenter"===t||"MiddleTop"===t)return kf;if("TopRight"===t)return Mf;if("Left"===t||"LeftCenter"===t||"MiddleLeft"===t)return Tf;if("Center"===t)return Sf;if("Right"===t||"RightCenter"===t||"MiddleRight"===t)return Cf;if("BottomLeft"===t)return Nf;if("Bottom"===t||"BottomCenter"===t||"MiddleBottom"===t)return Pf;if("BottomRight"===t)return jf;if("TopSide"===t)return Bf;if("LeftSide"===t)return qf;if("RightSide"===t)return Ef;if("BottomSide"===t)return Rf;if("TopBottomSides"===t)return If;if("LeftRightSides"===t)return Gf;if("TopLeftSides"===t)return Vf;if("TopRightSides"===t)return Hf;if("BottomLeftSides"===t)return Uf;if("BottomRightSides"===t)return Kf;if("NotTopSide"===t)return Yf;if("NotLeftSide"===t)return Wf;if("NotRightSide"===t)return Xf;if("NotBottomSide"===t)return Jf;if("AllSides"===t)return Zf;if("Default"===t)return bf;t=t.split(" ");for(var i=0,n=0;""===t[i];)i++;var e=t[i++];void 0!==e&&0<e.length&&(n=parseFloat(e));for(var o=0;""===t[i];)i++;e=t[i++],void 0!==e&&0<e.length&&(o=parseFloat(e));for(var r=0;""===t[i];)i++;e=t[i++],void 0!==e&&0<e.length&&(r=parseFloat(e));for(var s=0;""===t[i];)i++;return e=t[i++],void 0!==e&&0<e.length&&(s=parseFloat(e)),new Fi(n,o,r,s)}return new Fi},Fi.stringify=function(t){return t instanceof Fi&&t.Kc()?t.x.toString()+" "+t.y.toString()+" "+t.offsetX.toString()+" "+t.offsetY.toString():t.toString()},Fi.prototype.toString=function(){return this.Kc()?0===this.offsetX&&0===this.offsetY?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.A(xf)?"None":this.A(wf)?"TopLeft":this.A(kf)?"Top":this.A(Mf)?"TopRight":this.A(Tf)?"Left":this.A(Sf)?"Center":this.A(Cf)?"Right":this.A(Nf)?"BottomLeft":this.A(Pf)?"Bottom":this.A(jf)?"BottomRight":this.A(Bf)?"TopSide":this.A(qf)?"LeftSide":this.A(Ef)?"RightSide":this.A(Rf)?"BottomSide":this.A(If)?"TopBottomSides":this.A(Gf)?"LeftRightSides":this.A(Vf)?"TopLeftSides":this.A(Hf)?"TopRightSides":this.A(Uf)?"BottomLeftSides":this.A(Kf)?"BottomRightSides":this.A(Yf)?"NotTopSide":this.A(Wf)?"NotLeftSide":this.A(Xf)?"NotRightSide":this.A(Jf)?"NotBottomSide":this.A(Zf)?"AllSides":this.A(bf)?"Default":"None"},Fi.prototype.equals=Fi.prototype.A=function(t){return t instanceof Fi?(this.x===t.x||isNaN(this.x)&&isNaN(t.x))&&(this.y===t.y||isNaN(this.y)&&isNaN(t.y))&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY:!1},Fi.prototype.opposite=function(){return new Fi(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},Fi.prototype.includesSide=function(t){return this.Jn()&&t.Jn()?(t=t.offsetY,(this.offsetY&t)===t):!1},Fi.prototype.isSpot=Fi.prototype.Kc=function(){return!isNaN(this.x)&&!isNaN(this.y)},Fi.prototype.isNoSpot=Fi.prototype.Gd=function(){return isNaN(this.x)||isNaN(this.y)},Fi.prototype.isSide=Fi.prototype.Jn=function(){return this.Gd()&&1===this.offsetX&&0!==this.offsetY},Fi.prototype.isDefault=Fi.prototype.lc=function(){return isNaN(this.x)&&isNaN(this.y)&&-1===this.offsetX&&0===this.offsetY};var xf;Fi.None=xf=Oi(new Fi(0,0,0,0),0).va();var bf;Fi.Default=bf=Oi(new Fi(0,0,-1,0),-1).va();var wf;Fi.TopLeft=wf=new Fi(0,0,0,0).va();var kf;Fi.TopCenter=kf=new Fi(.5,0,0,0).va();var Mf;Fi.TopRight=Mf=new Fi(1,0,0,0).va();var Tf;Fi.LeftCenter=Tf=new Fi(0,.5,0,0).va();var Sf;Fi.Center=Sf=new Fi(.5,.5,0,0).va();var Cf;Fi.RightCenter=Cf=new Fi(1,.5,0,0).va();var Nf;Fi.BottomLeft=Nf=new Fi(0,1,0,0).va();var Pf;Fi.BottomCenter=Pf=new Fi(.5,1,0,0).va();var jf;Fi.BottomRight=jf=new Fi(1,1,0,0).va();var Lf;Fi.MiddleTop=Lf=kf;var Df;Fi.MiddleLeft=Df=Tf;var Af;Fi.MiddleRight=Af=Cf;var Ff;Fi.MiddleBottom=Ff=Pf,Fi.Top=kf;var Of;Fi.Left=Of=Tf;var zf;Fi.Right=zf=Cf,Fi.Bottom=Pf;var Bf;Fi.TopSide=Bf=Oi(new Fi(0,0,1,1),1).va();var qf;Fi.LeftSide=qf=Oi(new Fi(0,0,1,2),1).va();var Ef;Fi.RightSide=Ef=Oi(new Fi(0,0,1,4),1).va();var Rf;Fi.BottomSide=Rf=Oi(new Fi(0,0,1,8),1).va();var If;Fi.TopBottomSides=If=Oi(new Fi(0,0,1,9),1).va();var Gf;Fi.LeftRightSides=Gf=Oi(new Fi(0,0,1,6),1).va();var Vf;Fi.TopLeftSides=Vf=Oi(new Fi(0,0,1,3),1).va();var Hf;Fi.TopRightSides=Hf=Oi(new Fi(0,0,1,5),1).va();var Uf;Fi.BottomLeftSides=Uf=Oi(new Fi(0,0,1,10),1).va();var Kf;Fi.BottomRightSides=Kf=Oi(new Fi(0,0,1,12),1).va();var Yf;Fi.NotTopSide=Yf=Oi(new Fi(0,0,1,14),1).va();var Wf;Fi.NotLeftSide=Wf=Oi(new Fi(0,0,1,13),1).va();var Xf;Fi.NotRightSide=Xf=Oi(new Fi(0,0,1,11),1).va();var Jf;Fi.NotBottomSide=Jf=Oi(new Fi(0,0,1,7),1).va();var Zf;Fi.AllSides=Zf=Oi(new Fi(0,0,1,15),1).va(),zi.prototype.copy=function(){var t=new zi;return t.re[0]=this.re[0],t.re[1]=this.re[1],t.re[2]=this.re[2],t.re[3]=this.re[3],t.re[4]=this.re[4],t.re[5]=this.re[5],t},Bi.prototype.addColorStop=function(t,i){this.KB.push({offset:t,color:i})},Wu=qi.prototype,Wu.arc=function(t,i,n,e,o,r){Hi(this,t,i,n,e,o,r)},Wu.beginPath=function(){this.path=[]},Wu.bezierCurveTo=function(t,i,n,e,o,r){this.path.push(["C",t,i,n,e,o,r])},Wu.clearRect=function(){},Wu.clip=function(){Vi(this,"clipPath",this.path,new zi)},Wu.closePath=function(){this.path.push(["z"])},Wu.createLinearGradient=function(t,i,n,e){var o=new Bi("linear");return o.x1=t,o.y1=i,o.x2=n,o.y2=e,o},Wu.createPattern=function(){},Wu.createRadialGradient=function(t,i,n,e,o,r){var s=new Bi("radial");return s.x1=t,s.y1=i,s.r1=n,s.x2=e,s.y2=o,s.r2=r,s},Wu.drawImage=function(t,i,n,e,o,r,s,a,h){t=[i,n,e,o,r,s,a,h,t],i=this.Qh,o=t[8],n="",o instanceof HTMLCanvasElement&&(n=o.toDataURL()),o instanceof HTMLImageElement&&(n=o.src),n={x:0,y:0,width:t[6],height:t[7],href:n},e="",r=t[6]/t[2],s=t[7]/t[3],(0!==t[4]||0!==t[5])&&(e+=" translate("+t[4]+", "+t[5]+")"),(1!==r||1!==s)&&(e+=" scale("+r+", "+s+")"),(0!==t[0]||0!==t[1])&&(e+=" translate("+-t[0]+", "+-t[1]+")"),(0!==t[0]||0!==t[1]||t[2]!==o.naturalWidth||t[3]!==o.naturalHeight)&&(o="CLIP"+this.Ju,this.Ju++,r=Ei(this,"clipPath",{id:o}),r.appendChild(Ei(this,"rect",{x:t[0],y:t[1],width:t[2],height:t[3]})),this.Bk.appendChild(r),n["clip-path"]="url(#"+o+")"),Ri(this,"image",n,i,e),this.addElement("image",n)},Wu.fill=function(){Vi(this,"fill",this.path,this.Qh)},Wu.fillRect=function(t,i,n,e){Gi(this,"fill",[t,i,n,e],this.Qh)},Wu.fillText=function(t,i,n){t=[t,i,n],i=this.textAlign,"left"===i?i="start":"right"===i?i="end":"center"===i&&(i="middle"),i={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":i},Ri(this,"fill",i,this.Qh),this.addElement("text",i,t[0])},Wu.lineTo=function(t,i){this.path.push(["L",t,i])},Wu.moveTo=function(t,i){this.path.push(["M",t,i])},Wu.quadraticCurveTo=function(t,i,n,e){this.path.push(["Q",t,i,n,e])},Wu.rect=function(t,i,n,e){this.path.push(["M",t,i],["L",t+n,i],["L",t+n,i+e],["L",t,i+e],["z"])},Wu.restore=function(){this.Qh=this.stack.pop(),this.path=this.stack.pop();var t=this.stack.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.iv=t.iv,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign},Wu.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,iv:this.iv,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var t=[],i=0;i<this.path.length;i++)t.push(this.path[i]);this.stack.push(t),this.stack.push(this.Qh.copy())},Wu.setTransform=function(t,i,n,e,o,r){1===t&&0===i&&0===n&&1===e&&0===o&&0===r||Ui(this,t,i,n,e,o,r)},Wu.scale=function(){},Wu.stroke=function(){Vi(this,"stroke",this.path,this.Qh)},Wu.strokeRect=function(t,i,n,e){Gi(this,"stroke",[t,i,n,e],this.Qh)},Wu.addElement=function(t,i,n){return t=Ei(this,t,i,n),0<this.Ie.length?this.Ie[this.Ie.length-1].appendChild(t):this.Bk.appendChild(t),this.fv=t},Wu.Ja=function(){if(0!==this.shadowOffsetX||0!==this.shadowOffsetY||0!==this.shadowBlur){var t="SHADOW"+this.qD;this.qD++;var i,n,e,o,r,s=this.addElement("filter",{id:t,x:"-100%",y:"-100%",width:"300%",height:"300%"},null);i=Ei(this,"feGaussianBlur",{"in":"SourceAlpha",result:"blur",WI:this.shadowBlur/2}),n=Ei(this,"feFlood",{"in":"blur",result:"flood","flood-color":this.shadowColor}),e=Ei(this,"feComposite",{"in":"flood",in2:"blur",operator:"in",result:"comp"}),o=Ei(this,"feOffset",{"in":"comp",result:"offsetBlur",dx:this.shadowOffsetX,dy:this.shadowOffsetY}),r=Ei(this,"feMerge",{}),r.appendChild(Ei(this,"feMergeNode",{"in":"offsetBlur"})),r.appendChild(Ei(this,"feMergeNode",{"in":"SourceGraphic"})),s.appendChild(i),s.appendChild(n),s.appendChild(e),s.appendChild(o),s.appendChild(r),0<this.Ie.length&&this.Ie[this.Ie.length-1].setAttributeNS(null,"filter","url(#"+t+")")}},Wu=Ki.prototype,Wu.getContext=function(){return this.LE},Wu.toDataURL=function(t,i){return this.Yc.toDataURL(t,i)},Wu.getBoundingClientRect=function(){return this.Yc.getBoundingClientRect()},Wu.focus=function(){return this.Yc.focus()},Wu.addEventListener=function(t,i,n){this.Yc.addEventListener(t,i,n)},Wu.removeEventListener=function(t,i,n){this.Yc.removeEventListener(t,i,n)},K(Ki,{width:"width"},function(){return this.Yc.width},function(t){this.Yc.width=t}),K(Ki,{height:"height"},function(){return this.Yc.height},function(t){this.Yc.height=t}),K(Ki,{style:"style"},function(){return this.Yc.style},function(t){this.Yc.style=t});var Qf={ga:4*((Math.sqrt(2)-1)/3),fj:new wi(0,0).va(),VD:new Si(0,0,0,0).va(),ro:new Di(0,0,0,0).va(),TD:new Di(2,2,2,2).va(),UD:new Ti(1/0,1/0).va(),QD:new wi(-1/0,-1/0).va(),PD:new wi(1/0,1/0).va(),so:new Ti(0,0).va(),Ov:new Ti(1,1).va(),qo:new Ti(6,6).va(),Lv:new Ti(8,8).va(),RD:new wi(0/0,0/0).va(),Pv:new si,bi:new si,mz:null,sqrt:function(t){if(0>=t)return 0;var i=Qf.mz;if(null===i){for(var i=[],n=0;2e3>=n;n++)i[n]=Math.sqrt(n);Qf.mz=i}return 1>t?(n=1/t,2e3>=n?1/i[0|n]:Math.sqrt(t)):2e3>=t?i[0|t]:Math.sqrt(t)},q:function(t,i){var n=t-i;return.5>n&&n>-.5},Sa:function(t,i){var n=t-i;return 5e-8>n&&n>-5e-8},bd:function(t,i,n,e,o,r,s){0>=o&&(o=1e-6);var a=0,h=0,l=0,u=0;if(n>t?(h=t,a=n):(h=n,a=t),e>i?(u=i,l=e):(u=e,l=i),t===n)return s>=u&&l>=s&&r>=t-o&&t+o>=r;if(i===e)return r>=h&&a>=r&&s>=i-o&&i+o>=s;if(a+=o,h-=o,r>=h&&a>=r&&(l+=o,u-=o,s>=u&&l>=s))if(a-h>l-u){if(!(t-n>o||n-t>o))return!0;if(r=(e-i)/(n-t)*(r-t)+i,s>=r-o&&r+o>=s)return!0}else{if(!(i-e>o||e-i>o))return!0;if(s=(n-t)/(e-i)*(s-i)+t,r>=s-o&&s+o>=r)return!0}return!1},Gu:function(t,i,n,e,o,r,s,a,h,l,u,f){if(Qf.bd(t,i,s,a,f,n,e)&&Qf.bd(t,i,s,a,f,o,r))return Qf.bd(t,i,s,a,f,l,u);var c=(t+n)/2,p=(i+e)/2,d=(n+o)/2,v=(e+r)/2;o=(o+s)/2,r=(r+a)/2,e=(c+d)/2,n=(p+v)/2;var d=(d+o)/2,v=(v+r)/2,y=(e+d)/2,g=(n+v)/2;return Qf.Gu(t,i,c,p,e,n,y,g,h,l,u,f)||Qf.Gu(y,g,d,v,o,r,s,a,h,l,u,f)},DE:function(t,i,n,e,o,r,s,a,h){var l=(n+o)/2,u=(e+r)/2;return h.x=(((t+n)/2+l)/2+(l+(o+s)/2)/2)/2,h.y=(((i+e)/2+u)/2+(u+(r+a)/2)/2)/2,h},CE:function(t,i,n,e,o,r,s,a){var h=(n+o)/2,l=(e+r)/2;return yf(((t+n)/2+h)/2,((i+e)/2+l)/2,(h+(o+s)/2)/2,(l+(r+a)/2)/2)},rn:function(t,i,n,e,o,r,s,a,h,l){if(Qf.bd(t,i,s,a,h,n,e)&&Qf.bd(t,i,s,a,h,o,r))Li(l,t,i,0,0),Li(l,s,a,0,0);else{var u=(t+n)/2,f=(i+e)/2,c=(n+o)/2,p=(e+r)/2;o=(o+s)/2,r=(r+a)/2,e=(u+c)/2,n=(f+p)/2;var c=(c+o)/2,p=(p+r)/2,d=(e+c)/2,v=(n+p)/2;Qf.rn(t,i,u,f,e,n,d,v,h,l),Qf.rn(d,v,c,p,o,r,s,a,h,l)}return l},Sd:function(t,i,n,e,o,r,s,a,h,l){if(Qf.bd(t,i,s,a,h,n,e)&&Qf.bd(t,i,s,a,h,o,r))0===l.length&&(l.push(t),l.push(i)),l.push(s),l.push(a);else{var u=(t+n)/2,f=(i+e)/2,c=(n+o)/2,p=(e+r)/2;o=(o+s)/2,r=(r+a)/2,e=(u+c)/2,n=(f+p)/2;var c=(c+o)/2,p=(p+r)/2,d=(e+c)/2,v=(n+p)/2;Qf.Sd(t,i,u,f,e,n,d,v,h,l),Qf.Sd(d,v,c,p,o,r,s,a,h,l)}return l},Fy:function(t,i,n,e,o,r,s,a,h,l){if(Qf.bd(t,i,o,r,l,n,e))return Qf.bd(t,i,o,r,l,a,h);var u=(t+n)/2,f=(i+e)/2;n=(n+o)/2,e=(e+r)/2;var c=(u+n)/2,p=(f+e)/2;return Qf.Fy(t,i,u,f,c,p,s,a,h,l)||Qf.Fy(c,p,n,e,o,r,s,a,h,l)},NI:function(t,i,n,e,o,r,s){return s.x=((t+n)/2+(n+o)/2)/2,s.y=((i+e)/2+(e+r)/2)/2,s},Ey:function(t,i,n,e,o,r,s,a){if(Qf.bd(t,i,o,r,s,n,e))Li(a,t,i,0,0),Li(a,o,r,0,0);else{var h=(t+n)/2,l=(i+e)/2;n=(n+o)/2,e=(e+r)/2;var u=(h+n)/2,f=(l+e)/2;Qf.Ey(t,i,h,l,u,f,s,a),Qf.Ey(u,f,n,e,o,r,s,a)}return a},$n:function(t,i,n,e,o,r,s,a){if(Qf.bd(t,i,o,r,s,n,e))0===a.length&&(a.push(t),a.push(i)),a.push(o),a.push(r);else{var h=(t+n)/2,l=(i+e)/2;n=(n+o)/2,e=(e+r)/2;var u=(h+n)/2,f=(l+e)/2;Qf.$n(t,i,h,l,u,f,s,a),Qf.$n(u,f,n,e,o,r,s,a)}return a},lr:function(t,i,n,e,o,r,s,a,h,l,u,f,c,p){if(0>=c&&(c=1e-6),Qf.bd(t,i,s,a,c,n,e)&&Qf.bd(t,i,s,a,c,o,r)){var d=(t-s)*(l-f)-(i-a)*(h-u);if(0===d)return!1;if(c=((t*a-i*s)*(h-u)-(t-s)*(h*f-l*u))/d,d=((t*a-i*s)*(l-f)-(i-a)*(h*f-l*u))/d,(l>f?l-f:f-l)>(h>u?h-u:u-h)){if(s=h=0,a>i?(h=i,s=a):(h=a,s=i),h>d||d>s)return!1}else if(s>t?h=t:(h=s,s=t),h>c||c>s)return!1;return p.x=c,p.y=d,!0}var d=(t+n)/2,v=(i+e)/2;n=(n+o)/2,e=(e+r)/2,o=(o+s)/2,r=(r+a)/2;var y=(d+n)/2,g=(v+e)/2;n=(n+o)/2,e=(e+r)/2;var m=(y+n)/2,x=(g+e)/2,b=(u-h)*(u-h)+(f-l)*(f-l),w=!1;return Qf.lr(t,i,d,v,y,g,m,x,h,l,u,f,c,p)&&(i=(p.x-h)*(p.x-h)+(p.y-l)*(p.y-l),b>i&&(b=i,w=!0)),t=p.x,d=p.y,Qf.lr(m,x,n,e,o,r,s,a,h,l,u,f,c,p)&&(i=(p.x-h)*(p.x-h)+(p.y-l)*(p.y-l),b>i?w=!0:(p.x=t,p.y=d)),w},mr:function(t,i,n,e,o,r,s,a,h,l,u,f,c){var p=0;if(0>=c&&(c=1e-6),Qf.bd(t,i,s,a,c,n,e)&&Qf.bd(t,i,s,a,c,o,r)){if(c=(t-s)*(l-f)-(i-a)*(h-u),0===c)return p;var d=((t*a-i*s)*(h-u)-(t-s)*(h*f-l*u))/c,v=((t*a-i*s)*(l-f)-(i-a)*(h*f-l*u))/c;if(d>=u)return p;if((l>f?l-f:f-l)>(h>u?h-u:u-h)){if(t=h=0,a>i?(h=i,t=a):(h=a,t=i),h>v||v>t)return p}else if(s>t?(h=t,t=s):h=s,h>d||d>t)return p;c>0?p++:0>c&&p--}else{var d=(t+n)/2,v=(i+e)/2,y=(n+o)/2,g=(e+r)/2;o=(o+s)/2,r=(r+a)/2,e=(d+y)/2,n=(v+g)/2;var y=(y+o)/2,g=(g+r)/2,m=(e+y)/2,x=(n+g)/2,p=p+Qf.mr(t,i,d,v,e,n,m,x,h,l,u,f,c),p=p+Qf.mr(m,x,y,g,o,r,s,a,h,l,u,f,c)}return p},Ml:function(t,i,n,e,o,r,s){if(Qf.Sa(t,n)){var a=0;return n=0,e>i?(a=i,n=e):(a=e,n=i),e=r,a>e?(s.x=t,s.y=a,!1):e>n?(s.x=t,s.y=n,!1):(s.x=t,s.y=e,!0)}return Qf.Sa(i,e)?(n>t?a=t:(a=n,n=t),e=o,a>e?(s.x=a,s.y=i,!1):e>n?(s.x=n,s.y=i,!1):(s.x=e,s.y=i,!0)):(a=((t-o)*(t-n)+(i-r)*(i-e))/((n-t)*(n-t)+(e-i)*(e-i)),-5e-6>a?(s.x=t,s.y=i,!1):a>1.000005?(s.x=n,s.y=e,!1):(s.x=t+a*(n-t),s.y=i+a*(e-i),!0))},og:function(t,i,n,e,o,r,s,a,h){return Qf.q(t,n)&&Qf.q(i,e)?(h.x=t,h.y=i,!1):Qf.Sa(o,s)?Qf.Sa(t,n)?(Qf.Ml(t,i,n,e,o,r,h),!1):(r=(e-i)/(n-t)*(o-t)+i,Qf.Ml(t,i,n,e,o,r,h)):(a=(a-r)/(s-o),Qf.Sa(t,n)?(r=a*(t-o)+r,n=s=0,e>i?(s=i,n=e):(s=e,n=i),s>r?(h.x=t,h.y=s,!1):r>n?(h.x=t,h.y=n,!1):(h.x=t,h.y=r,!0)):(s=(e-i)/(n-t),Qf.Sa(a,s)?(Qf.Ml(t,i,n,e,o,r,h),!1):(o=(s*t-a*o+r-i)/(s-a),Qf.Sa(s,0)?(n>t?s=t:(s=n,n=t),s>o?(h.x=s,h.y=i,!1):o>n?(h.x=n,h.y=i,!1):(h.x=o,h.y=i,!0)):(r=s*(o-t)+i,Qf.Ml(t,i,n,e,o,r,h)))))},oI:function(t,i,n,e,o){return Qf.og(n.x,n.y,e.x,e.y,t.x,t.y,i.x,i.y,o)},XH:function(t,i,n,e,o,r,s,a,h,l){function u(n,e){var o=(n-t)*(n-t)+(e-i)*(e-i);f>o&&(f=o,h.x=n,h.y=e)}var f=1/0;u(h.x,h.y);var c=0,p=0,d=0,v=0;if(s>o?(c=o,p=s):(c=s,p=o),a>r?(d=o,v=s):(d=s,v=o),c=(p-c)/2+l,l=(v-d)/2+l,o=(o+s)/2,r=(r+a)/2,0===c||0===l)return h;if(.5>(n>t?n-t:t-n)){if(c=1-(n-o)*(n-o)/(c*c),0>c)return h;c=Math.sqrt(c),e=-l*c+r,u(n,l*c+r),u(n,e)}else{if(n=(e-i)/(n-t),e=1/(c*c)+n*n/(l*l),a=2*n*(i-n*t)/(l*l)-2*n*r/(l*l)-2*o/(c*c),c=a*a-4*e*(2*n*t*r/(l*l)-2*i*r/(l*l)+r*r/(l*l)+o*o/(c*c)-1+(i-n*t)*(i-n*t)/(l*l)),0>c)return h;c=Math.sqrt(c),l=(-a+c)/(2*e),u(l,n*l-n*t+i),c=(-a-c)/(2*e),u(c,n*c-n*t+i)}return h},kk:function(t,i,n,e,o,r,s,a,h){var l=1e21,u=t,f=i;if(Qf.og(t,i,t,e,o,r,s,a,h)){var c=(h.x-o)*(h.x-o)+(h.y-r)*(h.y-r);l>c&&(l=c,u=h.x,f=h.y)}return Qf.og(n,i,n,e,o,r,s,a,h)&&(c=(h.x-o)*(h.x-o)+(h.y-r)*(h.y-r),l>c&&(l=c,u=h.x,f=h.y)),Qf.og(t,i,n,i,o,r,s,a,h)&&(c=(h.x-o)*(h.x-o)+(h.y-r)*(h.y-r),l>c&&(l=c,u=h.x,f=h.y)),Qf.og(t,e,n,e,o,r,s,a,h)&&(c=(h.x-o)*(h.x-o)+(h.y-r)*(h.y-r),l>c&&(l=c,u=h.x,f=h.y)),h.x=u,h.y=f,1e21>l},$u:function(t,i,n){var e=i.x,o=i.y,r=n.x,s=n.y,a=t.left,h=t.right,l=t.top,u=t.bottom;return e===r?(r=t=0,s>o?(t=o,r=s):(t=s,r=o),e>=a&&h>=e&&u>=t&&r>=l):o===s?(r>e?t=e:(t=r,r=e),o>=l&&u>=o&&h>=t&&r>=a):t.na(i)||t.na(n)||Qf.Zu(a,l,h,l,e,o,r,s)||Qf.Zu(h,l,h,u,e,o,r,s)||Qf.Zu(h,u,a,u,e,o,r,s)||Qf.Zu(a,u,a,l,e,o,r,s)?!0:!1},Zu:function(t,i,n,e,o,r,s,a){return 0>=Qf.Ku(t,i,n,e,o,r)*Qf.Ku(t,i,n,e,s,a)&&0>=Qf.Ku(o,r,s,a,t,i)*Qf.Ku(o,r,s,a,n,e)},Ku:function(t,i,n,e,o,r){return n-=t,e-=i,t=o-t,i=r-i,r=t*e-i*n,0===r&&(r=t*n+i*e,r>0&&(r=(t-n)*n+(i-e)*e,0>r&&(r=0))),0>r?-1:r>0?1:0},cs:function(t){return 0>t&&(t+=360),t>=360&&(t-=360),t},SB:function(t,i,n,e,o,r){void 0===r&&(r=!1);var s=Math.PI;r||(e*=s/180,o*=s/180),r=o>e?1:-1;var a=[],h=s/2,l=e;for(e=Math.min(2*s+1e-5,Math.abs(o-e));e>1e-5;)o=l+r*Math.min(e,h),a.push(Qf.RE(n,l,o,t,i)),e-=Math.abs(o-l),l=o;return a},RE:function(t,i,n,e,o){var r=(n-i)/2,s=t*Math.cos(r),a=t*Math.sin(r),h=.5522847498*Math.tan(r),l=s+h*a,s=-a+h*s,a=-s,h=r+i,r=Math.cos(h),h=Math.sin(h);return[e+t*Math.cos(i),o+t*Math.sin(i),e+l*r-s*h,o+l*h+s*r,e+l*r-a*h,o+l*h+a*r,e+t*Math.cos(n),o+t*Math.sin(n)]},xr:function(t,i,n,e,o,r,s){n=Math.floor((t-n)/o)*o+n,e=Math.floor((i-e)/r)*r+e;var a=n;return o/2>n+o-t&&(a=n+o),t=e,r/2>e+r-i&&(t=e+r),s.k(a,t),s},hC:function(t,i){var n=Math.max(t,i),e=Math.min(t,i),o=1,r=1;do o=n%e,n=r=e,e=o;while(o>0);return r},$E:function(t,i,n,e){var o=0>n,r=0>e,s=0,a=s=0;i>t?(s=1,a=0):(s=0,a=1);var h=0,l=0,u=0,h=0===s?t:i,l=0===s?n:e;return(0===s?o:r)&&(l=-l),s=a,u=0===s?n:e,(0===s?o:r)&&(u=-u),Qf.aF(h,0===s?t:i,l,u,0,0)},aF:function(t,i,n,e,o,r){if(o=0,e>0)if(n>0){r=t*t,o=i*i,t*=n;var s=i*e,a=-o+s,h=-o+Math.sqrt(t*t+s*s);i=a;for(var l=0;9999999999>l&&(i=.5*(a+h),i!==a&&i!==h);++l){var u=t/(i+r),f=s/(i+o),u=u*u+f*f-1;if(u>0)a=i;else{if(!(0>u))break;h=i}}n=r*n/(i+r)-n,e=o*e/(i+o)-e,o=Math.sqrt(n*n+e*e)}else o=Math.abs(e-i);else e=t*t-i*i,o=t*n,e>o?(e=o/e,o=t*e,r=i*Math.sqrt(Math.abs(1-e*e)),n=o-n,o=Math.sqrt(n*n+r*r)):o=Math.abs(n-t);return o}};H("Geometry",Yi),Yi.Qg=!0,Yi.prototype.copy=function(){var t=new Yi;t.da=this.da,t.Pb=this.Pb,t.Wb=this.Wb,t.Wa=this.Wa,t.fb=this.fb;for(var i=this.ki.l,n=i.length,e=t.ki,o=0;n>o;o++){var r=i[o].copy();e.add(r)}return t.kt=this.kt,t.Vs.assign(this.Vs),t.Ca=this.Ca,t.Fh=this.Fh.O(),t.Gh=this.Gh.O(),t.Hm=this.Hm,t.Gm=this.Gm,t.ph=this.ph,t};var $f;Yi.Line=$f=Z(Yi,"Line",0);var _f;Yi.Rectangle=_f=Z(Yi,"Rectangle",1);var tc;Yi.Ellipse=tc=Z(Yi,"Ellipse",2);var ic;Yi.Path=ic=Z(Yi,"Path",3),Yi.prototype.va=function(){return this.freeze(),Object.freeze(this),this},Yi.prototype.freeze=function(){this.pa=!0;var t=this.Ya;t.freeze();for(var t=t.l,i=t.length,n=0;i>n;n++)t[n].freeze();return this},Yi.prototype.wa=function(){Object.isFrozen(this)&&r("cannot thaw constant: "+this),this.pa=!1;var t=this.Ya;t.wa();for(var t=t.l,i=t.length,n=0;i>n;n++)t[n].wa();return this},Yi.prototype.equalsApprox=Yi.prototype.Wd=function(t){if(!(t instanceof Yi))return!1;if(this.type!==t.type)return this.type===$f&&t.type===ic?Wi(this,t):t.type===$f&&this.type===ic?Wi(t,this):!1;if(this.type===ic){var i=this.Ya.l;t=t.Ya.l;var n=i.length;if(n!==t.length)return!1;for(var e=0;n>e;e++)if(!i[e].Wd(t[e]))return!1;return!0}return Qf.q(this.ia,t.ia)&&Qf.q(this.ja,t.ja)&&Qf.q(this.s,t.s)&&Qf.q(this.u,t.u)};var nc;Yi.stringify=nc=function(t){return t.toString()},Yi.prototype.toString=function(t){switch(void 0===t&&(t=-1),this.type){case $f:return 0>t?"M"+this.ia.toString()+" "+this.ja.toString()+"L"+this.s.toString()+" "+this.u.toString():"M"+this.ia.toFixed(t)+" "+this.ja.toFixed(t)+"L"+this.s.toFixed(t)+" "+this.u.toFixed(t);case _f:var i=new Si(this.ia,this.ja,0,0);return i.HD(this.s,this.u,0,0),0>t?"M"+i.x.toString()+" "+i.y.toString()+"H"+i.right.toString()+"V"+i.bottom.toString()+"H"+i.left.toString()+"z":"M"+i.x.toFixed(t)+" "+i.y.toFixed(t)+"H"+i.right.toFixed(t)+"V"+i.bottom.toFixed(t)+"H"+i.left.toFixed(t)+"z";case tc:if(i=new Si(this.ia,this.ja,0,0),i.HD(this.s,this.u,0,0),0>t){var n=i.left.toString()+" "+(i.y+i.height/2).toString(),e=i.right.toString()+" "+(i.y+i.height/2).toString();return"M"+n+"A"+(i.width/2).toString()+" "+(i.height/2).toString()+" 0 0 1 "+e+"A"+(i.width/2).toString()+" "+(i.height/2).toString()+" 0 0 1 "+n}return n=i.left.toFixed(t)+" "+(i.y+i.height/2).toFixed(t),e=i.right.toFixed(t)+" "+(i.y+i.height/2).toFixed(t),"M"+n+"A"+(i.width/2).toFixed(t)+" "+(i.height/2).toFixed(t)+" 0 0 1 "+e+"A"+(i.width/2).toFixed(t)+" "+(i.height/2).toFixed(t)+" 0 0 1 "+n;case ic:for(var i="",n=this.Ya.l,e=n.length,o=0;e>o;o++){var r=n[o];o>0&&(i+=" x "),r.Mr&&(i+="F "),i+=r.toString(t)}return i;default:return this.type.toString()}};var ec;Yi.fillPath=ec=function(t){"string"!=typeof t&&f(t,"string",Yi,"fillPath:str"),t=t.split(/[Xx]/);for(var i=t.length,n="",e=0;i>e;e++)var o=t[e],n=null!==o.match(/[Ff]/)?0===e?n+o:n+("X"+(" "===o[0]?"":" ")+o):n+((0===e?"":"X ")+"F"+(" "===o[0]?"":" ")+o);return n};var oc;Yi.parse=oc=function(t,i){function n(){return l>=y-1?!0:null!==h[l+1].match(/[A-Za-z]/)}function e(){return l++,h[l]}function o(){var t=new wi(parseFloat(e()),parseFloat(e()));return u===u.toLowerCase()&&(t.x=v.x+t.x,t.y=v.y+t.y),t}function r(){return v=o()}function s(){return d=o()}function a(){return"c"!==c.toLowerCase()&&"s"!==c.toLowerCase()?v:new wi(2*v.x-d.x,2*v.y-d.y)}void 0===i&&(i=!1),"string"!=typeof t&&f(t,"string",Yi,"parse:str"),t=t.replace(/,/gm," "),t=t.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),t=t.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),t=t.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm,"$1 $2"),t=t.replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),t=t.replace(/([0-9])([+\-])/gm,"$1 $2"),t=t.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),t=t.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),t=t.replace(/[\s\r\t\n]+/gm," "),t=t.replace(/^\s+|\s+$/g,"");for(var h=t.split(" "),l=-1,u="",c="",p=new wi(0,0),d=new wi(0,0),v=new wi(0,0),y=h.length,g=B(),m=!1,x=!1,b=!0;!(l>=y-1);)if(c=u,u=e(),""!==u)switch(u.toUpperCase()){case"X":b=!0,x=m=!1;break;case"M":var w=r();for(null===g.xb||!0===b?(ta(g,w.x,w.y,m,!1,!x),b=!1):g.moveTo(w.x,w.y),p=v;!n();)w=r(),g.lineTo(w.x,w.y);break;case"L":for(;!n();)w=r(),g.lineTo(w.x,w.y);break;case"H":for(;!n();)v=w=new wi((u===u.toLowerCase()?v.x:0)+parseFloat(e()),v.y),g.lineTo(v.x,v.y);break;case"V":for(;!n();)v=w=new wi(v.x,(u===u.toLowerCase()?v.y:0)+parseFloat(e())),g.lineTo(v.x,v.y);break;case"C":for(;!n();){var k=o(),M=s(),w=r();ea(g,k.x,k.y,M.x,M.y,w.x,w.y)}break;case"S":for(;!n();)k=a(),M=s(),w=r(),ea(g,k.x,k.y,M.x,M.y,w.x,w.y);break;case"Q":for(;!n();)M=s(),w=r(),oa(g,M.x,M.y,w.x,w.y);break;case"T":for(;!n();)d=M=a(),w=r(),oa(g,M.x,M.y,w.x,w.y);break;case"B":for(;!n();){var w=parseFloat(e()),k=parseFloat(e()),M=parseFloat(e()),T=parseFloat(e()),S=parseFloat(e()),C=S,N=!1;n()||(C=parseFloat(e()),n()||(N=0!==parseFloat(e()))),u===u.toLowerCase()&&(M+=v.x,T+=v.y),g.arcTo(w,k,M,T,S,C,N)}break;case"A":for(;!n();)k=Math.abs(parseFloat(e())),M=Math.abs(parseFloat(e())),T=parseFloat(e()),S=!!parseFloat(e()),C=!!parseFloat(e()),w=r(),ra(g,k,M,T,S,C,w.x,w.y);break;case"Z":w=g.m.Ya.l[g.m.Ya.length-1],ia(g),v=p;break;case"F":for(w="",k=1;h[l+k];)if(null!==h[l+k].match(/[Uu]/))k++;else{if(null!==h[l+k].match(/[A-Za-z]/)){w=h[l+k];break}k++}w.match(/[Mm]/)?m=!0:na(g);break;case"U":for(w="",k=1;h[l+k];)if(null!==h[l+k].match(/[Ff]/))k++;else{if(null!==h[l+k].match(/[A-Za-z]/)){w=h[l+k];break}k++}w.match(/[Mm]/)?x=!0:g.Ja(!1)}if(p=g.m,q(g),i)for(g=p.Ya.i;g.next();)w=g.value,w.Mr=!0;return p},Yi.prototype.ky=function(){if(this.Ca||this.kt!==this.Ya.K)return!0;for(var t=this.Ya.l,i=t.length,n=0;i>n;n++)if(t[n].ky())return!0;return!1},Yi.prototype.ez=function(){this.Ca=!1,this.kt=this.Ya.K;for(var t=this.Ya.l,i=t.length,n=0;i>n;n++)t[n].ez()},Yi.prototype.Bf=function(){var t=this.Vs;t.wa(),isNaN(this.Hm)||isNaN(this.Gm)?t.k(0,0,0,0):t.k(0,0,this.Hm,this.Gm),Ji(this,t,!1),Li(t,0,0,0,0),t.freeze()},Yi.prototype.computeBoundsWithoutOrigin=Yi.prototype.IE=function(){var t=new Si;return Ji(this,t,!0),t},Yi.prototype.normalize=Yi.prototype.normalize=function(){s(this);var t=this.IE();return this.offset(-t.x,-t.y),new wi(-t.x,-t.y)},Yi.prototype.offset=Yi.prototype.offset=function(t,i){return s(this),this.transform(1,0,0,1,t,i),this},Yi.prototype.scale=Yi.prototype.scale=function(t,i){return s(this),this.transform(t,0,0,i,0,0),this},Yi.prototype.rotate=Yi.prototype.rotate=function(t,i,n){s(this),void 0===i&&(i=0),void 0===n&&(n=0);var e=O();return e.reset(),e.rotate(t,i,n),this.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),z(e),this},Yi.prototype.transform=Yi.prototype.transform=function(t,i,n,e,o,s){var a=0,h=0;switch(this.type){case $f:case _f:case tc:a=this.Pb,h=this.Wb,this.Pb=a*t+h*n+o,this.Wb=a*i+h*e+s,a=this.Wa,h=this.fb,this.Wa=a*t+h*n+o,this.fb=a*i+h*e+s;break;case ic:for(var l=this.Ya.l,u=l.length,f=0;u>f;f++){var c=l[f],a=c.ia,h=c.ja;c.ia=a*t+h*n+o,c.ja=a*i+h*e+s;for(var c=c.ra.l,p=c.length,d=0;p>d;d++){var v=c[d];switch(v.type){case sc:case rc:a=v.s,h=v.u,v.s=a*t+h*n+o,v.u=a*i+h*e+s;break;case ac:a=v.vb,h=v.Lb,v.vb=a*t+h*n+o,v.Lb=a*i+h*e+s,a=v.ve,h=v.we,v.ve=a*t+h*n+o,v.we=a*i+h*e+s,a=v.s,h=v.u,v.s=a*t+h*n+o,v.u=a*i+h*e+s;break;case hc:a=v.vb,h=v.Lb,v.vb=a*t+h*n+o,v.Lb=a*i+h*e+s,a=v.s,h=v.u,v.s=a*t+h*n+o,v.u=a*i+h*e+s;break;case lc:a=v.ua,h=v.Da,v.ua=a*t+h*n+o,v.Da=a*i+h*e+s,0!==i&&(a=180*Math.atan2(i,t)/Math.PI,0>a&&(a+=360),v.be+=a),0>t&&(v.be=180-v.be,v.gf=-v.gf),0>e&&(v.be=-v.be,v.gf=-v.gf),v.radiusX*=Math.sqrt(t*t+n*n),void 0!==v.radiusY&&(v.radiusY*=Math.sqrt(i*i+e*e));
break;case uc:a=v.s,h=v.u,v.s=a*t+h*n+o,v.u=a*i+h*e+s,0!==i&&(a=180*Math.atan2(i,t)/Math.PI,0>a&&(a+=360),v.ai+=a),0>t&&(v.ai=180-v.ai,v.ok=!v.ok),0>e&&(v.ai=-v.ai,v.ok=!v.ok),v.radiusX*=Math.sqrt(t*t+n*n),v.radiusY*=Math.sqrt(i*i+e*e);break;default:r("Unknown Segment type: "+v.type)}}}}return this.Ca=!0,this},Yi.prototype.$q=function(t,i){var n=this.Pb,e=this.Wb,o=this.Wa,r=this.fb,s=Math.min(n,o),a=Math.min(e,r),n=Math.abs(o-n),e=Math.abs(r-e),r=C();return r.x=s,r.y=a,i.Ka(r),o=new $i(r.x,r.y),r.x=s+n,r.y=a,i.Ka(r),o.ra.add(new _i(sc,r.x,r.y)),r.x=s+n,r.y=a+e,i.Ka(r),o.ra.add(new _i(sc,r.x,r.y)),r.x=s,r.y=a+e,i.Ka(r),o.ra.add(new _i(sc,r.x,r.y).close()),P(r),t.type=ic,t.Ya.add(o),t},Yi.prototype.na=function(t,i,n,e){var o=t.x,s=t.y,a=this.Qa.x-20;t=t.y;for(var h=0,l=0,u=0,f=0,c=0,p=0,d=this.Ya.l,v=d.length,y=0;v>y;y++){var g=d[y];if(g.Mr){if(n&&g.na(o,s,i))return!0;for(var m=g.ra,l=g.ia,u=g.ja,x=l,b=u,w=m.l,k=0;k<=m.length;k++){var M,T;switch(k!==m.length?(M=w[k],T=M.type,c=M.s,p=M.u):(T=sc,c=x,p=b),T){case rc:if(f=Zi(o,s,a,t,l,u,x,b),isNaN(f))return!0;h+=f,x=c,b=p;break;case sc:if(f=Zi(o,s,a,t,l,u,c,p),isNaN(f))return!0;h+=f;break;case ac:f=Qf.mr(l,u,M.vb,M.Lb,M.ve,M.we,c,p,a,t,o,s,.5),h+=f;break;case hc:f=Qf.mr(l,u,(l+2*M.vb)/3,(u+2*M.Lb)/3,(M.vb+2*c)/3,(M.vb+2*c)/3,c,p,a,t,o,s,.5),h+=f;break;case lc:case uc:T=M.type===lc?tn(M,g):nn(M,g,l,u);for(var S=T.length,C=null,N=0;S>N;N++){if(C=T[N],0===N){if(f=Zi(o,s,a,t,l,u,C[0],C[1]),isNaN(f))return!0;h+=f}f=Qf.mr(C[0],C[1],C[2],C[3],C[4],C[5],C[6],C[7],a,t,o,s,.5),h+=f}null!==C&&(c=C[6],p=C[7]);break;default:r("Unknown Segment type: "+M.type)}l=c,u=p}if(0!==h)return!0;h=0}else if(g.na(o,s,e?i:i+2))return!0}return 0!==h},Yi.prototype.getPointAlongPath=function(t){(0>t||t>1)&&c(t,"0 <= fraction <= 1",Yi,"getPointAlongPath:fraction");var i=this.Ya.first(),n=E(),e=[];e.push(i.ia),e.push(i.ja);for(var o=i.ia,s=i.ja,a=o,h=s,l=i.ra.l,u=l.length,f=0;u>f;f++){var p=l[f];switch(p.da){case rc:n.push(e),e=[],e.push(p.s),e.push(p.u),o=p.s,s=p.u,a=o,h=s;break;case sc:e.push(p.s),e.push(p.u),o=p.s,s=p.u;break;case ac:Qf.Sd(o,s,p.xc,p.Rd,p.uf,p.vf,p.Wa,p.fb,.5,e),o=p.s,s=p.u;break;case hc:Qf.$n(o,s,p.xc,p.Rd,p.Wa,p.fb,.5,e),o=p.s,s=p.u;break;case lc:for(var d=tn(p,i),v=d.length,y=0;v>y;y++){var g=d[y];Qf.Sd(o,s,g[2],g[3],g[4],g[5],g[6],g[7],.5,e),o=g[6],s=g[7]}break;case uc:for(d=nn(p,i,o,s),v=d.length,y=0;v>y;y++)g=d[y],Qf.Sd(o,s,g[2],g[3],g[4],g[5],g[6],g[7],.5,e),o=g[6],s=g[7];break;default:r("Segment not of valid type")}p.Lg&&(e.push(a),e.push(h))}for(n.push(e),d=0,a=n.length,h=e=i=0;a>h;h++)for(l=n[h],u=l.length,f=0;u>f;f+=2)o=l[f],s=l[f+1],0!==f&&(p=Math.sqrt(vf(i,e,o,s)),d+=p),i=o,e=s;for(t*=d,h=d=0;a>h;h++)for(l=n[h],u=l.length,f=0;u>f;f++){if(o=l[f],s=l[f+1],0!==f){if(p=Math.sqrt(vf(i,e,o,s)),d+p>t)return f=(t-d)/p,R(n),new wi(i+(o-i)*f,e+(s-e)*f);d+=p}i=o,e=s}return R(n),null},K(Yi,{type:"type"},function(){return this.da},function(t){this.da!==t&&(s(this,t),this.da=t,this.Ca=!0)}),K(Yi,{ia:"startX"},function(){return this.Pb},function(t){this.Pb!==t&&(s(this,t),this.Pb=t,this.Ca=!0)}),K(Yi,{ja:"startY"},function(){return this.Wb},function(t){this.Wb!==t&&(s(this,t),this.Wb=t,this.Ca=!0)}),K(Yi,{s:"endX"},function(){return this.Wa},function(t){this.Wa!==t&&(s(this,t),this.Wa=t,this.Ca=!0)}),K(Yi,{u:"endY"},function(){return this.fb},function(t){this.fb!==t&&(s(this,t),this.fb=t,this.Ca=!0)}),K(Yi,{Ya:"figures"},function(){return this.ki},function(t){this.ki!==t&&(s(this,t),this.ki=t,this.Ca=!0)}),Yi.prototype.add=Yi.prototype.add=function(t){return this.ki.add(t),this},K(Yi,{o:"spot1"},function(){return this.Fh},function(t){s(this,t),this.Fh=t.O()}),K(Yi,{p:"spot2"},function(){return this.Gh},function(t){s(this,t),this.Gh=t.O()}),K(Yi,{Wc:"defaultStretch"},function(){return this.ph},function(t){s(this,t),this.ph=t}),Y(Yi,{Qa:"bounds"},function(){return this.ky()&&(this.ez(),this.Bf()),this.Vs}),H("PathFigure",$i),$i.Qg=!0,$i.prototype.copy=function(){var t=new $i;t.Pk=this.Pk,t.Im=this.Im,t.Pb=this.Pb,t.Wb=this.Wb;for(var i=this.bn.l,n=i.length,e=t.bn,o=0;n>o;o++){var r=i[o].copy();e.add(r)}return t.bu=this.bu,t.Ca=this.Ca,t},$i.prototype.equalsApprox=$i.prototype.Wd=function(t){if(!(t instanceof $i&&Qf.q(this.ia,t.ia)&&Qf.q(this.ja,t.ja)))return!1;var i=this.ra.l;t=t.ra.l;var n=i.length;if(n!==t.length)return!1;for(var e=0;n>e;e++)if(!i[e].Wd(t[e]))return!1;return!0},Wu=$i.prototype,Wu.toString=function(t){void 0===t&&(t=-1);for(var i=0>t?"M"+this.ia.toString()+" "+this.ja.toString():"M"+this.ia.toFixed(t)+" "+this.ja.toFixed(t),n=this.ra.l,e=n.length,o=0;e>o;o++)i+=" "+n[o].toString(t);return i},Wu.freeze=function(){this.pa=!0;var t=this.ra;t.freeze();for(var i=t.l,t=t.length,n=0;t>n;n++)i[n].freeze();return this},Wu.wa=function(){this.pa=!1;var t=this.ra;t.wa();for(var t=t.l,i=t.length,n=0;i>n;n++)t[n].wa();return this},Wu.ky=function(){if(this.Ca)return!0;var t=this.ra;if(this.bu!==t.K)return!0;for(var t=t.l,i=t.length,n=0;i>n;n++)if(t[n].Ca)return!0;return!1},Wu.ez=function(){this.Ca=!1;var t=this.ra;this.bu=t.K;for(var t=t.l,i=t.length,n=0;i>n;n++){var e=t[n];e.Ca=!1,e.ci=null}},K($i,{Mr:"isFilled"},function(){return this.Pk},function(t){s(this,t),this.Pk=t}),K($i,{rk:"isShadowed"},function(){return this.Im},function(t){s(this,t),this.Im=t}),K($i,{ia:"startX"},function(){return this.Pb},function(t){s(this,t),this.Pb=t,this.Ca=!0}),K($i,{ja:"startY"},function(){return this.Wb},function(t){s(this,t),this.Wb=t,this.Ca=!0}),K($i,{ra:"segments"},function(){return this.bn},function(t){s(this,t),this.bn=t,this.Ca=!0}),$i.prototype.add=$i.prototype.add=function(t){return this.bn.add(t),this},$i.prototype.na=function(t,i,n){for(var e=this.ia,o=this.ja,s=e,a=o,h=this.ra.l,l=h.length,u=0;l>u;u++){var f=h[u];switch(f.type){case rc:s=f.s,a=f.u,e=f.s,o=f.u;break;case sc:if(Qf.bd(e,o,f.s,f.u,n,t,i))return!0;e=f.s,o=f.u;break;case ac:if(Qf.Gu(e,o,f.vb,f.Lb,f.ve,f.we,f.s,f.u,.5,t,i,n))return!0;e=f.s,o=f.u;break;case hc:if(Qf.Fy(e,o,f.vb,f.Lb,f.s,f.u,.5,t,i,n))return!0;e=f.s,o=f.u;break;case lc:case uc:for(var c=f.type===lc?tn(f,this):nn(f,this,e,o),p=c.length,d=null,v=0;p>v;v++)if(d=c[v],0===v&&Qf.bd(e,o,d[0],d[1],n,t,i)||Qf.Gu(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],.5,t,i,n))return!0;null!==d&&(e=d[6],o=d[7]);break;default:r("Unknown Segment type: "+f.type)}if(f.av&&(e!==s||o!==a)&&Qf.bd(e,o,s,a,n,t,i))return!0}return!1},H("PathSegment",_i),_i.Qg=!0,_i.prototype.copy=function(){var t=new _i;return t.da=this.da,t.Wa=this.Wa,t.fb=this.fb,void 0!==this.xc&&(t.xc=this.xc),void 0!==this.Rd&&(t.Rd=this.Rd),void 0!==this.uf&&(t.uf=this.uf),void 0!==this.vf&&(t.vf=this.vf),void 0!==this.Pm&&(t.Pm=this.Pm),void 0!==this.gm&&(t.gm=this.gm),t.Lg=this.Lg,t.Ca=this.Ca,t},_i.prototype.equalsApprox=_i.prototype.Wd=function(t){if(!(t instanceof _i)||this.type!==t.type||this.av!==t.av)return!1;switch(this.type){case rc:case sc:return Qf.q(this.s,t.s)&&Qf.q(this.u,t.u);case ac:return Qf.q(this.s,t.s)&&Qf.q(this.u,t.u)&&Qf.q(this.vb,t.vb)&&Qf.q(this.Lb,t.Lb)&&Qf.q(this.ve,t.ve)&&Qf.q(this.we,t.we);case hc:return Qf.q(this.s,t.s)&&Qf.q(this.u,t.u)&&Qf.q(this.vb,t.vb)&&Qf.q(this.Lb,t.Lb);case lc:return Qf.q(this.be,t.be)&&Qf.q(this.gf,t.gf)&&Qf.q(this.ua,t.ua)&&Qf.q(this.Da,t.Da)&&Qf.q(this.radiusX,t.radiusX)&&Qf.q(this.radiusY,t.radiusY);case uc:return this.ok===t.ok&&this.dv===t.dv&&Qf.q(this.ai,t.ai)&&Qf.q(this.s,t.s)&&Qf.q(this.u,t.u)&&Qf.q(this.radiusX,t.radiusX)&&Qf.q(this.radiusY,t.radiusY);default:return!1}},_i.prototype.toString=function(t){void 0===t&&(t=-1);var i="";switch(this.type){case rc:i=0>t?"M"+this.s.toString()+" "+this.u.toString():"M"+this.s.toFixed(t)+" "+this.u.toFixed(t);break;case sc:i=0>t?"L"+this.s.toString()+" "+this.u.toString():"L"+this.s.toFixed(t)+" "+this.u.toFixed(t);break;case ac:i=0>t?"C"+this.vb.toString()+" "+this.Lb.toString()+" "+this.ve.toString()+" "+this.we.toString()+" "+this.s.toString()+" "+this.u.toString():"C"+this.vb.toFixed(t)+" "+this.Lb.toFixed(t)+" "+this.ve.toFixed(t)+" "+this.we.toFixed(t)+" "+this.s.toFixed(t)+" "+this.u.toFixed(t);break;case hc:i=0>t?"Q"+this.vb.toString()+" "+this.Lb.toString()+" "+this.s.toString()+" "+this.u.toString():"Q"+this.vb.toFixed(t)+" "+this.Lb.toFixed(t)+" "+this.s.toFixed(t)+" "+this.u.toFixed(t);break;case lc:i=0>t?"B"+this.be.toString()+" "+this.gf.toString()+" "+this.ua.toString()+" "+this.Da.toString()+" "+this.radiusX:"B"+this.be.toFixed(t)+" "+this.gf.toFixed(t)+" "+this.ua.toFixed(t)+" "+this.Da.toFixed(t)+" "+this.radiusX;break;case uc:i=0>t?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.ai.toString()+" "+(this.dv?1:0)+" "+(this.ok?1:0)+" "+this.s.toString()+" "+this.u.toString():"A"+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t)+" "+this.ai.toFixed(t)+" "+(this.dv?1:0)+" "+(this.ok?1:0)+" "+this.s.toFixed(t)+" "+this.u.toFixed(t);break;default:i=this.type.toString()}return i+(this.Lg?"z":"")};var rc;_i.Move=rc=Z(_i,"Move",0);var sc;_i.Line=sc=Z(_i,"Line",1);var ac;_i.Bezier=ac=Z(_i,"Bezier",2);var hc;_i.QuadraticBezier=hc=Z(_i,"QuadraticBezier",3);var lc;_i.Arc=lc=Z(_i,"Arc",4);var uc;_i.SvgArc=uc=Z(_i,"SvgArc",4),_i.prototype.freeze=function(){return this.pa=!0,this},_i.prototype.wa=function(){return this.pa=!1,this},_i.prototype.close=_i.prototype.close=function(){return this.Lg=!0,this},K(_i,{av:"isClosed"},function(){return this.Lg},function(t){this.Lg!==t&&(this.Lg=t,this.Ca=!0)}),K(_i,{type:"type"},function(){return this.da},function(t){s(this,t),this.da=t,this.Ca=!0}),K(_i,{s:"endX"},function(){return this.Wa},function(t){s(this,t),this.Wa=t,this.Ca=!0}),K(_i,{u:"endY"},function(){return this.fb},function(t){s(this,t),this.fb=t,this.Ca=!0}),K(_i,{vb:"point1X"},function(){return this.xc},function(t){s(this,t),this.xc=t,this.Ca=!0}),K(_i,{Lb:"point1Y"},function(){return this.Rd},function(t){s(this,t),this.Rd=t,this.Ca=!0}),K(_i,{ve:"point2X"},function(){return this.uf},function(t){s(this,t),this.uf=t,this.Ca=!0}),K(_i,{we:"point2Y"},function(){return this.vf},function(t){s(this,t),this.vf=t,this.Ca=!0}),K(_i,{ua:"centerX"},function(){return this.xc},function(t){s(this,t),this.xc=t,this.Ca=!0}),K(_i,{Da:"centerY"},function(){return this.Rd},function(t){s(this,t),this.Rd=t,this.Ca=!0}),K(_i,{radiusX:"radiusX"},function(){return this.uf},function(t){0>t&&c(t,">= zero",_i,"radiusX"),s(this,t),this.uf=t,this.Ca=!0}),K(_i,{radiusY:"radiusY"},function(){return this.vf},function(t){0>t&&c(t,">= zero",_i,"radiusY"),s(this,t),this.vf=t,this.Ca=!0}),K(_i,{be:"startAngle"},function(){return this.Wa},function(t){this.Wa!==t&&(s(this,t),t%=360,0>t&&(t+=360),this.Wa=t,this.Ca=!0)}),K(_i,{gf:"sweepAngle"},function(){return this.fb},function(t){s(this,t),t>360&&(t=360),-360>t&&(t=-360),this.fb=t,this.Ca=!0}),K(_i,{ok:"isClockwiseArc"},function(){return this.gm},function(t){s(this,t),this.gm=t,this.Ca=!0}),K(_i,{dv:"isLargeArc"},function(){return this.Pm},function(t){s(this,t),this.Pm=t,this.Ca=!0}),K(_i,{ai:"xAxisRotation"},function(){return this.xc},function(t){t%=360,0>t&&(t+=360),s(this,t),this.xc=t,this.Ca=!0}),H("InputEvent",en),en.prototype.copy=function(){var t=new en;return t.N=this.N,t.wx.assign(this.xe),t.qw.assign(this.S),t.Mt=this.Mt,t.Ss=this.Ss,t.Bt=this.Bt,t.ht=this.ht,t.pu=this.pu,t.Us=this.Us,t.dt=this.dt,t.xt=this.xt,t.ot=this.ot,t.di=this.di,t.Yo=this.Yo,t.ou=this.ou,t.mu=this.mu,t.wf=this.wf,t},en.prototype.toString=function(){var t="^";return 0!==this.Cc&&(t+="M:"+this.Cc),0!==this.button&&(t+="B:"+this.button),""!==this.key&&(t+="K:"+this.key),0!==this.le&&(t+="C:"+this.le),0!==this.ck&&(t+="D:"+this.ck),this.rc&&(t+="h"),this.bubbles&&(t+="b"),null!==this.S&&(t+="@"+this.S.toString()),t},K(en,{g:"diagram"},function(){return this.N},function(t){this.N=t}),K(en,{xe:"viewPoint"},function(){return this.wx},function(t){a(t,wi,en,"viewPoint"),this.wx.assign(t)}),K(en,{S:"documentPoint"},function(){return this.qw},function(t){a(t,wi,en,"documentPoint"),this.qw.assign(t)}),K(en,{Cc:"modifiers"},function(){return this.Mt},function(t){this.Mt=t}),K(en,{button:"button"},function(){return this.Ss},function(t){this.Ss=t}),K(en,{key:"key"},function(){return this.Bt},function(t){this.Bt=t}),K(en,{ek:"down"},function(){return this.ht},function(t){this.ht=t}),K(en,{up:"up"},function(){return this.pu},function(t){this.pu=t}),K(en,{le:"clickCount"},function(){return this.Us},function(t){this.Us=t}),K(en,{ck:"delta"},function(){return this.dt},function(t){this.dt=t}),K(en,{Pr:"isMultiTouch"},function(){return this.xt},function(t){this.xt=t}),K(en,{rc:"handled"},function(){return this.ot},function(t){this.ot=t}),K(en,{bubbles:"bubbles"},function(){return this.di},function(t){this.di=t}),K(en,{event:"event"},function(){return this.Yo},function(t){this.Yo=t}),Y(en,{sk:"isTouchEvent"},function(){var i=t.TouchEvent;return i&&this.event instanceof i?!0:(i=t.PointerEvent)&&this.event instanceof i&&"touch"===this.event.pointerType}),K(en,{timestamp:"timestamp"},function(){return this.ou},function(t){this.ou=t}),K(en,{Sf:"targetDiagram"},function(){return this.mu},function(t){this.mu=t}),K(en,{Jd:"targetObject"},function(){return this.wf},function(t){this.wf=t}),K(en,{control:"control"},function(){return 0!==(1&this.Cc)},function(t){this.Cc=t?1|this.Cc:-2&this.Cc}),K(en,{shift:"shift"},function(){return 0!==(4&this.Cc)},function(t){this.Cc=t?4|this.Cc:-5&this.Cc}),K(en,{alt:"alt"},function(){return 0!==(2&this.Cc)},function(t){this.Cc=t?2|this.Cc:-3&this.Cc}),K(en,{Yr:"meta"},function(){return 0!==(8&this.Cc)},function(t){this.Cc=t?8|this.Cc:-9&this.Cc}),K(en,{left:"left"},function(){return 0===this.button},function(t){this.button=t?0:2}),K(en,{xI:"middle"},function(){return 1===this.button},function(t){this.button=t?1:0}),K(en,{right:"right"},function(){return 2===this.button},function(t){this.button=t?2:0}),H("DiagramEvent",on),on.prototype.copy=function(){var t=new on;return t.N=this.N,t.yb=this.yb,t.hu=this.hu,t.Vt=this.Vt,t.Ts=this.Ts,t},on.prototype.toString=function(){var t="*"+this.name;return this.cancel&&(t+="x"),null!==this.Zy&&(t+=":"+this.Zy.toString()),null!==this.Dy&&(t+="("+this.Dy.toString()+")"),t},K(on,{g:"diagram"},function(){return this.N},function(t){this.N=t}),K(on,{name:"name"},function(){return this.yb},function(t){this.yb=t}),K(on,{Zy:"subject"},function(){return this.hu},function(t){this.hu=t}),K(on,{Dy:"parameter"},function(){return this.Vt},function(t){this.Vt=t}),K(on,{cancel:"cancel"},function(){return this.Ts},function(t){this.Ts=t}),H("ChangedEvent",rn);var fc;rn.Transaction=fc=Z(rn,"Transaction",-1);var cc;rn.Property=cc=Z(rn,"Property",0);var pc;rn.Insert=pc=Z(rn,"Insert",1);var dc;rn.Remove=dc=Z(rn,"Remove",2),rn.prototype.clear=rn.prototype.clear=function(){this.$p=this.aq=this.eq=this.fq=this.dq=this.N=this.gd=null},rn.prototype.copy=function(){var t=new rn;t.gd=this.gd,t.N=this.N,t.Eo=this.Eo,t.Lt=this.Lt,t.dl=this.dl,t.dq=this.dq;var i=this.fq;return t.fq=y(i)&&"function"==typeof i.O?i.O():i,i=this.eq,t.eq=y(i)&&"function"==typeof i.O?i.O():i,i=this.aq,t.aq=y(i)&&"function"==typeof i.O?i.O():i,i=this.$p,t.$p=y(i)&&"function"==typeof i.O?i.O():i,t},rn.prototype.toString=function(){var t="",t=this.Vc===fc?t+"* ":this.Vc===cc?t+(null!==this.U?"!m":"!d"):t+((null!==this.U?"!m":"!d")+this.Vc);return this.propertyName&&"string"==typeof this.propertyName&&(t+=" "+this.propertyName),this.bf&&this.bf!==this.propertyName&&(t+=" "+this.bf),t+=": ",this.Vc===fc?null!==this.oldValue&&(t+=" "+this.oldValue):(null!==this.object&&(t+=mc(this.object)),null!==this.oldValue&&(t+="  old: "+mc(this.oldValue)),null!==this.Pf&&(t+=" "+this.Pf),null!==this.newValue&&(t+="  new: "+mc(this.newValue)),null!==this.Nf&&(t+=" "+this.Nf)),t},rn.prototype.getValue=rn.prototype.ha=function(t){return t?this.oldValue:this.newValue},rn.prototype.getParam=function(t){return t?this.Pf:this.Nf},rn.prototype.canUndo=rn.prototype.canUndo=function(){return null!==this.U||null!==this.g?!0:!1},rn.prototype.undo=rn.prototype.undo=function(){this.canUndo()&&(null!==this.U?this.U.wl(this,!0):null!==this.g&&this.g.wl(this,!0))},rn.prototype.canRedo=rn.prototype.canRedo=function(){return null!==this.U||null!==this.g?!0:!1},rn.prototype.redo=rn.prototype.redo=function(){this.canRedo()&&(null!==this.U?this.U.wl(this,!1):null!==this.g&&this.g.wl(this,!1))},K(rn,{U:"model"},function(){return this.gd},function(t){this.gd=t}),K(rn,{g:"diagram"},function(){return this.N},function(t){this.N=t}),K(rn,{Vc:"change"},function(){return this.Eo},function(t){this.Eo=t}),K(rn,{bf:"modelChange"},function(){return this.Lt},function(t){this.Lt=t}),K(rn,{propertyName:"propertyName"},function(){return this.dl},function(t){this.dl=t}),Y(rn,{hI:"isTransactionFinished"},function(){return this.Eo===fc&&("CommittedTransaction"===this.dl||"FinishedUndo"===this.dl||"FinishedRedo"===this.dl)}),K(rn,{object:"object"},function(){return this.dq},function(t){this.dq=t}),K(rn,{oldValue:"oldValue"},function(){return this.fq},function(t){this.fq=t}),K(rn,{Pf:"oldParam"},function(){return this.eq},function(t){this.eq=t}),K(rn,{newValue:"newValue"},function(){return this.aq},function(t){this.aq=t}),K(rn,{Nf:"newParam"},function(){return this.$p},function(t){this.$p=t}),H("Model",sn),sn.prototype.clear=sn.prototype.clear=function(){this.De=[],this.Vb.clear(),this.Gg.clear(),this.V.clear()},Wu=sn.prototype,Wu.Bs=function(){var t="";return""!==this.name&&(t+=',\n  "name": '+this.quote(this.name)),""!==this.ak&&(t+=',\n  "dataFormat": '+this.quote(this.ak)),this.Ta&&(t+=',\n  "isReadOnly": '+this.Ta),"key"!==this.Ol&&"string"==typeof this.Ol&&(t+=',\n  "nodeKeyProperty": '+this.quote(this.Ol)),this.Kx&&(t+=',\n  "copiesArrays": true'),this.Jx&&(t+=',\n  "copiesArrayObjects": true'),"category"!==this.Nl&&"string"==typeof this.Nl&&(t+=',\n  "nodeCategoryProperty": '+this.quote(this.Nl)),t},Wu.gz=function(){var t,i="",n=this.Zr,e=!1;for(t in n)if(!hn(t,n[t])){e=!0;break}return e&&(i=',\n  "modelData": '+un(this,n)),i+',\n  "nodeDataArray": '+an(this,this.pg,!0)},Wu.gs=function(t){t.name&&(this.name=t.name),t.dataFormat&&(this.ak=t.dataFormat),t.isReadOnly&&(this.Ta=t.isReadOnly),t.nodeKeyProperty&&(this.Ol=t.nodeKeyProperty),t.copiesArrays&&(this.Kx=t.copiesArrays),t.copiesArrayObjects&&(this.Jx=t.copiesArrayObjects),t.nodeCategoryProperty&&(this.Nl=t.nodeCategoryProperty)},Wu.Hy=function(t){var i=t.modelData;y(i)&&(this.js(i),this.Zr=i),t=t.nodeDataArray,g(t)&&(this.js(t),this.pg=t)},Wu.toString=function(t){if(void 0===t&&(t=0),t>1)return this.bz();var i=(""!==this.name?this.name:"")+" Model";if(t>0){i+="\n node data:",t=this.pg;for(var n=x(t),e=0;n>e;e++)var o=w(t,e),i=i+(" "+this.$a(o)+":"+mc(o))}return i},sn.prototype.toJson=sn.prototype.toJSON=sn.prototype.bz=function(t){return void 0===t&&(t=this.constructor===sn?"go.Model":this.constructor===xn?"go.GraphLinksModel":this.constructor===wn?"go.TreeModel":J(this)),'{ "class": '+this.quote(t)+this.Bs()+this.gz()+"}"},sn.fromJson=sn.fromJSON=function(i,n){void 0===n&&(n=null),null!==n&&a(n,sn,sn,"fromJson:model");var e=null;if("string"==typeof i)if(t.JSON&&t.JSON.parse)try{e=t.JSON.parse(i)}catch(o){}else v("WARNING: no JSON.parse available");else"object"==typeof i?e=i:r("Unable to construct a Model from: "+i);if(null===n){var s;s=null;var h=e["class"];if("string"==typeof h)try{var l=null;0===h.indexOf("go.")?(h=h.substr(3),l=Xu[h]):(l=Xu[h],void 0===l&&(l=t[h])),"function"==typeof l&&(s=new l)}catch(u){}null===s||s instanceof sn?n=s:r("Unable to construct a Model of declared class: "+e["class"])}return null===n&&(n=new xn),n.gs(e),n.Hy(e),n},sn.prototype.replaceJsonObjects=sn.prototype.js=function(t){if(g(t))for(var i=x(t),n=0;i>n;n++){var e=w(t,n);y(e)&&k(t,n,this.js(e))}else if(y(t)){for(n in t)if(e=t[n],y(e)&&(e=this.js(e),t[n]=e,"points"===n&&Array.isArray(e))){for(var o=0===e.length%2,r=0;r<e.length;r++)if("number"!=typeof e[r]){o=!1;break}if(o){for(o=new ci(wi),r=0;r<e.length/2;r++)o.add(new wi(e[2*r],e[2*r+1]));o.freeze(),t[n]=o}}if("object"==typeof t){if(n=t,e=t["class"],"NaN"===e)n=0/0;else if("Date"===e)n=new Date(t.value);else if("go.Point"===e)n=new wi(fn(t.x),fn(t.y));else if("go.Size"===e)n=new Ti(fn(t.width),fn(t.height));else if("go.Rect"===e)n=new Si(fn(t.x),fn(t.y),fn(t.width),fn(t.height));else if("go.Margin"===e)n=new Di(fn(t.top),fn(t.right),fn(t.bottom),fn(t.left));else if("go.Spot"===e)n="string"==typeof t["enum"]?mf(t["enum"]):new Fi(fn(t.x),fn(t.y),fn(t.offsetX),fn(t.offsetY));else if("go.Brush"===e){if(n=new Nr,n.type=cf(Nr,t.type),"string"==typeof t.color&&(n.color=t.color),t.start instanceof Fi&&(n.start=t.start),t.end instanceof Fi&&(n.end=t.end),"number"==typeof t.startRadius&&(n.vs=fn(t.startRadius)),"number"==typeof t.endRadius&&(n.ur=fn(t.endRadius)),t=t.colorStops,y(t))for(i in t)n.addColorStop(parseFloat(i),t[i])}else"go.Geometry"===e&&(i=null,i="string"==typeof t.path?oc(t.path):new Yi,i.type=cf(Yi,t.type),"number"==typeof t.startX&&(i.ia=fn(t.startX)),"number"==typeof t.startY&&(i.ja=fn(t.startY)),"number"==typeof t.endX&&(i.s=fn(t.endX)),"number"==typeof t.endY&&(i.u=fn(t.endY)),t.spot1 instanceof Fi&&(i.o=t.spot1),t.spot2 instanceof Fi&&(i.p=t.spot2),n=i);t=n}}return t},sn.prototype.quote=function(t){for(var i="",n=t.length,e=0;n>e;e++)var o=t[e],i='"'===o||"\\"===o?i+("\\"+o):"\b"===o?i+"\\b":"\f"===o?i+"\\f":"\n"===o?i+"\\n":"\r"===o?i+"\\r":"	"===o?i+"\\t":i+o;return'"'+i+'"'},sn.prototype.writeJsonValue=sn.prototype.Cs=function(t){return void 0===t?"undefined":null===t?"null":!0===t?"true":!1===t?"false":"string"==typeof t?this.quote(t):"number"==typeof t?1/0===t?"9e9999":-1/0===t?"-9e9999":isNaN(t)?'{"class":"NaN"}':t.toString():t instanceof Date?'{"class":"Date", "value":"'+t.toJSON()+'"}':t instanceof Number?this.Cs(t.valueOf()):g(t)?an(this,t):y(t)?un(this,t):"function"==typeof t?"null":t.toString()},K(sn,{name:"name"},function(){return this.yb},function(t){var i=this.yb;i!==t&&(h(t,"string",sn,"name"),this.yb=t,this.h("name",i,t))}),K(sn,{ak:"dataFormat"},function(){return this.kw},function(t){var i=this.kw;i!==t&&(h(t,"string",sn,"dataFormat"),this.kw=t,this.h("dataFormat",i,t))}),K(sn,{Ta:"isReadOnly"},function(){return this.Fj},function(t){var i=this.Fj;i!==t&&(h(t,"boolean",sn,"isReadOnly"),this.Fj=t,this.h("isReadOnly",i,t))}),K(sn,{Zr:"modelData"},function(){return this.Sw},function(t){var i=this.Sw;i!==t&&(h(t,"object",sn,"modelData"),this.Sw=t,this.h("modelData",i,t),this.rb(t))}),sn.prototype.addChangedListener=sn.prototype.yx=function(t){h(t,"function",sn,"addChangedListener:listener"),null===this.vi&&(this.vi=new ci("function")),this.vi.add(t)},sn.prototype.removeChangedListener=sn.prototype.Ky=function(t){h(t,"function",sn,"removeChangedListener:listener"),null!==this.vi&&(this.vi.remove(t),0===this.vi.count&&(this.vi=null))},sn.prototype.Hu=function(t){if(this.Ma||this.V.oC(t),null!==this.vi){var i=this.vi,n=i.length;if(1===n)(i=i.Y(0))(t);else if(0!==n)for(var e=i.ce(),o=0;n>o;o++)(i=e[o])(t)}},sn.prototype.raiseChangedEvent=sn.prototype.ec=function(t,i,n,e,o,r,s){cn(this,"",t,i,n,e,o,r,s)},sn.prototype.raiseChanged=sn.prototype.h=function(t,i,n,e,o){cn(this,"",cc,t,this,i,n,e,o)},sn.prototype.raiseDataChanged=sn.prototype.Gy=function(t,i,n,e,o,r){cn(this,"",cc,i,t,n,e,o,r)},K(sn,{V:"undoManager"},function(){return this.vx},function(t){var i=this.vx;i!==t&&(a(t,Sn,sn,"undoManager"),null!==i&&i.tG(this),this.vx=t,null!==t&&t.vE(this))}),K(sn,{Ma:"skipsUndoManager"},function(){return this.Eh},function(t){h(t,"boolean",sn,"skipsUndoManager"),this.Eh=t}),sn.prototype.wl=function(t,i){if(null!==t&&t.U===this)if(t.Vc===cc){var n=t.object,e=t.propertyName,o=t.ha(i);$(n,e,o)}else t.Vc===pc?"nodeDataArray"===t.bf?(n=t.newValue,y(n)&&(e=this.$a(n),void 0!==e&&(i?(S(this.De,t.Nf),this.Vb.remove(e)):(T(this.De,t.Nf,n),this.Vb.add(e,n))))):""===t.bf?(n=t.object,!g(n)&&t.propertyName&&(n=Q(t.object,t.propertyName)),g(n)&&(e=t.newValue,o=t.Nf,i?S(n,o):T(n,o,e))):r("unknown ChangedEvent.Insert object: "+t.toString()):t.Vc===dc?"nodeDataArray"===t.bf?(n=t.oldValue,y(n)&&(e=this.$a(n),void 0!==e&&(i?(T(this.De,t.Pf,n),this.Vb.add(e,n)):(S(this.De,t.Pf),this.Vb.remove(e))))):""===t.bf?(n=t.object,!g(n)&&t.propertyName&&(n=Q(t.object,t.propertyName)),g(n)&&(e=t.oldValue,o=t.Pf,i?T(n,o,e):S(n,o))):r("unknown ChangedEvent.Remove object: "+t.toString()):t.Vc!==fc&&r("unknown ChangedEvent: "+t.toString())},sn.prototype.startTransaction=sn.prototype.Ab=function(t){return this.V.Ab(t)},sn.prototype.commitTransaction=sn.prototype.pd=function(t){return this.V.pd(t)},sn.prototype.rollbackTransaction=sn.prototype.co=function(){return this.V.co()},sn.prototype.updateTargetBindings=sn.prototype.rb=function(t,i){void 0===i&&(i=""),cn(this,"SourceChanged",fc,i,t,null,null)},K(sn,{Ol:"nodeKeyProperty"},function(){return this.$k},function(t){var i=this.$k;i!==t&&(pn(t,sn,"nodeKeyProperty"),0<this.Vb.count&&r("Cannot set Model.nodeKeyProperty when there is existing node data"),this.$k=t,this.h("nodeKeyProperty",i,t))}),sn.prototype.getKeyForNodeData=sn.prototype.$a=function(t){if(null!==t){var i=this.$k;if(""!==i&&(i=Q(t,i),void 0!==i)){if(dn(i))return i;r("Key value for node data "+t+" is not a number or a string: "+i)}}},sn.prototype.setKeyForNodeData=sn.prototype.Ty=function(t,i){if(void 0!==i&&null!==i&&dn(i)||f(i,"number or string",sn,"setKeyForNodeData:key"),null!==t){var n=this.$k;if(""!==n)if(this.me(t)){var e=Q(t,n);e!==i&&null===this.He(i)&&($(t,n,i),this.Vb.remove(e),this.Vb.add(i,t),cn(this,"nodeKey",cc,n,t,e,i),"string"==typeof n&&this.rb(t,n),this.hs(e,i))}else $(t,n,i)}},K(sn,{qI:"makeUniqueKeyFunction"},function(){return this.Ft},function(t){var i=this.Ft;i!==t&&(null!==t&&h(t,"function",sn,"makeUniqueKeyFunction"),this.Ft=t,this.h("makeUniqueKeyFunction",i,t))}),sn.prototype.containsNodeData=sn.prototype.me=function(t){return t=this.$a(t),void 0===t?!1:this.Vb.contains(t)},sn.prototype.findNodeDataForKey=sn.prototype.He=function(t){return null===t&&r("Model.findNodeDataForKey:key must not be null"),void 0!==t&&dn(t)?this.Vb.ha(t):null},K(sn,{pg:"nodeDataArray"},function(){return this.De},function(t){var i=this.De;if(i!==t){m(t,sn,"nodeDataArray"),this.Vb.clear(),this.dz();for(var n=x(t),e=0;n>e;e++){var o=w(t,e);if(!y(o))return void r("Model.nodeDataArray must only contain Objects, not: "+o);G(o)}this.De=t;for(var s=new ci(Object),e=0;n>e;e++){var o=w(t,e),a=this.$a(o);void 0===a?s.add(o):null!==this.Vb.ha(a)?s.add(o):this.Vb.add(a,o)}for(e=s.i;e.next();)o=e.value,this.DC(o),s=this.$a(o),void 0!==s&&this.Vb.add(s,o);for(cn(this,"nodeDataArray",cc,"nodeDataArray",this,i,t),e=0;n>e;e++)o=w(t,e),this.bo(o),this.ao(o);this.JB(),Array.isArray(t)||(this.Ta=!0)}}),sn.prototype.makeNodeDataKeyUnique=sn.prototype.DC=function(t){if(null!==t){var i=this.$k;if(""!==i){var n=this.$a(t);if(void 0===n||this.Vb.contains(n)){var e=this.Ft;if(null!==e&&(n=e(this,t),void 0!==n&&null!==n&&!this.Vb.contains(n)))return void $(t,i,n);if("string"==typeof n){for(e=2;this.Vb.contains(n+e);)e++;$(t,i,n+e)}else if(void 0===n||"number"==typeof n){for(e=-this.Vb.count-1;this.Vb.contains(e);)e--;$(t,i,e)}else r("Model.getKeyForNodeData returned something other than a string or a number: "+n)}}}},sn.prototype.addNodeData=sn.prototype.rl=function(t){if(null!==t){G(t);var i=this.$a(t);(void 0===i||this.Vb.ha(i)!==t)&&(this.DC(t),i=this.$a(t),void 0===i?r("Model.makeNodeDataKeyUnique failed on "+t+".  Data not added to Model."):(this.Vb.add(i,t),i=x(this.De),T(this.De,i,t),cn(this,"nodeDataArray",pc,"nodeDataArray",this,null,t,null,i),this.bo(t),this.ao(t)))}},sn.prototype.addNodeDataCollection=function(t){if(g(t))for(var i=x(t),n=0;i>n;n++)this.rl(w(t,n));else for(t=t.i;t.next();)this.rl(t.value)},sn.prototype.removeNodeData=sn.prototype.My=function(t){if(null!==t){var i=this.$a(t);void 0!==i&&this.Vb.contains(i)&&(this.Vb.remove(i),i=M(this.De,t),0>i||(S(this.De,i),cn(this,"nodeDataArray",dc,"nodeDataArray",this,t,null,i,null),this.As(t)))}},sn.prototype.removeNodeDataCollection=function(t){if(g(t))for(var i=x(t),n=0;i>n;n++)this.My(w(t,n));else for(t=t.i;t.next();)this.My(t.value)},Wu=sn.prototype,Wu.hs=function(t,i){var n=gn(this,t);n instanceof di&&this.Gg.add(i,n)},Wu.dz=function(){},Wu.bo=function(){},Wu.ao=function(){},Wu.As=function(){},sn.prototype.clearUnresolvedReferences=sn.prototype.JB=function(t){void 0===t?this.Gg.clear():this.Gg.remove(t)},K(sn,{FH:"copyNodeDataFunction"},function(){return this.Ys},function(t){var i=this.Ys;i!==t&&(null!==t&&h(t,"function",sn,"copyNodeDataFunction"),this.Ys=t,this.h("copyNodeDataFunction",i,t))}),K(sn,{Kx:"copiesArrays"},function(){return this.dw},function(t){var i=this.dw;i!==t&&(null!==t&&h(t,"boolean",sn,"copiesArrays"),this.dw=t,this.h("copiesArrays",i,t))}),K(sn,{Jx:"copiesArrayObjects"},function(){return this.cw},function(t){var i=this.cw;i!==t&&(null!==t&&h(t,"boolean",sn,"copiesArrayObjects"),this.cw=t,this.h("copiesArrayObjects",i,t))}),sn.prototype.copyNodeData=function(t){if(null===t)return null;var i=null,i=this.Ys,i=null!==i?i(t,this):mn(this,t,!0);return y(i)&&I(i),i};var vc=!1;sn.prototype.setDataProperty=function(t,i,n){if(this.me(t)){if(i===this.Ol)this.Ty(t,n);else if(i===this.Nl)return void this.yv(t,n)}else!vc&&t instanceof Pr&&(vc=!0,v('Model.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),v("  Is that really your intent?"));var e=Q(t,i);e!==n&&($(t,i,n),this.Gy(t,i,e,n))},sn.prototype.addArrayItem=function(t,i){this.DF(t,-1,i)},sn.prototype.insertArrayItem=sn.prototype.DF=function(t,i,n){t===this.De&&r("Model.insertArrayItem or Model.addArrayItem should not be called on the Model.nodeDataArray"),0>i&&(i=x(t)),T(t,i,n),cn(this,"",pc,"",t,null,n,null,i)},sn.prototype.removeArrayItem=function(t,i){void 0===i&&(i=-1),t===this.De&&r("Model.removeArrayItem should not be called on the Model.nodeDataArray"),-1===i&&(i=x(t)-1);var n=w(t,i);S(t,i),cn(this,"",dc,"",t,n,null,i,null)},K(sn,{Nl:"nodeCategoryProperty"},function(){return this.bq},function(t){var i=this.bq;i!==t&&(pn(t,sn,"nodeCategoryProperty"),this.bq=t,this.h("nodeCategoryProperty",i,t))}),sn.prototype.getCategoryForNodeData=sn.prototype.Tx=function(t){if(null===t)return"";var i=this.bq;return""===i?"":(i=Q(t,i),void 0===i?"":"string"==typeof i?i:(r("getCategoryForNodeData found a non-string category for "+t+": "+i),""))},sn.prototype.setCategoryForNodeData=sn.prototype.yv=function(t,i){if(h(i,"string",sn,"setCategoryForNodeData:cat"),null!==t){var n=this.bq;if(""!==n)if(this.me(t)){var e=Q(t,n);void 0===e&&(e=""),e!==i&&($(t,n,i),cn(this,"nodeCategory",cc,n,t,e,i))}else $(t,n,i)}},U(xn,sn),H("GraphLinksModel",xn),xn.prototype.clear=xn.prototype.clear=function(){sn.prototype.clear.call(this),this.Ng=[],this.Yk.clear()},Wu=xn.prototype,Wu.toString=function(t){if(void 0===t&&(t=0),t>=2)return this.bz();var i=(""!==this.name?this.name:"")+" GraphLinksModel";if(t>0){i+="\n node data:",t=this.pg;for(var n=x(t),e=0,e=0;n>e;e++)var o=w(t,e),i=i+(" "+this.$a(o)+":"+mc(o));for(i+="\n link data:",t=this.aj,n=x(t),e=0;n>e;e++)o=w(t,e),i+=" "+this.ik(o)+"-->"+this.lk(o)}return i},Wu.Bs=function(){var t=sn.prototype.Bs.call(this),i="";return"category"!==this.Tr&&"string"==typeof this.Tr&&(i+=',\n  "linkCategoryProperty": '+this.quote(this.Tr)),"from"!==this.Nn&&"string"==typeof this.Nn&&(i+=',\n  "linkFromKeyProperty": '+this.quote(this.Nn)),"to"!==this.Pn&&"string"==typeof this.Pn&&(i+=',\n  "linkToKeyProperty": '+this.quote(this.Pn)),""!==this.Ur&&"string"==typeof this.Ur&&(i+=',\n  "linkFromPortIdProperty": '+this.quote(this.Ur)),""!==this.Wr&&"string"==typeof this.Wr&&(i+=',\n  "linkToPortIdProperty": '+this.quote(this.Wr)),""!==this.Vr&&"string"==typeof this.Vr&&(i+=',\n  "linkLabelKeysProperty": '+this.quote(this.Vr)),"isGroup"!==this.bs&&"string"==typeof this.bs&&(i+=',\n  "nodeIsGroupProperty": '+this.quote(this.bs)),"group"!==this.Yn&&"string"==typeof this.Yn&&(i+=',\n  "nodeGroupKeyProperty": '+this.quote(this.Yn)),t+i},Wu.gz=function(){var t=sn.prototype.gz.call(this),i=',\n  "linkDataArray": '+an(this,this.aj,!0);return t+i
},Wu.gs=function(t){sn.prototype.gs.call(this,t),t.linkFromKeyProperty&&(this.Nn=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.Pn=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.Ur=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.Wr=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.Tr=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.Vr=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.bs=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.Yn=t.nodeGroupKeyProperty)},Wu.Hy=function(t){sn.prototype.Hy.call(this,t),t=t.linkDataArray,g(t)&&(this.js(t),this.aj=t)},Wu.wl=function(t,i){var n=null;if(t.Vc===pc){if("linkDataArray"===t.bf?n=this.Ng:"linkLabelKeys"===t.bf&&(n=this.$i(t.object)),g(n))return void(i?S(n,t.Nf):T(n,t.Nf,t.newValue))}else if(t.Vc===dc&&("linkDataArray"===t.bf?n=this.Ng:"linkLabelKeys"===t.bf&&(n=this.$i(t.object)),g(n)))return void(i?T(n,t.Pf,t.oldValue):S(n,t.Pf));sn.prototype.wl.call(this,t,i)},K(xn,{Dx:"archetypeNodeData"},function(){return this.sj},function(t){var i=this.sj;i!==t&&(null!==t&&a(t,Object,xn,"archetypeNodeData"),this.sj=t,this.h("archetypeNodeData",i,t))}),xn.prototype.Ll=function(t){if(void 0!==t){var i=this.sj;if(null!==i){var n=this.He(t);null===n&&(n=this.copyNodeData(i),$(n,this.$k,t),this.rl(n))}return t}},K(xn,{Nn:"linkFromKeyProperty"},function(){return this.ri},function(t){var i=this.ri;i!==t&&(pn(t,xn,"linkFromKeyProperty"),this.ri=t,this.h("linkFromKeyProperty",i,t))}),xn.prototype.getFromKeyForLinkData=xn.prototype.ik=function(t){if(null!==t){var i=this.ri;if(""!==i&&(i=Q(t,i),void 0!==i)){if(dn(i))return i;r("FromKey value for link data "+t+" is not a number or a string: "+i)}}},xn.prototype.setFromKeyForLinkData=xn.prototype.zv=function(t,i){if(null===i&&(i=void 0),void 0===i||dn(i)||f(i,"number or string",xn,"setFromKeyForLinkData:key"),null!==t){var n=this.ri;if(""!==n)if(i=this.Ll(i),this.Oh(t)){var e=Q(t,n);e!==i&&(yn(this,e,t),$(t,n,i),null===this.He(i)&&vn(this,i,t),cn(this,"linkFromKey",cc,n,t,e,i),"string"==typeof n&&this.rb(t,n))}else $(t,n,i)}},K(xn,{Pn:"linkToKeyProperty"},function(){return this.ui},function(t){var i=this.ui;i!==t&&(pn(t,xn,"linkToKeyProperty"),this.ui=t,this.h("linkToKeyProperty",i,t))}),xn.prototype.getToKeyForLinkData=xn.prototype.lk=function(t){if(null!==t){var i=this.ui;if(""!==i&&(i=Q(t,i),void 0!==i)){if(dn(i))return i;r("ToKey value for link data "+t+" is not a number or a string: "+i)}}},xn.prototype.setToKeyForLinkData=xn.prototype.Bv=function(t,i){if(null===i&&(i=void 0),void 0===i||dn(i)||f(i,"number or string",xn,"setToKeyForLinkData:key"),null!==t){var n=this.ui;if(""!==n)if(i=this.Ll(i),this.Oh(t)){var e=Q(t,n);e!==i&&(yn(this,e,t),$(t,n,i),null===this.He(i)&&vn(this,i,t),cn(this,"linkToKey",cc,n,t,e,i),"string"==typeof n&&this.rb(t,n))}else $(t,n,i)}},K(xn,{Ur:"linkFromPortIdProperty"},function(){return this.Gp},function(t){var i=this.Gp;i!==t&&(pn(t,xn,"linkFromPortIdProperty"),this.Gp=t,this.h("linkFromPortIdProperty",i,t))}),xn.prototype.getFromPortIdForLinkData=xn.prototype.mF=function(t){if(null===t)return"";var i=this.Gp;return""===i?"":(t=Q(t,i),void 0===t?"":t)},xn.prototype.setFromPortIdForLinkData=xn.prototype.Sy=function(t,i){if(h(i,"string",xn,"setFromPortIdForLinkData:portname"),null!==t){var n=this.Gp;if(""!==n)if(this.Oh(t)){var e=Q(t,n);void 0===e&&(e=""),e!==i&&($(t,n,i),cn(this,"linkFromPortId",cc,n,t,e,i),"string"==typeof n&&this.rb(t,n))}else $(t,n,i)}},K(xn,{Wr:"linkToPortIdProperty"},function(){return this.Hp},function(t){var i=this.Hp;i!==t&&(pn(t,xn,"linkToPortIdProperty"),this.Hp=t,this.h("linkToPortIdProperty",i,t))}),xn.prototype.getToPortIdForLinkData=xn.prototype.pF=function(t){if(null===t)return"";var i=this.Hp;return""===i?"":(t=Q(t,i),void 0===t?"":t)},xn.prototype.setToPortIdForLinkData=xn.prototype.Wy=function(t,i){if(h(i,"string",xn,"setToPortIdForLinkData:portname"),null!==t){var n=this.Hp;if(""!==n)if(this.Oh(t)){var e=Q(t,n);void 0===e&&(e=""),e!==i&&($(t,n,i),cn(this,"linkToPortId",cc,n,t,e,i),"string"==typeof n&&this.rb(t,n))}else $(t,n,i)}},K(xn,{Vr:"linkLabelKeysProperty"},function(){return this.Og},function(t){var i=this.Og;i!==t&&(pn(t,xn,"linkLabelKeysProperty"),this.Og=t,this.h("linkLabelKeysProperty",i,t))}),xn.prototype.getLabelKeysForLinkData=xn.prototype.$i=function(t){if(null===t)return lf;var i=this.Og;return""===i?lf:(t=Q(t,i),void 0===t?lf:t)},xn.prototype.setLabelKeysForLinkData=xn.prototype.oD=function(t,i){if(m(i,xn,"setLabelKeysForLinkData:arr"),null!==t){var n=this.Og;if(""!==n)if(this.Oh(t)){var e=Q(t,n);if(void 0===e&&(e=lf),e!==i){for(var o=x(e),r=0;o>r;r++){var s=w(e,r);yn(this,s,t)}for($(t,n,i),o=x(i),r=0;o>r;r++)s=w(i,r),null===this.He(s)&&vn(this,s,t);cn(this,"linkLabelKeys",cc,n,t,e,i),"string"==typeof n&&this.rb(t,n)}}else $(t,n,i)}},xn.prototype.addLabelKeyForLinkData=xn.prototype.Ax=function(t,i){if(null!==i&&void 0!==i&&(dn(i)||f(i,"number or string",xn,"addLabelKeyForLinkData:key"),null!==t)){var n=this.Og;if(""!==n){var e=Q(t,n);void 0===e?(n=[],n.push(i),this.oD(t,n)):g(e)?0<=M(e,i)||(T(e,1/0,i),this.Oh(t)&&(null===this.He(i)&&vn(this,i,t),cn(this,"linkLabelKeys",pc,n,t,null,i))):r(n+" property is not an Array; cannot addLabelKeyForLinkData: "+t)}}},xn.prototype.removeLabelKeyForLinkData=xn.prototype.WC=function(t,i){if(null!==i&&void 0!==i&&(dn(i)||f(i,"number or string",xn,"removeLabelKeyForLinkData:key"),null!==t)){var n=this.Og;if(""!==n){var e=Q(t,n);if(g(e)){var o=M(e,i);0>o||(S(e,o),this.Oh(t)&&(yn(this,i,t),cn(this,"linkLabelKeys",dc,n,t,i,null)))}else void 0!==e&&r(n+" property is not an Array; cannot removeLabelKeyforLinkData: "+t)}}},K(xn,{aj:"linkDataArray"},function(){return this.Ng},function(t){var i=this.Ng;if(i!==t){m(t,xn,"linkDataArray");for(var n=x(t),e=0;n>e;e++){var o=w(t,e);if(!y(o))return void r("GraphLinksModel.linkDataArray must only contain Objects, not: "+o);G(o)}this.Ng=t;for(var s=new di(Object),e=0;n>e;e++)o=w(t,e),s.add(o);for(this.Yk=s,cn(this,"linkDataArray",cc,"linkDataArray",this,i,t),e=0;n>e;e++)o=w(t,e),bn(this,o)}}),xn.prototype.containsLinkData=xn.prototype.Oh=function(t){return null===t?!1:this.Yk.contains(t)},xn.prototype.addLinkData=xn.prototype.vu=function(t){if(null!==t){if(void 0===V(t))I(t);else if(this.Oh(t))return;this.Yk.add(t);var i=x(this.Ng);T(this.Ng,i,t),cn(this,"linkDataArray",pc,"linkDataArray",this,null,t,null,i),bn(this,t)}},xn.prototype.addLinkDataCollection=function(t){if(g(t))for(var i=x(t),n=0;i>n;n++)this.vu(w(t,n));else for(t=t.i;t.next();)this.vu(t.value)},xn.prototype.removeLinkData=xn.prototype.Ly=function(t){if(null!==t){this.Yk.remove(t);var i=this.Ng.indexOf(t);if(!(0>i)){S(this.Ng,i),cn(this,"linkDataArray",dc,"linkDataArray",this,t,null,i,null),i=this.ik(t),yn(this,i,t),i=this.lk(t),yn(this,i,t);var n=this.$i(t);if(g(n))for(var e=x(n),o=0;e>o;o++)i=w(n,o),yn(this,i,t)}}},xn.prototype.removeLinkDataCollection=function(t){if(g(t))for(var i=x(t),n=0;i>n;n++)this.Ly(w(t,n));else for(t=t.i;t.next();)this.Ly(t.value)},K(xn,{EH:"copyLinkDataFunction"},function(){return this.Xs},function(t){var i=this.Xs;i!==t&&(null!==t&&h(t,"function",xn,"copyLinkDataFunction"),this.Xs=t,this.h("copyLinkDataFunction",i,t))}),xn.prototype.copyLinkData=xn.prototype.RB=function(t){if(null===t)return null;var i=null,i=this.Xs;if(null!==i)i=i(t,this);else{var n,i=new t.constructor;for(n in t)if("__gohashid"!==n){var e=Q(t,n);$(i,n,e)}}return null!==i&&(I(i),""!==this.ri&&$(i,this.ri,void 0),""!==this.ui&&$(i,this.ui,void 0),""!==this.Og&&$(i,this.Og,[])),i},K(xn,{bs:"nodeIsGroupProperty"},function(){return this.Ot},function(t){var i=this.Ot;i!==t&&(pn(t,xn,"nodeIsGroupProperty"),this.Ot=t,this.h("nodeIsGroupProperty",i,t))}),xn.prototype.isGroupForNodeData=xn.prototype.iy=function(t){if(null===t)return!1;var i=this.Ot;return""===i?!1:Q(t,i)?!0:!1},K(xn,{Yn:"nodeGroupKeyProperty"},function(){return this.Bi},function(t){var i=this.Bi;i!==t&&(pn(t,xn,"nodeGroupKeyProperty"),this.Bi=t,this.h("nodeGroupKeyProperty",i,t))}),K(xn,{Al:"copiesGroupKeyOfNodeData"},function(){return this.ew},function(t){this.ew!==t&&(h(t,"boolean",xn,"copiesGroupKeyOfNodeData"),this.ew=t)}),xn.prototype.getGroupKeyForNodeData=xn.prototype.Il=function(t){if(null!==t){var i=this.Bi;if(""!==i&&(i=Q(t,i),void 0!==i)){if(dn(i))return i;r("GroupKey value for node data "+t+" is not a number or a string: "+i)}}},xn.prototype.setGroupKeyForNodeData=xn.prototype.Av=function(t,i){if(null===i&&(i=void 0),void 0===i||dn(i)||f(i,"number or string",xn,"setGroupKeyForNodeData:key"),null!==t){var n=this.Bi;if(""!==n)if(this.me(t)){var e=Q(t,n);e!==i&&(yn(this,e,t),$(t,n,i),null===this.He(i)&&vn(this,i,t),cn(this,"nodeGroupKey",cc,n,t,e,i),"string"==typeof n&&this.rb(t,n))}else $(t,n,i)}},xn.prototype.copyNodeData=function(t){return null===t?null:(t=sn.prototype.copyNodeData.call(this,t),this.Al||""===this.Bi||$(t,this.Bi,void 0),t)},xn.prototype.setDataProperty=function(t,i,n){if(this.me(t))if(i===this.Ol)this.Ty(t,n);else{if(i===this.Nl)return void this.yv(t,n);if(i===this.Yn)return void this.Av(t,n);i===this.bs&&r("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: "+i)}else if(this.Oh(t)){if(i===this.Nn)return void this.zv(t,n);if(i===this.Pn)return void this.Bv(t,n);if(i===this.Ur)return void this.Sy(t,n);if(i===this.Wr)return void this.Wy(t,n);if(i===this.Tr)return void this.nD(t,n);if(i===this.Vr)return void this.oD(t,n)}else!vc&&t instanceof Pr&&(vc=!0,v('GraphLinksModel.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),v("  Is that really your intent?"));var e=Q(t,i);e!==n&&($(t,i,n),this.Gy(t,i,e,n))},Wu=xn.prototype,Wu.hs=function(t,i){sn.prototype.hs.call(this,t,i);for(var n=this.Vb.i;n.next();)this.Oy(n.value,t,i);for(var e=this.Yk.i;e.next();){var o=n.value,r=t,s=i;if(this.ik(o)===r){var a=this.ri;$(o,a,s),cn(this,"linkFromKey",cc,a,o,r,s),"string"==typeof a&&this.rb(o,a)}this.lk(o)===r&&(a=this.ui,$(o,a,s),cn(this,"linkToKey",cc,a,o,r,s),"string"==typeof a&&this.rb(o,a));var h=this.$i(o);if(g(h))for(var l=x(h),a=this.Og,u=0;l>u;u++)w(h,u)===r&&(k(h,u,s),cn(this,"linkLabelKeys",pc,a,o,r,s))}},Wu.Oy=function(t,i,n){if(this.Il(t)===i){var e=this.Bi;$(t,e,n),cn(this,"nodeGroupKey",cc,e,t,i,n),"string"==typeof e&&this.rb(t,e)}},Wu.dz=function(){sn.prototype.dz.call(this);for(var t=this.aj,i=x(t),n=0;i>n;n++){var e=w(t,n);bn(this,e)}},Wu.bo=function(t){sn.prototype.bo.call(this,t),t=this.$a(t);var i=gn(this,t);if(null!==i){for(var n=new ci(Object),i=i.i;i.next();){var e=i.value;if(this.me(e)){if(this.Il(e)===t){var o=this.Bi;cn(this,"nodeGroupKey",cc,o,e,t,t),"string"==typeof o&&this.rb(e,o),n.add(e)}}else{this.ik(e)===t&&(o=this.ri,cn(this,"linkFromKey",cc,o,e,t,t),"string"==typeof o&&this.rb(e,o),n.add(e)),this.lk(e)===t&&(o=this.ui,cn(this,"linkToKey",cc,o,e,t,t),"string"==typeof o&&this.rb(e,o),n.add(e));var r=this.$i(e);if(g(r))for(var s=x(r),o=this.Og,a=0;s>a;a++)w(r,a)===t&&(cn(this,"linkLabelKeys",pc,o,e,t,t),n.add(e))}}for(n=n.i;n.next();)yn(this,t,n.value)}},Wu.ao=function(t){sn.prototype.ao.call(this,t);var i=this.Il(t);null===this.He(i)&&vn(this,i,t)},Wu.As=function(t){sn.prototype.As.call(this,t);var i=this.Il(t);yn(this,i,t)},K(xn,{Tr:"linkCategoryProperty"},function(){return this.Dp},function(t){var i=this.Dp;i!==t&&(pn(t,xn,"linkCategoryProperty"),this.Dp=t,this.h("linkCategoryProperty",i,t))}),xn.prototype.getCategoryForLinkData=xn.prototype.Wu=function(t){if(null===t)return"";var i=this.Dp;return""===i?"":(i=Q(t,i),void 0===i?"":"string"==typeof i?i:(r("getCategoryForLinkData found a non-string category for "+t+": "+i),""))},xn.prototype.setCategoryForLinkData=xn.prototype.nD=function(t,i){if(h(i,"string",xn,"setCategoryForLinkData:cat"),null!==t){var n=this.Dp;if(""===n)return"";if(this.Oh(t)){var e=Q(t,n);void 0===e&&(e=""),e!==i&&($(t,n,i),cn(this,"linkCategory",cc,n,t,e,i),"string"==typeof n&&this.rb(t,n))}else $(t,n,i)}},U(wn,sn),H("TreeModel",wn),wn.prototype.toString=function(t){if(void 0===t&&(t=0),t>=2)return this.bz();var i=(""!==this.name?this.name:"")+" TreeModel";if(t>0){i+="\n node data:",t=this.pg;for(var n=x(t),e=0;n>e;e++)var o=w(t,e),i=i+(" "+this.$a(o)+":"+mc(o))}return i},wn.prototype.Bs=function(){var t=sn.prototype.Bs.call(this),i="";return"parent"!==this.Zn&&"string"==typeof this.Zn&&(i+=',\n  "nodeParentKeyProperty": '+this.quote(this.Zn)),t+i},wn.prototype.gs=function(t){sn.prototype.gs.call(this,t),t.nodeParentKeyProperty&&(this.Zn=t.nodeParentKeyProperty)},wn.prototype.Ll=function(t){return t},K(wn,{Zn:"nodeParentKeyProperty"},function(){return this.Ci},function(t){var i=this.Ci;i!==t&&(pn(t,wn,"nodeParentKeyProperty"),this.Ci=t,this.h("nodeParentKeyProperty",i,t))}),K(wn,{Bl:"copiesParentKeyOfNodeData"},function(){return this.fw},function(t){this.fw!==t&&(h(t,"boolean",wn,"copiesParentKeyOfNodeData"),this.fw=t)}),wn.prototype.getParentKeyForNodeData=wn.prototype.Jl=function(t){if(null!==t){var i=this.Ci;if(""!==i&&(i=Q(t,i),void 0!==i)){if(dn(i))return i;r("ParentKey value for node data "+t+" is not a number or a string: "+i)}}},wn.prototype.setParentKeyForNodeData=wn.prototype.wg=function(t,i){if(null===i&&(i=void 0),void 0===i||dn(i)||f(i,"number or string",wn,"setParentKeyForNodeData:key"),null!==t){var n=this.Ci;if(""!==n)if(i=this.Ll(i),this.me(t)){var e=Q(t,n);e!==i&&(yn(this,e,t),$(t,n,i),null===this.He(i)&&vn(this,i,t),cn(this,"nodeParentKey",cc,n,t,e,i),"string"==typeof n&&this.rb(t,n))}else $(t,n,i)}},K(wn,{LI:"parentLinkCategoryProperty"},function(){return this.iq},function(t){var i=this.iq;i!==t&&(pn(t,wn,"parentLinkCategoryProperty"),this.iq=t,this.h("parentLinkCategoryProperty",i,t))}),wn.prototype.getParentLinkCategoryForNodeData=wn.prototype.oF=function(t){if(null===t)return"";var i=this.iq;return""===i?"":(i=Q(t,i),void 0===i?"":"string"==typeof i?i:(r("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+i),""))},wn.prototype.setParentLinkCategoryForNodeData=wn.prototype.JG=function(t,i){if(h(i,"string",wn,"setParentLinkCategoryForNodeData:cat"),null!==t){var n=this.iq;if(""===n)return"";if(this.me(t)){var e=Q(t,n);void 0===e&&(e=""),e!==i&&($(t,n,i),cn(this,"parentLinkCategory",cc,n,t,e,i),"string"==typeof n&&this.rb(t,n))}else $(t,n,i)}},wn.prototype.copyNodeData=function(t){return null===t?null:(t=sn.prototype.copyNodeData.call(this,t),this.Bl||""===this.Ci||$(t,this.Ci,void 0),t)},wn.prototype.setDataProperty=function(t,i,n){if(this.me(t))if(i===this.Ol)this.Ty(t,n);else{if(i===this.Nl)return void this.yv(t,n);if(i===this.Zn)return void this.wg(t,n)}else!vc&&t instanceof Pr&&(vc=!0,v('TreeModel.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),v("  Is that really your intent?"));var e=Q(t,i);e!==n&&($(t,i,n),this.Gy(t,i,e,n))},Wu=wn.prototype,Wu.hs=function(t,i){sn.prototype.hs.call(this,t,i);for(var n=this.Vb.i;n.next();)this.Oy(n.value,t,i)},Wu.Oy=function(t,i,n){if(this.Jl(t)===i){var e=this.Ci;$(t,e,n),cn(this,"nodeParentKey",cc,e,t,i,n),"string"==typeof e&&this.rb(t,e)}},Wu.bo=function(t){sn.prototype.bo.call(this,t),t=this.$a(t);var i=gn(this,t);if(null!==i){for(var n=new ci(Object),i=i.i;i.next();){var e=i.value;if(this.me(e)&&this.Jl(e)===t){var o=this.Ci;cn(this,"nodeParentKey",cc,o,e,t,t),"string"==typeof o&&this.rb(e,o),n.add(e)}}for(n=n.i;n.next();)yn(this,t,n.value)}},Wu.ao=function(t){sn.prototype.ao.call(this,t);var i=this.Jl(t),i=this.Ll(i);null===this.He(i)&&vn(this,i,t)},Wu.As=function(t){sn.prototype.As.call(this,t);var i=this.Jl(t);yn(this,i,t)},H("Binding",kn);var yc;kn.OneWay=yc=Z(kn,"OneWay",1);var gc;kn.TwoWay=gc=Z(kn,"TwoWay",2),kn.parseEnum=function(t,i){return h(t,"function",kn,"parseEnum:ctor"),u(i,t,kn,"parseEnum:defval"),function(n){return n=cf(t,n),null===n?i:n}};var mc;kn.toString=mc=function(t){var i=t;return y(t)&&(t.text?i=t.text:t.name?i=t.name:void 0!==t.key?i=t.key:void 0!==t.id?i=t.id:t.constructor===Object&&(t.Text?i=t.Text:t.Name?i=t.Name:void 0!==t.Key?i=t.Key:void 0!==t.Id?i=t.Id:void 0!==t.ID&&(i=t.ID))),void 0===i?"undefined":null===i?"null":i.toString()},kn.prototype.toString=function(){return"Binding("+this.Gv+":"+this.uD+(-1!==this.Ck?" "+this.Ck:"")+" "+this.mode.name+")"},kn.prototype.freeze=function(){return this.pa=!0,this},kn.prototype.wa=function(){return this.pa=!1,this},K(kn,{Ck:null},function(){return this.aB},function(t){s(this),h(t,"number",kn,"targetId"),this.aB=t}),K(kn,{Gv:"targetProperty"},function(){return this.nu},function(t){s(this),h(t,"string",kn,"targetProperty"),this.nu=t}),K(kn,{Sl:"sourceName"},function(){return this.WA},function(t){s(this),null!==t&&h(t,"string",kn,"sourceName"),this.WA=t,null!==t&&(this.tx=!1)}),K(kn,{ys:"toModel"},function(){return this.tx},function(t){s(this),h(t,"boolean",kn,"toModel"),this.tx=t}),K(kn,{uD:"sourceProperty"},function(){return this.eu},function(t){s(this),h(t,"string",kn,"sourceProperty"),this.eu=t}),K(kn,{ME:"converter"},function(){return this.bw},function(t){s(this),null!==t&&h(t,"function",kn,"converter"),this.bw=t}),K(kn,{BE:"backConverter"},function(){return this.Wv},function(t){s(this),null!==t&&h(t,"function",kn,"backConverter"),this.Wv=t}),K(kn,{mode:"mode"},function(){return this.Rw},function(t){s(this),u(t,kn,kn,"mode"),this.Rw=t}),kn.prototype.makeTwoWay=function(t){return void 0===t&&(t=null),null!==t&&h(t,"function",kn,"makeTwoWay"),this.mode=gc,this.BE=t,this},kn.prototype.ofObject=kn.prototype.mv=function(t){return void 0===t&&(t=""),this.Sl=t,this.ys=!1,this},kn.prototype.ofModel=function(){return this.Sl=null,this.ys=!0,this},kn.prototype.ofData=function(){return this.Sl=null,this.ys=!1,this},kn.prototype.updateTarget=kn.prototype.JD=function(t,i,n){var e=this.eu;if(void 0===n||e===n){n=this.nu;var o=this.bw;if(null===o&&""===n)v("Binding error: target property is the empty string: "+this.toString());else{var r=i;if(""!==e&&(r=Q(i,e)),void 0!==r)if(null===o)""!==n&&$(t,n,r);else try{if(""!==n){var s=o(r,t);$(t,n,s)}else o(r,t)}catch(a){}}}},kn.prototype.updateSource=kn.prototype.Hv=function(t,i,n,e){if(void 0===e&&(e=null),this.Rw===gc){var o=this.nu;if(void 0===n||o===n){n=this.eu;var r=this.Wv;if(null!==r||""!==n){var s=t;if(""!==o&&(s=Q(t,o)),void 0!==s)if(null===r)null!==e&&e.U?e.U.setDataProperty(i,n,s):$(i,n,s);else try{if(""!==n){var a=r(s,i);null!==e&&e.U?e.U.setDataProperty(i,n,a):$(i,n,a)}else r(s,i)}catch(h){}}}}},H("Transaction",Tn),Tn.prototype.toString=function(t){var i="Transaction: "+this.name+" "+this.ig.count.toString()+(this.Lr?"":", incomplete");if(void 0!==t&&t>0){t=this.ig.count;for(var n=0;t>n;n++){var e=this.ig.Y(n);null!==e&&(i+="\n  "+e.toString())}}return i},Tn.prototype.clear=Tn.prototype.clear=function(){var t=this.ig;t.wa();for(var i=t.count-1;i>=0;i--){var n=t.Y(i);null!==n&&n.clear()}t.clear(),t.freeze()},Tn.prototype.canUndo=Tn.prototype.canUndo=function(){return this.Lr},Tn.prototype.undo=Tn.prototype.undo=function(){if(this.canUndo())for(var t=this.ig.count-1;t>=0;t--){var i=this.ig.Y(t);null!==i&&i.undo()}},Tn.prototype.canRedo=Tn.prototype.canRedo=function(){return this.Lr},Tn.prototype.redo=Tn.prototype.redo=function(){if(this.canRedo())for(var t=this.ig.count,i=0;t>i;i++){var n=this.ig.Y(i);null!==n&&n.redo()}},Y(Tn,{ig:"changes"},function(){return this.XD}),K(Tn,{name:"name"},function(){return this.yb},function(t){this.yb=t}),K(Tn,{Lr:"isComplete"},function(){return this.bA},function(t){this.bA=t}),H("UndoManager",Sn),Sn.prototype.toString=function(t){for(var i="UndoManager "+this.Uh+"<"+this.history.count+"<="+this.EC,i=i+"[",n=this.LC.count,e=0;n>e;e++)e>0&&(i+=" "),i+=this.LC.Y(e);if(i+="]",void 0!==t&&t>0)for(n=this.history.count,e=0;n>e;e++)i+="\n "+this.history.Y(e).toString(t-1);return i},Sn.prototype.clear=Sn.prototype.clear=function(){var t=this.history;t.wa();for(var i=t.count-1;i>=0;i--){var n=t.Y(i);null!==n&&n.clear()}t.clear(),this.Yf=-1,t.freeze(),this.th=!1,this.ct=null,this.Tj=0,this.dg.wa(),this.dg.clear(),this.dg.freeze(),this.Um.clear()},Sn.prototype.addModel=Sn.prototype.vE=function(t){this.Tw.add(t)},Sn.prototype.removeModel=Sn.prototype.tG=function(t){this.Tw.remove(t)},Sn.prototype.startTransaction=Sn.prototype.Ab=function(t){if(void 0===t&&(t=""),null===t&&(t=""),this.Ua)return!1;!0===this.yw&&(this.yw=!1,this.Tj++,this.pc("StartingFirstTransaction",t,this.Ph),0<this.Tj&&this.Tj--),this.isEnabled&&(this.dg.wa(),this.dg.add(t),this.dg.freeze(),this.Um.add(null===this.Ph?0:this.Ph.ig.count)),this.Tj++;var i=1===this.de;return i&&this.pc("StartedTransaction",t,this.Ph),i},Sn.prototype.commitTransaction=Sn.prototype.pd=function(t){return void 0===t&&(t=""),Cn(this,!0,t)},Sn.prototype.rollbackTransaction=Sn.prototype.co=function(){return Cn(this,!1,"")},Sn.prototype.canUndo=Sn.prototype.canUndo=function(){if(!this.isEnabled||0<this.de||this.Ua)return!1;var t=this.DD;return null!==t&&t.canUndo()?!0:!1},Sn.prototype.undo=Sn.prototype.undo=function(){if(this.canUndo()){var t=this.DD;try{this.pc("StartingUndo","Undo",t),this.th=!0,this.Yf--,t.undo()}catch(i){v("undo error: "+i.toString())}finally{this.th=!1,this.pc("FinishedUndo","Undo",t)}}},Sn.prototype.canRedo=Sn.prototype.canRedo=function(){if(!this.isEnabled||0<this.de||this.Ua)return!1;var t=this.CD;return null!==t&&t.canRedo()?!0:!1},Sn.prototype.redo=Sn.prototype.redo=function(){if(this.canRedo()){var t=this.CD;try{this.pc("StartingRedo","Redo",t),this.th=!0,this.Yf++,t.redo()}catch(i){v("redo error: "+i.toString())}finally{this.th=!1,this.pc("FinishedRedo","Redo",t)}}},Sn.prototype.pc=function(t,i,n){void 0===n&&(n=null);var e=new rn;for(e.Vc=fc,e.propertyName=t,e.object=n,e.oldValue=i,t=this.dG;t.next();)i=t.value,e.U=i,i.Hu(e)},Sn.prototype.handleChanged=Sn.prototype.oC=function(t){if(this.isEnabled&&!this.Ua&&!this.skipsEvent(t)){var i=this.Ph;null===i&&(this.ct=i=new Tn);var n=t.copy(),i=i.ig;i.wa(),i.add(n),i.freeze(),this.Ex&&0>=this.de&&!this.yw&&(t=t.g,null!==t&&!1===t.Ce||v("Change not within a transaction: "+n.toString()))}},Sn.prototype.skipsEvent=function(t){if(null===t||0>t.Vc.value)return!0;if(t=t.object,t instanceof Pr){if(t=t.layer,null!==t&&t.bc)return!0}else if(t instanceof He&&t.bc)return!0;return!1},Y(Sn,{dG:"models"},function(){return this.Tw.i}),K(Sn,{isEnabled:"isEnabled"},function(){return this.fe},function(t){this.fe=t}),Y(Sn,{DD:"transactionToUndo"},function(){return 0<=this.Uh&&this.Uh<=this.history.count-1?this.history.Y(this.Uh):null}),Y(Sn,{CD:"transactionToRedo"},function(){return this.Uh<this.history.count-1?this.history.Y(this.Uh+1):null}),Y(Sn,{Ua:"isUndoingRedoing"},function(){return this.th}),Y(Sn,{history:"history"},function(){return this.dE}),K(Sn,{EC:"maxHistoryLength"},function(){return this.qA},function(t){this.qA=t}),Y(Sn,{Uh:"historyIndex"},function(){return this.Yf}),Y(Sn,{Ph:"currentTransaction"},function(){return this.ct}),Y(Sn,{de:"transactionLevel"},function(){return this.Tj}),Y(Sn,{wC:"isInTransaction"},function(){return 0<this.Tj}),K(Sn,{Ex:"checksTransactionLevel"},function(){return this.uz},function(t){this.uz=t}),Y(Sn,{LC:"nestedTransactionNames"},function(){return this.dg}),H("CommandHandler",Nn);var xc=null,bc="";Nn.prototype.toString=function(){return"CommandHandler"},Y(Nn,{g:"diagram"},function(){return this.N}),Nn.prototype.fc=function(t){this.N=t},Nn.prototype.doKeyDown=function(){var t=this.g;if(null!==t){var i=t.C,n=tf?i.Yr:i.control,e=i.shift,o=i.alt,r=i.key;!n||"C"!==r&&"Insert"!==r?n&&"X"===r||e&&"Del"===r?this.canCutSelection()&&this.cutSelection():n&&"V"===r||e&&"Insert"===r?this.canPasteSelection()&&this.pasteSelection():n&&"Y"===r||o&&e&&"Backspace"===r?this.canRedo()&&this.redo():n&&"Z"===r||o&&"Backspace"===r?this.canUndo()&&this.undo():"Del"===r||"Backspace"===r?this.canDeleteSelection()&&this.deleteSelection():n&&"A"===r?this.canSelectAll()&&this.selectAll():"Esc"===r?this.canStopCommand()&&this.stopCommand():"Up"===r?t.ke&&(n?t.scroll("pixel","up"):t.scroll("line","up")):"Down"===r?t.ke&&(n?t.scroll("pixel","down"):t.scroll("line","down")):"Left"===r?t.je&&(n?t.scroll("pixel","left"):t.scroll("line","left")):"Right"===r?t.je&&(n?t.scroll("pixel","right"):t.scroll("line","right")):"PageUp"===r?e&&t.je?t.scroll("page","left"):t.ke&&t.scroll("page","up"):"PageDown"===r?e&&t.je?t.scroll("page","right"):t.ke&&t.scroll("page","down"):"Home"===r?(i=t.Xc,n&&t.ke?t.position=new wi(t.position.x,i.y):!n&&t.je&&(t.position=new wi(i.x,t.position.y))):"End"===r?(i=t.Xc,e=t.Va,n&&t.ke?t.position=new wi(e.x,i.bottom-e.height):!n&&t.je&&(t.position=new wi(i.right-e.width,e.y))):"Subtract"===r?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===r?this.canIncreaseZoom()&&this.increaseZoom():n&&"0"===r?this.canResetZoom()&&this.resetZoom():e&&"Z"===r?this.canZoomToFit()&&this.zoomToFit():n&&!e&&"G"===r?this.canGroupSelection()&&this.groupSelection():n&&e&&"G"===r?this.canUngroupSelection()&&this.ungroupSelection():i.event&&113===i.event.which?this.canEditTextBlock()&&this.editTextBlock():i.event&&93===i.event.which?this.canShowContextMenu()&&this.showContextMenu():i.bubbles=!0:this.canCopySelection()&&this.copySelection()}},Nn.prototype.doKeyUp=function(){var t=this.g;null!==t&&(t.C.bubbles=!0)},Nn.prototype.stopCommand=function(){var t=this.g;if(null!==t){var i=t.Ea;i instanceof Pe&&t.Fe&&t.Iu(),null!==i&&i.doCancel()}},Nn.prototype.canStopCommand=function(){return!0},Nn.prototype.selectAll=function(){var t=this.g;if(null!==t){t.ba();try{t.Fb="wait",t.ma("ChangingSelection");for(var i=t.cj;i.next();)i.value.Ia=!0;for(var n=t.Of;n.next();)n.value.Ia=!0;for(var e=t.links;e.next();)e.value.Ia=!0}finally{t.ma("ChangedSelection"),t.Fb=""}}},Nn.prototype.canSelectAll=function(){var t=this.g;return null!==t&&t.Fe},Nn.prototype.deleteSelection=function(){var t=this.g;if(null!==t&&!t.ma("SelectionDeleting",t.selection))try{t.Fb="wait",t.Ab("Delete"),t.ma("ChangingSelection");for(var i=new di(sa),n=t.selection.i;n.next();)Pn(i,n.value,!0,this.YE?1/0:0,!0,function(t){return t.canDelete()});t.Ny(i,!0),t.ma("SelectionDeleted",i)}finally{t.ma("ChangedSelection"),t.pd("Delete"),t.Fb=""}},Nn.prototype.canDeleteSelection=function(){var t=this.g;return null===t||t.Ta||t.Le||!t.sl||0===t.selection.count?!1:!0},Nn.prototype.wn=function(t,i,n){var e=new bi(sa,sa);for(t=t.i;t.next();)jn(this,t.value,i,e,n);if(null!==i){n=i.U,t=!1,null!==i.Xa.Zc&&(t=i.Xa.Zc.Sh);for(var o=new di(Ra),r=new bi(Ra,Ra),s=e.i;s.next();){var a=s.value;if(a instanceof Ra){var h=a;t||null!==h.M&&null!==h.R||o.add(h)}else if(n instanceof wn&&a instanceof Na&&null!==a.data){var h=n,l=a,a=s.key,u=a.Gl();null!==u&&(u=e.ha(u),null!==u?(h.wg(l.data,h.$a(u.data)),h=i.Ef(l.data),a=a.Ar(),null!==a&&null!==h&&r.add(a,h)):h.wg(l.data,void 0))}}if(0<o.count&&i.Ny(o,!1),0<r.count)for(i=r.i;i.next();)e.add(i.key,i.value)}for(i=e.i;i.next();)i.value.rb();return e},Nn.prototype.copySelection=function(){var t=this.g;if(null!==t){for(var i=new di(sa),t=t.selection.i;t.next();)Pn(i,t.value,!0,this.PE?1/0:0,this.NE,function(t){return t.canCopy()});this.copyToClipboard(i)}},Nn.prototype.canCopySelection=function(){var t=this.g;return null!==t&&t.Ui&&t.Bx&&0!==t.selection.count?!0:!1},Nn.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},Nn.prototype.canCutSelection=function(){var t=this.g;return null!==t&&!t.Ta&&!t.Le&&t.Ui&&t.sl&&t.Bx&&0!==t.selection.count?!0:!1},Nn.prototype.copyToClipboard=function(t){var i=this.g;if(null!==i){var n=null;if(null===t)xc=null,bc="";else{var n=i.U,e=!1,o=!1,r=null;try{if(n instanceof wn){var s=n,e=s.Bl;s.Bl=this.QB}n instanceof xn&&(s=n,o=s.Al,s.Al=this.PB),r=i.wn(t,null,!0)}finally{n instanceof wn&&(n.Bl=e),n instanceof xn&&(n.Al=o),n=new ci(sa),n.md(r),xc=n,bc=i.U.ak}}i.ma("ClipboardChanged",n)}},Nn.prototype.pasteFromClipboard=function(){var t=new di(sa),i=xc;if(null===i)return t;var n=this.g;if(null===n||bc!==n.U.ak)return t;var e=n.U,o=!1,r=!1,s=null;try{if(e instanceof wn){var a=e,o=a.Bl;a.Bl=this.QB}e instanceof xn&&(a=e,r=a.Al,a.Al=this.PB),s=n.wn(i,n,!1)}finally{for(e instanceof wn&&(e.Bl=o),e instanceof xn&&(e.Al=r),i=s.i;i.next();)n=i.value,e=i.key,n.location.w()||(e.location.w()?n.location=e.location:!n.position.w()&&e.position.w()&&(n.position=e.position)),t.add(n)}return t},Nn.prototype.pasteSelection=function(t){void 0===t&&(t=null);var i=this.g;if(null!==i)try{i.Fb="wait",i.Ab("Paste"),i.ma("ChangingSelection");var n=this.pasteFromClipboard();0<n.count&&Do(i);for(var e=n.i;e.next();)e.value.Ia=!0;if(i.ma("ChangedSelection"),null!==t){var o=i.computePartsBounds(i.selection);if(o){var r=i.Xa.Zc;null===r&&(r=new Fn,r.fc(i));var s=r.computeEffectiveCollection(i.selection);r.moveParts(s,new wi(t.x-o.ua,t.y-o.Da),!1)}}i.ma("ClipboardPasted",n)}finally{i.pd("Paste"),i.Fb=""}},Nn.prototype.canPasteSelection=function(){var t=this.g;return null===t||t.Ta||t.Le||!t.on||!t.Bx||null===xc||bc!==t.U.ak?!1:!0},Nn.prototype.undo=function(){var t=this.g;null!==t&&t.V.undo()},Nn.prototype.canUndo=function(){var t=this.g;return null===t||t.Ta||t.Le?!1:t.BB&&t.V.canUndo()},Nn.prototype.redo=function(){var t=this.g;null!==t&&t.V.redo()},Nn.prototype.canRedo=function(){var t=this.g;return null===t||t.Ta||t.Le?!1:t.BB&&t.V.canRedo()},Nn.prototype.decreaseZoom=function(t){void 0===t&&(t=1/this.Jv),l(t,Nn,"decreaseZoom:factor");var i=this.g;null!==i&&i.qn===Qc&&(t*=i.scale,t<i.mg||t>i.lg||(i.scale=t))},Nn.prototype.canDecreaseZoom=function(t){void 0===t&&(t=1/this.Jv),l(t,Nn,"canDecreaseZoom:factor");var i=this.g;return null===i||i.qn!==Qc?!1:(t*=i.scale,t<i.mg||t>i.lg?!1:i.Eu)},Nn.prototype.increaseZoom=function(t){void 0===t&&(t=this.Jv),l(t,Nn,"increaseZoom:factor");var i=this.g;null!==i&&i.qn===Qc&&(t*=i.scale,t<i.mg||t>i.lg||(i.scale=t))},Nn.prototype.canIncreaseZoom=function(t){void 0===t&&(t=this.Jv),l(t,Nn,"canIncreaseZoom:factor");var i=this.g;return null===i||i.qn!==Qc?!1:(t*=i.scale,t<i.mg||t>i.lg?!1:i.Eu)},Nn.prototype.resetZoom=function(t){void 0===t&&(t=this.Mu),l(t,Nn,"resetZoom:newscale");var i=this.g;null===i||t<i.mg||t>i.lg||(i.scale=t)},Nn.prototype.canResetZoom=function(t){void 0===t&&(t=this.Mu),l(t,Nn,"canResetZoom:newscale");var i=this.g;return null===i||t<i.mg||t>i.lg?!1:i.Eu},Nn.prototype.zoomToFit=function(){var t=this.g;if(null!==t){var i=t.scale,n=t.position;i!==this.tB||isNaN(this.Nw)?(this.Nw=i,this.nA=n.copy(),t.zoomToFit(),t.te(),this.tB=t.scale):(t.scale=this.Nw,t.position=this.nA)}},Nn.prototype.canZoomToFit=function(){var t=this.g;return null===t?!1:t.Eu},Nn.prototype.collapseTree=function(t){void 0===t&&(t=null);var i=this.g;if(null===i)return!1;try{i.Ab("Collapse Tree");var n=new ci(Na);if(null!==t&&t.sc)t.collapseTree(),n.add(t);else for(var e=i.selection.i;e.next();){var o=e.value;o instanceof Na&&(t=o,t.sc&&(t.collapseTree(),n.add(t)))}i.ma("TreeCollapsed",n)}finally{i.pd("Collapse Tree")}},Nn.prototype.canCollapseTree=function(t){void 0===t&&(t=null);var i=this.g;if(null===i||i.Ta)return!1;if(null!==t){if(!t.sc)return!1;if(0<t.Vu().count)return!0}else for(t=i.selection.i;t.next();)if(i=t.value,i instanceof Na&&i.sc&&0<i.Vu().count)return!0;return!1},Nn.prototype.expandTree=function(t){void 0===t&&(t=null);var i=this.g;if(null===i)return!1;try{i.Ab("Expand Tree");var n=new ci(Na);if(null===t||t.sc)for(var e=i.selection.i;e.next();){var o=e.value;o instanceof Na&&(t=o,t.sc||(t.expandTree(),n.add(t)))}else t.expandTree(),n.add(t);i.ma("TreeExpanded",n)}finally{i.pd("Expand Tree")}},Nn.prototype.canExpandTree=function(t){void 0===t&&(t=null);var i=this.g;if(null===i||i.Ta)return!1;if(null!==t){if(t.sc)return!1;if(0<t.Vu().count)return!0}else for(t=i.selection.i;t.next();)if(i=t.value,i instanceof Na&&!i.sc&&0<i.Vu().count)return!0;return!1},Nn.prototype.groupSelection=function(){var t=this.g;if(null!==t){var i=t.U;if(i instanceof xn){var n=this.CB;if(null!==n){var e=null;try{t.Fb="wait",t.Ab("Group"),t.ma("ChangingSelection");for(var o=new ci(sa),r=t.selection.i;r.next();){var s=r.value;s.$c()&&s.canGroup()&&o.add(s)}for(var a=new ci(sa),h=o.i;h.next();){for(var l=h.value,r=!1,u=o.i;u.next();)if(l.bh(u.value)){r=!0;break
}r||a.add(l)}if(0<a.count){var f=a.first().Ba;if(null!==f)for(;null!==f;){for(var o=!1,c=a.i;c.next();)if(!c.value.bh(f)){o=!0;break}if(!o)break;f=f.Ba}if(n instanceof Th)ws(n),e=n.copy(),null!==e&&t.add(e);else if(i.iy(n)){var p=i.copyNodeData(n);y(p)&&(i.rl(p),e=t.Uu(p))}if(null!==e){null!==f&&this.isValidMember(f,e)&&(e.Ba=f);for(var d=a.i;d.next();){var v=d.value;this.isValidMember(e,v)&&(v.Ba=e)}t.select(e)}}t.ma("ChangedSelection"),t.ma("SelectionGrouped",e)}finally{t.pd("Group"),t.Fb=""}}}}},Nn.prototype.canGroupSelection=function(){var t=this.g;if(null===t||t.Ta||t.Le||!t.on||!t.zu||!(t.U instanceof xn)||null===this.CB)return!1;for(t=t.selection.i;t.next();){var i=t.value;if(i.$c()&&i.canGroup())return!0}return!1},Nn.prototype.isValidMember=function(t,i){if(null===i||t===i||i instanceof Ra)return!1;if(null!==t){if(t===i||t.bh(i))return!1;var n=t.sy;if(null!==n&&!n(t,i)||null===t.data&&null!==i.data||null!==t.data&&null===i.data)return!1}return n=this.sy,null!==n?n(t,i):!0},Nn.prototype.ungroupSelection=function(t){void 0===t&&(t=null);var i=this.g;if(null!==i){var n=i.U;if(n instanceof xn)try{i.Fb="wait",i.Ab("Ungroup"),i.ma("ChangingSelection");var e=new ci(Th);if(null!==t)e.add(t);else for(var o=i.selection.i;o.next();){var r=o.value;r instanceof Th&&(t=r,t.canUngroup()&&e.add(t))}if(0<e.count){i.Iu();for(var s=e.i;s.next();){var a=s.value;a.expandSubGraph();var h=a.Ba,l=null!==h&&null!==h.data?n.$a(h.data):void 0,u=new ci(sa);u.md(a.mc);for(var f=u.i;f.next();){var c=f.value;if(c.Ia=!0,!(c instanceof Ra)){var p=c.data;null!==p?n.Av(p,l):c.Ba=h}}i.remove(a)}}i.ma("ChangedSelection"),i.ma("SelectionUngrouped",e,u)}finally{i.pd("Ungroup"),i.Fb=""}}},Nn.prototype.canUngroupSelection=function(t){void 0===t&&(t=null);var i=this.g;if(null===i||i.Ta||i.Le||!i.sl||!i.Du||!(i.U instanceof xn))return!1;if(null!==t){if(t.canUngroup())return!0}else for(t=i.selection.i;t.next();)if(i=t.value,i instanceof Th&&i.canUngroup())return!0;return!1},Nn.prototype.addTopLevelParts=function(t,i){for(var n=!0,e=Ln(t).i;e.next();){var o=e.value;null!==o.Ba&&(!i||this.isValidMember(null,o)?o.Ba=null:n=!1)}return n},Nn.prototype.collapseSubGraph=function(t){void 0===t&&(t=null);var i=this.g;if(null===i)return!1;try{i.Ab("Collapse SubGraph");var n=new ci(Th);if(null!==t&&t.ud)t.collapseSubGraph(),n.add(t);else for(var e=i.selection.i;e.next();){var o=e.value;o instanceof Th&&(t=o,t.ud&&(t.collapseSubGraph(),n.add(t)))}i.ma("SubGraphCollapsed",n)}finally{i.pd("Collapse SubGraph")}},Nn.prototype.canCollapseSubGraph=function(t){void 0===t&&(t=null);var i=this.g;if(null===i||i.Ta)return!1;if(null!==t)return t.ud?!0:!1;for(t=i.selection.i;t.next();)if(i=t.value,i instanceof Th&&i.ud)return!0;return!1},Nn.prototype.expandSubGraph=function(t){void 0===t&&(t=null);var i=this.g;if(null===i)return!1;try{i.Ab("Expand SubGraph");var n=new ci(Th);if(null===t||t.ud)for(var e=i.selection.i;e.next();){var o=e.value;o instanceof Th&&(t=o,t.ud||(t.expandSubGraph(),n.add(t)))}else t.expandSubGraph(),n.add(t);i.ma("SubGraphExpanded",n)}finally{i.pd("Expand SubGraph")}},Nn.prototype.canExpandSubGraph=function(t){void 0===t&&(t=null);var i=this.g;if(null===i||i.Ta)return!1;if(null!==t)return t.ud?!1:!0;for(t=i.selection.i;t.next();)if(i=t.value,i instanceof Th&&!i.ud)return!0;return!1},Nn.prototype.editTextBlock=function(t){void 0===t&&(t=null),null!==t&&a(t,qs,Nn,"editTextBlock");var i=this.g;if(null!==i){var n=i.Xa.$y;if(null!==n){if(null===t){t=null;for(var e=i.selection.i;e.next();){var o=e.value;if(o.canEdit()){t=o;break}}if(null===t)return;t=t.vr(function(t){return t instanceof qs&&t.Px})}null!==t&&(i.Ea=null,n.xg=t,i.Ea=n)}}},Nn.prototype.canEditTextBlock=function(t){void 0===t&&(t=null),null!==t&&a(t,qs,Nn,"canEditTextBlock");var i=this.g;if(null===i||i.Ta||i.Le||!i.Cu||null===i.Xa.$y)return!1;if(null!==t){if(t=t.J,null!==t&&t.canEdit())return!0}else for(i=i.selection.i;i.next();)if(t=i.value,t.canEdit()&&(t=t.vr(function(t){return t instanceof qs&&t.Px}),null!==t))return!0;return!1},Nn.prototype.showContextMenu=function(t){var i=this.g;if(null!==i){var n=i.Xa.Ix;if(null!==n&&(void 0===t&&(t=0<i.selection.count?i.selection.first():i),t=n.findObjectWithContextMenu(t),null!==t)){var e=new en,o=null;t instanceof Pr?o=t.Ra(Sf):i.IF||(o=i.Va,o=new wi(o.x+o.width/2,o.y+o.height/2)),null!==o&&(e.xe=i.ED(o),e.S=o,i.C=e),i.Ea=n,Me(n,!1,t)}}},Nn.prototype.canShowContextMenu=function(t){var i=this.g;if(null===i)return!1;var n=i.Xa.Ix;return null===n?!1:(void 0===t&&(t=0<i.selection.count?i.selection.first():i),null===n.findObjectWithContextMenu(t)?!1:!0)},K(Nn,{NE:"copiesConnectedLinks"},function(){return this.xz},function(t){h(t,"boolean",Nn,"copiesConnectedLinks"),this.xz=t}),K(Nn,{PE:"copiesTree"},function(){return this.Bz},function(t){h(t,"boolean",Nn,"copiesTree"),this.Bz=t}),K(Nn,{YE:"deletesTree"},function(){return this.Lz},function(t){h(t,"boolean",Nn,"deletesTree"),this.Lz=t}),K(Nn,{QB:"copiesParentKey"},function(){return this.Az},function(t){h(t,"boolean",Nn,"copiesParentKey"),this.Az=t}),K(Nn,{PB:"copiesGroupKey"},function(){return this.zz},function(t){h(t,"boolean",Nn,"copiesGroupKey"),this.zz=t}),K(Nn,{CB:"archetypeGroupData"},function(){return this.Tv},function(t){null!==t&&a(t,Object,Nn,"archetypeGroupData");var i=this.g;null!==i&&(i=i.U,i instanceof xn&&(t instanceof Th||i.iy(t)||r("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: "+t))),this.Tv=t}),K(Nn,{sy:"memberValidation"},function(){return this.Kj},function(t){null!==t&&h(t,"function",Nn,"memberValidation"),this.Kj=t}),K(Nn,{Mu:"defaultScale"},function(){return this.Jz},function(t){l(t,Nn,"defaultScale"),t>0||r("defaultScale must be larger than zero, not: "+t),this.Jz=t}),K(Nn,{Jv:"zoomFactor"},function(){return this.sB},function(t){l(t,Nn,"zoomFactor"),t>1||r("zoomFactor must be larger than 1.0, not: "+t),this.sB=t}),H("Tool",Dn),Dn.prototype.fc=function(t){this.N=t},Dn.prototype.toString=function(){return""!==this.name?this.name+" Tool":J(Object.getPrototypeOf(this))},Dn.prototype.updateAdornments=function(){},Dn.prototype.canStart=function(){return this.isEnabled},Dn.prototype.doStart=function(){},Dn.prototype.doActivate=function(){this.ca=!0},Dn.prototype.doDeactivate=function(){this.ca=!1},Dn.prototype.doStop=function(){},Dn.prototype.doCancel=function(){this.stopTool()},Dn.prototype.stopTool=function(){var t=this.g;null!==t&&t.Ea===this&&(t.Ea=null,t.Fb="")},Dn.prototype.doMouseDown=function(){!this.ca&&this.canStart()&&this.doActivate()},Dn.prototype.doMouseMove=function(){},Dn.prototype.doMouseUp=function(){this.stopTool()},Dn.prototype.doMouseWheel=function(){},Dn.prototype.canStartMultiTouch=function(){return!0},Dn.prototype.standardPinchZoomStart=function(){var t=this.g;if(null!==t){var i=t.C.event,n=null,e=null;if(void 0!==i.targetTouches){if(2>i.targetTouches.length)return;n=i.targetTouches[0],e=i.targetTouches[1]}else{if(null===t.Ue[0])return;n=t.Ue[0],e=t.Ue[1]}if(this.doCancel(),t.Cm){t.zw=!0,t.AA=t.scale;var o=t.eb,r=t.cb,s=t.Oa.getBoundingClientRect(),a=n.clientX-o/s.width*s.left,h=n.clientY-r/s.height*s.top,n=e,e=n.clientX-o/s.width*s.left-a,r=n.clientY-r/s.height*s.top-h,r=Math.sqrt(e*e+r*r);t.XA=r,i.preventDefault(),i.cancelBubble=!0}else ro(t)}},Dn.prototype.standardPinchZoomMove=function(){var t=this.g;if(null!==t){var i=t.C.event;this.doCancel(),ro(t);var n=null,e=null;if(void 0!==i.targetTouches){if(2>i.targetTouches.length)return;n=i.targetTouches[0],e=i.targetTouches[1]}else{if(null===t.Ue[0])return;n=t.Ue[0],e=t.Ue[1]}if(t.Cm&&t.zw){var o=t.eb,r=t.cb,s=t.Oa.getBoundingClientRect(),a=n,n=a.clientX-o/s.width*s.left,h=a.clientY-r/s.height*s.top,a=e,e=a.clientX-o/s.width*s.left,r=a.clientY-r/s.height*s.top,s=e-n,o=r-h,s=Math.sqrt(s*s+o*o)/t.XA,n=new wi((Math.min(e,n)+Math.max(e,n))/2,(Math.min(r,h)+Math.max(r,h))/2),h=t.AA*s,e=t.ib;h!==t.scale&&e.canResetZoom(h)&&(r=t.Wl,t.Wl=n,e.resetZoom(h),t.Wl=r),i.preventDefault(),i.cancelBubble=!0}}},Dn.prototype.doKeyDown=function(){var t=this.g;null!==t&&"Esc"===t.C.key&&this.doCancel()},Dn.prototype.doKeyUp=function(){},Dn.prototype.startTransaction=Dn.prototype.Ab=function(t){void 0===t&&(t=this.name),this.Qe=null;var i=this.g;return null===i?!1:i.Ab(t)},Dn.prototype.stopTransaction=Dn.prototype.ej=function(){var t=this.g;return null===t?!1:null===this.Qe?t.co():t.pd(this.Qe)},Dn.prototype.standardMouseSelect=function(){var t=this.g;if(null!==t&&t.Fe){var i=t.C,n=t.zr(i.S,!1);if(null!==n){if(tf?i.Yr:i.control){for(t.ma("ChangingSelection"),i=n;null!==i&&!i.canSelect();)i=i.Ba;null!==i&&(i.Ia=!i.Ia),t.ma("ChangedSelection")}else if(i.shift){if(!n.Ia){for(t.ma("ChangingSelection"),i=n;null!==i&&!i.canSelect();)i=i.Ba;null!==i&&(i.Ia=!0),t.ma("ChangedSelection")}}else if(!n.Ia){for(i=n;null!==i&&!i.canSelect();)i=i.Ba;null!==i&&t.select(i)}}else!i.left||(tf?i.Yr:i.control)||i.shift||t.Iu()}},Dn.prototype.standardMouseClick=function(t,i){void 0===t&&(t=null),void 0===i&&(i=function(t){return!t.layer.bc});var n=this.g;if(null!==n){var e=n.C,o=n.Dd(e.S,t,i);e.Jd=o,An(o,e,n)}},Dn.prototype.standardMouseOver=function(){var t=this.g;if(null!==t){var i=t.C;if(null!==i.g&&!0!==t.qb.Gc){var n=t.Ma;t.Ma=!0;var e=t.Dd(i.S,null,null);i.Jd=e;var o=!1;if(e!==t.jm){var r=t.jm,s=r;for(t.jm=e,this.doCurrentObjectChanged(r,e),i.rc=!1;null!==r;){var a=r.JC;if(null!==a){if(e===r)break;if(null!==e&&e.pk(r))break;if(a(i,r,e),o=!0,i.rc)break}r=r.I}for(r=s,i.rc=!1;null!==e;){if(a=e.IC,null!==a){if(r===e)break;if(null!==r&&r.pk(e))break;if(a(i,e,r),o=!0,i.rc)break}e=e.I}e=t.jm}if(null!==e){for(r=e,a="";null!==r&&(a=r.cursor,""===a);)r=r.I;for(t.Fb=a,i.rc=!1,r=e;null!==r&&(a=r.wy,null===a||(a(i,r),o=!0,!i.rc));)r=r.I}else t.Fb="",a=t.wy,null!==a&&(a(i),o=!0);o&&t.wd(),t.Ma=n}}},Dn.prototype.doCurrentObjectChanged=function(){},Dn.prototype.standardMouseWheel=function(){var t=this.g;if(null!==t){var i=t.C,n=i.ck;if(0!==n&&t.Xc.w()){var e=t.ib,o=t.Xa.$r;if((o===Yc&&!i.shift||o===Kc&&i.control)&&(n>0?e.canIncreaseZoom():e.canDecreaseZoom()))o=t.Wl,t.Wl=i.xe,n>0?e.increaseZoom():e.decreaseZoom(),t.Wl=o,i.bubbles=!1;else if(o===Yc&&i.shift||o===Kc&&!i.control){if(e=t.position.copy(),o=n>0?n:-n,!i.shift&&t.ke){var r=t.os,o=o/40*r;n>0?t.scroll("pixel","up",o):t.scroll("pixel","down",o)}else i.shift&&t.je&&(r=t.ns,o=o/40*r,n>0?t.scroll("pixel","left",o):t.scroll("pixel","right",o));t.position.A(e)||(i.bubbles=!1)}}}},Dn.prototype.standardWaitAfter=function(t){h(t,"number",Dn,"standardWaitAfter:delay"),this.cancelWaitAfter();var i=this;this.tu=n(function(){i.doWaitAfter()},t)},Dn.prototype.cancelWaitAfter=function(){-1!==this.tu&&t.clearTimeout(this.tu),this.tu=-1},Dn.prototype.doWaitAfter=function(){},Dn.prototype.findToolHandleAt=function(t,i){var n=this.g;if(null===n)return null;if(n=n.Dd(t,null,function(t){return t=t.J,null===t?!1:null!==t.Xb}),null===n)return null;var e=n.J;return null===e||e.kc!==i?null:n},Dn.prototype.isBeyondDragSize=function(t,i){var n=this.g;if(null===n)return!1;void 0===t&&(t=n.Yb.xe),void 0===i&&(i=n.C.xe);var e=n.Xa.cF,o=e.width,e=e.height;return n.Yb.sk&&(o+=6,e+=6),Math.abs(i.x-t.x)>o||Math.abs(i.y-t.y)>e},Y(Dn,{g:"diagram"},function(){return this.N}),K(Dn,{name:"name"},function(){return this.yb},function(t){h(t,"string",Dn,"name"),this.yb=t}),K(Dn,{isEnabled:"isEnabled"},function(){return this.fe},function(t){h(t,"boolean",Dn,"isEnabled"),this.fe=t}),K(Dn,{ca:"isActive"},function(){return this.$z},function(t){h(t,"boolean",Dn,"isActive"),this.$z=t}),K(Dn,{Qe:"transactionResult"},function(){return this.oB},function(t){null!==t&&h(t,"string",Dn,"transactionResult"),this.oB=t}),U(Fn,Dn),H("DraggingTool",Fn),K(Fn,{vC:"isCopyEnabled"},function(){return this.dA},function(t){h(t,"boolean",Fn,"isCopyEnabled"),this.dA=t}),K(Fn,{OE:"copiesEffectiveCollection"},function(){return this.yz},function(t){h(t,"boolean",Fn,"copiesEffectiveCollection"),this.yz=t}),K(Fn,{dF:"dragsTree"},function(){return this.Rz},function(t){h(t,"boolean",Fn,"dragsTree"),this.Rz=t}),K(Fn,{cv:"isGridSnapEnabled"},function(){return this.lp},function(t){h(t,"boolean",Fn,"isGridSnapEnabled"),this.lp=t}),K(Fn,{EF:"isComplexRoutingRealtime"},function(){return this.cA},function(t){h(t,"boolean",Fn,"isComplexRoutingRealtime"),this.cA=t}),K(Fn,{GF:"isGridSnapRealtime"},function(){return this.hA},function(t){h(t,"boolean",Fn,"isGridSnapRealtime"),this.hA=t}),K(Fn,{nC:"gridSnapCellSize"},function(){return this.Aw},function(t){a(t,Ti,Fn,"gridSnapCellSize"),this.Aw.A(t)||(this.Aw=t=t.O())}),K(Fn,{qF:"gridSnapCellSpot"},function(){return this.Bw},function(t){a(t,Fi,Fn,"gridSnapCellSpot"),this.Bw.A(t)||(this.Bw=t=t.O())}),K(Fn,{rF:"gridSnapOrigin"},function(){return this.Cw},function(t){a(t,wi,Fn,"gridSnapOrigin"),this.Cw.A(t)||(this.Cw=t=t.O())}),K(Fn,{Sh:"dragsLink"},function(){return this.Qz},function(t){h(t,"boolean",Fn,"dragsLink"),this.Qz=t}),K(Fn,{rr:"currentPart"},function(){return this.Ez},function(t){null!==t&&a(t,sa,Fn,"currentPart"),this.Ez=t}),K(Fn,{Qb:"copiedParts"},function(){return this.wz},function(t){this.wz=t}),K(Fn,{Hb:"draggedParts"},function(){return this.Pz},function(t){this.Pz=t}),Y(Fn,{UH:"draggingParts"},function(){return null!==this.Qb?this.Qb.Zh():null!==this.Hb?this.Hb.Zh():this.cE}),K(Fn,{qc:"draggedLink"},function(){return this.Oz},function(t){null!==t&&a(t,Ra,Fn,"draggedLink"),this.Oz=t}),K(Fn,{bv:"isDragOutStarted"},function(){return this.fA},function(t){this.fA=t}),K(Fn,{dj:"startPoint"},function(){return this.fu},function(t){a(t,wi,Fn,"startPoint"),this.fu.A(t)||(this.fu=t=t.O())}),K(Fn,{TB:"delay"},function(){return this.tm},function(t){h(t,"number",Fn,"delay"),this.tm=t}),Fn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||!t.Xj&&!t.Ui&&!t.yu||!t.Fe)return!1;var i=t.C;return!i.left||t.Ea!==this&&(!this.isBeyondDragSize()||i.sk&&i.timestamp-t.Yb.timestamp<this.tm)?!1:null!==this.findDraggablePart()},Fn.prototype.findDraggablePart=function(){var t=this.g;if(null===t)return null;if(t=t.zr(t.Yb.S,!1),null===t)return null;for(;null!==t&&!t.canSelect();)t=t.Ba;return null!==t&&(t.canMove()||t.canCopy())?t:null},Fn.prototype.standardMouseSelect=function(){var t=this.g;if(null!==t&&t.Fe){var i=t.zr(t.Yb.S,!1);if(null!==i){for(;null!==i&&!i.canSelect();)i=i.Ba;this.rr=i,this.rr.Ia||(t.ma("ChangingSelection"),i=t.C,(tf?i.Yr:i.control)||i.shift||Do(t),this.rr.Ia=!0,t.ma("ChangedSelection"))}}},Fn.prototype.doActivate=function(){var t=this.g;if(null!==t){this.standardMouseSelect();var i=this.rr;null!==i&&(i.canMove()||i.canCopy())&&(this.ca=!0,this.fn.set(t.position),On(this,t.selection),this.ji.length=0,this.Hb=this.computeEffectiveCollection(t.selection),t.us=!0,Rn(this,this.Hb),this.Ab("Drag"),this.dj=t.Yb.S,t.Zd=!0,t.yu&&(this.bv=!0,this.Uo=!1,kc=this,Mc=this.g,this.doSimulatedDragOut()))}},Fn.prototype.computeEffectiveCollection=function(t){var i=null!==this.g&&this.g.Ea===this,n=new bi(sa);if(null===t)return n;for(var e=t.i;e.next();)Bn(this,n,e.value,i);if(null!==this.qc&&this.Sh)return n;for(e=t.i;e.next();)t=e.value,t instanceof Ra&&(i=t.M,null===i||n.contains(i)?(i=t.R,null===i||n.contains(i)||n.remove(t)):n.remove(t));return n},Fn.prototype.doDeactivate=function(){this.ca=!1;var t=this.g;if(null!==t&&dr(t),qn(this),In(this,this.Hb),this.Hb=null,this.Uo=this.bv=!1,0<wc.count){for(var i=wc.length,n=0;i>n;n++){var e=wc.Y(n);Un(e),Hn(e),qn(e),null!==e.g&&dr(e.g)}wc.clear()}Un(this),this.fn.k(0/0,0/0),kc=Mc=null,Hn(this),t.Zd=!1,t.Fb="",t.us=!1,this.ej()},Fn.prototype.doCancel=function(){Hn(this),Wn(this);var t=this.g;null!==t&&this.fn.w()&&(t.position=this.fn),this.stopTool()},Fn.prototype.doKeyDown=function(){var t=this.g;null!==t&&(t=t.C,null!==t&&this.ca&&("Esc"===t.key?this.doCancel():this.doMouseMove()))},Fn.prototype.doKeyUp=function(){var t=this.g;null!==t&&null!==t.C&&this.ca&&this.doMouseMove()},Fn.prototype.moveParts=function(t,i,n){if(null!==t&&(a(t,bi,Fn,"moveParts:parts"),0!==t.count)){var e=C(),o=C();o.assign(i),isNaN(o.x)&&(o.x=0),isNaN(o.y)&&(o.y=0);var r=this.iu;r||Rn(this,t);for(var s=new ci(ee),h=new ci(mi),l=t.i;l.next();){var u=l.key;if(u.$c()){var f=Yn(this,u,t);if(null!==f)s.add(new ee(u,l.value,f));else if(!n||u.canMove()){f=l.value.point,e.assign(f);var c=C(),p=this.computeMove(u,e.add(o),t,c);u.location=p,P(c),l.value.rD=c.ws(f)}}else l.key instanceof Ra&&h.add(l.gb)}for(n=s.i;n.next();)s=n.value,f=s.info.point,e.assign(f),s.dc.location=e.add(s.sF.rD);for(f=C(),n=C(),h=h.i;h.next();)c=h.value,s=c.key,s instanceof Ra&&(s.mo?(l=s.M,u=s.R,null!==this.qc&&this.Sh?(c=c.value.point,t.add(s,zn(o)),l=i.x-c.x,u=i.y-c.y,s.uk(l,u)):(null!==l&&(f.assign(l.location),p=t.ha(l),null!==p&&f.ws(p.point)),null!==u&&(n.assign(u.location),p=t.ha(u),null!==p&&n.ws(p.point)),null!==l&&null!==u?f.Wd(n)?(c=c.value.point,l=e,l.assign(f),l.ws(c),t.add(s,zn(f)),s.uk(l.x,l.y)):(s.mo=!1,s.zb()):(c=c.value.point,t.add(s,zn(null!==l?f:null!==u?n:i)),l=o.x-c.x,u=o.y-c.y,s.uk(l,u)))):(null===s.M||null===s.R)&&(c=c.value.point,t.add(s,zn(i)),l=o.x-c.x,u=o.y-c.y,s.uk(l,u)));P(e),P(o),P(f),P(n),r||In(this,t)}},Fn.prototype.computeMove=function(t,i,n,e){if(void 0===e&&(e=new wi),e.assign(i),null===t)return e;void 0===n&&(n=null);var o=i;if(this.cv&&(this.GF||null===n||this.g.C.up)&&(o=C(),n=o,n.assign(i),null!==t)){var r=this.g;if(null!==r){var s=r.Gr,a=this.nC,r=a.width,a=a.height,h=this.rF,l=h.x,h=h.y,u=this.qF;if(null!==s){var f=s.Xu;isNaN(r)&&(r=f.width),isNaN(a)&&(a=f.height),s=s.mC,isNaN(l)&&(l=s.x),isNaN(h)&&(h=s.y)}s=N(0,0),s.ss(0,0,r,a,u),Qf.xr(i.x,i.y,l+s.x,h+s.y,r,a,n),P(s)}}return n=null!==t.XB?t.XB(t,i,o):o,a=t.cG,r=a.x,isNaN(r)&&(r=t.location.x),a=a.y,isNaN(a)&&(a=t.location.y),s=t.YF,l=s.x,isNaN(l)&&(l=t.location.x),s=s.y,isNaN(s)&&(s=t.location.y),e.k(Math.max(r,Math.min(n.x,l)),Math.max(a,Math.min(n.y,s))),o!==i&&P(o),e},Fn.prototype.doDragOver=function(){},Fn.prototype.doDropOnto=function(){},Fn.prototype.doMouseMove=function(){if(this.ca){var t=this.g;if(null!==t&&null!==this.rr&&null!==this.Hb){var i=!1,n=!1;this.mayCopy()?(i=!0,t.Fb="copy",Vn(this,!1),Rn(this,this.Qb),Kn(this,this.Qb,!1),In(this,this.Qb)):this.mayMove()?(n=!0,t.Fb="default",Hn(this),Kn(this,this.Hb,!0)):this.mayDragOut()?(t.Fb="no-drop",Vn(this,!1),Kn(this,this.Qb,!1)):Hn(this),Jn(this,t.C.S,n,i)}}},Fn.prototype.doMouseUp=function(){if(this.ca){var t=this.g;if(null!==t){var i=!1,n=this.mayCopy();if(n&&null!==this.Qb?(Hn(this),Vn(this,!0),Rn(this,this.Qb),Kn(this,this.Qb,!1),In(this,this.Qb),null!==this.Qb&&t.lD(this.Qb.Zh())):(i=!0,Hn(this),this.mayMove()&&(Kn(this,this.Hb,!0),this.du=!1,Jn(this,t.C.S,!0,!1),this.du=!0)),this.Uo=!0,te(this,t.C.S),this.ca){if(this.Qb=null,i&&null!==this.Hb)for(i=this.Hb.i;i.next();){var e=i.key;e instanceof Na&&(e=e.Ba,null===e||null===e.placeholder||this.Hb.contains(e)||e.NB&&e.H())}t.Rb(),In(this,this.Hb),this.Qe=n?"Copy":"Move",t.ma(n?"SelectionCopied":"SelectionMoved",t.selection)}this.stopTool()}}},Fn.prototype.mayCopy=function(){if(!this.vC)return!1;var t=this.g;if(null===t||t.Ta||t.Le||!t.on||!t.Ui||(tf?!t.C.alt:!t.C.control))return!1;for(t=t.selection.i;t.next();){var i=t.value;if(i.$c()&&i.canCopy())return!0}return null!==this.qc&&this.Sh&&this.qc.canCopy()?!0:!1},Fn.prototype.mayDragOut=function(){if(!this.vC)return!1;var t=this.g;if(null===t||!t.yu||!t.Ui||t.Xj)return!1;for(t=t.selection.i;t.next();){var i=t.value;if(i.$c()&&i.canCopy())return!0}return null!==this.qc&&this.Sh&&this.qc.canCopy()?!0:!1},Fn.prototype.mayMove=function(){var t=this.g;if(null===t||t.Ta||!t.Xj)return!1;for(t=t.selection.i;t.next();){var i=t.value;if(i.$c()&&i.canMove())return!0}return null!==this.qc&&this.Sh&&this.qc.canMove()?!0:!1};var wc=new ci(Fn),kc=null,Mc=null;Fn.prototype.mayDragIn=function(){var t=this.g;if(null===t||!t.AB||t.Ta||t.Le||!t.on)return!1;var i=kc;return null===i||i.g.U.ak!==t.U.ak?!1:!0},Fn.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var t=this.g;t.qb.Yh(),vo(t),t=kc,null!==t&&(t.g.Fb="copy")}},Fn.prototype.doSimulatedDragLeave=function(){var t=kc;null!==t&&t.doSimulatedDragOut(),this.doCancel()},Fn.prototype.doSimulatedDragOver=function(){var t=this.g;if(null!==t){var i=kc;null!==i&&null!==i.Hb&&this.mayDragIn()&&(t.Fb="copy",ie(this,i.Hb.Zh(),!1),Kn(this,this.Qb,!1),Jn(this,t.C.S,!1,!0))}},Fn.prototype.doSimulatedDrop=function(){var t=this.g;if(null!==t){var i=kc;null!==i&&(i.Uo=!0,Hn(this),this.mayDragIn()&&(this.Ab("Drop"),ie(this,i.Hb.Zh(),!0),Kn(this,this.Qb,!1),null!==this.Qb&&t.lD(this.Qb.Zh()),this.Qe="ExternalCopy",te(this,t.C.S),t.Rb(),this.Qb=null,t.focus(),t.ma("ExternalObjectsDropped",t.selection),this.ej()))}},Fn.prototype.doSimulatedDragOut=function(){var t=this.g;null!==t&&(t.Fb=this.mayCopy()||this.mayMove()?"":"no-drop")},H("DraggingInfo",ne),U(oe,Dn),H("LinkingBaseTool",oe),oe.prototype.doStop=function(){var t=this.g;null!==t&&dr(t),this.tg=this.sg=this.rg=this.qg=this.Sb=null,this.Iv.clear(),this.hf=null},K(oe,{PC:"portGravity"},function(){return this.LA},function(t){h(t,"number",oe,"portGravity"),t>=0&&(this.LA=t)}),K(oe,{Ln:"isUnconnectedLinkValid"},function(){return this.lA},function(t){h(t,"boolean",oe,"isUnconnectedLinkValid"),this.lA=t}),K(oe,{Tf:"temporaryLink"},function(){return this.hB},function(t){a(t,Ra,oe,"temporaryLink"),this.hB=t}),K(oe,{Kd:"temporaryFromNode"},function(){return this.fB},function(t){a(t,Na,oe,"temporaryFromNode"),this.fB=t}),K(oe,{Tl:"temporaryFromPort"},function(){return this.gB},function(t){a(t,Pr,oe,"temporaryFromPort"),this.gB=t}),K(oe,{Ld:"temporaryToNode"},function(){return this.iB},function(t){a(t,Na,oe,"temporaryToNode"),this.iB=t}),K(oe,{Ul:"temporaryToPort"},function(){return this.jB},function(t){a(t,Pr,oe,"temporaryToPort"),this.jB=t}),K(oe,{Sb:"originalLink"},function(){return this.DA},function(t){null!==t&&a(t,Ra,oe,"originalLink"),this.DA=t}),K(oe,{qg:"originalFromNode"},function(){return this.BA},function(t){null!==t&&a(t,Na,oe,"originalFromNode"),this.BA=t}),K(oe,{rg:"originalFromPort"},function(){return this.CA},function(t){null!==t&&a(t,Pr,oe,"originalFromPort"),this.CA=t}),K(oe,{sg:"originalToNode"},function(){return this.GA},function(t){null!==t&&a(t,Na,oe,"originalToNode"),this.GA=t}),K(oe,{tg:"originalToPort"},function(){return this.HA},function(t){null!==t&&a(t,Pr,oe,"originalToPort"),this.HA=t}),K(oe,{sd:"isForwards"},function(){return this.gA},function(t){h(t,"boolean",oe,"isForwards"),this.gA=t}),Y(oe,{Iv:"validPortsCache"},function(){return this.nE}),K(oe,{hf:"targetPort"},function(){return this.bB},function(t){null!==t&&a(t,Pr,oe,"targetPort"),this.bB=t}),oe.prototype.copyPortProperties=function(t,i,n,e,o){if(null!==t&&null!==i&&null!==n&&null!==e){e.ka=i.Q.size,o?(e.ab=i.ab,e.Dk=i.Dk):(e.Za=i.Za,e.gk=i.gk),n.qe=Sf;var r=C();n.location=i.Ra(Sf,r),P(r),e.angle=i.hk(),null!==this.rv&&this.rv(t,i,n,e,o)}},oe.prototype.setNoTargetPortProperties=function(t,i,n){null!==i&&(i.ka=Qf.Ov,i.Za=xf,i.ab=xf),null!==t&&(t.location=this.g.C.S),null!==this.rv&&this.rv(null,null,t,i,n)},oe.prototype.doMouseDown=function(){this.ca&&this.doMouseMove()},oe.prototype.doMouseMove=function(){if(this.ca){var t=this.g;if(null!==t){if(this.hf=this.findTargetPort(this.sd),null!==this.hf){var i=this.hf.J;if(i instanceof Na)return void(this.sd?this.copyPortProperties(i,this.hf,this.Ld,this.Ul,!0):this.copyPortProperties(i,this.hf,this.Kd,this.Tl,!1))}this.sd?this.setNoTargetPortProperties(this.Ld,this.Ul,!0):this.setNoTargetPortProperties(this.Kd,this.Tl,!1),(t.je||t.ke)&&cr(t,t.C.xe)}}},oe.prototype.findValidLinkablePort=function(t,i){if(null===t)return null;var n=t.J;if(!(n instanceof Na))return null;for(;null!==t;){var e=i?t.xD:t.fC;if(!0===e&&(null!==t.cd||t instanceof Na)&&(i?this.isValidTo(n,t):this.isValidFrom(n,t)))return t;if(!1===e)break;t=t.I}return null},oe.prototype.findTargetPort=function(t){var i=this.g,n=i.C.S,e=this.PC;0>=e&&(e=.1);for(var o=this,r=i.Fl(n,e,function(i){return o.findValidLinkablePort(i,t)},null,!0),e=1/0,i=null,r=r.i;r.next();){var s=r.value,a=s.J;if(a instanceof Na){var h=s.Ra(Sf,C()),l=n.x-h.x,u=n.y-h.y;P(h),h=l*l+u*u,e>h&&(l=this.Iv.ha(s),null!==l?l&&(i=s,e=h):t&&this.isValidLink(this.qg,this.rg,a,s)||!t&&this.isValidLink(a,s,this.sg,this.tg)?(this.Iv.add(s,!0),i=s,e=h):this.Iv.add(s,!1))}}return null!==i&&(n=i.J,n instanceof Na&&(null===n.layer||n.layer.jr))?i:null},oe.prototype.isValidFrom=function(t,i){if(null===t||null===i)return this.Ln;if(this.g.Ea===this&&(null!==t.layer&&!t.layer.jr||!0!==i.fC))return!1;var n=i.kF;if(1/0>n){if(null!==this.Sb&&t===this.qg&&i===this.rg)return!0;var e=i.cd;if(null===e&&(e=""),t.Tu(e).count>=n)return!1}return!0},oe.prototype.isValidTo=function(t,i){if(null===t||null===i)return this.Ln;if(this.g.Ea===this&&(null!==t.layer&&!t.layer.jr||!0!==i.xD))return!1;var n=i.$G;if(1/0>n){if(null!==this.Sb&&t===this.sg&&i===this.tg)return!0;var e=i.cd;if(null===e&&(e=""),t.Ff(e).count>=n)return!1}return!0},oe.prototype.isInSameNode=function(t,i){if(null===t||null===i)return!1;if(t===i)return!0;var n=t.J,e=i.J;return null!==n&&n===e},oe.prototype.isLinked=function(t,i){if(null===t||null===i)return!1;var n=t.J;if(!(n instanceof Na))return!1;var e=t.cd;null===e&&(e="");var o=i.J;if(!(o instanceof Na))return!1;var r=i.cd;for(null===r&&(r=""),o=o.Ff(r);o.next();)if(r=o.value,r.M===n&&r.Gf===e)return!0;return!1},oe.prototype.isValidLink=function(t,i,n,e){if(!this.isValidFrom(t,i)||!this.isValidTo(n,e)||!(null===i||null===e||(i.jF&&e.ZG||!this.isInSameNode(i,e))&&(i.iF&&e.YG||!this.isLinked(i,e)))||null!==this.Sb&&(null!==t&&this.isLabelDependentOnLink(t,this.Sb)||null!==n&&this.isLabelDependentOnLink(n,this.Sb))||null!==t&&null!==n&&(null===t.data&&null!==n.data||null!==t.data&&null===n.data)||!this.isValidCycle(t,n,this.Sb))return!1;if(null!==t){var o=t.kv;if(null!==o&&!o(t,i,n,e,this.Sb))return!1}return null===n||(o=n.kv,null===o||o(t,i,n,e,this.Sb))?(o=this.kv,null!==o?o(t,i,n,e,this.Sb):!0):!1},oe.prototype.isLabelDependentOnLink=function(t,i){if(null===t)return!1;var n=t.vd;if(null===n)return!1;if(n===i)return!0;var e=new di(Na);return e.add(t),re(this,n,i,e)},oe.prototype.isValidCycle=function(t,i,n){if(void 0===n&&(n=null),null===t||null===i)return this.Ln;var e=this.g.eH;if(e!==tp){if(e===op){if(null!==n&&!n.cc)return!0;for(e=i.Hd;e.next();){var o=e.value;if(o!==n&&o.cc&&o.R===i)return!1}return!se(this,t,i,n,!0)}if(e===rp){if(null!==n&&!n.cc)return!0;for(e=t.Hd;e.next();)if(o=e.value,o!==n&&o.cc&&o.M===t)return!1;return!se(this,t,i,n,!0)}if(e===ip)return t===i?t=!0:(e=new di(Na),e.add(i),t=ae(this,e,t,i,n)),!t;if(e===np)return!se(this,t,i,n,!1);if(e===ep)return t===i?t=!0:(e=new di(Na),e.add(i),t=he(this,e,t,i,n)),!t}return!0},K(oe,{kv:"linkValidation"},function(){return this.Hj},function(t){null!==t&&h(t,"function",oe,"linkValidation"),this.Hj=t}),K(oe,{rv:"portTargeted"},function(){return this.MA},function(t){null!==t&&h(t,"function",oe,"portTargeted"),this.MA=t}),U(le,oe),H("LinkingTool",le);var Tc;le.Either=Tc=Z(le,"Either",0);var Sc;le.ForwardsOnly=Sc=Z(le,"ForwardsOnly",0);var Cc;le.BackwardsOnly=Cc=Z(le,"BackwardsOnly",0),K(le,{xE:"archetypeLinkData"},function(){return this.Vv},function(t){null!==t&&a(t,Object,le,"archetypeLinkData"),t instanceof Pr&&a(t,Ra,le,"archetypeLinkData"),this.Vv=t}),K(le,{DB:"archetypeLabelNodeData"},function(){return this.Uv},function(t){null!==t&&a(t,Object,le,"archetypeLabelNodeData"),t instanceof Pr&&a(t,Na,le,"archetypeLabelNodeData"),this.Uv=t}),K(le,{direction:"direction"},function(){return this.aa},function(t){u(t,le,le,"direction"),this.aa=t}),K(le,{vD:"startObject"},function(){return this.YA},function(t){null!==t&&a(t,Pr,le,"startObject"),this.YA=t}),Y(le,{Fv:"startPort"},function(){return this.lx}),le.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||t.Ta||t.Le||!t.jr)return!1;var i=t.U;return(i instanceof xn||i instanceof wn)&&t.C.left&&(t.Ea===this||this.isBeyondDragSize())?null!==this.findLinkablePort():!1},le.prototype.findLinkablePort=function(){var t=this.g;if(null===t)return null;var i=this.vD;if(null===i&&(i=t.Dd(t.Yb.S,null,null)),null===i||!(i.J instanceof Na))return null;if(t=this.direction,t===Tc||t===Sc){var n=this.findValidLinkablePort(i,!1);if(null!==n)return this.sd=!0,n}return t!==Tc&&t!==Cc||(n=this.findValidLinkablePort(i,!0),null===n)?null:(this.sd=!1,n)},le.prototype.doActivate=function(){var t=this.g;if(null!==t&&(null===this.Fv&&(this.lx=this.findLinkablePort()),null!==this.Fv)){if(this.Ab(this.name),t.Zd=!0,t.Fb="pointer",this.sd){this.rg=this.Fv;var i=this.rg.J;i instanceof Na&&(this.qg=i),this.copyPortProperties(this.qg,this.rg,this.Kd,this.Tl,!1)}else this.tg=this.Fv,i=this.tg.J,i instanceof Na&&(this.sg=i),this.copyPortProperties(this.sg,this.tg,this.Ld,this.Ul,!0);t.add(this.Kd),t.add(this.Ld),null!==this.Tf&&(null!==this.Kd&&(this.Tf.M=this.Kd),null!==this.Ld&&(this.Tf.R=this.Ld),this.Tf.zb(),t.add(this.Tf)),this.ca=!0}},le.prototype.doDeactivate=function(){this.ca=!1;var t=this.g;null!==t&&(t.remove(this.Tf),t.remove(this.Kd),t.remove(this.Ld),t.Zd=!1,t.Fb="",this.ej())},le.prototype.doStop=function(){oe.prototype.doStop.call(this),this.vD=this.lx=null},le.prototype.doMouseUp=function(){if(this.ca){var t=this.g;if(null===t)return;var i=this.Qe=null,n=null,e=null,o=null,r=this.hf=this.findTargetPort(this.sd);if(null!==r){var s=r.J;s instanceof Na&&(this.sd?(null!==this.qg&&(i=this.qg,n=this.rg),e=s,o=r):(i=s,n=r,null!==this.sg&&(e=this.sg,o=this.tg)))}else this.sd?null!==this.qg&&this.Ln&&(i=this.qg,n=this.rg):null!==this.sg&&this.Ln&&(e=this.sg,o=this.tg);(null!==i||null!==e)&&(i=this.insertLink(i,n,e,o),null!==i?(null===r&&(this.sd?i.rm=t.C.S.copy():i.nm=t.C.S.copy()),t.Fe&&t.select(i),this.Qe=this.name,t.ma("LinkDrawn",i)):t.U.JB())}this.stopTool()},le.prototype.insertLink=function(t,i,n,e){var o=this.g;if(null===o)return null;var r=o.U;if(r instanceof wn){var s=t;if(i=n,o.Lc||(s=n,i=t),null!==s&&null!==i)return r.wg(i.data,r.$a(s.data)),i.Ar()}else if(r instanceof xn)if(s="",null!==t&&(null===i&&(i=t),s=i.cd,null===s&&(s="")),i="",null!==n&&(null===e&&(e=n),i=e.cd,null===i&&(i="")),e=this.xE,e instanceof Ra){if(ws(e),r=e.copy(),null!==r)return r.M=t,r.Gf=s,r.R=n,r.yg=i,o.add(r),t=this.DB,t instanceof Na&&(ws(t),t=t.copy(),null!==t&&(t.vd=r,o.add(t))),r}else if(null!==e&&(e=r.RB(e),y(e)))return null!==t&&r.zv(e,r.$a(t.data)),r.Sy(e,s),null!==n&&r.Bv(e,r.$a(n.data)),r.Wy(e,i),r.vu(e),t=this.DB,null===t||t instanceof Na||(t=r.copyNodeData(t),y(t)&&(r.rl(t),t=r.$a(t),void 0!==t&&r.Ax(e,t))),r=o.Ef(e);return null},U(ue,oe),H("RelinkingTool",ue),ue.prototype.updateAdornments=function(t){if(null!==t&&t instanceof Ra){var i="RelinkFrom",n=null;if(t.Ia&&!this.g.Ta){var e=t.ps;null!==e&&t.canRelinkFrom()&&t.Q.w()&&t.qa()&&e.Q.w()&&e.tk()&&(n=t.An(i),null===n&&(n=this.makeAdornment(e,!1),null!==n&&(n.kc=i),t.Uj(i,n)))}null===n&&t.xk(i),i="RelinkTo",n=null,t.Ia&&!this.g.Ta&&(e=t.ps,null!==e&&t.canRelinkTo()&&t.Q.w()&&t.qa()&&e.Q.w()&&e.tk()&&(n=t.An(i),null===n&&(n=this.makeAdornment(e,!0),null!==n&&(n.kc=i),t.Uj(i,n)))),null===n&&t.xk(i)}},ue.prototype.makeAdornment=function(t,i){var n=new Ca;n.type=zp;var e=i?this.XG:this.hF;return null!==e&&n.add(e.copy()),n.Xb=t,n},K(ue,{hF:"fromHandleArchetype"},function(){return this.Vz},function(t){null!==t&&a(t,Pr,ue,"fromHandleArchetype"),this.Vz=t}),K(ue,{XG:"toHandleArchetype"},function(){return this.kB},function(t){null!==t&&a(t,Pr,ue,"toHandleArchetype"),this.kB=t}),Y(ue,{handle:"handle"},function(){return this.Cb}),ue.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||t.Ta||t.Le||!t.tl)return!1;var i=t.U;return(i instanceof xn||i instanceof wn)&&t.C.left?(i=this.findToolHandleAt(t.Yb.S,"RelinkFrom"),null===i&&(i=this.findToolHandleAt(t.Yb.S,"RelinkTo")),null!==i):!1},ue.prototype.doActivate=function(){var t=this.g;if(null!==t){if(null===this.Sb){var i=this.findToolHandleAt(t.Yb.S,"RelinkFrom");if(null===i&&(i=this.findToolHandleAt(t.Yb.S,"RelinkTo")),null===i)return;var n=i.J;
if(!(n instanceof Ca&&n.Yg instanceof Ra))return;this.Cb=i,this.sd=null===n||"RelinkTo"===n.kc,this.Sb=n.Yg}this.Ab(this.name),t.Zd=!0,t.Fb="pointer",this.rg=this.Sb.Jc,this.qg=this.Sb.M,this.tg=this.Sb.yd,this.sg=this.Sb.R,this.EA.set(this.Sb.Q),null!==this.Sb&&0<this.Sb.Z&&(null===this.Sb.M&&(null!==this.Tl&&(this.Tl.ka=Qf.so),null!==this.Kd&&(this.Kd.location=this.Sb.j(0))),null===this.Sb.R&&(null!==this.Ul&&(this.Ul.ka=Qf.so),null!==this.Ld&&(this.Ld.location=this.Sb.j(this.Sb.Z-1)))),this.copyPortProperties(this.qg,this.rg,this.Kd,this.Tl,!1),this.copyPortProperties(this.sg,this.tg,this.Ld,this.Ul,!0),t.add(this.Kd),t.add(this.Ld),null!==this.Tf&&(null!==this.Kd&&(this.Tf.M=this.Kd),null!==this.Ld&&(this.Tf.R=this.Ld),this.copyLinkProperties(this.Sb,this.Tf),this.Tf.zb(),t.add(this.Tf)),this.ca=!0}},ue.prototype.copyLinkProperties=function(t,i){if(null!==t&&null!==i){i.hr=t.hr,i.Lx=t.Lx;var n=t.ne;(n===bd||n===xd)&&(n=gd),i.ne=n,i.Lu=t.Lu,i.uv=t.uv,i.ko=t.ko,i.Za=t.Za,i.gk=t.gk,i.Er=t.Er,i.Fr=t.Fr,i.ab=t.ab,i.Dk=t.Dk,i.xs=t.xs,i.zs=t.zs}},ue.prototype.doDeactivate=function(){this.ca=!1;var t=this.g;null!==t&&(t.remove(this.Tf),t.remove(this.Kd),t.remove(this.Ld),t.Zd=!1,t.Fb="",this.ej())},ue.prototype.doStop=function(){oe.prototype.doStop.call(this),this.Cb=null},ue.prototype.doMouseUp=function(){if(this.ca){var t=this.g;if(null===t)return;this.Qe=null;var i=this.qg,n=this.rg,e=this.sg,o=this.tg,r=this.Sb;if(this.hf=this.findTargetPort(this.sd),null!==this.hf){var s=this.hf.J;s instanceof Na&&(this.sd?(e=s,o=this.hf):(i=s,n=this.hf))}else this.Ln?this.sd?o=e=null:n=i=null:r=null;null!==r&&(this.reconnectLink(r,this.sd?e:i,this.sd?o:n,this.sd),null===this.hf&&(this.sd?r.rm=t.C.S.copy():r.nm=t.C.S.copy(),r.zb()),t.Fe&&(r.Ia=!0),this.Qe=this.name,t.ma("LinkRelinked",r,this.sd?this.tg:this.rg)),sh(this.Sb,this.EA)}this.stopTool()},ue.prototype.reconnectLink=function(t,i,n,e){return null===this.g?!1:(n=null!==n&&null!==n.cd?n.cd:"",e?(t.R=i,t.yg=n):(t.M=i,t.Gf=n),!0)},U(ce,Dn),H("LinkReshapingTool",ce);var Nc;ce.None=Nc=Z(ce,"None",0);var Pc;ce.Horizontal=Pc=Z(ce,"Horizontal",1);var jc;ce.Vertical=jc=Z(ce,"Vertical",2);var Lc;ce.All=Lc=Z(ce,"All",3),ce.prototype.getReshapingBehavior=ce.prototype.kC=function(t){return t&&t.OA?t.OA:Nc},ce.prototype.setReshapingBehavior=ce.prototype.rs=function(t,i){a(t,Pr,ce,"setReshapingBehavior:obj"),u(i,ce,ce,"setReshapingBehavior:behavior"),t.OA=i},ce.prototype.updateAdornments=function(t){if(null!==t&&t instanceof Ra){if(t.Ia&&!this.g.Ta){var i=t.path;if(null!==i&&t.canReshape()&&t.Q.w()&&t.qa()&&i.Q.w()&&i.tk()){var n=t.An(this.name);if((null===n||n.hE!==t.Z||n.pE!==t.ks)&&(n=this.makeAdornment(i),null!==n&&(n.hE=t.Z,n.pE=t.ks,t.Uj(this.name,n))),null!==n)return void(n.location=t.position)}}t.xk(this.name)}},ce.prototype.makeAdornment=function(t){var i=t.J,n=i.Z,e=i.Ib,o=null;if(null!==i.points&&n>1){o=new Ca,o.type=zp;var n=i.Br,r=i.gv,s=e?1:0;if(i.ks&&i.ne!==md)for(var a=n+s;r-s>a;a++){var h=this.makeResegmentHandle(t,a);null!==h&&(h.ff=a,h.wv=.5,o.add(h))}for(a=n+1;r>a;a++)if(h=this.makeHandle(t,a),null!==h){if(h.ff=a,a!==n)if(a===n+1&&e){var s=i.j(n),l=i.j(n+1);Qf.q(s.x,l.x)&&Qf.q(s.y,l.y)&&(l=i.j(n-1)),Qf.q(s.x,l.x)?(this.rs(h,jc),h.cursor="n-resize"):Qf.q(s.y,l.y)&&(this.rs(h,Pc),h.cursor="w-resize")}else a===r-1&&e?(s=i.j(r-1),l=i.j(r),Qf.q(s.x,l.x)&&Qf.q(s.y,l.y)&&(s=i.j(r+1)),Qf.q(s.x,l.x)?(this.rs(h,jc),h.cursor="n-resize"):Qf.q(s.y,l.y)&&(this.rs(h,Pc),h.cursor="w-resize")):a!==r&&(this.rs(h,Lc),h.cursor="move");o.add(h)}o.kc=this.name,o.Xb=t}return o},ce.prototype.makeHandle=function(){var t=this.Hr;return null===t?null:t.copy()},K(ce,{Hr:"handleArchetype"},function(){return this.zj},function(t){null!==t&&a(t,Pr,ce,"handleArchetype"),this.zj=t}),ce.prototype.makeResegmentHandle=function(){var t=this.bG;return null===t?null:t.copy()},K(ce,{bG:"midHandleArchetype"},function(){return this.rA},function(t){null!==t&&a(t,Pr,ce,"midHandleArchetype"),this.rA=t}),Y(ce,{handle:"handle"},function(){return this.Cb}),Y(ce,{ir:"adornedLink"},function(){return this.Sv}),ce.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return null!==t&&!t.Ta&&t.Au&&t.C.left?null!==this.findToolHandleAt(t.Yb.S,this.name):!1},ce.prototype.doActivate=function(){var t=this.g;if(null!==t&&(this.Cb=this.findToolHandleAt(t.Yb.S,this.name),null!==this.Cb)){var i=this.Cb.J.Yg;if(i instanceof Ra){if(this.Sv=i,t.Zd=!0,this.Ab(this.name),i.ks&&.5===this.Cb.wv){var n=i.points.copy(),e=this.Cb.Ra(Sf);n.qd(this.Cb.ff+1,e),i.Ib&&n.qd(this.Cb.ff+1,e),i.points=n,i.rd(),this.Cb=this.findToolHandleAt(t.Yb.S,this.name)}this.FA=i.j(this.Cb.ff),this.Yw=i.points.copy(),this.ca=!0}}},ce.prototype.doDeactivate=function(){this.ej(),this.Sv=this.Cb=null;var t=this.g;null!==t&&(t.Zd=!1),this.ca=!1},ce.prototype.doCancel=function(){var t=this.ir;null!==t&&(t.points=this.Yw),this.stopTool()},ce.prototype.doMouseMove=function(){var t=this.g;this.ca&&null!==t&&(t=this.computeReshape(t.C.S),this.reshape(t))},ce.prototype.doMouseUp=function(){var t=this.g;if(this.ca&&null!==t){var i=this.computeReshape(t.C.S);if(this.reshape(i),i=this.ir,null!==i&&i.ks){var n=this.handle.ff,e=i.j(n-1),o=i.j(n),r=i.j(n+1);if(i.Ib){if(n>i.Br+1&&n<i.gv-1){var s=i.j(n-2);if(Math.abs(e.x-o.x)<this.ug&&Math.abs(e.y-o.y)<this.ug&&(pe(this,s,e,o,r,!0)||pe(this,s,e,o,r,!1))){var a=i.points.copy();pe(this,s,e,o,r,!0)?(a.Rf(n-2,new wi(s.x,(r.y+s.y)/2)),a.Rf(n+1,new wi(r.x,(r.y+s.y)/2))):(a.Rf(n-2,new wi((r.x+s.x)/2,s.y)),a.Rf(n+1,new wi((r.x+s.x)/2,r.y))),a.Dc(n),a.Dc(n-1),i.points=a,i.rd()}else s=i.j(n+2),Math.abs(o.x-r.x)<this.ug&&Math.abs(o.y-r.y)<this.ug&&(pe(this,e,o,r,s,!0)||pe(this,e,o,r,s,!1))&&(a=i.points.copy(),pe(this,e,o,r,s,!0)?(a.Rf(n-1,new wi(e.x,(e.y+s.y)/2)),a.Rf(n+2,new wi(s.x,(e.y+s.y)/2))):(a.Rf(n-1,new wi((e.x+s.x)/2,e.y)),a.Rf(n+2,new wi((e.x+s.x)/2,s.y))),a.Dc(n+1),a.Dc(n),i.points=a,i.rd())}}else s=C(),Qf.Ml(e.x,e.y,r.x,r.y,o.x,o.y,s)&&s.Xi(o)<this.ug*this.ug&&(a=i.points.copy(),a.Dc(n),i.points=a,i.rd()),P(s)}t.Rb(),this.Qe=this.name,t.ma("LinkReshaped",this.ir)}this.stopTool()},K(ce,{ug:"resegmentingDistance"},function(){return this.NA},function(t){h(t,"number",ce,"resegmentingDistance"),this.NA=t}),ce.prototype.reshape=function(t){var i=this.ir;i.Ak();var n=this.handle.ff,e=this.kC(this.handle);if(i.Ib)if(n===i.Br+1)n=i.Br+1,e===jc?(i.L(n,i.j(n-1).x,t.y),i.L(n+1,i.j(n+2).x,t.y)):e===Pc&&(i.L(n,t.x,i.j(n-1).y),i.L(n+1,t.x,i.j(n+2).y));else if(n===i.gv-1)n=i.gv-1,e===jc?(i.L(n-1,i.j(n-2).x,t.y),i.L(n,i.j(n+1).x,t.y)):e===Pc&&(i.L(n-1,t.x,i.j(n-2).y),i.L(n,t.x,i.j(n+1).y));else{var e=n,o=i.j(e),r=i.j(e-1),s=i.j(e+1);Qf.q(r.x,o.x)&&Qf.q(o.y,s.y)?(Qf.q(r.x,i.j(e-2).x)&&!Qf.q(r.y,i.j(e-2).y)?(i.n(e,t.x,r.y),n++,e++):i.L(e-1,t.x,r.y),Qf.q(s.y,i.j(e+2).y)&&!Qf.q(s.x,i.j(e+2).x)?i.n(e+1,s.x,t.y):i.L(e+1,s.x,t.y)):Qf.q(r.y,o.y)&&Qf.q(o.x,s.x)?(Qf.q(r.y,i.j(e-2).y)&&!Qf.q(r.x,i.j(e-2).x)?(i.n(e,r.x,t.y),n++,e++):i.L(e-1,r.x,t.y),Qf.q(s.x,i.j(e+2).x)&&!Qf.q(s.y,i.j(e+2).y)?i.n(e+1,t.x,s.y):i.L(e+1,t.x,s.y)):Qf.q(r.x,o.x)&&Qf.q(o.x,s.x)?(Qf.q(r.x,i.j(e-2).x)&&!Qf.q(r.y,i.j(e-2).y)?(i.n(e,t.x,r.y),n++,e++):i.L(e-1,t.x,r.y),Qf.q(s.x,i.j(e+2).x)&&!Qf.q(s.y,i.j(e+2).y)?i.n(e+1,t.x,s.y):i.L(e+1,t.x,s.y)):Qf.q(r.y,o.y)&&Qf.q(o.y,s.y)&&(Qf.q(r.y,i.j(e-2).y)&&!Qf.q(r.x,i.j(e-2).x)?(i.n(e,r.x,t.y),n++,e++):i.L(e-1,r.x,t.y),Qf.q(s.y,i.j(e+2).y)&&!Qf.q(s.x,i.j(e+2).x)?i.n(e+1,s.x,t.y):i.L(e+1,s.x,t.y)),i.L(n,t.x,t.y)}else i.L(n,t.x,t.y),1===n&&i.computeSpot(!0).Gd()&&(o=i.M,r=i.Jc,null===o||o.qa()||(o=o.findVisibleNode(),o!==i.M&&(r=o.fk(""))),e=r.Ra(Sf,C()),o=i.getLinkPointFromPoint(o,r,e,t,!0,C()),i.L(0,o.x,o.y),P(e),P(o)),n===i.Z-2&&i.computeSpot(!1).Gd()&&(n=i.R,o=i.yd,null===n||n.qa()||(n=n.findVisibleNode(),n!==i.R&&(o=n.fk(""))),e=o.Ra(Sf,C()),o=i.getLinkPointFromPoint(n,o,e,t,!1,C()),i.L(i.Z-1,o.x,o.y),P(e),P(o));i.Nh()},ce.prototype.computeReshape=function(t){var i=this.ir,n=this.handle.ff;switch(this.kC(this.handle)){case Lc:return t;case jc:return i=i.j(n),new wi(i.x,t.y);case Pc:return i=i.j(n),new wi(t.x,i.y);default:case Nc:return i.j(n)}},Y(ce,{HI:"originalPoint"},function(){return this.FA}),Y(ce,{II:"originalPoints"},function(){return this.Yw}),U(de,Dn),H("ResizingTool",de),de.prototype.updateAdornments=function(t){if(!(null===t||t instanceof Ra)){if(t.Ia&&!this.g.Ta){var i=t.bD;if(null!==i&&t.canResize()&&t.Q.w()&&t.qa()&&i.Q.w()&&i.tk()){var n=t.An(this.name);if(null===n&&(n=this.makeAdornment(i)),null!==n){var e=i.hk();n.angle=e;var o=i.Ra(n.qe,C()),r=i.Th();if(n.location=o,P(o),o=n.placeholder,null!==o){var i=i.sa,s=j();s.k(i.width*r,i.height*r),o.ka=s,L(s)}return ve(this,n,e),void t.Uj(this.name,n)}}}t.xk(this.name)}},de.prototype.makeAdornment=function(t){var i=null,i=t.J.aD;if(null===i){i=new Ca,i.type=Lp,i.qe=Sf;var n=new jh;n.Jf=!0,i.add(n),i.add(this.makeHandle(t,wf)),i.add(this.makeHandle(t,Mf)),i.add(this.makeHandle(t,jf)),i.add(this.makeHandle(t,Nf)),i.add(this.makeHandle(t,Lf)),i.add(this.makeHandle(t,Af)),i.add(this.makeHandle(t,Ff)),i.add(this.makeHandle(t,Df))}else if(ws(i),i=i.copy(),null===i)return null;return i.kc=this.name,i.Xb=t,i},de.prototype.makeHandle=function(t,i){var n=this.Hr;return null===n?null:(n=n.copy(),n.alignment=i,n)},K(de,{Hr:"handleArchetype"},function(){return this.zj},function(t){null!==t&&a(t,Pr,de,"handleArchetype"),this.zj=t}),Y(de,{handle:"handle"},function(){return this.Cb}),K(de,{Xb:"adornedObject"},function(){return this.lb},function(t){null!==t&&a(t,Pr,de,"adornedObject"),this.lb=t}),de.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return null!==t&&!t.Ta&&t.kr&&t.C.left&&null!==this.findToolHandleAt(t.Yb.S,this.name)?!0:!1},de.prototype.doActivate=function(){var t=this.g;null!==t&&(this.Cb=this.findToolHandleAt(t.Yb.S,this.name),null!==this.Cb&&(this.lb=this.Cb.J.Xb,this.Xw.set(this.lb.J.location),this.Tt.set(this.lb.ka),this.vw=this.computeCellSize(),this.xw=this.computeMinSize(),this.ww=this.computeMaxSize(),t.Zd=!0,this.yA=t.qb.isEnabled,t.qb.isEnabled=!1,this.Ab(this.name),this.ca=!0))},de.prototype.doDeactivate=function(){var t=this.g;null!==t&&(this.ej(),this.lb=this.Cb=null,this.ca=t.Zd=!1,t.qb.isEnabled=this.yA)},de.prototype.doCancel=function(){this.lb.ka=this.Tt,this.lb.J.location=this.Xw,this.stopTool()},de.prototype.doMouseMove=function(){var t=this.g;if(this.ca&&null!==t){var i=this.xw,n=this.ww,e=this.vw,o=this.lb.jC(t.C.S,C()),r=gp;this.lb instanceof Ps&&(r=As(this.lb)),i=this.computeResize(o,this.Cb.alignment,i,n,e,!(r===kp||r===Mp||t.C.shift)),this.resize(i),t.te(),P(o)}},de.prototype.doMouseUp=function(){var t=this.g;if(this.ca&&null!==t){var i=this.xw,n=this.ww,e=this.vw,o=this.lb.jC(t.C.S,C()),r=gp;this.lb instanceof Ps&&(r=As(this.lb)),i=this.computeResize(o,this.Cb.alignment,i,n,e,!(r===kp||r===Mp||t.C.shift)),this.resize(i),P(o),t.Rb(),this.Qe=this.name,t.ma("PartResized",this.lb,this.Tt)}this.stopTool()},de.prototype.resize=function(t){if(null!==this.g){var i=this.Xb,n=i.J,e=i.hk(),o=i.Th(),r=Math.PI*e/180,s=Math.cos(r),r=Math.sin(r),a=e>0&&180>e?1:0,h=e>90&&270>e?1:0,e=e>180&&360>e?1:0,l=i.sa.width,u=i.sa.height;i.ka=t.size;var f=n.position.copy();n.Ge(),l=i.sa.width-l,u=i.sa.height-u,(0!==l||0!==u)&&(0!==l&&(f.x+=o*((t.x+l*h)*s-(t.y+u*a)*r)),0!==u&&(f.y+=o*((t.x+l*e)*r+(t.y+u*h)*s)),n.move(f))}},de.prototype.computeResize=function(t,i,n,e,o,r){i.Gd()&&(i=Sf);var s=this.Xb.sa,a=s.x,h=s.y,l=s.x+s.width,u=s.y+s.height,f=1;if(!r){var f=s.width,c=s.height;0>=f&&(f=1),0>=c&&(c=1),f=c/f}return c=C(),Qf.xr(t.x,t.y,a,h,o.width,o.height,c),t=s.copy(),0>=i.x?0>=i.y?(t.x=Math.max(c.x,l-e.width),t.x=Math.min(t.x,l-n.width),t.width=Math.max(l-t.x,n.width),t.y=Math.max(c.y,u-e.height),t.y=Math.min(t.y,u-n.height),t.height=Math.max(u-t.y,n.height),r||(i=t.height/t.width,i>f?(t.height=f*t.width,t.y=u-t.height):(t.width=t.height/f,t.x=l-t.width))):1<=i.y?(t.x=Math.max(c.x,l-e.width),t.x=Math.min(t.x,l-n.width),t.width=Math.max(l-t.x,n.width),t.height=Math.max(Math.min(c.y-h,e.height),n.height),r||(i=t.height/t.width,i>f?t.height=f*t.width:(t.width=t.height/f,t.x=l-t.width))):(t.x=Math.max(c.x,l-e.width),t.x=Math.min(t.x,l-n.width),t.width=l-t.x,r||(t.height=f*t.width,t.y=h+.5*(u-h-t.height))):1<=i.x?0>=i.y?(t.width=Math.max(Math.min(c.x-a,e.width),n.width),t.y=Math.max(c.y,u-e.height),t.y=Math.min(t.y,u-n.height),t.height=Math.max(u-t.y,n.height),r||(i=t.height/t.width,i>f?(t.height=f*t.width,t.y=u-t.height):t.width=t.height/f)):1<=i.y?(t.width=Math.max(Math.min(c.x-a,e.width),n.width),t.height=Math.max(Math.min(c.y-h,e.height),n.height),r||(i=t.height/t.width,i>f?t.height=f*t.width:t.width=t.height/f)):(t.width=Math.max(Math.min(c.x-a,e.width),n.width),r||(t.height=f*t.width,t.y=h+.5*(u-h-t.height))):0>=i.y?(t.y=Math.max(c.y,u-e.height),t.y=Math.min(t.y,u-n.height),t.height=u-t.y,r||(t.width=t.height/f,t.x=a+.5*(l-a-t.width))):1<=i.y&&(t.height=Math.max(Math.min(c.y-h,e.height),n.height),r||(t.width=t.height/f,t.x=a+.5*(l-a-t.width))),P(c),t},de.prototype.computeMinSize=function(){var t=this.Xb.Lf.copy(),i=this.Lf;return!isNaN(i.width)&&i.width>t.width&&(t.width=i.width),!isNaN(i.height)&&i.height>t.height&&(t.height=i.height),t},de.prototype.computeMaxSize=function(){var t=this.Xb.se.copy(),i=this.se;return!isNaN(i.width)&&i.width<t.width&&(t.width=i.width),!isNaN(i.height)&&i.height<t.height&&(t.height=i.height),t},de.prototype.computeCellSize=function(){var t=new Ti(0/0,0/0),i=this.Xb.J;if(null!==i){var n=i.wG;!isNaN(n.width)&&0<n.width&&(t.width=n.width),!isNaN(n.height)&&0<n.height&&(t.height=n.height)}return n=this.tn,isNaN(t.width)&&!isNaN(n.width)&&0<n.width&&(t.width=n.width),isNaN(t.height)&&!isNaN(n.height)&&0<n.height&&(t.height=n.height),i=this.g,(isNaN(t.width)||isNaN(t.height))&&i&&(n=i.Xa.Zc,null!==n&&n.cv&&(n=n.nC,isNaN(t.width)&&!isNaN(n.width)&&0<n.width&&(t.width=n.width),isNaN(t.height)&&!isNaN(n.height)&&0<n.height&&(t.height=n.height)),i=i.Gr,null!==i&&i.visible&&this.cv&&(n=i.Xu,isNaN(t.width)&&!isNaN(n.width)&&0<n.width&&(t.width=n.width),isNaN(t.height)&&!isNaN(n.height)&&0<n.height&&(t.height=n.height))),(isNaN(t.width)||0===t.width||1/0===t.width)&&(t.width=1),(isNaN(t.height)||0===t.height||1/0===t.height)&&(t.height=1),t},K(de,{Lf:"minSize"},function(){return this.zi},function(t){if(a(t,Ti,de,"minSize"),!this.zi.A(t)){var i=t.width;isNaN(i)&&(i=0),t=t.height,isNaN(t)&&(t=0),this.zi.k(i,t)}}),K(de,{se:"maxSize"},function(){return this.xi},function(t){if(a(t,Ti,de,"maxSize"),!this.xi.A(t)){var i=t.width;isNaN(i)&&(i=1/0),t=t.height,isNaN(t)&&(t=1/0),this.xi.k(i,t)}}),K(de,{tn:"cellSize"},function(){return this.ei},function(t){a(t,Ti,de,"cellSize"),this.ei.A(t)||this.ei.assign(t)}),K(de,{cv:"isGridSnapEnabled"},function(){return this.lp},function(t){h(t,"boolean",de,"isGridSnapEnabled"),this.lp=t}),Y(de,{FI:"originalDesiredSize"},function(){return this.Tt}),Y(de,{GI:"originalLocation"},function(){return this.Xw}),U(ye,Dn),H("RotatingTool",ye),ye.prototype.updateAdornments=function(t){if(!(null===t||t instanceof Ra)){if(t.Ia&&!this.g.Ta){var i=t.eD;if(null!==i&&t.canRotate()&&t.Q.w()&&t.qa()&&i.Q.w()&&i.tk()){var n=t.An(this.name);if(null===n&&(n=this.makeAdornment(i)),null!==n){n.angle=i.hk();var e=null,o=null;i===t||i===t.Jb?(e=t.Jb,o=t.qe):(e=i,o=Sf);for(var r=e.sa,o=N(r.width*o.x+o.offsetX,r.height*o.y+o.offsetY);null!==e&&e!==i;)e.transform.Ka(o),e=e.I;var e=o.y,r=Math.max(o.x-i.sa.width,0),s=C();return n.location=i.Ra(new Fi(1,0,50+r,e),s),P(s),P(o),void t.Uj(this.name,n)}}}t.xk(this.name)}},ye.prototype.makeAdornment=function(t){var i=null,i=t.J.zG;if(null===i){i=new Ca,i.type=Pp,i.qe=Sf;var n=this.Hr;null!==n&&i.add(n.copy())}else if(ws(i),i=i.copy(),null===i)return null;return i.kc=this.name,i.Xb=t,i},K(ye,{Hr:"handleArchetype"},function(){return this.zj},function(t){null!==t&&a(t,Pr,ye,"handleArchetype"),this.zj=t}),Y(ye,{handle:"handle"},function(){return this.Cb}),K(ye,{Xb:"adornedObject"},function(){return this.lb},function(t){null!==t&&a(t,Pr,ye,"adornedObject"),this.lb=t}),ye.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return null!==t&&!t.Ta&&t.Bu&&t.C.left&&null!==this.findToolHandleAt(t.Yb.S,this.name)?!0:!1},ye.prototype.doActivate=function(){var t=this.g;if(null!==t&&(this.Cb=this.findToolHandleAt(t.Yb.S,this.name),null!==this.Cb)){this.lb=this.Cb.J.Xb;var i=this.lb.J,n=i.Jb;this.PA=this.lb===i||this.lb===n?n.Ra(i.qe):this.lb.Ra(Sf),this.St=this.lb.angle,t.Zd=!0,t.Ox=!0,this.Ab(this.name),this.ca=!0}},ye.prototype.doDeactivate=function(){var t=this.g;null!==t&&(this.ej(),this.lb=this.Cb=null,this.ca=t.Zd=!1)},ye.prototype.doCancel=function(){var t=this.g;null!==t&&(t.Ox=!1),this.rotate(this.St),this.stopTool()},ye.prototype.doMouseMove=function(){var t=this.g;this.ca&&null!==t&&(t=this.computeRotate(t.C.S),this.rotate(t))},ye.prototype.doMouseUp=function(){var t=this.g;if(this.ca&&null!==t){t.Ox=!1;var i=this.computeRotate(t.C.S);this.rotate(i),t.Rb(),this.Qe=this.name,t.ma("PartRotated",this.lb,this.St)}this.stopTool()},ye.prototype.rotate=function(t){null!==this.lb&&(this.lb.angle=t)},ye.prototype.computeRotate=function(t){t=this.PA.Rh(t);var i=this.lb.I;null!==i&&(t-=i.hk(),t>=360?t-=360:0>t&&(t+=360));var i=Math.min(Math.abs(this.OG),180),n=Math.min(Math.abs(this.NG),i/2);return!this.g.C.shift&&i>0&&n>0&&(n>t%i?t=Math.floor(t/i)*i:t%i>i-n&&(t=(Math.floor(t/i)+1)*i)),t>=360?t-=360:0>t&&(t+=360),t},K(ye,{OG:"snapAngleMultiple"},function(){return this.VA},function(t){h(t,"number",ye,"snapAngleMultiple"),this.VA=t}),K(ye,{NG:"snapAngleEpsilon"},function(){return this.UA},function(t){h(t,"number",ye,"snapAngleEpsilon"),this.UA=t}),Y(ye,{EI:"originalAngle"},function(){return this.St}),U(ge,Dn),H("ClickSelectingTool",ge),ge.prototype.canStart=function(){return!this.isEnabled||null===this.g||this.isBeyondDragSize()?!1:!0},ge.prototype.doMouseUp=function(){this.ca&&(this.standardMouseSelect(),this.standardMouseClick()),this.stopTool()},U(me,Dn),H("ActionTool",me),me.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t)return!1;var i=t.C,n=t.Dd(i.S,function(t){for(;null!==t.I&&!t.ey;)t=t.I;return t},function(t){return t.ey});return null!==n?(this.Zl=n,t.jm=t.Dd(i.S,null,null),!0):!1},me.prototype.doMouseDown=function(){if(this.ca){var t=this.g.C,i=this.Zl;null!==i&&(t.Jd=i,null!==i.vB&&i.vB(t,i))}else this.canStart()&&this.doActivate()},me.prototype.doMouseMove=function(){if(this.ca){var t=this.g.C,i=this.Zl;null!==i&&(t.Jd=i,null!==i.wB&&i.wB(t,i))}},me.prototype.doMouseUp=function(){if(this.ca){var t=this.g,i=t.C,n=this.Zl;if(null===n)return;i.Jd=n,null!==n.xB&&n.xB(i,n),this.isBeyondDragSize()||An(n,i,t)}this.stopTool()},me.prototype.doCancel=function(){var t=this.g;if(null!==t){var t=t.C,i=this.Zl;if(null===i)return;t.Jd=i,null!==i.uB&&i.uB(t,i)}this.stopTool()},me.prototype.doStop=function(){this.Zl=null},U(xe,Dn),H("ClickCreatingTool",xe),xe.prototype.canStart=function(){if(!this.isEnabled||null===this.Dx)return!1;var t=this.g;if(null===t||t.Ta||t.Le||!t.on||!t.C.left||this.isBeyondDragSize())return!1;if(this.FF){if(1===t.C.le&&(this.Uz=t.C.xe.copy()),2!==t.C.le||this.isBeyondDragSize(this.Uz))return!1}else if(1!==t.C.le)return!1;return t.Ea!==this&&null!==t.zr(t.C.S,!0)?!1:!0},xe.prototype.doMouseUp=function(){var t=this.g;this.ca&&null!==t&&this.insertPart(t.C.S),this.stopTool()},xe.prototype.insertPart=function(t){var i=this.g;if(null===i)return null;var n=this.Dx;if(null===n)return null;this.Ab(this.name);var e=null;return n instanceof sa?n.$c()&&(ws(n),e=n.copy(),null!==e&&i.add(e)):null!==n&&(n=i.U.copyNodeData(n),y(n)&&(i.U.rl(n),e=i.$g(n))),null!==e&&(e.location=t,i.Fe&&i.select(e)),i.Rb(),this.Qe=this.name,i.ma("PartCreated",e),this.ej(),e},K(xe,{Dx:"archetypeNodeData"},function(){return this.sj},function(t){null!==t&&a(t,Object,xe,"archetypeNodeData"),this.sj=t}),K(xe,{FF:"isDoubleClick"},function(){return this.eA},function(t){h(t,"boolean",xe,"isDoubleClick"),this.eA=t}),U(we,Dn),H("ContextMenuTool",we);var Dc=!1,Ac=null,Fc=null;we.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return null===t||this.isBeyondDragSize()||!t.C.right?!1:null!==this.sm&&t.C.sk||null!==this.findObjectWithContextMenu()?!0:!1},we.prototype.doStart=function(){var t=this.g;null!==t&&this.vA.set(t.Yb.S)},we.prototype.doStop=function(){this.hideDefaultContextMenu(),this.hideContextMenu(),this.km=null},we.prototype.findObjectWithContextMenu=function(t){void 0===t&&(t=null);var i=this.g;if(null===i)return null;var n=i.C,e=null;if(t instanceof Ke||(e=t instanceof Pr?t:i.Dd(n.S,null,function(t){return!t.layer.bc})),null!==e){for(t=e;null!==t;){if(n=t.contextMenu,null!==n)return t;t=t.I}if(null!==this.sm&&i.C.sk)return e.J}else if(n=i.contextMenu,null!==n)return i;return null},we.prototype.doActivate=function(){},we.prototype.doMouseUp=function(){var t=this.g;null!==t&&(this.ca?null!==this.Ye&&(t=t.Dd(t.C.S,null,null),null!==t&&t.pk(this.Ye)&&this.standardMouseClick(null,null),this.stopTool()):this.canStart()&&Me(this,!0))},we.prototype.doMouseMove=function(){this.ca&&this.standardMouseOver()},we.prototype.showContextMenu=function(t,i){a(t,Ca,we,"showContextMenu:contextmenu"),null!==i&&a(i,Pr,we,"showContextMenu:obj");var n=this.g;if(null!==n){if(t!==this.Ye&&this.hideContextMenu(),t.Ne="Tool",t.yk=!1,t.scale=1/n.scale,t.kc=this.name,n.add(t),null!==i){var n=null,e=i.Cn();null!==e&&(n=e.data),t.Xb=i,t.data=n}else t.data=n.U;t.Ge(),this.positionContextMenu(t,i),this.Ye=t}},we.prototype.positionContextMenu=function(t){if(null===t.placeholder){var i=this.g;if(null!==i){var n=i.C.S.copy(),e=t.oa,o=i.Va;i.C.sk&&(n.x-=e.width),n.x+e.width>o.right&&(n.x-=e.width+5),n.x<o.x&&(n.x=o.x),n.y+e.height>o.bottom&&(n.y-=e.height+5),n.y<o.y&&(n.y=o.y),t.position=n}}},we.prototype.hideContextMenu=function(){var t=this.g;null!==t&&null!==this.Ye&&(this.Ye.data=null,this.Ye.Xb=null,t.remove(this.Ye),this.Ye=null,this.standardMouseOver())},we.prototype.initializeDefaultButtons=function(){if(null===this.g)return null;var t=new ci(be);return t.add(new be("Copy",function(t){t.ib.copySelection()},function(t){return t.ib.canCopySelection()})),t.add(new be("Cut",function(t){t.ib.cutSelection()},function(t){return t.ib.canCutSelection()})),t.add(new be("Delete",function(t){t.ib.deleteSelection()},function(t){return t.ib.canDeleteSelection()})),t.add(new be("Paste",function(t){t.ib.pasteSelection(t.C.S)},function(t){return t.ib.canPasteSelection()})),t.add(new be("Select All",function(t){t.ib.selectAll()},function(t){return t.ib.canSelectAll()})),t.add(new be("Undo",function(t){t.ib.undo()},function(t){return t.ib.canUndo()})),t.add(new be("Redo",function(t){t.ib.redo()},function(t){return t.ib.canRedo()})),t.add(new be("Zoom To Fit",function(t){t.ib.zoomToFit()},function(t){return t.ib.canZoomToFit()})),t.add(new be("Reset Zoom",function(t){t.ib.resetZoom()},function(t){return t.ib.canResetZoom()})),t.add(new be("Group Selection",function(t){t.ib.groupSelection()},function(t){return t.ib.canGroupSelection()})),t.add(new be("Ungroup Selection",function(t){t.ib.ungroupSelection()},function(t){return t.ib.canUngroupSelection()})),t.add(new be("Edit Text",function(t){t.ib.editTextBlock()},function(t){return t.ib.canEditTextBlock()})),t},we.prototype.showDefaultContextMenu=function(){var t=this.g;if(null!==t){null===this.lw&&(this.lw=this.initializeDefaultButtons()),this.sm!==this.Ye&&this.hideContextMenu(),Fc.innerHTML="",Ac.addEventListener("click",this.lB,!1);var i=this,n=o("ul");n.className="defaultCXul",Fc.appendChild(n),n.innerHTML="";for(var e=this.lw.i;e.next();){var r=e.value,s=r.text,a=r.visible;if("function"==typeof r.LB&&("function"!=typeof a||a(t))){a=o("li"),a.className="defaultCXli";var h=o("a");h.className="defaultCXa",h.href="#",h.YD=r.LB,h.addEventListener("click",function(n){return this.YD(t),i.stopTool(),n.preventDefault(),!1},!1),h.textContent=s,a.appendChild(h),n.appendChild(a)}}Fc.style.display="block",Ac.style.display="block",this.Ye=this.sm}},we.prototype.hideDefaultContextMenu=function(){null!==this.Ye&&this.Ye===this.sm&&(Fc.style.display="none",Ac.style.display="none",Ac.removeEventListener("click",this.lB,!1),this.Ye=null)},K(we,{Ye:"currentContextMenu"},function(){return this.Cz},function(t){null!==t&&a(t,Ca,we,"currentContextMenu"),this.Cz=t}),K(we,{HH:"currentObject"},function(){return this.km},function(t){null!==t&&a(t,Pr,we,"currentObject"),this.km=t}),Y(we,{zI:"mouseDownPoint"},function(){return this.vA}),U(Te,Dn),H("DragSelectingTool",Te),Te.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||!t.Fe)return!1;var i=t.C;return!i.left||t.Ea!==this&&(!this.isBeyondDragSize()||i.timestamp-t.Yb.timestamp<this.TB||null!==t.zr(i.S,!0))?!1:!0},Te.prototype.doActivate=function(){var t=this.g;null!==t&&(this.ca=!0,t.Zd=!0,t.Ma=!0,t.add(this.hg),this.doMouseMove())},Te.prototype.doDeactivate=function(){var t=this.g;null!==t&&(t.remove(this.hg),t.Ma=!1,this.ca=t.Zd=!1)},Te.prototype.doMouseMove=function(){if(null!==this.g&&this.ca&&null!==this.hg){var t=this.computeBoxBounds(),i=this.hg.Cd("SHAPE");null===i&&(i=this.hg.Ze()),i.ka=t.size,this.hg.position=t.position}},Te.prototype.doMouseUp=function(){if(this.ca){var t=this.g;t.remove(this.hg);try{t.Fb="wait",this.selectInRect(this.computeBoxBounds())}finally{t.Fb=""}}this.stopTool()},Te.prototype.computeBoxBounds=function(){var t=this.g;return null===t?new Si(0,0,0,0):new Si(t.Yb.S,t.C.S)},Te.prototype.selectInRect=function(t){var i=this.g;if(null!==i){var n=i.C;if(i.ma("ChangingSelection"),t=i.Zi(t,null,function(t){return t instanceof sa?t.canSelect():!1},this.KF),tf?n.Yr:n.control)if(n.shift)for(t=t.i;t.next();)n=t.value,n.Ia&&(n.Ia=!1);else for(t=t.i;t.next();)n=t.value,n.Ia=!n.Ia;else{if(!n.shift){for(var n=new ci(sa),e=i.selection.i;e.next();){var o=e.value;t.contains(o)||n.add(o)}for(n=n.i;n.next();)n.value.Ia=!1}for(t=t.i;t.next();)n=t.value,n.Ia||(n.Ia=!0)}i.ma("ChangedSelection")}},K(Te,{TB:"delay"},function(){return this.tm},function(t){h(t,"number",Te,"delay"),this.tm=t}),K(Te,{KF:"isPartialInclusion"},function(){return this.jA},function(t){h(t,"boolean",Te,"isPartialInclusion"),this.jA=t}),K(Te,{hg:"box"},function(){return this.Gk},function(t){null!==t&&a(t,sa,Te,"box"),this.Gk=t}),U(Se,Dn),H("PanningTool",Se),Se.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return null===t||!t.je&&!t.ke||!t.C.left||t.Ea!==this&&!this.isBeyondDragSize()?!1:!0},Se.prototype.doActivate=function(){var i=this.g;null!==i&&(this.di?(i.C.bubbles=!0,t.document.addEventListener("scroll",this.$A,!1)):(i.Fb="move",i.Zd=!0,this.Zw=i.position.copy()),this.ca=!0)},Se.prototype.doDeactivate=function(){var t=this.g;null!==t&&(t.Fb="",this.ca=t.Zd=!1)},Se.prototype.doCancel=function(){var t=this.g;null!==t&&(t.position=this.Zw,t.Zd=!1),this.stopTool()},Se.prototype.doMouseMove=function(){this.move()},Se.prototype.doMouseUp=function(){this.move(),this.stopTool()},Se.prototype.move=function(){var t=this.g;if(this.ca&&t)if(this.di)t.C.bubbles=!0;else{var i=t.position,n=t.Yb.S,e=t.C.S,o=i.x+n.x-e.x,n=i.y+n.y-e.y;t.je||(o=i.x),t.ke||(n=i.y),t.position=new wi(o,n)}},K(Se,{bubbles:"bubbles"},function(){return this.di},function(t){h(t,"boolean",Se,"bubbles"),this.di=t}),Y(Se,{JI:"originalPosition"},function(){return this.Zw}),H("TextEditingTool",Ce),U(Ce,Dn);var Oc;Ce.LostFocus=Oc=Z(Ce,"LostFocus",0);var zc;Ce.MouseDown=zc=Z(Ce,"MouseDown",1);var Bc;Ce.Tab=Bc=Z(Ce,"Tab",2);var qc;Ce.Enter=qc=Z(Ce,"Enter",3),Ce.SingleClick=Z(Ce,"SingleClick",0);var Ec;Ce.SingleClickSelected=Ec=Z(Ce,"SingleClickSelected",1);var Rc=Z(Ce,"StateNone",0),Ic=Z(Ce,"StateActive",1),Gc=Z(Ce,"StateEditing",2),Vc=Z(Ce,"StateEditing2",3),Hc=Z(Ce,"StateValidating",4),Uc=Z(Ce,"StateValidated",5);K(Ce,{xg:"textBlock"},function(){return this.sx},function(t){null!==t&&a(t,qs,Ce,"textBlock"),this.sx=t}),K(Ce,{Df:"currentTextEditor"},function(){return this.Fz},function(t){this.Fz=t}),K(Ce,{VE:"defaultTextEditor"},function(){return this.Kz},function(t){a(t,Element,Ce,"defaultTextEditor"),this.Kz=t}),K(Ce,{RG:"starting"},function(){return this.ZA},function(t){u(t,Ce,Ce,"starting"),this.ZA=t}),Ce.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return null===t||t.Ta||!t.C.left||this.isBeyondDragSize()?!1:(t=t.Dd(t.C.S,null,function(t){return t instanceof qs}),null!==t&&t.Px&&t.J.canEdit()?(t=t.J,null===t||this.RG===Ec&&!t.Ia?!1:!0):!1)},Ce.prototype.doStart=function(){this.ca||null===this.xg||this.doActivate()},Ce.prototype.doActivate=function(){if(!this.ca){var t=this.g;if(null!==t){var i=this.xg;if(null===i&&(i=t.Dd(t.C.S,function(t){return t instanceof qs?t:null})),null!==i){this.xg=i;var n=i.J;if(null!==n){this.ca=!0,this.Ga=Ic;var e=this.VE,o=!1;if(null!==i.wD&&(e=i.wD),null===e||e.nz||(o=!0),this.dB=this.xg.copy(),t.EG(n.Q),e.nz){var r=i.Ra(Sf),s=t.position,a=t.scale,h=i.Th()*a;h<this.HC&&(h=this.HC),this.Ew=i.sa.width;var n=this.Ew*h,l=i.sa.height*h,u=(r.x-s.x)*a,r=(r.y-s.y)*a;e.value=i.text,t.dk.style.font=i.font,e.style.font="inherit",e.style.fontSize=100*h+"%",e.style.lineHeight="normal",e.style.width=n+6+"px",e.style.height=l+2+"px",e.style.left=(u-n/2|0)-1+"px",e.style.top=(r-l/2|0)-1+"px",e.style.textAlign=i.textAlign,e.style.margin="0",e.style.padding="1px",e.style.border="0",e.style.outline="none",e.style["white-space"]="pre-wrap",e.style.overflow="hidden"}t.dk.appendChild(e),e.style.position="absolute",e.style.zIndex=100,e.className="start",e.textEditingTool=this,e.bJ=h,o&&"function"==typeof e.onActivate&&e.onActivate(),this.Df=e,"function"==typeof e.focus&&e.focus(),"function"==typeof e.select&&this.Ry&&e.select()}}}}},Ce.prototype.doCancel=function(){null!==this.Nj&&(this.Df.style.border=this.Nj,this.Nj=null),this.stopTool()},Ce.prototype.doMouseUp=function(){!this.ca&&this.canStart()&&this.doActivate()},Ce.prototype.doMouseDown=function(){this.ca&&this.acceptText(zc)},Ce.prototype.acceptText=function(t){switch(t){case zc:this.Ga===Uc||this.Ga===Vc?"function"==typeof this.Df.focus&&this.Df.focus():(this.Ga===Ic||this.Ga===Gc)&&(this.Ga=Hc,Ne(this));break;case Oc:case qc:case Bc:if(qc===t&&!0===this.sx.ly)break;(this.Ga===Ic||this.Ga===Gc)&&(this.Ga=Hc,Ne(this))}},Ce.prototype.doDeactivate=function(){var t=this.g;if(null!==t){if(this.Ga=Rc,this.xg=null,null!==this.Df){var i=this.Df;"function"==typeof i.onDeactivate&&i.onDeactivate(),null!==i&&t.dk.removeChild(i)}this.ca=!1}},Ce.prototype.isValidText=function(t,i,n){a(t,qs,Ce,"isValidText:textblock");var e=this.az;return null===e||e(t,i,n)?(e=t.az,null===e||e(t,i,n)?!0:!1):!1},K(Ce,{az:"textValidation"},function(){return this.Rj},function(t){null!==t&&h(t,"function",Ce,"textValidation"),this.Rj=t}),K(Ce,{HC:"minimumEditorScale"},function(){return this.sA},function(t){null!==t&&h(t,"number",Ce,"minimumEditorScale"),this.sA=t}),K(Ce,{Ry:"selectsTextOnActivate"},function(){return this.SA},function(t){null!==t&&h(t,"boolean",Ce,"selectsTextOnActivate"),this.SA=t}),U(Pe,Dn),H("ToolManager",Pe);var Kc;Pe.WheelScroll=Kc=Z(Pe,"WheelScroll",0);var Yc;Pe.WheelZoom=Yc=Z(Pe,"WheelZoom",1),Pe.WheelNone=Z(Pe,"WheelNone",2);var Wc;Pe.GestureZoom=Wc=Z(Pe,"GestureZoom",3);var Xc;Pe.GestureCancel=Xc=Z(Pe,"GestureCancel",4);var Jc;Pe.GestureNone=Jc=Z(Pe,"GestureNone",5),K(Pe,{$r:"mouseWheelBehavior"},function(){return this.wA},function(t){u(t,Pe,Pe,"mouseWheelBehavior"),this.wA=t}),K(Pe,{En:"gestureBehavior"},function(){return this.Wz},function(t){u(t,Pe,Pe,"gestureBehavior"),this.Wz=t}),Pe.prototype.initializeStandardTools=function(){this.qE=new me,this.SC=new ue,this.UF=new ce,this.dD=new de,this.BG=new ye,this.CC=new le,this.Zc=new Fn,this.bF=new Te,this.lG=new Se,this.Ix=new we,this.$y=new Ce,this.EE=new xe,this.FE=new ge},Pe.prototype.doMouseDown=function(){var t=this.g;if(null!==t){var i=t.C;if(i.sk&&this.En===Xc&&(i.bubbles=!1),i.Pr){if(this.En===Jc)return void(i.bubbles=!0);if(this.En===Xc)return;if(t.Ea.canStartMultiTouch())return void t.Ea.standardPinchZoomStart()}i=t.V,i.Ex&&0!==i.de&&v("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");
for(var i=this.ue.length,n=0;i>n;n++){var e=this.ue.Y(n);if(null===e.g&&e.fc(this.g),e.canStart())return t.Ea=e,void(t.Ea===e&&(e.ca||e.doActivate(),e.doMouseDown()))}1===t.C.button&&(this.$r===Kc?this.$r=Yc:this.$r===Yc&&(this.$r=Kc)),this.doActivate(),this.standardWaitAfter(this.pC)}},Pe.prototype.doMouseMove=function(){var t=this.g;if(null!==t){var i=t.C;if(i.Pr){if(this.En===Jc)return void(i.bubbles=!0);if(this.En===Xc)return;if(t.Ea.canStartMultiTouch())return void t.Ea.standardPinchZoomMove()}if(this.ca)for(var i=this.cf.length,n=0;i>n;n++){var e=this.cf.Y(n);if(null===e.g&&e.fc(this.g),e.canStart())return t.Ea=e,void(t.Ea===e&&(e.ca||e.doActivate(),e.doMouseMove()))}this.standardMouseOver(),this.isBeyondDragSize()&&this.standardWaitAfter(this.ca?this.pC:this.wF)}},Pe.prototype.doCurrentObjectChanged=function(t,i){var n=this.$j;null===n||null!==i&&(i===n||i.pk(n))||this.hideToolTip()},Pe.prototype.doWaitAfter=function(){var t=this.g;null!==t&&t.Oa&&(this.doMouseHover(),this.ca||this.doToolTip())},Pe.prototype.doMouseHover=function(){var t=this.g;if(null!==t){var i=t.C;null===i.Jd&&(i.Jd=t.Dd(i.S,null,null));var n=i.Jd;if(null!==n)for(i.rc=!1;null!==n&&(t=this.ca?n.uy:n.vy,null===t||(t(i,n),!i.rc));)n=n.I;else t=this.ca?t.uy:t.vy,null!==t&&t(i)}},Pe.prototype.doToolTip=function(){var t=this.g;if(null!==t){var i=t.C;if(null===i.Jd&&(i.Jd=t.Dd(i.S,null,null)),i=i.Jd,null!==i){if(i!==this.$j&&!i.pk(this.$j)){for(;null!==i;){if(t=i.cz,null!==t)return void this.showToolTip(t,i);i=i.I}this.hideToolTip()}}else t=t.cz,null!==t?this.showToolTip(t,null):this.hideToolTip()}},Pe.prototype.showToolTip=function(t,i){a(t,Ca,Pe,"showToolTip:tooltip"),null!==i&&a(i,Pr,Pe,"showToolTip:obj");var n=this.g;if(null!==n){if(t!==this.$j&&this.hideToolTip(),t.Ne="Tool",t.yk=!1,t.scale=1/n.scale,n.add(t),null!==i&&i!==this.bt){var n=null,e=i.Cn();null!==e&&(n=e.data),t.Xb=i,t.data=n}else null===i&&(t.data=n.U);(null===i||i!==this.bt)&&(t.Ge(),this.positionToolTip(t,i)),this.jw=t,this.bt=i}},Pe.prototype.positionToolTip=function(t){if(null===t.placeholder){var i=this.g;if(null!==i){var n=i.C.S.copy(),e=t.oa,o=i.Va;i.C.sk&&(n.x-=e.width),n.x+e.width>o.right&&(n.x-=e.width+5),n.x<o.x&&(n.x=o.x),n.y=n.y+20+e.height>o.bottom?n.y-(e.height+5):n.y+20,n.y<o.y&&(n.y=o.y),t.position=n}}},Pe.prototype.hideToolTip=function(){if(null!==this.$j){var t=this.g;null!==t&&(this.$j.data=null,this.$j.Xb=null,t.remove(this.$j),this.bt=this.jw=null)}},Y(Pe,{$j:"currentToolTip"},function(){return this.jw}),Pe.prototype.doMouseUp=function(){if(this.cancelWaitAfter(),this.ca){var t=this.g;if(null===t)return;for(var i=this.df.length,n=0;i>n;n++){var e=this.df.Y(n);if(null===e.g&&e.fc(this.g),e.canStart())return t.Ea=e,void(t.Ea===e&&(e.ca||e.doActivate(),e.doMouseUp()))}}this.doDeactivate()},Pe.prototype.doMouseWheel=function(){this.standardMouseWheel()},Pe.prototype.doKeyDown=function(){var t=this.g;null!==t&&t.ib.doKeyDown()},Pe.prototype.doKeyUp=function(){var t=this.g;null!==t&&t.ib.doKeyUp()},Pe.prototype.doCancel=function(){null!==kc&&kc.doCancel(),Dn.prototype.doCancel.call(this)},Pe.prototype.findTool=function(t){h(t,"string",Pe,"findTool:name");for(var i=this.ue.length,n=0;i>n;n++){var e=this.ue.Y(n);if(e.name===t)return e}for(i=this.cf.length,n=0;i>n;n++)if(e=this.cf.Y(n),e.name===t)return e;for(i=this.df.length,n=0;i>n;n++)if(e=this.df.Y(n),e.name===t)return e;return null},Pe.prototype.replaceTool=function(t,i){h(t,"string",Pe,"replaceTool:name"),null!==i&&(a(i,Dn,Pe,"replaceTool:newtool"),i.g&&i.g!==this.g&&r("Cannot share tools between Diagrams: "+i.toString()),i.fc(this.g));for(var n=this.ue.length,e=0;n>e;e++){var o=this.ue.Y(e);if(o.name===t)return null!==i?this.ue.Rf(e,i):this.ue.Dc(e),o}for(n=this.cf.length,e=0;n>e;e++)if(o=this.cf.Y(e),o.name===t)return null!==i?this.cf.Rf(e,i):this.cf.Dc(e),o;for(n=this.df.length,e=0;n>e;e++)if(o=this.df.Y(e),o.name===t)return null!==i?this.df.Rf(e,i):this.df.Dc(e),o;return null},Y(Pe,{ue:"mouseDownTools"},function(){return this.eE}),Y(Pe,{cf:"mouseMoveTools"},function(){return this.fE}),Y(Pe,{df:"mouseUpTools"},function(){return this.gE}),K(Pe,{wF:"hoverDelay"},function(){return this.Zz},function(t){h(t,"number",Pe,"hoverDelay"),this.Zz=t}),K(Pe,{pC:"holdDelay"},function(){return this.Yz},function(t){h(t,"number",Pe,"holdDelay"),this.Yz=t}),K(Pe,{cF:"dragSize"},function(){return this.Nz},function(t){a(t,Ti,Pe,"dragSize"),this.Nz=t.O()}),K(Pe,{qE:"actionTool"},function(){return this.findTool("Action")},function(t){je(this,"Action",t,this.ue)}),K(Pe,{SC:"relinkingTool"},function(){return this.findTool("Relinking")},function(t){je(this,"Relinking",t,this.ue)}),K(Pe,{UF:"linkReshapingTool"},function(){return this.findTool("LinkReshaping")},function(t){je(this,"LinkReshaping",t,this.ue)}),K(Pe,{dD:"resizingTool"},function(){return this.findTool("Resizing")},function(t){je(this,"Resizing",t,this.ue)}),K(Pe,{BG:"rotatingTool"},function(){return this.findTool("Rotating")},function(t){je(this,"Rotating",t,this.ue)}),K(Pe,{CC:"linkingTool"},function(){return this.findTool("Linking")},function(t){je(this,"Linking",t,this.cf)}),K(Pe,{Zc:"draggingTool"},function(){return this.findTool("Dragging")},function(t){je(this,"Dragging",t,this.cf)}),K(Pe,{bF:"dragSelectingTool"},function(){return this.findTool("DragSelecting")},function(t){je(this,"DragSelecting",t,this.cf)}),K(Pe,{lG:"panningTool"},function(){return this.findTool("Panning")},function(t){je(this,"Panning",t,this.cf)}),K(Pe,{Ix:"contextMenuTool"},function(){return this.findTool("ContextMenu")},function(t){je(this,"ContextMenu",t,this.df)}),K(Pe,{$y:"textEditingTool"},function(){return this.findTool("TextEditing")},function(t){je(this,"TextEditing",t,this.df)}),K(Pe,{EE:"clickCreatingTool"},function(){return this.findTool("ClickCreating")},function(t){je(this,"ClickCreating",t,this.df)}),K(Pe,{FE:"clickSelectingTool"},function(){return this.findTool("ClickSelecting")},function(t){je(this,"ClickSelecting",t,this.df)}),H("AnimationManager",Le),Le.prototype.fc=function(t){this.N=t},Le.prototype.prepareAnimation=Le.prototype.vk=function(){this.fe&&(this.pi&&this.Yh(),this.Gc=!0,this.pz=!1)};var Zc={opacity:function(t,i,n,e,o,r){t.opacity=e(o,i,n-i,r)},position:function(t,i,n,e,o,r){o!==r?t.pD(e(o,i.x,n.x-i.x,r),e(o,i.y,n.y-i.y,r)):t.position=new wi(e(o,i.x,n.x-i.x,r),e(o,i.y,n.y-i.y,r))},scale:function(t,i,n,e,o,r){t.scale=e(o,i,n-i,r)},visible:function(t,i,n,e,o,r){t.visible=o!==r?i:n}};Le.prototype.stopAnimation=Le.prototype.Yh=function(){!0===this.Gc&&(this.Gc=!1,this.pz&&this.N.wd()),this.pi&&this.fe&&(Be(this),Ee(this,this.N,this.ZD,this.Dz,this.hw,this.hw,null!==this.Nk&&null!==this.Mk),qe(this),Re(this))},K(Le,{isEnabled:"isEnabled"},function(){return this.fe},function(t){h(t,"boolean",Le,"isEnabled"),this.fe=t}),K(Le,{duration:"duration"},function(){return this.sw},function(t){h(t,"number",Le,"duration"),1>t&&c(t,">= 1",Le,"duration"),this.sw=t}),Y(Le,{jg:"isAnimating"},function(){return this.pi}),Y(Le,{gI:"isTicking"},function(){return this.Jm}),H("Layer",He),He.prototype.fc=function(t){this.N=t},He.prototype.toString=function(t){void 0===t&&(t=0);var i='Layer "'+this.name+'"';if(0>=t)return i;for(var n=0,e=0,o=0,r=0,s=0,a=this.hb.i;a.next();){var h=a.value;h instanceof Th?o++:h instanceof Na?e++:h instanceof Ra?r++:h instanceof Ca?s++:n++}if(a="",n>0&&(a+=n+" Parts "),e>0&&(a+=e+" Nodes "),o>0&&(a+=o+" Groups "),r>0&&(a+=r+" Links "),s>0&&(a+=s+" Adornments "),t>1)for(t=this.hb.i;t.next();)n=t.value,a+="\n    "+n.toString(),e=n.data,null!==e&&V(e)&&(a+=" #"+V(e)),n instanceof Na?a+=" "+mc(e):n instanceof Ra&&(a+=" "+mc(n.M)+" "+mc(n.R));return i+" "+this.hb.count+": "+a},He.prototype.findObjectAt=He.prototype.Dd=function(t,i,n){if(void 0===i&&(i=null),void 0===n&&(n=null),!1===this.Pj)return null;var e=!1;this.g.Va.na(t)&&(e=!0);for(var o=C(),r=this.hb.l,s=r.length;s--;){var a=r[s];if((!0!==e||!1!==ba(a))&&a.qa()&&(o.assign(t),Mi(o,a.We),a=a.Dd(o,i,n),null!==a&&(null!==i&&(a=i(a)),null!==a&&(null===n||n(a)))))return P(o),a}return P(o),null},He.prototype.findObjectsAt=He.prototype.yr=function(t,i,n,e){if(void 0===i&&(i=null),void 0===n&&(n=null),e instanceof ci||e instanceof di||(e=new di(Pr)),!1===this.Pj)return e;var o=!1;this.g.Va.na(t)&&(o=!0);for(var r=C(),s=this.hb.l,a=s.length;a--;){var h=s[a];!0===o&&!1===ba(h)||!h.qa()||(r.assign(t),Mi(r,h.We),h.yr(r,i,n,e)&&(null!==i&&(h=i(h)),null===h||null!==n&&!n(h)||e.add(h)))}return P(r),e},He.prototype.findObjectsIn=He.prototype.Zi=function(t,i,n,e,o){if(void 0===i&&(i=null),void 0===n&&(n=null),void 0===e&&(e=!1),o instanceof ci||o instanceof di||(o=new di(Pr)),!1===this.Pj)return o;var r=!1;this.g.Va.Wi(t)&&(r=!0);for(var s=this.hb.l,a=s.length;a--;){var h=s[a];(!0!==r||!1!==ba(h))&&h.qa()&&h.Zi(t,i,n,e,o)&&(null!==i&&(h=i(h)),null===h||null!==n&&!n(h)||o.add(h))}return o},He.prototype.Rx=function(t,i,n,e,o,r,s){if(!1===this.Pj)return o;for(var a=this.hb.l,h=a.length;h--;){var l=a[h];(!0!==s||!1!==ba(l))&&r(l)&&l.qa()&&l.Zi(t,i,n,e,o)&&(null!==i&&(l=i(l)),null===l||null!==n&&!n(l)||o.add(l))}return o},He.prototype.findObjectsNear=He.prototype.Fl=function(t,i,n,e,o,r){if(void 0===n&&(n=null),void 0===e&&(e=null),void 0===o&&(o=!0),!1!==o&&!0!==o&&((o instanceof ci||o instanceof di)&&(r=o),o=!0),r instanceof ci||r instanceof di||(r=new di(Pr)),!1===this.Pj)return r;var s=!1;this.g.Va.na(t)&&(s=!0);for(var a=C(),h=C(),l=this.hb.l,u=l.length;u--;){var f=l[u];!0===s&&!1===ba(f)||!f.qa()||(a.assign(t),Mi(a,f.We),h.k(t.x+i,t.y),Mi(h,f.We),f.Fl(a,h,n,e,o,r)&&(null!==n&&(f=n(f)),null===f||null!==e&&!e(f)||r.add(f)))}return P(a),P(h),r},Wu=He.prototype,Wu.Oe=function(t,i){if(this.visible){var n;n=void 0===i?t.Va:i;for(var e=this.hb.l,o=e.length,r=0;o>r;r++){var s=e[r];if(s.pA=r,!(s instanceof Ra&&!1===s.yf)){if(s instanceof Ca){var a=s;if(null!==a.Yg)continue}if(ji(s.Q,n))for(s.Oe(!0),ha(s),s=s.xu;s.next();)a=s.value,Or(a,1/0,1/0),a.ac(),a.Oe(!0);else s.Oe(!1),null!==s.xu&&0<s.xu.count&&ha(s)}}}},Wu.oe=function(t,i,n,e){if(this.visible&&0!==this.ic&&(void 0===e&&(e=!0),e||!this.bc)){1!==this.ic&&(t.globalAlpha=this.ic),n=this.Ut,n.length=0,e=i.scale;for(var o=this.hb.l,r=o.length,s=0;r>s;s++){var a=o[s];if(ba(a)||Ss(a)){if(a instanceof Ra){var h=a;if(h.Ib&&n.push(h),!1===h.yf)continue}h=a.Q,1<h.width*e||1<h.height*e?a.oe(t,i):va(a,t)}}t.globalAlpha=1}},Wu.h=function(t,i,n,e,o){var r=this.g;null!==r&&r.ec(cc,t,this,i,n,e,o)},Wu.Hn=function(t,i,n){var e=this.hb;if(i.Ct=this,t>=e.count)t=e.count;else if(e.Y(t)===i)return-1;return e.qd(t,i),i.Ir(n),e=this.g,null!==e&&(n?e.ba():e.Hn(i)),i instanceof Th&&this.Ev(i),t},Wu.Yd=function(t,i,n){if(!n&&i.layer!==this&&null!==i.layer)return i.layer.Yd(t,i,n);var e=this.hb;if(0>t||t>=e.length){if(t=e.indexOf(i),0>t)return-1}else if(e.Y(t)!==i&&(t=e.indexOf(i),0>t))return-1;return i.Jr(n),e.Dc(t),e=this.g,null!==e&&(n?e.ba():e.Yd(i)),i.Ct=null,t},Wu.Ev=function(t){for(;null!==t;){if(t.layer===this){var i=t;if(0!==i.mc.count){for(var n=-1,e=-1,o=this.hb.l,r=o.length,s=0;r>s;s++){var a=o[s];if(a===i&&(n=s,e>=0))break;if(0>e&&a.Ba===i&&(e=s,n>=0))break}!(0>e)&&n>e&&(o=this.hb,o.Dc(n),o.qd(e,i))}}t=t.Ba}},Wu.clear=function(){for(var t=this.hb.ce(),i=t.length,n=0;i>n;n++)t[n].Oe(!1),this.Yd(-1,t[n],!1)},Y(He,{cj:"parts"},function(){return this.hb.i}),Y(He,{MI:"partsBackwards"},function(){return this.hb.Kl}),Y(He,{g:"diagram"},function(){return this.N}),K(He,{name:"name"},function(){return this.yb},function(t){h(t,"string",He,"name");var i=this.yb;if(i!==t){var n=this.g;if(null!==n)for(""===i&&r("Cannot rename default Layer to: "+t),n=n.hv;n.next();)n.value.name===t&&r("Layer.name is already present in this diagram: "+t);for(this.yb=t,this.h("name",i,t),t=this.hb.i;t.next();)t.value.Ne=this.yb}}),K(He,{opacity:"opacity"},function(){return this.ic},function(t){var i=this.ic;i!==t&&(h(t,"number",He,"opacity"),(0>t||t>1)&&c(t,"0 <= value <= 1",He,"opacity"),this.ic=t,this.h("opacity",i,t),t=this.g,null!==t&&t.ba())}),K(He,{bc:"isTemporary"},function(){return this.Kw},function(t){var i=this.Kw;i!==t&&(h(t,"boolean",He,"isTemporary"),this.Kw=t,this.h("isTemporary",i,t))}),K(He,{visible:"visible"},function(){return this.xx},function(t){var i=this.xx;if(i!==t){for(h(t,"boolean",He,"visible"),this.xx=t,this.h("visible",i,t),i=this.hb.i;i.next();)i.value.$d(t);t=this.g,null!==t&&t.ba()}}),K(He,{Qf:"pickable"},function(){return this.Pj},function(t){var i=this.Pj;i!==t&&(h(t,"boolean",He,"pickable"),this.Pj=t,this.h("pickable",i,t))}),K(He,{tC:"isBoundsIncluded"},function(){return this.Fw},function(t){this.Fw!==t&&(this.Fw=t,null!==this.g&&this.g.Rb())}),K(He,{Ui:"allowCopy"},function(){return this.gj},function(t){var i=this.gj;i!==t&&(h(t,"boolean",He,"allowCopy"),this.gj=t,this.h("allowCopy",i,t))}),K(He,{sl:"allowDelete"},function(){return this.hj},function(t){var i=this.hj;i!==t&&(h(t,"boolean",He,"allowDelete"),this.hj=t,this.h("allowDelete",i,t))}),K(He,{Cu:"allowTextEdit"},function(){return this.qj},function(t){var i=this.qj;i!==t&&(h(t,"boolean",He,"allowTextEdit"),this.qj=t,this.h("allowTextEdit",i,t))}),K(He,{zu:"allowGroup"},function(){return this.ij},function(t){var i=this.ij;i!==t&&(h(t,"boolean",He,"allowGroup"),this.ij=t,this.h("allowGroup",i,t))}),K(He,{Du:"allowUngroup"},function(){return this.rj},function(t){var i=this.rj;i!==t&&(h(t,"boolean",He,"allowUngroup"),this.rj=t,this.h("allowUngroup",i,t))}),K(He,{jr:"allowLink"},function(){return this.jj},function(t){var i=this.jj;i!==t&&(h(t,"boolean",He,"allowLink"),this.jj=t,this.h("allowLink",i,t))}),K(He,{tl:"allowRelink"},function(){return this.lj},function(t){var i=this.lj;i!==t&&(h(t,"boolean",He,"allowRelink"),this.lj=t,this.h("allowRelink",i,t))}),K(He,{Xj:"allowMove"},function(){return this.kj},function(t){var i=this.kj;i!==t&&(h(t,"boolean",He,"allowMove"),this.kj=t,this.h("allowMove",i,t))}),K(He,{Au:"allowReshape"},function(){return this.mj},function(t){var i=this.mj;i!==t&&(h(t,"boolean",He,"allowReshape"),this.mj=t,this.h("allowReshape",i,t))}),K(He,{kr:"allowResize"},function(){return this.nj},function(t){var i=this.nj;i!==t&&(h(t,"boolean",He,"allowResize"),this.nj=t,this.h("allowResize",i,t))}),K(He,{Bu:"allowRotate"},function(){return this.oj},function(t){var i=this.oj;i!==t&&(h(t,"boolean",He,"allowRotate"),this.oj=t,this.h("allowRotate",i,t))}),K(He,{Fe:"allowSelect"},function(){return this.pj},function(t){var i=this.pj;i!==t&&(h(t,"boolean",He,"allowSelect"),this.pj=t,this.h("allowSelect",i,t))}),H("Diagram",Ke),Ke.prototype.toString=function(t){void 0===t&&(t=0);var i="";if(this.id&&(i=this.id),this.dk&&this.dk.id&&(i=this.dk.id),i='Diagram "'+i+'"',0>=t)return i;for(var n=this.Db.i;n.next();)i+="\n  "+n.value.toString(t-1);return i},Ke.prototype.checkProperties=function(){void 0===Ju?Ju=new di(Object):Ju.clear(),Zu=new ri,ni("",this);var t=Zu.toString();return Zu=null,t},Ke.fromDiv=function(i){var n=i;return"string"==typeof i&&(n=t.document.getElementById(i)),n instanceof HTMLDivElement&&n.N instanceof Ke?n.N:null},K(Ke,{dk:"div"},function(){return this.ob},function(i){if(null!==i&&a(i,HTMLDivElement,Ke,"div"),this.ob!==i){ed=[];var n=this.ob;null!==n?(n.N=void 0,n.innerHTML="",null!==this.Oa&&(this.Oa.removeEventListener("touchstart",this.BD,!1),this.Oa.removeEventListener("touchmove",this.AD,!1),this.Oa.removeEventListener("touchend",this.zD,!1),this.Oa.Yc.N=null),n=this.Xa,null!==n&&(n.ue.each(function(t){t.cancelWaitAfter()}),n.cf.each(function(t){t.cancelWaitAfter()}),n.df.each(function(t){t.cancelWaitAfter()})),n.cancelWaitAfter(),this.Ea.doCancel(),this.Wf=this.Oa=null,t.removeEventListener("resize",this.LD,!1),t.removeEventListener("mousemove",this.Tn,!0),t.removeEventListener("mousedown",this.Sn,!0),t.removeEventListener("mouseup",this.Vn,!0),t.removeEventListener("mousewheel",this.ng,!0),t.removeEventListener("DOMMouseScroll",this.ng,!0),t.removeEventListener("mouseout",this.Un,!0)):this.Ce=!1,this.ob=null,null!==i&&((n=i.N)&&(n.dk=null),br(this,i),this.Jy())}}),Ke.prototype.computePixelRatio=function(){if(null!==this.pl)return this.pl;var i=this.Wf;return(t.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1)},Ke.prototype.doMouseMove=function(){this.Ea.doMouseMove()},Ke.prototype.doMouseDown=function(){this.Ea.doMouseDown()},Ke.prototype.doMouseUp=function(){this.Ea.doMouseUp()},Ke.prototype.doMouseWheel=function(){this.Ea.doMouseWheel()},Ke.prototype.doKeyDown=function(){this.Ea.doKeyDown()},Ke.prototype.doKeyUp=function(){this.Ea.doKeyUp()},Ke.prototype.focus=Ke.prototype.focus=function(){this.Oa&&this.Oa.focus()},Ke.prototype.zA=function(){if(this.N.isEnabled){var t=this.N;if(t.ex&&null!==t.Oa){t.Zt=!0;var i=t.Xc,n=t.Va,e=i.width,o=n.width,r=i.height,s=n.height,a=i.right,h=n.right,l=i.bottom,u=n.bottom,f=i.x,c=n.x,i=i.y,n=n.y,p=t.scale;if(e>o||r>s){var d=C();this.QA&&t.je?(d.k(this.scrollLeft/p+f,t.position.y),t.position=d):this.RA&&t.ke&&(d.k(t.position.x,this.scrollTop/p+i),t.position=d),P(d),t.Zt=!1,t.Ok=!1}else d=C(),this.QA&&t.je&&(c>f&&(t.position=new wi(this.scrollLeft+f,t.position.y)),a>h&&(t.position=new wi(-(t.Gi.scrollWidth-t.eb)+this.scrollLeft-t.eb/p+t.Xc.right,t.position.y))),this.RA&&t.ke&&(n>i&&(t.position=new wi(t.position.x,this.scrollTop+i)),l>u&&(t.position=new wi(t.position.x,-(t.Hi.scrollHeight-t.cb)+this.scrollTop-t.cb/p+t.Xc.bottom))),P(d),To(t),t.Zt=!1,t.Ok=!1,i=t.Xc,n=t.Va,a=i.right,h=n.right,l=i.bottom,u=n.bottom,f=i.x,c=n.x,i=i.y,n=n.y,o>=e&&f>=c&&h>=a&&(t.gx.style.width="1px"),s>=r&&i>=n&&u>=l&&(t.hx.style.height="1px")}}else No(this.N)},Ke.prototype.Rt=function(){this.N.isEnabled?this.N.ex=!0:No(this.N)},Ke.prototype.computeBounds=Ke.prototype.Bf=function(){return 0<this.nf.count&&go(this),to(this)},Ke.prototype.computePartsBounds=function(t){var i=null;for(t=t.i;t.next();){var n=t.value;n instanceof Ra||(n.Ge(),null===i?i=n.Q.copy():i.fh(n.Q))}return null===i?new Si(0/0,0/0,0,0):i},Ke.prototype.zoomToFit=Ke.prototype.zoomToFit=function(){this.scale=no(this,$c)},Ke.prototype.zoomToRect=function(t,i){void 0===i&&(i=$c);var n=t.width,e=t.height;if(!(0===n||0===e||isNaN(n)&&isNaN(e))){var o=1;if(i===$c||i===_c)if(isNaN(n))o=this.Va.height*this.scale/e;else if(isNaN(e))o=this.Va.width*this.scale/n;else var o=this.eb,r=this.cb,o=i===_c?r/e>o/n?(r-(this.Aj?this.Uc:0))/e:(o-(this.Bj?this.Uc:0))/n:Math.min(r/e,o/n);this.scale=o,this.position=new wi(t.x,t.y)}},K(Ke,{gy:null},function(){return this.Ub},function(t){this.Ub=t}),Ke.prototype.alignDocument=function(t,i){this.sh&&tr(this,this.Bf());var n=this.Xc,e=this.Va,o=this.Ub;this.Ub=!0,this.position=new wi(n.x+(t.x*n.width+t.offsetX)-(i.x*e.width-i.offsetX),n.y+(t.y*n.height+t.offsetY)-(i.y*e.height-i.offsetY)),this.Ub=o,this.ba()},Ke.prototype.findPartAt=Ke.prototype.zr=function(t,i){var n=i?oo(this,t,function(t){return t.J},function(t){return t.canSelect()}):oo(this,t,function(t){return t.J});return n instanceof sa?n:null},Ke.prototype.findObjectAt=Ke.prototype.Dd=function(t,i,n){void 0===i&&(i=null),void 0===n&&(n=null),go(this);for(var e=this.Db.Kl;e.next();){var o=e.value;if(o.visible&&(o=o.Dd(t,i,n),null!==o))return o}return null},Ke.prototype.findObjectsAt=Ke.prototype.yr=function(t,i,n,e){void 0===i&&(i=null),void 0===n&&(n=null),e instanceof ci||e instanceof di||(e=new di(Pr)),go(this);for(var o=this.Db.Kl;o.next();){var r=o.value;r.visible&&r.yr(t,i,n,e)}return e},Ke.prototype.findObjectsIn=Ke.prototype.Zi=function(t,i,n,e,o){void 0===i&&(i=null),void 0===n&&(n=null),void 0===e&&(e=!1),o instanceof ci||o instanceof di||(o=new di(Pr)),go(this);for(var r=this.Db.Kl;r.next();){var s=r.value;s.visible&&s.Zi(t,i,n,e,o)}return o},Ke.prototype.Rx=function(t,i,n,e,o,r){var s=new di(Pr);go(this);for(var a=this.Db.Kl;a.next();){var h=a.value;h.visible&&h.Rx(t,i,n,e,s,o,r)}return s},Ke.prototype.findObjectsNear=Ke.prototype.Fl=function(t,i,n,e,o,r){void 0===n&&(n=null),void 0===e&&(e=null),void 0===o&&(o=!0),!1!==o&&!0!==o&&((o instanceof ci||o instanceof di)&&(r=o),o=!0),r instanceof ci||r instanceof di||(r=new di(Pr)),go(this);for(var s=this.Db.Kl;s.next();){var a=s.value;a.visible&&a.Fl(t,i,n,e,o,r)}return r},Ke.prototype.acceptEvent=function(t){var i=this.jc;return this.jc=this.sb,this.sb=i,ao(this,this,t,i,t instanceof MouseEvent),i},Ke.prototype.NF=function(t){if(!this.N.isEnabled)return!1;var i=this.N.sb;switch(ao(this.N,this.N,t,i,!1),i.key=String.fromCharCode(t.which),i.ek=!0,t.which){case 8:i.key="Backspace";break;case 33:i.key="PageUp";break;case 34:i.key="PageDown";break;case 35:i.key="End";break;case 36:i.key="Home";break;case 37:i.key="Left";break;case 38:i.key="Up";break;case 39:i.key="Right";break;case 40:i.key="Down";break;case 45:i.key="Insert";break;case 46:i.key="Del";break;case 48:i.key="0";break;case 187:case 61:case 107:i.key="Add";break;case 189:case 173:case 109:i.key="Subtract";break;case 27:i.key="Esc"}return this.N.doKeyDown(),187!==t.which&&189!==t.which&&48!==t.which&&107!==t.which&&109!==t.which&&61!==t.which&&173!==t.which||!0!==t.ctrlKey?uo(i,t):(t.cancelBubble=!0,t.preventDefault(),t.stopPropagation(),!1)},Ke.prototype.OF=function(t){if(!this.N.isEnabled)return!1;var i=this.N.sb;switch(ao(this.N,this.N,t,i,!1),i.key=String.fromCharCode(t.which),i.up=!0,t.which){case 8:i.key="Backspace";break;case 33:i.key="PageUp";break;case 34:i.key="PageDown";break;case 35:i.key="End";break;case 36:i.key="Home";break;case 37:i.key="Left";break;case 38:i.key="Up";break;case 39:i.key="Right";break;case 40:i.key="Down";break;case 45:i.key="Insert";break;case 46:i.key="Del";break;case 93:t.preventDefault()}return this.N.doKeyUp(),uo(i,t)},Ke.prototype.cp=function(t){var i=this.Oa;if(null===i)return new wi(0,0);var n=this.eb,e=this.cb,i=i.getBoundingClientRect(),n=t.clientX-n/i.width*i.left;return t=t.clientY-e/i.height*i.top,null!==this.ld?(t=new wi(n,t),Mi(t,this.ld),t):new wi(n,t)},Ke.prototype.invalidateDocumentBounds=Ke.prototype.Rb=function(){this.sh||(this.sh=!0,this.wd(!0))},Ke.prototype.redraw=Ke.prototype.Jy=function(){this.Ub||this.Qc||(this.ba(),Mo(this),To(this),this.Rb(),this.te())},Ke.prototype.isUpdateRequested=function(){return this.Ve},Ke.prototype.delayInitialization=Ke.prototype.WE=function(t){void 0===t&&(t=null);var i=this.qb,e=i.isEnabled;i.Yh(),i.isEnabled=!1,vo(this),this.Ce=!1,i.isEnabled=e,null!==t&&n(t,1)},Ke.prototype.requestUpdate=Ke.prototype.wd=function(t){if(void 0===t&&(t=!1),!0!==this.Ve&&!(this.Ub||!1===t&&this.Qc)){this.Ve=!0;var i=this;requestAnimationFrame(function(){i.Ve&&i.te()})}},Ke.prototype.maybeUpdate=Ke.prototype.te=function(){(!this.ym||this.Ve)&&(this.ym&&(this.ym=!1),vo(this))},Ke.prototype.Oe=function(t,i,n,e){var o=this.hh;if(this.Ej||o.jg)for(o=0;i>o;o++)t[o].Oe(n,e)},Ke.prototype.oe=function(t,i){void 0===t&&(t=this.Wf),void 0===i&&(i=null),null===this.ob&&r("No div specified");var n=this.Oa;if(null===n&&r("No canvas specified"),this.hh.Gc)0===this.V.de&&this.wd(!0);else{So(this);var e=t!==this.Wf,o=this.Db.l,s=o.length,a=this;if(this.Oe(o,s,a),e)Qe(this,t),To(this);else if(!this.ed&&null===i)return;var h=this.xa,l=this.Eb,u=Math.round(h.x*l)/l,f=Math.round(h.y*l)/l,s=this.ld;for(s.reset(),1!==l&&s.scale(l),0===h.x&&0===h.y||s.translate(-u,-f),h=this.Ee,Qu?(n.width=n.width,Qe(this,t),t.scale(h,h)):(t.setTransform(1,0,0,1,0,0),t.scale(h,h),t.clearRect(0,0,this.eb,this.cb)),t.miterLimit=9,t.setTransform(1,0,0,1,0,0),t.scale(h,h),t.transform(s.m11,s.m12,s.m21,s.m22,s.dx,s.dy),n=null!==i?function(n){var e=t,o=i;if(n.visible&&0!==n.ic){1!==n.ic&&(e.globalAlpha=n.ic);var r=n.Ut;r.length=0;var s=a.scale;n=n.hb.l;for(var h=n.length,l=0;h>l;l++){var u=n[l];if((ba(u)||Ss(u))&&!o.contains(u)){if(u instanceof Ra){var f=u;if(f.Ib&&r.push(f),!1===f.yf)continue}f=u.Q,1<f.width*s||1<f.height*s?u.oe(e,a):va(u,e)}}e.globalAlpha=1}}:function(i){i.oe(t,a)},wo(this,t),s=o.length,h=0;s>h;h++)n(o[h]);this.Cj?xr(this.Cj,this)&&this.Rv():this.cp=function(){return new wi(0,0)},e?(Qe(this),To(this)):this.ed=this.Ej=!1}},Ke.prototype.getRenderingHint=Ke.prototype.Wx=function(t){return this.Pg[t]},Ke.prototype.setRenderingHint=Ke.prototype.KG=function(t,i){this.Pg[t]=i,this.Jy()},Ke.prototype.resetRenderingHints=Ke.prototype.$C=function(){this.Pg=new si,this.Pg.drawShadows=!0,this.Pg.textGreeking=!0,this.Pg.viewportOptimizations=nf?!1:!0,this.Pg.temporaryPixelRatio=!0},Ke.prototype.getInputOption=Ke.prototype.Ux=function(t){return this.gp[t]},Ke.prototype.setInputOption=function(t,i){this.gp[t]=i},Ke.prototype.resetInputOptions=Ke.prototype.ZC=function(){this.gp=new si,this.gp.extraTouchArea=10,this.gp.extraTouchThreshold=10},Ke.prototype.setProperties=function(t){_(this,t)},Ke.prototype.ba=function(t){if(void 0===t&&(t=null),null===t)this.ed=!0,this.wd();else{var i=this.Va;null!==t&&t.w()&&i.If(t)&&(this.ed=!0,this.wd())}for(i=this.al.i;i.next();)i.value.ba(t)},Ke.prototype.ay=function(t,i){if(!0!==this.ed){this.ed=!0;var n=!0===this.Wx("temporaryPixelRatio");if(!0===this.Wx("viewportOptimizations")&&this.hD!==ap&&this.gD.Qu(0,0,0,0)&&i.width===t.width&&i.height===t.height){var e=this.scale,o=D(),r=Math.max(t.x,i.x),s=Math.max(t.y,i.y),a=Math.min(t.x+t.width,i.x+i.width),h=Math.min(t.y+t.height,i.y+i.height);if(o.x=r,o.y=s,o.width=Math.max(0,a-r)*e,o.height=Math.max(0,h-s)*e,0<o.width&&0<o.height){if(!this.Qc&&(this.Ve=!1,null!==this.ob)){this.Qc=!0,go(this),0!==this.Lk.count&&(ko(this),go(this)),this.Xc.w()||tr(this,this.Bf());var l=this.Oa;if(null!==l){var u=this.Ee,s=this.eb*u,a=this.cb*u,r=this.scale*u,e=Math.round(Math.round(i.x*r)-Math.round(t.x*r)),r=Math.round(Math.round(i.y*r)-Math.round(t.y*r)),h=this.rw,f=this.Sz;h.width!==s&&(h.width=s),h.height!==a&&(h.height=a),f.clearRect(0,0,s,a);var h=190*this.Ee,c=70*this.Ee,p=Math.max(e,0),d=Math.max(r,0),v=Math.floor(s-p),y=Math.floor(a-d);f.qC=!1,f.drawImage(l.Yc,p,d,v,y,0,0,v,y),xr(this.Cj,this)&&f.clearRect(0,0,h,c);var l=E(),f=E(),y=Math.abs(e),v=Math.abs(r),g=0===p?0:s-y,p=N(g,0),y=N(y+g,a);f.push(new Si(Math.min(p.x,y.x),Math.min(p.y,y.y),Math.abs(p.x-y.x),Math.abs(p.y-y.y)));var m=this.ld;m.reset(),m.scale(u,u),1!==this.Eb&&m.scale(this.Eb),u=this.xa,(0!==u.x||0!==u.y)&&isFinite(u.x)&&isFinite(u.y)&&m.translate(-u.x,-u.y),Mi(p,m),Mi(y,m),l.push(new Si(Math.min(p.x,y.x),Math.min(p.y,y.y),Math.abs(p.x-y.x),Math.abs(p.y-y.y))),g=0===d?0:a-v,p.k(0,g),y.k(s,v+g),f.push(new Si(Math.min(p.x,y.x),Math.min(p.y,y.y),Math.abs(p.x-y.x),Math.abs(p.y-y.y))),Mi(p,m),Mi(y,m),l.push(new Si(Math.min(p.x,y.x),Math.min(p.y,y.y),Math.abs(p.x-y.x),Math.abs(p.y-y.y))),xr(this.Cj,this)&&(s=e>0?0:-e,a=r>0?0:-r,p.k(s,a),y.k(h+s,c+a),f.push(new Si(Math.min(p.x,y.x),Math.min(p.y,y.y),Math.abs(p.x-y.x),Math.abs(p.y-y.y))),Mi(p,m),Mi(y,m),l.push(new Si(Math.min(p.x,y.x),Math.min(p.y,y.y),Math.abs(p.x-y.x),Math.abs(p.y-y.y)))),P(p),P(y),po(this,!1),xo(this,l,f,e,r),R(l),R(f),this.Qc=!1}}}else this.te();F(o),n&&(this.pl=1,this.te(),Je(this,!0))}else n?(this.pl=1,this.te(),Je(this,!0)):this.te();for(n=this.al.i;n.next();)n.value.ay()}},Ke.prototype.add=Ke.prototype.add=function(t){a(t,sa,Ke,"add:part");var i=t.g;if(i!==this){null!==i&&r("Cannot add part "+t.toString()+" to "+this.toString()+". It is already a part of "+i.toString()),this.$l&&(t.Gj="Tool");var n=t.Ne,i=this.wr(n);null===i&&(i=this.wr("")),null===i&&r('Cannot add a Part when unable find a Layer named "'+n+'" and there is no default Layer'),t.layer!==i&&(n=i.Hn(99999999,t,t.g===this),n>=0&&this.ec(pc,"parts",i,null,t,null,n),i.bc||this.Rb(),t.v(rd),n=t.Rr,null!==n&&n(t,null,i))}},Ke.prototype.Hn=function(t){if(t instanceof Na){if(this.Vm.add(t),t instanceof Th){var i=t.Ba;null===i?this.Sj.add(t):i.Tm.add(t),i=t.ub,null!==i&&(i.g=this)}}else t instanceof Ra?this.Rm.add(t):t instanceof Ca||this.hb.add(t);var n=this;cs(t,function(t){Eo(n,t)}),t.tb&&t.H(),i=t.data,null!==i&&(t instanceof Ca||(t instanceof Ra?this.vj.add(i,t):this.nh.add(i,t)),cs(t,function(t){Bo(n,t)})),!0!==$r(t)&&!0!==ga(t)||this.nf.add(t),da(t,!0,this),Sa(t)?(t.Q.w()&&this.ba(ca(t,t.Q)),this.Rb()):t.qa()&&t.Q.w()&&this.ba(ca(t,t.Q)),this.wd()},Ke.prototype.Yd=function(t){if(t.nr(),t instanceof Na){if(this.Vm.remove(t),t instanceof Th){var i=t.Ba;null===i?this.Sj.remove(t):i.Tm.remove(t),i=t.ub,null!==i&&(i.g=null)}}else t instanceof Ra?this.Rm.remove(t):t instanceof Ca||this.hb.remove(t);var n=this;cs(t,function(t){Io(n,t)}),i=t.data,null!==i&&(t instanceof Ca||(t instanceof Ra?this.vj.remove(i):this.nh.remove(i)),cs(t,function(t){qo(n,t)})),this.nf.remove(t),Sa(t)?(t.Q.w()&&this.ba(ca(t,t.Q)),this.Rb()):t.qa()&&t.Q.w()&&this.ba(ca(t,t.Q)),this.wd()},Ke.prototype.remove=Ke.prototype.remove=function(t){a(t,sa,Ke,"remove:part"),t.Ia=!1,t.kg=!1;var i=t.layer;if(null!==i&&i.g===this){t.v(sd),t.El();var n=i.Yd(-1,t,!1);n>=0&&this.ec(dc,"parts",i,t,null,n,null),n=t.Rr,null!==n&&n(t,i,null)}},Ke.prototype.removeParts=Ke.prototype.Ny=function(t,i){if(g(t))for(var n=x(t),e=0;n>e;e++){var o=w(t,e);i&&!o.canDelete()||this.remove(o)}else for(o=new di(sa),o.md(t),n=o.i;n.next();)o=n.value,i&&!o.canDelete()||this.remove(o)},Ke.prototype.copyParts=Ke.prototype.wn=function(t,i,n){return this.ib.wn(t,i,n)},Ke.prototype.moveParts=Ke.prototype.moveParts=function(t,i,n){a(i,wi,Ke,"moveParts:offset");var e=this.Xa;if(null!==e){e=e.Zc,null===e&&(e=new Fn,e.fc(this));var o=new bi(sa,Object);if(null!==t)t=t.i;else{for(t=this.cj;t.next();)Bn(e,o,t.value,n);for(t=this.Of;t.next();)Bn(e,o,t.value,n);t=this.links}for(;t.next();)Bn(e,o,t.value,n);e.moveParts(o,i,n)}},Ke.prototype.addLayer=Ke.prototype.fr=function(t){Po(this,t,null),t.fc(this);var i=this.Db,n=i.count-1;if(!t.bc)for(;n>=0&&i.Y(n).bc;)n--;i.qd(n+1,t),null!==this.gd&&this.ec(pc,"layers",this,null,t,null,n+1),this.ba(),this.Rb()},Ke.prototype.addLayerBefore=Ke.prototype.uE=function(t,i){Po(this,t,i),t.fc(this);var n=this.Db,e=n.indexOf(t);e>=0&&(n.remove(t),null!==this.gd&&this.ec(dc,"layers",this,t,null,e,null));for(var o=n.count,r=0;o>r;r++)if(n.Y(r)===i){n.qd(r,t);break}null!==this.gd&&this.ec(pc,"layers",this,null,t,null,r),this.ba(),0>e&&this.Rb()},Ke.prototype.addLayerAfter=function(t,i){Po(this,t,i),t.fc(this);var n=this.Db,e=n.indexOf(t);e>=0&&(n.remove(t),null!==this.gd&&this.ec(dc,"layers",this,t,null,e,null));for(var o=n.count,r=0;o>r;r++)if(n.Y(r)===i){n.qd(r+1,t);break}null!==this.gd&&this.ec(pc,"layers",this,null,t,null,r+1),this.ba(),0>e&&this.Rb()},Ke.prototype.removeLayer=function(t){if(a(t,He,Ke,"removeLayer:layer"),t.g!==this&&r("Cannot remove a Layer from another Diagram: "+t+" of "+t.g),""!==t.name){var i=this.Db,n=i.indexOf(t);if(i.remove(t)){for(i=t.hb.copy().i;i.next();){var e=i.value,o=e.Ne;e.Ne=o!==t.name?o:""}null!==this.gd&&this.ec(dc,"layers",this,t,null,n,null),this.ba(),this.Rb()}}},Ke.prototype.findLayer=Ke.prototype.wr=function(t){for(var i=this.hv;i.next();){var n=i.value;if(n.name===t)return n}return null},Ke.prototype.addChangedListener=Ke.prototype.yx=function(t){h(t,"function",Ke,"addChangedListener:listener"),null===this.fi&&(this.fi=new ci("function")),this.fi.add(t)},Ke.prototype.removeChangedListener=Ke.prototype.Ky=function(t){h(t,"function",Ke,"removeChangedListener:listener"),null!==this.fi&&(this.fi.remove(t),0===this.fi.count&&(this.fi=null))},Ke.prototype.Hu=function(t){if(this.Ma||this.V.oC(t),t.Vc!==fc&&(this.dh=!0),null!==this.fi){var i=this.fi,n=i.length;if(1===n)(i=i.Y(0))(t);else if(0!==n)for(var e=i.ce(),o=0;n>o;o++)(i=e[o])(t)}},Ke.prototype.raiseChangedEvent=Ke.prototype.ec=function(t,i,n,e,o,r,s){void 0===r&&(r=null),void 0===s&&(s=null);var a=new rn;a.g=this,a.Vc=t,a.propertyName=i,a.object=n,a.oldValue=e,a.Pf=r,a.newValue=o,a.Nf=s,this.Hu(a)},Ke.prototype.raiseChanged=Ke.prototype.h=function(t,i,n,e,o){this.ec(cc,t,this,i,n,e,o)},Y(Ke,{qb:"animationManager"},function(){return this.hh}),Y(Ke,{V:"undoManager"},function(){return this.gd.V}),K(Ke,{Ma:"skipsUndoManager"},function(){return this.Eh},function(t){h(t,"boolean",Ke,"skipsUndoManager"),this.Eh=t,this.gd.Eh=t}),K(Ke,{Ox:"delaysLayout"},function(){return this.nw
},function(t){this.nw=t}),Ke.prototype.wl=function(t,i){if(null!==t&&t.g===this){var n=t.Vc;if(n===cc){var e=t.object,n=t.propertyName,o=t.ha(i);$(e,n,o),e instanceof Pr&&(e=e.J,null!==e&&e.rd()),this.dh=!0}else if(n===pc){if(o=t.object,n=t.Nf,e=t.newValue,o instanceof rs)if("number"==typeof n&&e instanceof Pr){var s=o;i?s.Yd(n):s.qd(n,e),e=o.J,null!==e&&e.rd()}else"number"==typeof n&&e instanceof Cs&&(s=o,i?e.td?s.YC(n):s.UC(n):(n=e.td?s.Bc(e.index):s.Ac(e.index),n.qr(e)));else o instanceof He?(s=!0===t.Pf,"number"==typeof n&&e instanceof sa&&(i?(e.rd(),o.Yd(s?n:-1,e,s)):o.Hn(n,e,s))):o instanceof Ke?"number"==typeof n&&e instanceof He&&(o=e,i?this.Db.Dc(n):(o.fc(this),this.Db.qd(n,o))):r("unknown ChangedEvent.Insert object: "+t.toString());this.dh=!0}else n===dc?(o=t.object,n=t.Pf,e=t.oldValue,o instanceof rs?"number"==typeof n&&e instanceof Pr?(s=o,i?s.qd(n,e):s.Yd(n)):"number"==typeof n&&e instanceof Cs&&(s=o,i?(n=e.td?s.Bc(e.index):s.Ac(e.index),n.qr(e)):e.td?s.YC(n):s.UC(n)):o instanceof He?(s=!0===t.Nf,"number"==typeof n&&e instanceof sa&&(i?o.Hn(n,e,s):(e.rd(),o.Yd(s?n:-1,e,s)))):o instanceof Ke?"number"==typeof n&&e instanceof He&&(o=e,i?(o.fc(this),this.Db.qd(n,o)):this.Db.Dc(n)):r("unknown ChangedEvent.Remove object: "+t.toString()),this.dh=!0):n!==fc&&r("unknown ChangedEvent: "+t.toString())}},Ke.prototype.startTransaction=Ke.prototype.Ab=function(t){return this.V.Ab(t)},Ke.prototype.commitTransaction=Ke.prototype.pd=function(t){return this.V.pd(t)},Ke.prototype.rollbackTransaction=Ke.prototype.co=function(){return this.V.co()},Ke.prototype.updateAllTargetBindings=Ke.prototype.dH=function(t){void 0===t&&(t="");for(var i=this.cj;i.next();)i.value.rb(t);for(i=this.Of;i.next();)i.value.rb(t);for(i=this.links;i.next();)i.value.rb(t)},Ke.prototype.updateAllRelationshipsFromData=function(){for(var t=this.cj;t.next();)t.value.updateRelationshipsFromData();for(t=this.Of;t.next();)t.value.updateRelationshipsFromData();for(t=this.links;t.next();)t.value.updateRelationshipsFromData()},Ke.prototype.ds=function(t,i,n){void 0===n&&(n=!1),n||Mo(this),To(this);var e=this.ub;null===e||!e.ev||n||t.width===i.width&&t.height===i.height||e.v(),e=this.Ea,!0===this.Qk&&e instanceof Pe&&(this.C.S=this.GD(this.C.xe),e.doMouseMove()),this.ay(t,i),Lo(this),this.ma("ViewportBoundsChanged",n?lf:null,t)},Ke.prototype.clearSelection=Ke.prototype.Iu=function(){var t=0<this.selection.count;t&&this.ma("ChangingSelection"),Do(this),t&&this.ma("ChangedSelection")},Ke.prototype.select=Ke.prototype.select=function(t){null!==t&&(a(t,sa,Ke,"select:part"),t.layer.g===this&&(!t.Ia||1<this.selection.count)&&(this.ma("ChangingSelection"),Do(this),t.Ia=!0,this.ma("ChangedSelection")))},Ke.prototype.selectCollection=Ke.prototype.lD=function(t){if(this.ma("ChangingSelection"),Do(this),g(t))for(var i=x(t),n=0;i>n;n++){var e=w(t,n);e instanceof sa||r("Diagram.selectCollection given something that is not a Part: "+e),e.Ia=!0}else for(t=t.i;t.next();)e=t.value,e instanceof sa||r("Diagram.selectCollection given something that is not a Part: "+e),e.Ia=!0;this.ma("ChangedSelection")},Ke.prototype.clearHighlighteds=Ke.prototype.IB=function(){var t=this.Yu;if(0<t.count){for(var i=t.ce(),n=i.length,e=0;n>e;e++)i[e].kg=!1;t.wa(),t.clear(),t.freeze()}},Ke.prototype.highlight=function(t){null!==t&&t.layer.g===this&&(a(t,sa,Ke,"highlight:part"),!t.kg||1<this.Yu.count)&&(this.IB(),t.kg=!0)},Ke.prototype.highlightCollection=function(t){if(this.IB(),g(t))for(var i=x(t),n=0;i>n;n++){var e=w(t,n);e instanceof sa||r("Diagram.highlightCollection given something that is not a Part: "+e),e.kg=!0}else for(t=t.i;t.next();)e=t.value,e instanceof sa||r("Diagram.highlightCollection given something that is not a Part: "+e),e.kg=!0},Ke.prototype.scroll=Ke.prototype.scroll=function(t,i,n){void 0===n&&(n=1);var e="up"===i||"down"===i,o=0;"pixel"===t?o=n:"line"===t?o=n*(e?this.os:this.ns):"page"===t?(t=e?this.Va.height:this.Va.width,t*=this.scale,0!==t&&(o=Math.max(t-(e?this.os:this.ns),0),o*=n)):r("scrolling unit must be 'pixel', 'line', or 'page', not: "+t),o/=this.scale,n=this.position.copy(),"up"===i?n.y=this.position.y-o:"down"===i?n.y=this.position.y+o:"left"===i?n.x=this.position.x-o:"right"===i?n.x=this.position.x+o:r("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+i),this.position=n},Ke.prototype.scrollToRect=Ke.prototype.EG=function(t){var i=this.Va;i.Wi(t)||(t=t.Yj,t.x-=i.width/2,t.y-=i.height/2,this.position=t)},Ke.prototype.centerRect=function(t){var i=this.Va;t=t.Yj,t.x-=i.width/2,t.y-=i.height/2,this.position=t},Ke.prototype.transformDocToView=Ke.prototype.ED=function(t){var i=this.ld;i.reset(),1!==this.Eb&&i.scale(this.Eb);var n=this.xa;return(0!==n.x||0!==n.y)&&isFinite(n.x)&&isFinite(n.y)&&i.translate(-n.x,-n.y),t.copy().transform(this.ld)},Ke.prototype.transformViewToDoc=Ke.prototype.GD=function(t){var i=this.ld;i.reset(),1!==this.Eb&&i.scale(this.Eb);var n=this.xa;return(0!==n.x||0!==n.y)&&isFinite(n.x)&&isFinite(n.y)&&i.translate(-n.x,-n.y),Mi(t.copy(),this.ld)};var Qc;Ke.None=Qc=Z(Ke,"None",0);var $c;Ke.Uniform=$c=Z(Ke,"Uniform",1);var _c;Ke.UniformToFill=_c=Z(Ke,"UniformToFill",2);var tp;Ke.CycleAll=tp=Z(Ke,"CycleAll",10);var ip;Ke.CycleNotDirected=ip=Z(Ke,"CycleNotDirected",11);var np;Ke.CycleNotDirectedFast=np=Z(Ke,"CycleNotDirectedFast",12);var ep;Ke.CycleNotUndirected=ep=Z(Ke,"CycleNotUndirected",13);var op;Ke.CycleDestinationTree=op=Z(Ke,"CycleDestinationTree",14);var rp;Ke.CycleSourceTree=rp=Z(Ke,"CycleSourceTree",15);var sp;Ke.DocumentScroll=sp=Z(Ke,"DocumentScroll",1);var ap;Ke.InfiniteScroll=ap=Z(Ke,"InfiniteScroll",2),K(Ke,{eH:"validCycle"},function(){return this.qu},function(t){var i=this.qu;i!==t&&(u(t,Ke,Ke,"validCycle"),this.qu=t,this.h("validCycle",i,t))}),K(Ke,{jv:"linkSpacing"},function(){return this.si},function(t){var i=this.si;i!==t&&(l(t,Ke,"linkSpacing"),0>t&&c(t,">= zero",Ke,"linkSpacing"),this.si=t,this.h("linkSpacing",i,t))}),Y(Ke,{hv:"layers"},function(){return this.Db.i}),K(Ke,{Le:"isModelReadOnly"},function(){var t=this.gd;return null===t?!1:t.Ta},function(t){var i=this.gd;null!==i&&(i.Ta=t)}),K(Ke,{Ta:"isReadOnly"},function(){return this.Fj},function(t){var i=this.Fj;i!==t&&(h(t,"boolean",Ke,"isReadOnly"),this.Fj=t,this.h("isReadOnly",i,t))}),K(Ke,{isEnabled:"isEnabled"},function(){return this.fe},function(t){var i=this.fe;i!==t&&(h(t,"boolean",Ke,"isEnabled"),this.fe=t,this.h("isEnabled",i,t))}),K(Ke,{Bx:"allowClipboard"},function(){return this.Hs},function(t){var i=this.Hs;i!==t&&(h(t,"boolean",Ke,"allowClipboard"),this.Hs=t,this.h("allowClipboard",i,t))}),K(Ke,{Ui:"allowCopy"},function(){return this.gj},function(t){var i=this.gj;i!==t&&(h(t,"boolean",Ke,"allowCopy"),this.gj=t,this.h("allowCopy",i,t))}),K(Ke,{sl:"allowDelete"},function(){return this.hj},function(t){var i=this.hj;i!==t&&(h(t,"boolean",Ke,"allowDelete"),this.hj=t,this.h("allowDelete",i,t))}),K(Ke,{yu:"allowDragOut"},function(){return this.Is},function(t){var i=this.Is;i!==t&&(h(t,"boolean",Ke,"allowDragOut"),this.Is=t,this.h("allowDragOut",i,t))}),K(Ke,{AB:"allowDrop"},function(){return this.Js},function(t){var i=this.Js;i!==t&&(h(t,"boolean",Ke,"allowDrop"),this.Js=t,this.h("allowDrop",i,t))}),K(Ke,{Cu:"allowTextEdit"},function(){return this.qj},function(t){var i=this.qj;i!==t&&(h(t,"boolean",Ke,"allowTextEdit"),this.qj=t,this.h("allowTextEdit",i,t))}),K(Ke,{zu:"allowGroup"},function(){return this.ij},function(t){var i=this.ij;i!==t&&(h(t,"boolean",Ke,"allowGroup"),this.ij=t,this.h("allowGroup",i,t))}),K(Ke,{Du:"allowUngroup"},function(){return this.rj},function(t){var i=this.rj;i!==t&&(h(t,"boolean",Ke,"allowUngroup"),this.rj=t,this.h("allowUngroup",i,t))}),K(Ke,{on:"allowInsert"},function(){return this.Ls},function(t){var i=this.Ls;i!==t&&(h(t,"boolean",Ke,"allowInsert"),this.Ls=t,this.h("allowInsert",i,t))}),K(Ke,{jr:"allowLink"},function(){return this.jj},function(t){var i=this.jj;i!==t&&(h(t,"boolean",Ke,"allowLink"),this.jj=t,this.h("allowLink",i,t))}),K(Ke,{tl:"allowRelink"},function(){return this.lj},function(t){var i=this.lj;i!==t&&(h(t,"boolean",Ke,"allowRelink"),this.lj=t,this.h("allowRelink",i,t))}),K(Ke,{Xj:"allowMove"},function(){return this.kj},function(t){var i=this.kj;i!==t&&(h(t,"boolean",Ke,"allowMove"),this.kj=t,this.h("allowMove",i,t))}),K(Ke,{Au:"allowReshape"},function(){return this.mj},function(t){var i=this.mj;i!==t&&(h(t,"boolean",Ke,"allowReshape"),this.mj=t,this.h("allowReshape",i,t))}),K(Ke,{kr:"allowResize"},function(){return this.nj},function(t){var i=this.nj;i!==t&&(h(t,"boolean",Ke,"allowResize"),this.nj=t,this.h("allowResize",i,t))}),K(Ke,{Bu:"allowRotate"},function(){return this.oj},function(t){var i=this.oj;i!==t&&(h(t,"boolean",Ke,"allowRotate"),this.oj=t,this.h("allowRotate",i,t))}),K(Ke,{Fe:"allowSelect"},function(){return this.pj},function(t){var i=this.pj;i!==t&&(h(t,"boolean",Ke,"allowSelect"),this.pj=t,this.h("allowSelect",i,t))}),K(Ke,{BB:"allowUndo"},function(){return this.Ms},function(t){var i=this.Ms;i!==t&&(h(t,"boolean",Ke,"allowUndo"),this.Ms=t,this.h("allowUndo",i,t))}),K(Ke,{Eu:"allowZoom"},function(){return this.Os},function(t){var i=this.Os;i!==t&&(h(t,"boolean",Ke,"allowZoom"),this.Os=t,this.h("allowZoom",i,t))}),K(Ke,{Zx:"hasVerticalScrollbar"},function(){return this.rt},function(t){var i=this.rt;i!==t&&(h(t,"boolean",Ke,"hasVerticalScrollbar"),this.rt=t,Mo(this),this.ba(),this.h("hasVerticalScrollbar",i,t),io(this,!1))}),K(Ke,{Yx:"hasHorizontalScrollbar"},function(){return this.qt},function(t){var i=this.qt;i!==t&&(h(t,"boolean",Ke,"hasHorizontalScrollbar"),this.qt=t,Mo(this),this.ba(),this.h("hasHorizontalScrollbar",i,t),io(this,!1))}),K(Ke,{je:"allowHorizontalScroll"},function(){return this.Ks},function(t){var i=this.Ks;i!==t&&(h(t,"boolean",Ke,"allowHorizontalScroll"),this.Ks=t,this.h("allowHorizontalScroll",i,t),io(this,!1))}),K(Ke,{ke:"allowVerticalScroll"},function(){return this.Ns},function(t){var i=this.Ns;i!==t&&(h(t,"boolean",Ke,"allowVerticalScroll"),this.Ns=t,this.h("allowVerticalScroll",i,t),io(this,!1))}),K(Ke,{ns:"scrollHorizontalLineChange"},function(){return this.$t},function(t){var i=this.$t;i!==t&&(h(t,"number",Ke,"scrollHorizontalLineChange"),0>t&&c(t,">= 0",Ke,"scrollHorizontalLineChange"),this.$t=t,this.h("scrollHorizontalLineChange",i,t))}),K(Ke,{os:"scrollVerticalLineChange"},function(){return this.au},function(t){var i=this.au;i!==t&&(h(t,"number",Ke,"scrollVerticalLineChange"),0>t&&c(t,">= 0",Ke,"scrollVerticalLineChange"),this.au=t,this.h("scrollVerticalLineChange",i,t))}),K(Ke,{C:"lastInput"},function(){return this.sb},function(t){this.sb=t}),K(Ke,{Yb:"firstInput"},function(){return this.xj},function(t){this.xj=t}),K(Ke,{Fb:"currentCursor"},function(){return this.gw},function(t){""===t&&(t=this.So),this.gw!==t&&(h(t,"string",Ke,"currentCursor"),null!==this.Oa&&(this.gw=t,this.Oa.style.cursor=t,this.ob.style.cursor=t))}),K(Ke,{LH:"defaultCursor"},function(){return this.So},function(t){""===t&&(t="auto");var i=this.So;i!==t&&(h(t,"string",Ke,"defaultCursor"),this.So=t,this.h("defaultCursor",i,t))}),K(Ke,{ZH:"hasGestureZoom"},function(){return this.Cm},function(t){var i=this.Cm;i!==t&&(h(t,"boolean",Ke,"hasGestureZoom"),this.Cm=t,this.h("hasGestureZoom",i,t))}),K(Ke,{click:"click"},function(){return this.jh},function(t){var i=this.jh;i!==t&&(null!==t&&h(t,"function",Ke,"click"),this.jh=t,this.h("click",i,t))}),K(Ke,{tr:"doubleClick"},function(){return this.qh},function(t){var i=this.qh;i!==t&&(null!==t&&h(t,"function",Ke,"doubleClick"),this.qh=t,this.h("doubleClick",i,t))}),K(Ke,{Hx:"contextClick"},function(){return this.lh},function(t){var i=this.lh;i!==t&&(null!==t&&h(t,"function",Ke,"contextClick"),this.lh=t,this.h("contextClick",i,t))}),K(Ke,{wy:"mouseOver"},function(){return this.Ah},function(t){var i=this.Ah;i!==t&&(null!==t&&h(t,"function",Ke,"mouseOver"),this.Ah=t,this.h("mouseOver",i,t))}),K(Ke,{vy:"mouseHover"},function(){return this.zh},function(t){var i=this.zh;i!==t&&(null!==t&&h(t,"function",Ke,"mouseHover"),this.zh=t,this.h("mouseHover",i,t))}),K(Ke,{uy:"mouseHold"},function(){return this.yh},function(t){var i=this.yh;i!==t&&(null!==t&&h(t,"function",Ke,"mouseHold"),this.yh=t,this.h("mouseHold",i,t))}),K(Ke,{gG:"mouseDragOver"},function(){return this.Nt},function(t){var i=this.Nt;i!==t&&(null!==t&&h(t,"function",Ke,"mouseDragOver"),this.Nt=t,this.h("mouseDragOver",i,t))}),K(Ke,{ty:"mouseDrop"},function(){return this.xh},function(t){var i=this.xh;i!==t&&(null!==t&&h(t,"function",Ke,"mouseDrop"),this.xh=t,this.h("mouseDrop",i,t))}),K(Ke,{cz:"toolTip"},function(){return this.Hh},function(t){var i=this.Hh;i!==t&&(null!==t&&a(t,Ca,Ke,"toolTip"),this.Hh=t,this.h("toolTip",i,t))}),K(Ke,{contextMenu:"contextMenu"},function(){return this.mh},function(t){var i=this.mh;i!==t&&(null!==t&&a(t,Ca,Ke,"contextMenu"),this.mh=t,this.h("contextMenu",i,t))}),K(Ke,{ib:"commandHandler"},function(){return this.Yv},function(t){var i=this.Yv;i!==t&&(a(t,Nn,Ke,"commandHandler"),null!==t.g&&r("Cannot share CommandHandlers between Diagrams: "+t.toString()),null!==i&&i.fc(null),this.Yv=t,t.fc(this))}),K(Ke,{Xa:"toolManager"},function(){return this.ux},function(t){var i=this.ux;i!==t&&(a(t,Pe,Ke,"toolManager"),null!==t.g&&r("Cannot share ToolManagers between Diagrams: "+t.toString()),null!==i&&i.fc(null),this.ux=t,t.fc(this))}),K(Ke,{Nx:"defaultTool"},function(){return this.mw},function(t){var i=this.mw;i!==t&&(a(t,Dn,Ke,"defaultTool"),this.mw=t,this.Ea===i&&(this.Ea=t))}),K(Ke,{Ea:"currentTool"},function(){return this.iw},function(t){var i=this.iw;if(null!==i)for(i.ca&&i.doDeactivate(),i.cancelWaitAfter(),i.doStop(),i=this.al.i;i.next();)i.value.ba();null===t&&(t=this.Nx),null!==t&&(a(t,Dn,Ke,"currentTool"),this.iw=t,t.fc(this),t.doStart())}),Y(Ke,{selection:"selection"},function(){return this.cu}),K(Ke,{ZF:"maxSelectionCount"},function(){return this.Jt},function(t){var i=this.Jt;if(i!==t)if(h(t,"number",Ke,"maxSelectionCount"),t>=0&&!isNaN(t)){if(this.Jt=t,this.h("maxSelectionCount",i,t),!this.V.Ua&&(t=this.selection.count-t,t>0)){this.ma("ChangingSelection");for(var i=this.selection.ce(),n=0;t>n;n++)i[n].Ia=!1;this.ma("ChangedSelection")}}else c(t,">= 0",Ke,"maxSelectionCount")}),K(Ke,{jG:"nodeSelectionAdornmentTemplate"},function(){return this.Pt},function(t){var i=this.Pt;i!==t&&(a(t,Ca,Ke,"nodeSelectionAdornmentTemplate"),this.Pt=t,this.h("nodeSelectionAdornmentTemplate",i,t))}),K(Ke,{tF:"groupSelectionAdornmentTemplate"},function(){return this.nt},function(t){var i=this.nt;i!==t&&(a(t,Ca,Ke,"groupSelectionAdornmentTemplate"),this.nt=t,this.h("groupSelectionAdornmentTemplate",i,t))}),K(Ke,{VF:"linkSelectionAdornmentTemplate"},function(){return this.Et},function(t){var i=this.Et;i!==t&&(a(t,Ca,Ke,"linkSelectionAdornmentTemplate"),this.Et=t,this.h("linkSelectionAdornmentTemplate",i,t))}),Y(Ke,{Yu:"highlighteds"},function(){return this.st}),K(Ke,{dh:"isModified"},function(){var t=this.V;return t.isEnabled?null!==t.Ph?!0:this.Jw&&this.Yf!==t.Uh:this.Jw},function(t){if(this.Jw!==t){h(t,"boolean",Ke,"isModified"),this.Jw=t;var i=this.V;!t&&i.isEnabled&&(this.Yf=i.Uh),t||Ao(this)}}),K(Ke,{U:"model"},function(){return this.gd},function(t){var i=this.gd;if(i!==t){a(t,sn,Ke,"model"),this.Ea.doCancel(),null!==i&&i.V!==t.V&&i.V.wC&&r("Do not replace a Diagram.model while a transaction is in progress."),this.qb.Yh(),this.Iu(),this.Ce=!1,this.ym=!0,this.Yf=-2,this.Ve=!1;var n=this.Qc;this.Qc=!0,this.qb.vk(),null!==i&&(i.Ky(this.uA),i instanceof xn&&Zo(this,i.aj),Zo(this,i.pg)),this.gd=t,t.yx(this.tA),Vo(this,t.pg),t instanceof xn&&Wo(this,t.aj),t.Ky(this.tA),t.yx(this.uA),this.Qc=n,this.Ub||this.ba(),null!==i&&(t.V.isEnabled=i.V.isEnabled)}}),K(Ke,{ya:null},function(){return this.mA},function(t){this.mA=t}),K(Ke,{Dv:"skipsModelSourceBindings"},function(){return this.TA},function(t){this.TA=t}),K(Ke,{us:null},function(){return this.kx},function(t){this.kx=t}),Ke.prototype.clear=Ke.prototype.clear=function(){var t=null;null!==this.wc&&(t=this.wc.J),this.U.clear();for(var i=this.Db.length,n=0;i>n;n++)this.Db.l[n].clear();this.nf.clear(),this.Lk.clear(),this.Vm.clear(),this.Sj.clear(),this.Rm.clear(),this.hb.clear(),this.nh.clear(),this.vj.clear(),this.Tk.clear(),this.cu.wa(),this.cu.clear(),this.cu.freeze(),this.st.wa(),this.st.clear(),this.st.freeze(),xc=this.jm=null,bc="",this.ft=new Si(0/0,0/0,0/0,0/0).freeze(),null!==t&&(this.add(t),this.hb.remove(t)),this.ba()},Ke.prototype.reset=Ke.prototype.reset=function(){this.Ub=!0,this.clear(),this.Db=new ci(He),this.$C(),this.ZC(),this.xa=new wi(0/0,0/0).freeze(),this.Eb=1,this.ut=new wi(0/0,0/0).freeze(),this.vt=0/0,this.Kt=1e-4,this.It=100,this.uu=new wi(0/0,0/0).freeze(),this.lt=new Si(0/0,0/0,0/0,0/0).freeze(),this.Ek=Qc,this.im=bf,this.Dj=Qc,this.Em=bf,this.wt=this.tt=wf,this.Rs=new Di(16,16,16,16).freeze(),this.zt=!0,this.qu=tp,this.So="auto",this.mh=this.Hh=this.xh=this.Nt=this.yh=this.zh=this.Ah=this.lh=this.qh=this.jh=null,this.Fj=!1,this.hj=this.gj=this.Hs=this.fe=!0,this.Js=this.Is=!1,this.Ns=this.Ks=this.rt=this.qt=this.Os=this.Ms=this.pj=this.oj=this.nj=this.mj=this.kj=this.lj=this.jj=this.Ls=this.rj=this.ij=this.qj=!0,this.au=this.$t=16,this.he=new Di(5).freeze(),this.Jt=999999999,this.fd=null,Ye(this),this.wc=null,this.Eh=!0,$e(this),this.ub=new Lh,this.Eh=!1,this.U=new xn,this.Ce=!1,this.ym=!0,this.Ub=this.Ve=!1,this.ba()},Ke.prototype.rebuildParts=Ke.prototype.wk=function(){for(var t=this.Ay.i;t.next();){var i=t.value,n=t.key;(!i.$c()||i instanceof Th)&&r('Invalid node template in Diagram.nodeTemplateMap: template for "'+n+'" must be a Node or a simple Part, not a Group or Link: '+i)}for(t=this.Xx.i;t.next();)i=t.value,n=t.key,i instanceof Th||r('Invalid group template in Diagram.groupTemplateMap: template for "'+n+'" must be a Group, not a normal Node or Link: '+i);for(t=this.ny.i;t.next();)i=t.value,n=t.key,i instanceof Ra||r('Invalid link template in Diagram.linkTemplateMap: template for "'+n+'" must be a Link, not a normal Node or simple Part: '+i);for(t=E(),i=this.selection.i;i.next();)(n=i.value.data)&&t.push(n);for(var i=E(),e=this.Yu.i;e.next();)(n=e.value.data)&&i.push(n);for(n=E(),e=this.Of.i;e.next();){var o=e.value;null!==o.data&&(n.push(o.data),n.push(o.location))}for(e=this.links.i;e.next();)o=e.value,null!==o.data&&(n.push(o.data),n.push(o.location));for(e=this.cj.i;e.next();)o=e.value,null!==o.data&&(n.push(o.data),n.push(o.location));for(e=this.U,e instanceof xn&&Zo(this,e.aj),Zo(this,e.pg),Vo(this,e.pg),e instanceof xn&&Wo(this,e.aj),e=0;e<t.length;e++)o=this.$g(t[e]),null!==o&&(o.Ia=!0);for(e=0;e<i.length;e++)o=this.$g(i[e]),null!==o&&(o.kg=!0);for(e=0;e<n.length;e+=2)o=this.$g(n[e]),null!==o&&(o.location=n[e+1]);R(t),R(i),R(n)},Ke.prototype.Tx=function(t){return this.U.Tx(t)};var hp=!1,lp=!1;Ke.prototype.Wu=function(t){var i=this.U,n="";return i instanceof xn?n=i.Wu(t):i instanceof wn&&(n=i.oF(t)),n};var up=!1;Ke.prototype.findPartForKey=Ke.prototype.gF=function(t){return null===t||void 0===t?null:(t=this.U.He(t),null===t?null:this.nh.ha(t))},Ke.prototype.findNodeForKey=Ke.prototype.pe=function(t){return null===t||void 0===t?null:(t=this.U.He(t),null===t?null:(t=this.nh.ha(t),t instanceof Na?t:null))},Ke.prototype.findPartForData=Ke.prototype.$g=function(t){if(null===t)return null;var i=this.nh.ha(t);return null!==i?i:i=this.vj.ha(t)},Ke.prototype.findNodeForData=Ke.prototype.Uu=function(t){return null===t?null:(t=this.nh.ha(t),t instanceof Na?t:null)},Ke.prototype.findLinkForData=Ke.prototype.Ef=function(t){return null===t?null:this.vj.ha(t)},Ke.prototype.findNodesByExample=function(){for(var t=new di,i=this.Vm.i;i.next();){var n=i.value,e=n.data;if(null!==e)for(var o=0;o<arguments.length;o++){var r=arguments[o];if(y(r)&&$o(this,e,r)){t.add(n);break}}}return t.i},Ke.prototype.findLinksByExample=function(){for(var t=new di,i=this.Rm.i;i.next();){var n=i.value,e=n.data;if(null!==e)for(var o=0;o<arguments.length;o++){var r=arguments[o];if(y(r)&&$o(this,e,r)){t.add(n);break}}}return t.i},K(Ke,{BI:"nodeTemplate"},function(){return this.Bh.ha("")},function(t){var i=this.Bh.ha("");i!==t&&(a(t,sa,Ke,"nodeTemplate"),this.Bh.add("",t),this.h("nodeTemplate",i,t),this.V.Ua||this.wk())}),K(Ke,{Ay:"nodeTemplateMap"},function(){return this.Bh},function(t){var i=this.Bh;i!==t&&(a(t,bi,Ke,"nodeTemplateMap"),this.Bh=t,this.h("nodeTemplateMap",i,t),this.V.Ua||this.wk())}),K(Ke,{YH:"groupTemplate"},function(){return this.yj.ha("")},function(t){var i=this.yj.ha("");i!==t&&(a(t,Th,Ke,"groupTemplate"),this.yj.add("",t),this.h("groupTemplate",i,t),this.V.Ua||this.wk())}),K(Ke,{Xx:"groupTemplateMap"},function(){return this.yj},function(t){var i=this.yj;i!==t&&(a(t,bi,Ke,"groupTemplateMap"),this.yj=t,this.h("groupTemplateMap",i,t),this.V.Ua||this.wk())}),K(Ke,{pI:"linkTemplate"},function(){return this.ti.ha("")},function(t){var i=this.ti.ha("");i!==t&&(a(t,Ra,Ke,"linkTemplate"),this.ti.add("",t),this.h("linkTemplate",i,t),this.V.Ua||this.wk())}),K(Ke,{ny:"linkTemplateMap"},function(){return this.ti},function(t){var i=this.ti;i!==t&&(a(t,bi,Ke,"linkTemplateMap"),this.ti=t,this.h("linkTemplateMap",i,t),this.V.Ua||this.wk())}),K(Ke,{IF:null},function(){return this.Qk},function(t){this.Qk=t}),K(Ke,{Zd:"isMouseCaptured"},function(){return this.iA},function(i){var n=this.Oa;null!==n&&(i?(this.C.bubbles=!1,n.removeEventListener("mousemove",this.Tn,!1),n.removeEventListener("mousedown",this.Sn,!1),n.removeEventListener("mouseup",this.Vn,!1),n.removeEventListener("mousewheel",this.ng,!1),n.removeEventListener("DOMMouseScroll",this.ng,!1),n.removeEventListener("mouseout",this.Un,!1),t.addEventListener("mousemove",this.Tn,!0),t.addEventListener("mousedown",this.Sn,!0),t.addEventListener("mouseup",this.Vn,!0),t.addEventListener("mousewheel",this.ng,!0),t.addEventListener("DOMMouseScroll",this.ng,!0),t.addEventListener("mouseout",this.Un,!0),t.addEventListener("selectstart",this.preventDefault,!1)):(t.removeEventListener("mousemove",this.Tn,!0),t.removeEventListener("mousedown",this.Sn,!0),t.removeEventListener("mouseup",this.Vn,!0),t.removeEventListener("mousewheel",this.ng,!0),t.removeEventListener("DOMMouseScroll",this.ng,!0),t.removeEventListener("mouseout",this.Un,!0),t.removeEventListener("selectstart",this.preventDefault,!1),n.addEventListener("mousemove",this.Tn,!1),n.addEventListener("mousedown",this.Sn,!1),n.addEventListener("mouseup",this.Vn,!1),n.addEventListener("mousewheel",this.ng,!1),n.addEventListener("DOMMouseScroll",this.ng,!1),n.addEventListener("mouseout",this.Un,!1)),this.iA=i)}),K(Ke,{position:"position"},function(){return this.xa},function(t){var i=this.xa;if(!i.A(t)){a(t,wi,Ke,"position");var n=this.Va.copy();if(t=t.copy(),!this.Ub&&null!==this.Oa){this.Ub=!0;var e=this.scale;eo(this,t,this.Xc,this.eb/e,this.cb/e,this.im,!1),this.Ub=!1}this.xa=t.O(),t=this.qb,t.Gc&&Ge(t,i,this.xa),this.Ub||this.ds(n,this.Va)}}),K(Ke,{zF:"initialPosition"},function(){return this.ut},function(t){this.ut.A(t)||(a(t,wi,Ke,"initialPosition"),this.ut=t.O())}),K(Ke,{AF:"initialScale"},function(){return this.vt},function(t){this.vt!==t&&(h(t,"number",Ke,"initialScale"),this.vt=t)}),K(Ke,{Gr:"grid"},function(){return null===this.wc&&_e(this),this.wc},function(t){var i=this.wc;if(i!==t){null===i&&(_e(this),i=this.wc),a(t,rs,Ke,"grid"),t.type!==Bp&&r("Diagram.grid must be a Panel of type Panel.Grid");var n=i.I;null!==n&&n.remove(i),this.wc=t,t.name="GRID",null!==n&&n.add(t),Lo(this),this.ba(),this.h("grid",i,t)}}),Y(Ke,{Va:"viewportBounds"},function(){var t=this.qB;if(null===this.Oa)return t;var i=this.xa,n=this.Eb;return t.k(i.x,i.y,Math.max(this.eb,0)/n,Math.max(this.cb,0)/n),t}),K(Ke,{eC:"fixedBounds"},function(){return this.lt},function(t){var i=this.lt;i.A(t)||(a(t,Si,Ke,"fixedBounds"),-1/0!==t.width&&1/0!==t.height&&-1/0!==t.height||r("fixedBounds width/height must not be Infinity"),this.lt=t=t.O(),this.Rb(),this.h("fixedBounds",i,t))}),K(Ke,{gD:"scrollMargin"},function(){return this.ix},function(t){"number"==typeof t?t=new Di(t):a(t,Di,Ke,"scrollMargin");var i=this.ix;i.A(t)||(this.ix=t=t.O(),this.Rb(),this.h("scrollMargin",i,t))}),K(Ke,{hD:"scrollMode"},function(){return this.jx},function(t){var i=this.jx;i!==t&&(u(t,Ke,Ke,"scrollMode"),this.jx=t,t===sp&&io(this,!1),this.h("scrollMode",i,t))}),K(Ke,{QC:"positionComputation"},function(){return this.$w},function(t){var i=this.$w;i!==t&&(null!==t&&h(t,"function",Ke,"positionComputation"),this.$w=t,io(this,!1),this.h("positionComputation",i,t))}),K(Ke,{fD:"scaleComputation"},function(){return this.bx},function(t){var i=this.bx;i!==t&&(null!==t&&h(t,"function",Ke,"scaleComputation"),this.bx=t,jo(this,this.scale,this.scale),this.h("scaleComputation",i,t))}),Y(Ke,{Xc:"documentBounds"},function(){return this.ft}),K(Ke,{scale:"scale"},function(){return this.Eb},function(t){var i=this.Eb;l(t,Ke,"scale"),i!==t&&jo(this,i,t)}),K(Ke,{qn:"autoScale"},function(){return this.Ek},function(t){var i=this.Ek;i!==t&&(u(t,Ke,Ke,"autoScale"),this.Ek=t,this.h("autoScale",i,t),t!==Qc&&io(this,!1))}),K(Ke,{aI:"initialAutoScale"},function(){return this.Dj},function(t){var i=this.Dj;i!==t&&(u(t,Ke,Ke,"initialAutoScale"),this.Dj=t,this.h("initialAutoScale",i,t))}),K(Ke,{BF:"initialViewportSpot"},function(){return this.wt},function(t){var i=this.wt;i!==t&&(a(t,Fi,Ke,"initialViewportSpot"),t.Kc()||r("initialViewportSpot must be a real Spot: "+t),this.wt=t,this.h("initialViewportSpot",i,t))}),K(Ke,{yF:"initialDocumentSpot"},function(){return this.tt},function(t){var i=this.tt;i!==t&&(a(t,Fi,Ke,"initialDocumentSpot"),t.Kc()||r("initialViewportSpot must be a real Spot: "+t),this.tt=t,this.h("initialDocumentSpot",i,t))}),K(Ke,{mg:"minScale"},function(){return this.Kt},function(t){l(t,Ke,"minScale");var i=this.Kt;i!==t&&(t>0?(this.Kt=t,this.h("minScale",i,t),t>this.scale&&(this.scale=t)):c(t,"> 0",Ke,"minScale"))}),K(Ke,{lg:"maxScale"},function(){return this.It},function(t){l(t,Ke,"maxScale");var i=this.It;i!==t&&(t>0?(this.It=t,this.h("maxScale",i,t),t<this.scale&&(this.scale=t)):c(t,"> 0",Ke,"maxScale"))}),K(Ke,{Wl:"zoomPoint"},function(){return this.uu},function(t){this.uu.A(t)||(a(t,wi,Ke,"zoomPoint"),this.uu=t=t.O())}),K(Ke,{Gx:"contentAlignment"},function(){return this.im},function(t){var i=this.im;i.A(t)||(a(t,Fi,Ke,"contentAlignment"),this.im=t=t.O(),this.h("contentAlignment",i,t),io(this,!1))}),K(Ke,{bI:"initialContentAlignment"},function(){return this.Em},function(t){var i=this.Em;i.A(t)||(a(t,Fi,Ke,"initialContentAlignment"),this.Em=t=t.O(),this.h("initialContentAlignment",i,t))}),K(Ke,{padding:"padding"},function(){return this.he},function(t){"number"==typeof t?t=new Di(t):a(t,Di,Ke,"padding");var i=this.he;i.A(t)||(this.he=t=t.O(),this.Rb(),this.h("padding",i,t))}),Y(Ke,{Of:"nodes"},function(){return this.Vm.i}),Y(Ke,{links:"links"},function(){return this.Rm.i}),Y(Ke,{cj:"parts"},function(){return this.hb.i}),Ke.prototype.findTopLevelNodesAndLinks=function(){for(var t=new di(sa),i=this.Vm.i;i.next();){var n=i.value;n.Kn&&t.add(n)}for(i=this.Rm.i;i.next();)n=i.value,n.Kn&&t.add(n);return t.i},Ke.prototype.findTopLevelGroups=function(){return this.Sj.i},K(Ke,{ub:"layout"},function(){return this.fd},function(t){var i=this.fd;i!==t&&(a(t,Lh,Ke,"layout"),null!==i&&(i.g=null,i.group=null),this.fd=t,t.g=this,t.group=null,this.Ps=!0,this.h("layout",i,t),this.wd())}),Ke.prototype.layoutDiagram=function(t){go(this),t&&ir(this,!0),er(this,!1)},K(Ke,{Lc:"isTreePathToChildren"},function(){return this.zt},function(t){var i=this.zt;if(i!==t&&(h(t,"boolean",Ke,"isTreePathToChildren"),this.zt=t,this.h("isTreePathToChildren",i,t),!this.V.Ua))for(t=this.Of;t.next();)Aa(t.value)}),Ke.prototype.findTreeRoots=function(){for(var t=new ci(Na),i=this.Of;i.next();){var n=i.value;n.Kn&&null===n.Ar()&&t.add(n)}return t.i},K(Ke,{Fd:null},function(){return this.aA},function(t){this.aA=t}),Ke.prototype.addDiagramListener=Ke.prototype.zx=function(t,i){h(t,"string",Ke,"addDiagramListener:name"),h(i,"function",Ke,"addDiagramListener:listener");var n=ar(this,t);null!==n&&n.add(i)},Ke.prototype.removeDiagramListener=Ke.prototype.VC=function(t,i){h(t,"string",Ke,"removeDiagramListener:name"),h(i,"function",Ke,"addDiagramListener:listener");var n=ar(this,t);null!==n&&n.remove(i)},Ke.prototype.raiseDiagramEvent=Ke.prototype.ma=function(t,i,n){var e=ar(this,t),o=new on;if(o.g=this,o.name=sr(this,t),void 0!==i&&(o.Zy=i),void 0!==n&&(o.Dy=n),t=e.length,1===t)(e=e.Y(0))(o);else if(0!==t)for(i=e.ce(),n=0;t>n;n++)(e=i[n])(o);return o.cancel},Ke.prototype.isUnoccupied=Ke.prototype.Mn=function(t,i){return void 0===i&&(i=null),lr(this,!1,null,i).Mn(t.x,t.y,t.width,t.height)},Ke.prototype.simulatedMouseMove=Ke.prototype.Cv=function(t,i,n){if(null!==kc){var e=kc.g;n instanceof Ke||(n=null);var o=Mc;return n!==o&&(null!==o&&o!==e&&null!==o.Xa.Zc&&(dr(o),kc.bv=!1,o.Xa.Zc.doSimulatedDragLeave()),Mc=n,null!==n&&n!==e&&null!==n.Xa.Zc&&(En(),o=n.Xa.Zc,wc.contains(o)||wc.add(o),n.Xa.Zc.doSimulatedDragEnter())),null!==n&&n!==e&&n.AB&&!n.Ta&&n.on?(e=n.Xa.Zc,null!==e&&(null!==t?i=n.cp(t):null===i&&(i=new wi),n.sb.S=i,n.sb.ek=!1,n.sb.up=!1,e.doSimulatedDragOver()),!0):!1}return!1},Ke.prototype.simulatedMouseUp=Ke.prototype.sD=function(t,i,n,e){if(null!==kc){null===e&&(e=i),i=Mc;var o=kc.g;if(e!==i){if(null!==i&&i!==o&&null!==i.Xa.Zc)return dr(i),kc.bv=!1,i.Xa.Zc.doSimulatedDragLeave(),!1;Mc=e,null!==e&&null!==e.Xa.Zc&&(En(),i=e.Xa.Zc,wc.contains(i)||wc.add(i),e.Xa.Zc.doSimulatedDragEnter())}if(null===e)return kc.doCancel(),!0;if(e!==this)return null!==t&&(n=e.cp(t)),e.sb.S=n,e.sb.ek=!1,e.sb.up=!0,t=e.Xa.Zc,null!==t&&t.doSimulatedDrop(),t=kc,null!==t&&(e=t.mayCopy(),t.Qe=e?"Copy":"Move",t.stopTool()),!0}return!1},K(Ke,{FB:"autoScrollRegion"},function(){return this.Rs},function(t){"number"==typeof t?t=new Di(t):a(t,Di,Ke,"autoScrollRegion");var i=this.Rs;i.A(t)||(this.Rs=t=t.O(),this.Rb(),this.h("autoScrollRegion",i,t))}),Ke.prototype.makeSVG=Ke.prototype.makeSvg=function(t){return void 0===t&&(t=new si),t.context="svg",t=yr(this,t),null!==t?t.Bk:null},Ke.prototype.makeImage=function(t){void 0===t&&(t=new si);var i=(t.document||document).createElement("img");return i.src=this.WF(t),i},Ke.prototype.makeImageData=Ke.prototype.WF=function(t){void 0===t&&(t=new si);var i=yr(this,t);return null!==i?i.toDataURL(t.type,t.details):""};var fp=!1;Ke.inherit=function(t,i){h(t,"function",Ke,"inherit"),h(i,"function",Ke,"inherit"),i.Qg&&r("Cannot inherit from "+J(i)),U(t,i)},gr.prototype.t=function(){this.kE=null},U(wr,Ke),H("Palette",wr),U(kr,Ke),H("Overview",kr),kr.prototype.computePixelRatio=function(){return 1},kr.prototype.oe=function(){if(null===this.ob&&r("No div specified"),null===this.Oa&&r("No canvas specified"),this.ed){var t=this.Di;if(null!==t&&!t.qb.jg&&!t.qb.Gc){if(!this.bE){var i=t.Xa.Zc;if(null!==i&&i.ca)return}So(this),i=t.Gr,(null!==i&&i.visible&&isNaN(i.width)||isNaN(i.height))&&Lo(t);var n=this.Oa,i=this.Wf,e=this.px,o=this.lE;e.width=n.width,e.height=n.height,i.Fs="",i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,this.Oa.width,this.Oa.height),e=this.ld,e.reset(),1!==this.Eb&&e.scale(this.scale),0===this.position.x&&0===this.position.y||e.translate(-this.xa.x,-this.xa.y),i.setTransform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy);for(var e=this.it,s=this.Va,a=t.Db.l,h=a.length,t=0;h>t;t++){var l=a[t],u=i,f=s,c=e;if(l.visible&&0!==l.ic&&(void 0===c&&(c=!0),c||!l.bc)){1!==l.ic&&(u.globalAlpha=l.ic);for(var c=this.scale,l=l.hb.l,p=l.length,d=0;p>d;d++){var v=l[d],y=v.Q;y.If(f)&&(1<y.width*c||1<y.height*c?v.oe(u,this):va(v,u))}u.globalAlpha=1}}for(o.drawImage(n.Yc,0,0),n=this.Db.l,o=n.length,t=0;o>t;t++)n[t].oe(i,this);this.ed=this.Ej=!1}}},K(kr,{Cy:"observed"},function(){return this.Di},function(t){var i=this.Di;null!==t&&a(t,Ke,kr,"observed"),t instanceof kr&&r("Overview.observed Diagram may not be an Overview itself: "+t),i!==t&&(null!==i&&(this.remove(this.hg),i.VC("ViewportBoundsChanged",this.NC),i.VC("DocumentBoundsChanged",this.MC),i.al.remove(this)),this.Di=t,null!==t&&(t.zx("ViewportBoundsChanged",this.NC),t.zx("DocumentBoundsChanged",this.MC),t.al.add(this),this.add(this.hg),Tr(this)),this.Rb(),this.h("observed",i,t))
}),K(kr,{hg:"box"},function(){return this.Gk},function(t){var i=this.Gk;i!==t&&(this.Gk=t,this.remove(i),this.add(this.Gk),Tr(this),this.h("box",i,t))}),K(kr,{VH:"drawsTemporaryLayers"},function(){return this.it},function(t){this.it!==t&&(this.it=t,this.Jy())}),kr.prototype.Bf=function(){var t=this.Di;return null===t?Qf.VD:t.Xc},kr.prototype.ay=function(){!0!==this.ed&&(this.ed=!0,Mr(this))},kr.prototype.ds=function(t){this.Ub||(To(this),this.ba(),Mo(this),this.Rb(),Tr(this),this.ma("ViewportBoundsChanged",null,t))},U(Sr,Fn),Sr.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||!t.Xj||!t.Fe)return!1;var i=t.Cy;if(null===i)return!1;if(null===this.findDraggablePart()){var n=i.Va;this.Mj=new wi(n.width/2,n.height/2),t=t.Yb.S,i.position=new wi(t.x-this.Mj.x,t.y-this.Mj.y)}return!0},Sr.prototype.doActivate=function(){this.Mj=null,Fn.prototype.doActivate.call(this)},Sr.prototype.moveParts=function(){var t=this.g,i=t.Cy;if(null!==i){var n=t.hg;if(null!==n){if(null===this.Mj){var e=t.Yb.S,n=n.location;this.Mj=new wi(e.x-n.x,e.y-n.y)}t=t.C.S,i.position=new wi(t.x-this.Mj.x,t.y-this.Mj.y)}}},U(Cr,de),Cr.prototype.resize=function(t){var i=this.g.Cy;if(null!==i){var n=i.Va.copy();i.position=t.position,(n.width!==t.width||n.height!==t.height)&&0<t.width&&0<t.height&&(i.scale=Math.min(n.width/t.width,n.height/t.height))}},H("Brush",Nr);var cp;Nr.Solid=cp=Z(Nr,"Solid",0);var pp;Nr.Linear=pp=Z(Nr,"Linear",1);var dp;Nr.Radial=dp=Z(Nr,"Radial",2);var vp;Nr.Pattern=vp=Z(Nr,"Pattern",4),Nr.prototype.copy=function(){var t=new Nr;return t.da=this.da,t.hm=this.hm,t.en=this.en.O(),t.wm=this.wm.O(),t.gu=this.gu,t.jt=this.jt,null!==this.Uf&&(t.Uf=this.Uf.copy()),t.Wt=this.Wt,t},Nr.prototype.va=function(){return this.freeze(),Object.freeze(this),this},Nr.prototype.freeze=function(){return this.pa=!0,null!==this.Uf&&this.Uf.freeze(),this},Nr.prototype.wa=function(){return Object.isFrozen(this)&&r("cannot thaw constant: "+this),this.pa=!1,null!==this.Uf&&this.Uf.wa(),this},Nr.prototype.toString=function(){var t="Brush(";if(this.type===cp)t+=this.color;else if(t=this.type===pp?t+"Linear ":this.type===dp?t+"Radial ":this.type===vp?t+"Pattern ":t+"(unknown) ",t+=this.start+" "+this.end,null!==this.or)for(var i=this.or.i;i.next();)t+=" "+i.key+":"+i.value;return t+")"},Nr.prototype.addColorStop=Nr.prototype.addColorStop=function(t,i){s(this),("number"!=typeof t||!isFinite(t)||t>1||0>t)&&c(t,"0 <= loc <= 1",Nr,"addColorStop:loc"),h(i,"string",Nr,"addColorStop:color"),null===this.Uf&&(this.Uf=new bi("number","string")),this.Uf.add(t,i),this.da===cp&&(this.type=pp),this.Vf=null},K(Nr,{type:"type"},function(){return this.da},function(t){s(this,t),u(t,Nr,Nr,"type"),this.da=t,this.start.Gd()&&(t===pp?this.start=kf:t===dp&&(this.start=Sf)),this.end.Gd()&&(t===pp?this.end=Pf:t===dp&&(this.end=Sf)),this.Vf=null}),K(Nr,{color:"color"},function(){return this.hm},function(t){s(this,t),this.hm=t,this.Vf=null}),K(Nr,{start:"start"},function(){return this.en},function(t){s(this,t),a(t,Fi,Nr,"start"),this.en=t.O(),this.Vf=null}),K(Nr,{end:"end"},function(){return this.wm},function(t){s(this,t),a(t,Fi,Nr,"end"),this.wm=t.O(),this.Vf=null}),K(Nr,{vs:"startRadius"},function(){return this.gu},function(t){s(this,t),l(t,Nr,"startRadius"),0>t&&c(t,">= zero",Nr,"startRadius"),this.gu=t,this.Vf=null}),K(Nr,{ur:"endRadius"},function(){return this.jt},function(t){s(this,t),l(t,Nr,"endRadius"),0>t&&c(t,">= zero",Nr,"endRadius"),this.jt=t,this.Vf=null}),K(Nr,{or:"colorStops"},function(){return this.Uf},function(t){s(this,t),this.Uf=t,this.Vf=null}),K(Nr,{pattern:"pattern"},function(){return this.Wt},function(t){s(this,t),this.Wt=t,this.Vf=null}),Nr.randomColor=function(t,i){void 0===t&&(t=128),void 0===i&&(i=Math.max(t,255));var n=Math.abs(i-t),e=Math.floor(t+Math.random()*n).toString(16),o=Math.floor(t+Math.random()*n).toString(16),n=Math.floor(t+Math.random()*n).toString(16);return 2>e.length&&(e="0"+e),2>o.length&&(o="0"+o),2>n.length&&(n="0"+n),"#"+e+o+n};var yp=o("canvas").getContext("2d");Nr.isValidColor=function(t){if("black"===t)return!0;if(""===t)return!1;yp.fillStyle="#000000";var i=yp.fillStyle;return yp.fillStyle=t,yp.fillStyle!==i?!0:(yp.fillStyle="#FFFFFF",i=yp.fillStyle,yp.fillStyle=t,yp.fillStyle!==i)},Pr.Qg=!0,H("GraphObject",Pr),Pr.prototype.cloneProtected=function(t){if(t.T=6144|this.T,t.ic=this.ic,t.yb=this.yb,t.nb=this.nb,t.Nb=this.Nb,t.xa.assign(this.xa),t.Ae.assign(this.Ae),t.zi=this.zi.O(),t.xi=this.xi.O(),t.Ij=this.Ij.copy(),t.Eb=this.Eb,t.cm=this.cm,t.Vg=this.Vg,t.Kp=this.Kp.O(),t.nc.assign(this.nc),t.Bb.assign(this.Bb),t.hc.assign(this.hc),t.mq=this.mq,t.G=null!==this.G?this.G.copy():null,t.Zo=this.Zo,t.$o=this.$o,t.Vq=this.Vq,t.Wq=this.Wq,t.Md=this.Md.O(),t.yo=this.yo.O(),t.Aq=this.Aq,t.Fi=this.Fi,t.Fo=this.Fo,t.hi=this.hi,t.Eq=this.Eq,t.Dq=this.Dq,t.Fq=this.Fq.O(),t.Gq=this.Gq,t.Mo=this.Mo,t.F=null!==this.F?this.F.copy():null,t.gc=this.gc,t.em=this.em,null!==this.Ik){t.Ik=b(this.Ik);for(var i=0;i<this.Ik.length;i++){var n=this.Ik[i];t[n]=this[n]}}null!==this.kh&&(t.kh=this.kh.copy())},Pr.prototype.Zg=function(t){t.nq=null,t.cl=null,t.H()},Pr.prototype.clone=function(){var t=new this.constructor;return this.cloneProtected(t),t},Pr.prototype.copy=function(){return this.clone()},Pr.prototype.toString=function(){return J(Object.getPrototypeOf(this))+"#"+V(this)};var gp;Pr.None=gp=Z(Pr,"None",0);var mp;Pr.Default=mp=Z(Pr,"Default",0);var xp;Pr.Vertical=xp=Z(Pr,"Vertical",4);var bp;Pr.Horizontal=bp=Z(Pr,"Horizontal",5);var wp;Pr.Fill=wp=Z(Pr,"Fill",3);var kp;Pr.Uniform=kp=Z(Pr,"Uniform",1);var Mp;Pr.UniformToFill=Mp=Z(Pr,"UniformToFill",2),Pr.prototype.Xd=function(){var t=new Mh;t.oi=xf,t.Qi=xf,t.mi=10,t.Oi=10,t.li=cd,t.Ni=cd,t.ni=0,t.Pi=0,this.G=t},Pr.prototype.raiseChangedEvent=Pr.prototype.ec=function(t,i,n,e,o,r,s){var a=this.J;null!==a&&(a.Ql(t,i,n,e,o,r,s),0!==(1024&this.T)&&n===this&&t===cc&&Dr(this,a,i))},Pr.prototype.Su=function(t){return this.em===t?this:null},Pr.prototype.raiseChanged=Pr.prototype.h=function(t,i,n){this.ec(cc,t,this,i,n)},Pr.prototype.cC=function(t,i,n){if(!1===this.Qf)return!1;var e=this.sa;i=t.Xi(i);var o=!1;return n&&(o=df(t.x,t.y,0,0,0,e.height)<i||df(t.x,t.y,0,e.height,e.width,e.height)<i||df(t.x,t.y,e.width,e.height,e.width,0)<i||df(t.x,t.y,e.width,0,0,0)<i),n||(o=df(t.x,t.y,0,0,0,e.height)<i&&df(t.x,t.y,0,e.height,e.width,e.height)<i&&df(t.x,t.y,e.width,e.height,e.width,0)<i&&df(t.x,t.y,e.width,0,0,0)<i),o},Pr.prototype.jf=function(){return!0},Pr.prototype.containsPoint=Pr.prototype.na=function(t){var i=C();i.assign(t),this.transform.Ka(i);var n=this.Q;if(!n.w())return!1;var e=this.g;if(null!==e&&e.Lw){var o=e.Ux("extraTouchThreshold"),r=e.Ux("extraTouchArea"),s=r/2,a=this.sa,e=this.Th()*e.scale,h=1/e;if(a.width*e<o&&a.height*e<o)return t=gf(n.x-s*h,n.y-s*h,n.width+r*h,n.height+r*h,i.x,i.y),P(i),t}return(this instanceof Ca||this instanceof Ps?gf(n.x-5,n.y-5,n.width+10,n.height+10,i.x,i.y):n.na(i))?this.kh&&!this.kh.na(i)?!1:null!==this.Nb&&n.na(i)||null!==this.nb&&this.hc.na(t)?!0:(P(i),this.Vi(t)):(P(i),!1)},Pr.prototype.Vi=function(t){var i=this.sa;return gf(0,0,i.width,i.height,t.x,t.y)},Pr.prototype.containsRect=Pr.prototype.Wi=function(t){if(0===this.angle)return this.Q.Wi(t);var i=this.sa,i=A(0,0,i.width,i.height),n=this.transform,e=!1,o=N(t.x,t.y);return i.na(n.ah(o))&&(o.k(t.x,t.bottom),i.na(n.ah(o))&&(o.k(t.right,t.bottom),i.na(n.ah(o))&&(o.k(t.right,t.y),i.na(n.ah(o))&&(e=!0)))),P(o),F(i),e},Pr.prototype.containedInRect=Pr.prototype.zl=function(t,i){if(void 0===i)return t.Wi(this.Q);var n=this.sa,e=!1,o=N(0,0);return t.na(i.Ka(o))&&(o.k(0,n.height),t.na(i.Ka(o))&&(o.k(n.width,n.height),t.na(i.Ka(o))&&(o.k(n.width,0),t.na(i.Ka(o))&&(e=!0)))),e},Pr.prototype.intersectsRect=Pr.prototype.If=function(t,i){if(void 0===i&&(i=this.transform,0===this.angle))return t.If(this.Q);var n=this.sa,e=i,o=N(0,0),r=N(0,n.height),s=N(n.width,n.height),a=N(n.width,0),h=!1;if(t.na(e.Ka(o))||t.na(e.Ka(r))||t.na(e.Ka(s))||t.na(e.Ka(a)))h=!0;else{var n=A(0,0,n.width,n.height),l=N(t.x,t.y);n.na(e.ah(l))?h=!0:(l.k(t.x,t.bottom),n.na(e.ah(l))?h=!0:(l.k(t.right,t.bottom),n.na(e.ah(l))?h=!0:(l.k(t.right,t.y),n.na(e.ah(l))&&(h=!0)))),P(l),F(n),!h&&(Qf.$u(t,o,r)||Qf.$u(t,r,s)||Qf.$u(t,s,a)||Qf.$u(t,a,o))&&(h=!0)}return P(o),P(r),P(s),P(a),h},Pr.prototype.getDocumentPoint=Pr.prototype.Ra=function(t,i){void 0===i&&(i=new wi),t.Gd()&&r("getDocumentPoint:s Spot must be real: "+t.toString());var n=this.sa;return i.k(t.x*n.width+t.offsetX,t.y*n.height+t.offsetY),this.We.Ka(i),i},Pr.prototype.getDocumentAngle=Pr.prototype.hk=function(){var t;return t=this.We,1===t.m11&&0===t.m12?t=0:(t=180*Math.atan2(t.m12,t.m11)/Math.PI,0>t&&(t+=360)),t},Pr.prototype.getDocumentScale=Pr.prototype.Th=function(){if(0!==(4096&this.T)==!1)return this.gt;var t=this.Eb;return null!==this.I?t*this.I.Th():t},Pr.prototype.getLocalPoint=Pr.prototype.jC=function(t,i){return void 0===i&&(i=new wi),i.assign(t),this.We.ah(i),i},Pr.prototype.getNearestIntersectionPoint=Pr.prototype.kk=function(t,i,n){return this.Fn(t.x,t.y,i.x,i.y,n)},Wu=Pr.prototype,Wu.Fn=function(t,i,n,e,o){var r=this.transform,s=1/(r.m11*r.m22-r.m12*r.m21),a=r.m22*s,h=-r.m12*s,l=-r.m21*s,u=r.m11*s,f=s*(r.m21*r.dy-r.m22*r.dx),c=s*(r.m12*r.dx-r.m11*r.dy);return null!==this.ul?(r=this.Q,Qf.kk(r.left,r.top,r.right,r.bottom,t,i,n,e,o)):(s=t*a+i*l+f,t=t*h+i*u+c,i=n*a+e*l+f,n=n*h+e*u+c,o.k(0,0),e=this.sa,n=Qf.kk(0,0,e.width,e.height,s,t,i,n,o),o.transform(r),n)},Wu.ac=function(t,i,n,e,o){this.Zf();var s=D();if(s.assign(this.Bb),this.Bb.wa(),!1===$r(this)){var a=this.Bb;a.x=t,a.y=i,a.width=n,a.height=e}else this.Lh(t,i,n,e);this.Bb.freeze(),this.kh=void 0===o?null:o,n=!1,void 0!==o?n=!0:null!==this.I&&(o=this.I.hc,e=this.oa,null!==this.ul&&(e=this.Bb),n=i+e.height,e=t+e.width,n=!(t+.05>=0&&e<=o.width+.05&&i+.05>=0&&n<=o.height+.05),this instanceof qs&&(t=this.hc,this.Ht>t.height||this.qi.ge>t.width))&&(n=!0),this.T=n?256|this.T:-257&this.T,this.Bb.w()||r("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.Bb.toString()),this.nv(s,this.Bb),F(s)},Wu.Lh=function(){},Wu.nv=function(){_r(this,!1);var t=this.J;null!==t&&null!==t.g&&(t.mk(),this.Qt(t),this.ba(),t=this.J,null!==t&&(t.ps!==this&&t.bD!==this&&t.eD!==this||xa(t,!0)))},Wu.Qt=function(t){null!==this.cd&&xa(t,!0)},Wu.oe=function(t,i){if(this.visible){var n=this.opacity,e=1;if(1!==n){if(0===n)return;e=t.globalAlpha,t.globalAlpha=e*n}if(t instanceof qi){t:if(this.visible){var o=null,r=t.fv;if(this instanceof rs&&(this.type===Fp||this.type===Op))Br(this,t,i);else{var s=this.Bb;if(0!==s.width&&0!==s.height&&!isNaN(s.x)&&!isNaN(s.y)){var a=this.transform,h=this.I;0!==(4096&this.T)==!0&&Ir(this);var l=0!==(256&this.T),u=!1;if(this instanceof qs&&Es(this,t),l){if(u=h.jf()?h.sa:h.Q,this.kh)var f=this.kh,c=f.x,p=f.y,d=f.width,f=f.height;else c=Math.max(s.x,u.x),p=Math.max(s.y,u.y),d=Math.min(s.right,u.right)-c,f=Math.min(s.bottom,u.bottom)-p;if(c>s.width+s.x||s.x>u.width+u.x||p>s.height+s.y||s.y>u.height+u.y)break t;u=!0,Ui(t,1,0,0,1,0,0),t.save(),t.beginPath(),t.rect(c,p,d,f),t.clip()}if(c=!1,this instanceof sa&&(c=!0,!this.qa()))break t;if(p=!1,d=i.Pg,this.J&&d.drawShadows&&(p=this.J.rk),t.Qh.re=[1,0,0,1,0,0],null!==this.Nb&&(Rr(this,t,this.Nb,!0,!0),this.Nb instanceof Nr&&this.Nb.type===dp?(t.beginPath(),t.rect(s.x,s.y,s.width,s.height),qr(t,this.Nb)):t.fillRect(s.x,s.y,s.width,s.height)),c&&this.rk&&d.drawShadows&&(Ui(t,1,0,0,1,0,0),s=this.ll,t.shadowOffsetX=s.x,t.shadowOffsetY=s.y,t.shadowColor=this.kl,t.shadowBlur=this.jl/i.scale,t.Ja()),this instanceof rs?Ui(t,a.m11,a.m12,a.m21,a.m22,a.dx,a.dy):t.Qh.re=[a.m11,a.m12,a.m21,a.m22,a.dx,a.dy],null!==this.nb){var f=this.sa,s=a=0,d=f.width,f=f.height,v=0;this instanceof Ps&&(f=this.za.Qa,a=f.x,s=f.y,d=f.width,f=f.height,v=this.gg),Rr(this,t,this.nb,!0,!1),this.nb instanceof Nr&&this.nb.type===dp?(t.beginPath(),t.rect(a-v/2,s-v/2,d+v,f+v),qr(t,this.nb)):t.fillRect(a-v/2,s-v/2,d+v,f+v)}d=s=a=0,p&&(null!==this.nb||null!==this.Nb||null!==h&&0!==(512&h.T)||null!==h&&h.type===Dp&&h.Ze()!==this)?(Yr(this,!0),a=t.shadowOffsetX,s=t.shadowOffsetY,d=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0):Yr(this,!1),this.Yi(t,i),p&&0!==(512&this.T)==!0&&(t.shadowOffsetX=a,t.shadowOffsetY=s,t.shadowBlur=d),c&&p&&(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),l&&(t.restore(),u&&t.Ie.pop(),Qe(i,t)),this instanceof rs&&(o=t.Ie.pop()),c&&p&&t.Ie.pop(),null!==t.YB&&(null===o&&(r===t.fv?(Ui(t,1,0,0,1,0,0),o=t.Ie.pop()):o=t.fv),t.YB(this,o))}}}}else{if(this instanceof rs&&(this.type===Fp||this.type===Op))return Br(this,t,i),void(1!==n&&(t.globalAlpha=e));if(c=this.Bb,0!==c.width&&0!==c.height&&!isNaN(c.x)&&!isNaN(c.y)){if(o=this.transform,r=this.I,0!==(4096&this.T)==!0&&Ir(this),h=0!==(256&this.T),this instanceof qs&&Es(this,t),h){if(l=r.jf()?r.sa:r.Q,this.kh?(s=this.kh,u=s.x,p=s.y,a=s.width,s=s.height):(u=Math.max(c.x,l.x),p=Math.max(c.y,l.y),a=Math.min(c.right,l.right)-u,s=Math.min(c.bottom,l.bottom)-p),u>c.width+c.x||c.x>l.width+l.x||p>c.height+c.y||c.y>l.height+l.y)return void(1!==n&&(t.globalAlpha=e));t.save(),t.beginPath(),t.rect(u,p,a,s),t.clip()}if(p=i.Pg,l=!1,this instanceof sa){if(l=!0,!this.qa())return void(1!==n&&(t.globalAlpha=e));this.rk&&p.drawShadows&&(u=this.ll,t.shadowOffsetX=u.x*i.scale*i.Ee,t.shadowOffsetY=u.y*i.scale*i.Ee,t.shadowColor=this.kl,t.shadowBlur=this.jl)}u=!1,this.J&&p.drawShadows&&(u=this.J.rk),null!==this.Nb&&(Rr(this,t,this.Nb,!0,!0),this.Nb instanceof Nr&&this.Nb.type===dp?(t.beginPath(),t.rect(c.x,c.y,c.width,c.height),qr(t,this.Nb)):t.fillRect(c.x,c.y,c.width,c.height)),o.Nr()||t.transform(o.m11,o.m12,o.m21,o.m22,o.dx,o.dy),null!==this.nb&&(s=this.sa,p=c=0,a=s.width,s=s.height,d=0,this instanceof Ps&&(s=this.za.Qa,c=s.x,p=s.y,a=s.width,s=s.height,d=this.gg),Rr(this,t,this.nb,!0,!1),this.nb instanceof Nr&&this.nb.type===dp?(t.beginPath(),t.rect(c-d/2,p-d/2,a+d,s+d),qr(t,this.nb)):t.fillRect(c-d/2,p-d/2,a+d,s+d)),a=p=c=0,u&&(null!==this.nb||null!==this.Nb||null!==r&&0!==(512&r.T)||null!==r&&(r.type===Dp||r.type===Lp)&&r.Ze()!==this)?(Yr(this,!0),c=t.shadowOffsetX,p=t.shadowOffsetY,a=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0):Yr(this,!1),this.Yi(t,i),u&&0!==(512&this.T)==!0&&(t.shadowOffsetX=c,t.shadowOffsetY=p,t.shadowBlur=a),l&&u&&(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),h?(t.restore(),this instanceof rs?Qe(i,t,!0):Qe(i,t,!1)):o.Nr()||(r=1/(o.m11*o.m22-o.m12*o.m21),t.transform(o.m22*r,-o.m12*r,-o.m21*r,o.m11*r,r*(o.m21*o.dy-o.m22*o.dx),r*(o.m12*o.dx-o.m11*o.dy)))}}1!==n&&(t.globalAlpha=e)}},Wu.Yi=function(){},Pr.prototype.isContainedBy=Pr.prototype.pk=function(t){if(t instanceof rs)t:{if(this!==t&&null!==t)for(var i=this.I;null!==i;){if(i===t){t=!0;break t}i=i.I}t=!1}else t=!1;return t},Pr.prototype.isVisibleObject=Pr.prototype.tk=function(){if(!this.visible)return!1;var t=this.I;return null!==t?t.tk():!0},Wu=Pr.prototype,Wu.H=function(t){if(void 0===t&&(t=!1),!0!==Zr(this)){Qr(this,!0),_r(this,!0);var i=this.I;if(null!==i?t||i.H():(t=this.g,null!==t&&(t.nf.add(this),this instanceof Na&&(t.V.Ua||this.Je(),null!==this.vd&&Vr(this.vd)),t.wd(!0))),this instanceof rs){(this.da===Dp||this.da===zp)&&(t=this.Ze(),null!==t&&t.H(!0)),t=this.la.l;for(var i=t.length,n=0;i>n;n++){var e=t[n];!0!==Zr(e)&&(e.ka.w()||(e instanceof jh||e instanceof rs||e instanceof qs||Hr(e,!1)!==gp)&&e.H(!0))}}}},Wu.In=function(){!1===Zr(this)&&(Qr(this,!0),_r(this,!0))},Wu.Zf=function(){0!==(2048&this.T)==!1&&(Xr(this,!0),Jr(this,!0))},Wu.$x=function(){Jr(this,!0)},Wu.ba=function(){var t=this.J;null!==t&&t.ba()},K(Pr,{xv:"segmentOrientation"},function(){return this.Gq},function(t){var i=this.Gq;i!==t&&(this.Gq=t,this.H(),this.h("segmentOrientation",i,t))}),K(Pr,{ff:"segmentIndex"},function(){return this.Eq},function(t){t=Math.round(t);var i=this.Eq;i!==t&&(this.Eq=t,this.H(),this.h("segmentIndex",i,t))}),K(Pr,{wv:"segmentFraction"},function(){return this.Dq},function(t){isNaN(t)?t=0:0>t?t=0:t>1&&(t=1);var i=this.Dq;i!==t&&(this.Dq=t,this.H(),this.h("segmentFraction",i,t))}),K(Pr,{kD:"segmentOffset"},function(){return this.Fq},function(t){var i=this.Fq;i.A(t)||(this.Fq=t=t.O(),this.H(),this.h("segmentOffset",i,t))}),K(Pr,{stretch:"stretch"},function(){return this.Vg},function(t){var i=this.Vg;i!==t&&(this.Vg=t,this.H(),this.h("stretch",i,t))}),K(Pr,{name:"name"},function(){return this.yb},function(t){var i=this.yb;i!==t&&(this.yb=t,null!==this.J&&(this.J.Lj=null),this.h("name",i,t))}),K(Pr,{opacity:"opacity"},function(){return this.ic},function(t){var i=this.ic;i!==t&&(h(t,"number",Pr,"opacity"),(0>t||t>1)&&c(t,"0 <= value <= 1",Pr,"opacity"),this.ic=t,this.h("opacity",i,t),t=this.g,i=this.J,null!==t&&null!==i&&t.ba(ca(i,i.Q)))}),K(Pr,{visible:"visible"},function(){return 0!==(1&this.T)},function(t){var i=0!==(1&this.T);i!==t&&(this.T^=1,this.h("visible",i,t),i=this.I,null!==i?i.H():this instanceof sa&&(this.mk(),this.$d(t)),this.ba(),ns(this))}),K(Pr,{Qf:"pickable"},function(){return 0!==(2&this.T)},function(t){var i=0!==(2&this.T);i!==t&&(this.T^=2,this.h("pickable",i,t))}),K(Pr,{iF:"fromLinkableDuplicates"},function(){return 0!==(4&this.T)},function(t){var i=0!==(4&this.T);i!==t&&(this.T^=4,this.h("fromLinkableDuplicates",i,t))}),K(Pr,{jF:"fromLinkableSelfNode"},function(){return 0!==(8&this.T)},function(t){var i=0!==(8&this.T);i!==t&&(this.T^=8,this.h("fromLinkableSelfNode",i,t))}),K(Pr,{YG:"toLinkableDuplicates"},function(){return 0!==(16&this.T)},function(t){var i=0!==(16&this.T);i!==t&&(this.T^=16,this.h("toLinkableDuplicates",i,t))}),K(Pr,{ZG:"toLinkableSelfNode"},function(){return 0!==(32&this.T)},function(t){var i=0!==(32&this.T);i!==t&&(this.T^=32,this.h("toLinkableSelfNode",i,t))}),K(Pr,{Jf:"isPanelMain"},function(){return 0!==(64&this.T)},function(t){var i=0!==(64&this.T);i!==t&&(this.T^=64,this.H(),this.h("isPanelMain",i,t))}),K(Pr,{ey:"isActionable"},function(){return 0!==(128&this.T)},function(t){var i=0!==(128&this.T);i!==t&&(this.T^=128,this.h("isActionable",i,t))}),K(Pr,{ul:"areaBackground"},function(){return this.Nb},function(t){var i=this.Nb;i!==t&&(t instanceof Nr&&t.freeze(),this.Nb=t,this.ba(),this.h("areaBackground",i,t))}),K(Pr,{background:"background"},function(){return this.nb},function(t){var i=this.nb;i!==t&&(t instanceof Nr&&t.freeze(),this.nb=t,this.ba(),this.h("background",i,t))}),Y(Pr,{J:"part"},function(){if(this instanceof sa)return this;if(this.cl)return this.cl;var t;for(t=this.I;t;){if(t instanceof sa)return this.cl=t;t=t.I}return null}),Y(Pr,{I:"panel"},function(){return this.eg}),Pr.prototype.zk=function(t){this.eg=t},Y(Pr,{layer:"layer"},function(){var t=this.J;return null!==t?t.layer:null}),Y(Pr,{g:"diagram"},function(){var t=this.J;return null!==t?t.g:null},{configurable:!0}),K(Pr,{position:"position"},function(){return this.xa},function(t){var i=this.xa;i.A(t)||(t=t.O(),this.Vy(t,i)&&this.h("position",i,t))}),Pr.prototype.Vy=function(t){return this.xa=t,Vr(this),this.Zf(),!0},Pr.prototype.pD=function(t,i){this.xa.k(t,i),la(this,!0),this.Zf()},Y(Pr,{Q:"actualBounds"},function(){return this.Bb}),K(Pr,{scale:"scale"},function(){return this.Eb},function(t){var i=this.Eb;i!==t&&(0>=t&&r("GraphObject.scale must be greater than zero"),this.Eb=t,this.Zf(),this.H(),this.h("scale",i,t))}),K(Pr,{angle:"angle"},function(){return this.cm},function(t){var i=this.cm;i!==t&&(t%=360,0>t&&(t+=360),i!==t&&(this.cm=t,this.H(),this.Zf(),this.h("angle",i,t)))}),K(Pr,{ka:"desiredSize"},function(){return this.Ae},function(t){var i=this.Ae;i.A(t)||(this.Ae=t=t.O(),this.H(),this instanceof Ps&&this.Ed(),this.h("desiredSize",i,t),t=this.J,null!==t&&0!==(1024&this.T)&&(Dr(this,t,"width"),Dr(this,t,"height")))}),K(Pr,{width:"width"},function(){return this.Ae.width},function(t){if(this.Ae.width!==t){var i=this.Ae;this.Ae=t=new Ti(t,this.Ae.height).freeze(),this.H(),this instanceof Ps&&this.Ed(),this.h("desiredSize",i,t),i=this.J,null!==i&&0!==(1024&this.T)&&Dr(this,i,"width")}}),K(Pr,{height:"height"},function(){return this.Ae.height},function(t){if(this.Ae.height!==t){var i=this.Ae;this.Ae=t=new Ti(this.Ae.width,t).freeze(),this.H(),this instanceof Ps&&this.Ed(),this.h("desiredSize",i,t),i=this.J,null!==i&&0!==(1024&this.T)&&Dr(this,i,"height")}}),K(Pr,{Lf:"minSize"},function(){return this.zi},function(t){var i=this.zi;i.A(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.freeze(),this.zi=t,this.H(),this.h("minSize",i,t))}),K(Pr,{se:"maxSize"},function(){return this.xi},function(t){var i=this.xi;i.A(t)||(t=t.copy(),isNaN(t.width)&&(t.width=1/0),isNaN(t.height)&&(t.height=1/0),t.freeze(),this.xi=t,this.H(),this.h("maxSize",i,t))}),Y(Pr,{oa:"measuredBounds"},function(){return this.nc}),Y(Pr,{sa:"naturalBounds"},function(){return this.hc},{configurable:!0}),K(Pr,{margin:"margin"},function(){return this.Kp},function(t){"number"==typeof t&&(t=new Di(t));var i=this.Kp;i.A(t)||(this.Kp=t=t.O(),this.H(),this.h("margin",i,t))}),Y(Pr,{transform:null},function(){return 0!==(2048&this.T)==!0&&Ir(this),this.ld}),Y(Pr,{We:null},function(){return 0!==(4096&this.T)==!0&&Ir(this),this.bm}),K(Pr,{alignment:"alignment"},function(){return this.Md},function(t){var i=this.Md;i.A(t)||(t.Gd()&&!t.lc()&&r("alignment must be a real Spot or Spot.Default"),this.Md=t=t.O(),Vr(this),this.h("alignment",i,t))}),K(Pr,{column:"column"},function(){return this.Fo},function(t){t=Math.round(t);var i=this.Fo;i!==t&&(0>t&&c(t,">= 0",Pr,"column"),this.Fo=t,this.H(),this.h("column",i,t))}),K(Pr,{HE:"columnSpan"},function(){return this.hi},function(t){t=Math.round(t);var i=this.hi;i!==t&&(1>t&&c(t,">= 1",Pr,"columnSpan"),this.hi=t,this.H(),this.h("columnSpan",i,t))}),K(Pr,{Tb:"row"},function(){return this.Aq},function(t){t=Math.round(t);var i=this.Aq;i!==t&&(0>t&&c(t,">= 0",Pr,"row"),this.Aq=t,this.H(),this.h("row",i,t))}),K(Pr,{rowSpan:"rowSpan"},function(){return this.Fi},function(t){t=Math.round(t);var i=this.Fi;i!==t&&(1>t&&c(t,">= 1",Pr,"rowSpan"),this.Fi=t,this.H(),this.h("rowSpan",i,t))}),K(Pr,{Ti:"alignmentFocus"},function(){return this.yo},function(t){var i=this.yo;i.A(t)||(t.Gd()&&!t.lc()&&r("alignmentFocus must be a real Spot or Spot.Default"),this.yo=t=t.O(),this.H(),this.h("alignmentFocus",i,t))}),K(Pr,{cd:"portId"},function(){return this.mq},function(t){var i=this.mq;if(i!==t){var n=this.J;if(null===n||n instanceof Na||(r("portID being set on a Link: "+t),n=null),null!==i&&null!==n&&Oa(n,this),this.mq=t,null!==t&&n){n.Jg=!0,null===n.jd&&Fa(n);var e=this.cd;null!==e&&n.jd.add(e,this)}this.h("portId",i,t)}}),K(Pr,{ab:"toSpot"},function(){return null!==this.G?this.G.Qi:xf},function(t){null===this.G&&this.Xd();var i=this.G.Qi;i.A(t)||(t=t.O(),this.G.Qi=t,this.h("toSpot",i,t),ns(this))}),K(Pr,{Dk:"toEndSegmentLength"},function(){return null!==this.G?this.G.Oi:10},function(t){null===this.G&&this.Xd();var i=this.G.Oi;i!==t&&(0>t&&c(t,">= 0",Pr,"toEndSegmentLength"),this.G.Oi=t,this.h("toEndSegmentLength",i,t),ns(this))}),K(Pr,{xs:"toEndSegmentDirection"},function(){return null!==this.G?this.G.Ni:cd},function(t){null===this.G&&this.Xd();var i=this.G.Ni;i!==t&&(this.G.Ni=t,this.h("toEndSegmentDirection",i,t),ns(this))}),K(Pr,{zs:"toShortLength"},function(){return null!==this.G?this.G.Pi:0},function(t){null===this.G&&this.Xd();var i=this.G.Pi;i!==t&&(this.G.Pi=t,this.h("toShortLength",i,t),ns(this))}),K(Pr,{xD:"toLinkable"},function(){return this.Vq},function(t){var i=this.Vq;i!==t&&(this.Vq=t,this.h("toLinkable",i,t))}),K(Pr,{$G:"toMaxLinks"},function(){return this.Wq},function(t){var i=this.Wq;i!==t&&(0>t&&c(t,">= 0",Pr,"toMaxLinks"),this.Wq=t,this.h("toMaxLinks",i,t))}),K(Pr,{Za:"fromSpot"},function(){return null!==this.G?this.G.oi:xf},function(t){null===this.G&&this.Xd();var i=this.G.oi;i.A(t)||(t=t.O(),this.G.oi=t,this.h("fromSpot",i,t),ns(this))}),K(Pr,{gk:"fromEndSegmentLength"},function(){return null!==this.G?this.G.mi:10},function(t){null===this.G&&this.Xd();var i=this.G.mi;i!==t&&(0>t&&c(t,">= 0",Pr,"fromEndSegmentLength"),this.G.mi=t,this.h("fromEndSegmentLength",i,t),ns(this))}),K(Pr,{Er:"fromEndSegmentDirection"},function(){return null!==this.G?this.G.li:cd},function(t){null===this.G&&this.Xd();var i=this.G.li;i!==t&&(this.G.li=t,this.h("fromEndSegmentDirection",i,t),ns(this))}),K(Pr,{Fr:"fromShortLength"},function(){return null!==this.G?this.G.ni:0},function(t){null===this.G&&this.Xd();var i=this.G.ni;i!==t&&(this.G.ni=t,this.h("fromShortLength",i,t),ns(this))}),K(Pr,{fC:"fromLinkable"},function(){return this.Zo},function(t){var i=this.Zo;i!==t&&(this.Zo=t,this.h("fromLinkable",i,t))}),K(Pr,{kF:"fromMaxLinks"},function(){return this.$o},function(t){var i=this.$o;i!==t&&(0>t&&c(t,">= 0",Pr,"fromMaxLinks"),this.$o=t,this.h("fromMaxLinks",i,t))}),K(Pr,{cursor:"cursor"},function(){return this.Mo},function(t){var i=this.Mo;i!==t&&(h(t,"string",Pr,"cursor"),this.Mo=t,this.h("cursor",i,t))}),K(Pr,{click:"click"},function(){return null!==this.F?this.F.jh:null},function(t){null===this.F&&jr(this);var i=this.F.jh;i!==t&&(null!==t&&h(t,"function",Pr,"click"),this.F.jh=t,this.h("click",i,t))}),K(Pr,{tr:"doubleClick"},function(){return null!==this.F?this.F.qh:null},function(t){null===this.F&&jr(this);var i=this.F.qh;i!==t&&(null!==t&&h(t,"function",Pr,"doubleClick"),this.F.qh=t,this.h("doubleClick",i,t))}),K(Pr,{Hx:"contextClick"},function(){return null!==this.F?this.F.lh:null},function(t){null===this.F&&jr(this);var i=this.F.lh;i!==t&&(null!==t&&h(t,"function",Pr,"contextClick"),this.F.lh=t,this.h("contextClick",i,t))}),K(Pr,{IC:"mouseEnter"},function(){return null!==this.F?this.F.Vp:null},function(t){null===this.F&&jr(this);var i=this.F.Vp;i!==t&&(null!==t&&h(t,"function",Pr,"mouseEnter"),this.F.Vp=t,this.h("mouseEnter",i,t))}),K(Pr,{JC:"mouseLeave"},function(){return null!==this.F?this.F.Wp:null},function(t){null===this.F&&jr(this);var i=this.F.Wp;i!==t&&(null!==t&&h(t,"function",Pr,"mouseLeave"),this.F.Wp=t,this.h("mouseLeave",i,t))}),K(Pr,{wy:"mouseOver"},function(){return null!==this.F?this.F.Ah:null},function(t){null===this.F&&jr(this);var i=this.F.Ah;i!==t&&(null!==t&&h(t,"function",Pr,"mouseOver"),this.F.Ah=t,this.h("mouseOver",i,t))}),K(Pr,{vy:"mouseHover"},function(){return null!==this.F?this.F.zh:null},function(t){null===this.F&&jr(this);var i=this.F.zh;i!==t&&(null!==t&&h(t,"function",Pr,"mouseHover"),this.F.zh=t,this.h("mouseHover",i,t))}),K(Pr,{uy:"mouseHold"},function(){return null!==this.F?this.F.yh:null},function(t){null===this.F&&jr(this);var i=this.F.yh;i!==t&&(null!==t&&h(t,"function",Pr,"mouseHold"),this.F.yh=t,this.h("mouseHold",i,t))}),K(Pr,{eG:"mouseDragEnter"},function(){return null!==this.F?this.F.Tp:null},function(t){null===this.F&&jr(this);var i=this.F.Tp;i!==t&&(null!==t&&h(t,"function",Pr,"mouseDragEnter"),this.F.Tp=t,this.h("mouseDragEnter",i,t))}),K(Pr,{fG:"mouseDragLeave"},function(){return null!==this.F?this.F.Up:null},function(t){null===this.F&&jr(this);var i=this.F.Up;i!==t&&(null!==t&&h(t,"function",Pr,"mouseDragLeave"),this.F.Up=t,this.h("mouseDragLeave",i,t))}),K(Pr,{ty:"mouseDrop"},function(){return null!==this.F?this.F.xh:null},function(t){null===this.F&&jr(this);var i=this.F.xh;i!==t&&(null!==t&&h(t,"function",Pr,"mouseDrop"),this.F.xh=t,this.h("mouseDrop",i,t))}),K(Pr,{vB:"actionDown"},function(){return null!==this.F?this.F.uo:null},function(t){null===this.F&&jr(this);var i=this.F.uo;i!==t&&(null!==t&&h(t,"function",Pr,"actionDown"),this.F.uo=t,this.h("actionDown",i,t))}),K(Pr,{wB:"actionMove"},function(){return null!==this.F?this.F.vo:null},function(t){null===this.F&&jr(this);var i=this.F.vo;i!==t&&(null!==t&&h(t,"function",Pr,"actionMove"),this.F.vo=t,this.h("actionMove",i,t))}),K(Pr,{xB:"actionUp"},function(){return null!==this.F?this.F.wo:null},function(t){null===this.F&&jr(this);var i=this.F.wo;i!==t&&(null!==t&&h(t,"function",Pr,"actionUp"),this.F.wo=t,this.h("actionUp",i,t))}),K(Pr,{uB:"actionCancel"},function(){return null!==this.F?this.F.to:null},function(t){null===this.F&&jr(this);var i=this.F.to;i!==t&&(null!==t&&h(t,"function",Pr,"actionCancel"),this.F.to=t,this.h("actionCancel",i,t))}),K(Pr,{cz:"toolTip"},function(){return null!==this.F?this.F.Hh:null},function(t){null===this.F&&jr(this);var i=this.F.Hh;i!==t&&(null!==t&&a(t,Ca,Pr,"toolTip"),this.F.Hh=t,this.h("toolTip",i,t))}),K(Pr,{contextMenu:"contextMenu"},function(){return null!==this.F?this.F.mh:null},function(t){null===this.F&&jr(this);var i=this.F.mh;i!==t&&(null!==t&&a(t,Ca,Pr,"contextMenu"),this.F.mh=t,this.h("contextMenu",i,t))}),Pr.prototype.bind=Pr.prototype.bind=function(t){t.wf=this;var i=this.Cn();null!==i&&bs(i)&&r("Cannot add a Binding to a template that has already been copied: "+t),null===this.gc&&(this.gc=new ci(kn)),this.gc.add(t)},Pr.prototype.findTemplateBinder=Pr.prototype.Cn=function(){for(var t=this instanceof rs?this:this.I;null!==t;){if(null!==t.Fk)return t;t=t.I}return null},Pr.fromSvg=Pr.fromSVG=function(t){return zu(t)},Pr.prototype.setProperties=function(t){_(this,t)};var Tp;Pr.make=Tp=function(i){var n=arguments,e=null,o=null;if("function"==typeof i)o=i;else if("string"==typeof i){var s=Sp.ha(i);"function"==typeof s?(n=b(arguments),e=s(n)):o=Xu[i]}if(null===e&&(void 0===o&&(e=t.$,void 0!==e&&void 0!==e.noop&&r("GraphObject.make failed to complete. Is it conflicting with another $ var? (such as jQuery)"),r("GraphObject.make failed to complete, it may be conflicting with another var.")),null!==o&&o.constructor||r("GraphObject.make requires a class function or class name, not: "+i),e=new o),s=1,e instanceof Ke&&1<n.length){var a=e,o=n[1];("string"==typeof o||o instanceof HTMLDivElement)&&(br(a,o),s++)}for(;s<n.length;s++)o=n[s],void 0===o?r("Undefined value at argument "+s+" for object being constructed by GraphObject.make: "+e):es(e,o);return e};var Sp=new bi("string","function");Pr.getBuilders=function(){var t,i=new bi("string","function");for(t in Sp)if(t!==t.toLowerCase()){var n=Sp[t];"function"==typeof n&&i.add(t,n)}return i.freeze(),i};var Cp;Pr.defineBuilder=Cp=function(t,i){h(t,"string",Pr,"defineBuilder:name"),h(i,"function",Pr,"defineBuilder:func");var n=t.toLowerCase();""!==t&&"none"!==n&&t!==n||r("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+t),Sp.add(t,i)};var Np;Pr.takeBuilderArgument=Np=function(t,i,n){void 0===n&&(n=null);var e=t[1];if("function"==typeof n?n(e):"string"==typeof e)return t.splice(1,1),e;if(void 0===i)throw Error("no "+("function"==typeof n?"satisfactory":"string")+" argument for GraphObject builder "+t[0]);return i},Cp("Button",function(){var t=new Nr(pp);t.addColorStop(0,"white"),t.addColorStop(1,"lightgray");var i=new Nr(pp);return i.addColorStop(0,"white"),i.addColorStop(1,"dodgerblue"),t=Tp(rs,Dp,{ey:!0},{_buttonFillNormal:t,_buttonStrokeNormal:"gray",_buttonFillOver:i,_buttonStrokeOver:"blue"},Tp(Ps,{name:"ButtonBorder",jb:"Rectangle",o:new Fi(0,0,2.761423749153968,2.761423749153968),p:new Fi(1,1,-2.761423749153968,-2.761423749153968),fill:t,stroke:"gray"})),t.IC=function(t,i){var n=i.Cd("ButtonBorder");if(n instanceof Ps){var e=i._buttonFillOver;i._buttonFillNormal=n.fill,n.fill=e,e=i._buttonStrokeOver,i._buttonStrokeNormal=n.stroke,n.stroke=e}},t.JC=function(t,i){var n=i.Cd("ButtonBorder");n instanceof Ps&&(n.fill=i._buttonFillNormal,n.stroke=i._buttonStrokeNormal)},t}),Cp("TreeExpanderButton",function(){var t=Tp("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},Tp(Ps,{name:"ButtonIcon",jb:"MinusLine",ka:Qf.qo},new kn("figure","isTreeExpanded",function(t,i){var n=i.I;return t?n._treeExpandedFigure:n._treeCollapsedFigure}).mv()),{visible:!1},new kn("visible","isTreeLeaf",function(t){return!t}).mv());return t.click=function(t,i){var n=i.J;if(n instanceof Ca&&(n=n.Yg),n instanceof Na){var e=n.g;if(null!==e){if(e=e.ib,n.sc){if(!e.canCollapseTree(n))return}else if(!e.canExpandTree(n))return;t.rc=!0,n.sc?e.collapseTree(n):e.expandTree(n)}}},t}),Cp("SubGraphExpanderButton",function(){var t=Tp("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},Tp(Ps,{name:"ButtonIcon",jb:"MinusLine",ka:Qf.qo},new kn("figure","isSubGraphExpanded",function(t,i){var n=i.I;
return t?n._subGraphExpandedFigure:n._subGraphCollapsedFigure}).mv()));return t.click=function(t,i){var n=i.J;if(n instanceof Ca&&(n=n.Yg),n instanceof Th){var e=n.g;if(null!==e){if(e=e.ib,n.ud){if(!e.canCollapseSubGraph(n))return}else if(!e.canExpandSubGraph(n))return;t.rc=!0,n.ud?e.collapseSubGraph(n):e.expandSubGraph(n)}}},t}),Cp("ContextMenuButton",function(){var t=Tp("Button");t.stretch=bp;var i=t.Cd("ButtonBorder");return i instanceof Ps&&(i.jb="Rectangle",i.o=new Fi(0,0,2,3),i.p=new Fi(1,1,-2,-2)),t}),Cp("PanelExpanderButton",function(t){var i=Np(t,"COLLAPSIBLE");t=Tp("Button",Tp(Ps,"TriangleUp",{ka:new Ti(6,4)},new kn("figure","visible",function(t){return t?"TriangleUp":"TriangleDown"}).mv(i)));var n=t.Cd("ButtonBorder");return n instanceof Ps&&(n.stroke=null,n.fill="transparent"),t.click=function(t,n){var e=n.g;if(null!==e){var o=n.J.Cd(i);null!==o&&(e.Ab("Collapse/Expand Panel"),o.visible=!o.visible,e.pd("Collapse/Expand Panel"))}},t}),os.prototype.copy=function(){var t=new os;return t.jh=this.jh,t.qh=this.qh,t.lh=this.lh,t.Vp=this.Vp,t.Wp=this.Wp,t.Ah=this.Ah,t.zh=this.zh,t.yh=this.yh,t.Tp=this.Tp,t.Up=this.Up,t.xh=this.xh,t.uo=this.uo,t.vo=this.vo,t.wo=this.wo,t.to=this.to,t.Hh=this.Hh,t.mh=this.mh,t},U(rs,Pr),rs.Qg=!0,H("Panel",rs),rs.prototype.cloneProtected=function(t){if(Pr.prototype.cloneProtected.call(this,t),t.da=this.da,t.he=this.he.O(),t.$f=this.$f,t.jp=this.jp,t.Po=this.Po.O(),t.ph=this.ph,t.da===Ap){t.ii=this.ii.O(),t.Fg=this.Fg,t.oh=this.oh,t.Kk=this.Kk,t.Eg=this.Eg,t.Dg=this.Dg,t.Jk=this.Jk;var i=[];if(0<this.Tc.length)for(var n=this.Tc,e=n.length,o=0;e>o;o++)if(void 0!==n[o]){var r=n[o].copy();r.zk(t),i[o]=r}if(t.Tc=i,i=[],0<this.Mc.length)for(n=this.Mc,e=n.length,o=0;e>o;o++)void 0!==n[o]&&(r=n[o].copy(),r.zk(t),i[o]=r);t.Mc=i,t.hl=this.hl,t.Hk=this.Hk,t.Ih=this.Ih,t.vh=this.vh}t.mn=this.mn,t.dp.assign(this.dp),t.ep=this.ep.O(),t.Cg=this.Cg,t.Fk=this.Fk,t.yp=this.yp,t.uh=this.uh,t.pf=this.pf,t.Lm=this.Lm,t.Jh.assign(this.Jh),t.Jg=this.Jg,null!==this.Bq&&(t.Bq=this.Bq)},rs.prototype.Zg=function(t){Pr.prototype.Zg.call(this,t),t.la=this.la;for(var i=t.la.l,n=i.length,e=0;n>e;e++)i[e].eg=t;t.ol=null},rs.prototype.copy=function(){var t=Pr.prototype.copy.call(this);if(null!==t){for(var i=this.la.l,n=i.length,e=0;n>e;e++){var o=i[e].copy(),r=t;o.zk(r),o.cl=null;var s=r.la,a=s.count;if(s.qd(a,o),s=r.J,null!==s){s.Lj=null,null!==o.cd&&s instanceof Na&&(s.Jg=!0);var h=r.g;null!==h&&h.V.Ua||s.ec(pc,"elements",r,null,o,null,a)}}return t}return null},rs.prototype.toString=function(){return"Panel("+this.type+")#"+V(this)};var Pp;rs.Position=Pp=Z(rs,"Position",0),rs.Horizontal=Z(rs,"Horizontal",1);var jp;rs.Vertical=jp=Z(rs,"Vertical",2);var Lp;rs.Spot=Lp=Z(rs,"Spot",3);var Dp;rs.Auto=Dp=Z(rs,"Auto",4);var Ap;rs.Table=Ap=Z(rs,"Table",5),rs.Viewbox=Z(rs,"Viewbox",6);var Fp;rs.TableRow=Fp=Z(rs,"TableRow",7);var Op;rs.TableColumn=Op=Z(rs,"TableColumn",8);var zp;rs.Link=zp=Z(rs,"Link",9);var Bp;rs.Grid=Bp=Z(rs,"Grid",10),K(rs,{type:"type"},function(){return this.da},function(t){var i=this.da;i!==t&&(i!==Fp&&i!==Op||r("Cannot change Panel.type when it is already a TableRow or a TableColumn: "+t),this.da=t,this.da===Bp?this.$f=!0:this.da===Ap&&ss(this),this.H(),this.h("type",i,t))}),Y(rs,{elements:"elements"},function(){return this.la.i}),Y(rs,{sa:"naturalBounds"},function(){return this.hc}),K(rs,{padding:"padding"},function(){return this.he},function(t){"number"==typeof t?(0>t&&c(t,">= 0",rs,"padding"),t=new Di(t)):(a(t,Di,rs,"padding"),0>t.left&&c(t.left,">= 0",rs,"padding:value.left"),0>t.right&&c(t.right,">= 0",rs,"padding:value.right"),0>t.top&&c(t.top,">= 0",rs,"padding:value.top"),0>t.bottom&&c(t.bottom,">= 0",rs,"padding:value.bottom"));var i=this.he;i.A(t)||(this.he=t=t.O(),this.H(),this.h("padding",i,t))}),K(rs,{bk:"defaultAlignment"},function(){return this.Po},function(t){var i=this.Po;i.A(t)||(this.Po=t=t.O(),this.H(),this.h("defaultAlignment",i,t))}),K(rs,{Wc:"defaultStretch"},function(){return this.ph},function(t){var i=this.ph;i!==t&&(u(t,Pr,rs,"defaultStretch"),this.ph=t,this.H(),this.h("defaultStretch",i,t))}),K(rs,{RH:"defaultSeparatorPadding"},function(){return void 0===this.ii?Qf.ro:this.ii},function(t){if(void 0!==this.ii){"number"==typeof t&&(t=new Di(t));var i=this.ii;i.A(t)||(this.ii=t=t.O(),this.h("defaultSeparatorPadding",i,t))}}),K(rs,{PH:"defaultRowSeparatorStroke"},function(){return void 0===this.oh?null:this.oh},function(t){var i=this.oh;i!==t&&(null===t||"string"==typeof t||t instanceof Nr)&&(t instanceof Nr&&t.freeze(),this.oh=t,this.h("defaultRowSeparatorStroke",i,t))}),K(rs,{QH:"defaultRowSeparatorStrokeWidth"},function(){return void 0===this.Fg?1:this.Fg},function(t){if(void 0!==this.Fg){var i=this.Fg;i!==t&&isFinite(t)&&t>=0&&(this.Fg=t,this.h("defaultRowSeparatorStrokeWidth",i,t))}}),K(rs,{OH:"defaultRowSeparatorDashArray"},function(){return void 0===this.Kk?null:this.Kk},function(t){if(void 0!==this.Kk){var i=this.Kk;if(i!==t){if(null===t||Array.isArray(t)||f(t,"Array",rs,"defaultRowSeparatorDashArray:value"),null!==t){for(var n=t.length,e=0,o=0;n>o;o++){var s=t[o];"number"==typeof s&&s>=0&&isFinite(s)||r("defaultRowSeparatorDashArray:value "+s+" must be a positive number or zero."),e+=s}if(0===e){if(null===i)return;t=null}}this.Kk=t,this.ba(),this.h("defaultRowSeparatorDashArray",i,t)}}}),K(rs,{JH:"defaultColumnSeparatorStroke"},function(){return void 0===this.Dg?null:this.Dg},function(t){if(void 0!==this.Dg){var i=this.Dg;i!==t&&(null===t||"string"==typeof t||t instanceof Nr)&&(t instanceof Nr&&t.freeze(),this.Dg=t,this.h("defaultColumnSeparatorStroke",i,t))}}),K(rs,{KH:"defaultColumnSeparatorStrokeWidth"},function(){return void 0===this.Eg?1:this.Eg},function(t){if(void 0!==this.Eg){var i=this.Eg;i!==t&&isFinite(t)&&t>=0&&(this.Eg=t,this.h("defaultColumnSeparatorStrokeWidth",i,t))}}),K(rs,{IH:"defaultColumnSeparatorDashArray"},function(){return void 0===this.Jk?null:this.Jk},function(t){if(void 0!==this.Jk){var i=this.Jk;if(i!==t){if(null===t||Array.isArray(t)||f(t,"Array",rs,"defaultColumnSeparatorDashArray:value"),null!==t){for(var n=t.length,e=0,o=0;n>o;o++){var s=t[o];"number"==typeof s&&s>=0&&isFinite(s)||r("defaultColumnSeparatorDashArray:value "+s+" must be a positive number or zero."),e+=s}if(0===e){if(null===i)return;t=null}}this.Jk=t,this.ba(),this.h("defaultColumnSeparatorDashArray",i,t)}}}),K(rs,{fJ:"viewboxStretch"},function(){return this.mn},function(t){var i=this.mn;i!==t&&(u(t,Pr,rs,"viewboxStretch"),this.mn=t,this.h("viewboxStretch",i,t))}),K(rs,{Xu:"gridCellSize"},function(){return this.dp},function(t){var i=this.dp;i.A(t)||(a(t,Ti,rs,"gridCellSize"),t.w()&&0!==t.width&&0!==t.height||r("Invalid Panel.gridCellSize: "+t),this.dp=t.O(),null!==this.g&&this===this.g.Gr&&Lo(this.g),this.ba(),this.h("gridCellSize",i,t))}),K(rs,{mC:"gridOrigin"},function(){return this.ep},function(t){var i=this.ep;i.A(t)||(a(t,wi,rs,"gridOrigin"),t.w()||r("Invalid Panel.gridOrigin: "+t),this.ep=t.O(),null!==this.g&&Lo(this.g),this.ba(),this.h("gridOrigin",i,t))}),Wu=rs.prototype,Wu.Qt=function(t){Pr.prototype.Qt.call(this,t);for(var i=this.la.l,n=i.length,e=0;n>e;e++)i[e].Qt(t)},Wu.Yi=function(t,i){if(this.da===Bp){var n=this.Th()*i.scale;0>=n&&(n=1);var e=this.Xu,o=e.width,e=e.height,r=this.sa,s=r.width,r=r.height,a=Math.ceil(s/o),h=Math.ceil(r/e),l=this.mC;t.save(),t.beginPath(),t.rect(0,0,s,r),t.clip();for(var u=[],f=this.la.l,c=f.length,p=0;c>p;p++){var d=f[p],v=[];if(u.push(v),d.visible)for(var d=us(d.jb),y=p+1;c>y;y++){var g=f[y];g.visible&&us(g.jb)===d&&(g=g.interval,g>=2&&v.push(g))}}for(f=this.la.l,c=f.length,p=0;c>p;p++){var m=f[p];if(m.visible){var v=u[p],d=m.interval,y=!1,x=!0,b=m.Yy;if(null!==b&&(y=!0,void 0!==t.setLineDash?(t.setLineDash(b),t.lineDashOffset=m.yc):void 0!==t.webkitLineDash?(t.webkitLineDash=b,t.webkitLineDashOffset=m.yc):void 0!==t.mozDash?(t.mozDash=b,t.mozDashOffset=m.yc):x=!1),"LineV"===m.jb){t.lineWidth=m.Na,Rr(this,t,m.stroke,!1,!1),t.beginPath();for(var w=g=Math.floor(-l.x/o);g+a>=w;w++){var k=w*o+l.x;if(k>=0&&s>k&&ls(w,d,v)&&(y&&!x?Lr(t,k,0,k,r,b,m.yc):(t.moveTo(k,0),t.lineTo(k,r)),2>o*d*n))break}t.stroke()}else if("LineH"===m.jb){for(t.lineWidth=m.Na,Rr(this,t,m.stroke,!1,!1),t.beginPath(),w=g=Math.floor(-l.y/e);g+h>=w&&(k=w*e+l.y,!(k>=0&&r>=k&&ls(w,d,v)&&(y&&!x?Lr(t,0,k,s,k,b,m.yc):(t.moveTo(0,k),t.lineTo(s,k)),2>e*d*n)));w++);t.stroke()}else if("BarV"===m.jb)for(Rr(this,t,m.fill,!0,!1),m=m.width,isNaN(m)&&(m=o),w=g=Math.floor(-l.x/o);g+a>=w&&(k=w*o+l.x,!(k>=0&&s>k&&ls(w,d,v)&&(t.fillRect(k,0,m,r),2>o*d*n)));w++);else if("BarH"===m.jb)for(Rr(this,t,m.fill,!0,!1),m=m.height,isNaN(m)&&(m=e),w=g=Math.floor(-l.y/e);g+h>=w&&(k=w*e+l.y,!(k>=0&&r>=k&&ls(w,d,v)&&(t.fillRect(0,k,s,m),2>e*d*n)));w++);y&&(void 0!==t.setLineDash?(t.setLineDash(lf),t.lineDashOffset=0):void 0!==t.webkitLineDash?(t.webkitLineDash=lf,t.webkitLineDashOffset=0):void 0!==t.mozDash&&(t.mozDash=null,t.mozDashOffset=0))}}t.restore(),Qe(i,t,!1)}else{for(this.da===Ap&&(t.lineCap="butt",hs(this,t,!0,this.Tc,!0),hs(this,t,!1,this.Mc,!0),as(this,t,!0,this.Tc),as(this,t,!1,this.Mc),hs(this,t,!0,this.Tc,!1),hs(this,t,!1,this.Mc,!1)),(n=this.uC)&&t.save(),o=this.Ze(),e=this.la.l,s=e.length,r=0;s>r;r++)a=e[r],n&&a===o&&(t.Gs=!0),a.oe(t,i),n&&a===o&&(t.Gs=!1);n&&(t.restore(),Qe(i,t,!1))}},Wu.Fn=function(t,i,n,e,o){var r=this.jf(),s=this.transform,a=1/(s.m11*s.m22-s.m12*s.m21),h=s.m22*a,l=-s.m12*a,u=-s.m21*a,f=s.m11*a,c=a*(s.m21*s.dy-s.m22*s.dx),p=a*(s.m12*s.dx-s.m11*s.dy);if(null!==this.ul)return s=this.Q,Qf.kk(s.left,s.top,s.right,s.bottom,t,i,n,e,o);if(null!==this.background)r=t*h+i*u+c,a=t*l+i*f+p,t=n*h+e*u+c,n=n*l+e*f+p,o.k(0,0),e=this.sa,n=Qf.kk(0,0,e.width,e.height,r,a,t,n,o),o.transform(s);else{for(r||(h=1,u=l=0,f=1,p=c=0),a=t*h+i*u+c,t=t*l+i*f+p,h=n*h+e*u+c,e=n*l+e*f+p,o.k(h,e),l=(h-a)*(h-a)+(e-t)*(e-t),n=!1,f=this.la.l,p=f.length,u=C(),c=0;p>c;c++)i=f[c],i.visible&&i.Fn(a,t,h,e,u)&&(n=!0,i=(a-u.x)*(a-u.x)+(t-u.y)*(t-u.y),l>i&&(l=i,o.set(u)));P(u),r&&o.transform(s)}return n},Wu.H=function(t){Pr.prototype.H.call(this,t),this.da===Dp&&(t=this.Ze(),null!==t&&t.H(!0)),t=this.la.l;for(var i=t.length,n=0;i>n;n++){var e=t[n];!0!==Zr(e)&&(e.ka.w()||(e instanceof jh||e instanceof rs||e instanceof qs||Hr(e,!1)!==gp)&&e.H(!0))}},Wu.In=function(){if(!1===Zr(this)){Qr(this,!0),_r(this,!0);for(var t=this.la.l,i=t.length,n=0;i>n;n++)t[n].In()}},Wu.Zf=function(){if(0!==(2048&this.T)==!1){Xr(this,!0),Jr(this,!0);for(var t=this.la.l,i=t.length,n=0;i>n;n++)t[n].$x()}},Wu.$x=function(){Jr(this,!0);for(var t=this.la.l,i=t.length,n=0;i>n;n++)t[n].$x()},Wu.Rn=function(t,i,n,e){var o=this.Jh;o.width=0,o.height=0;var s=this.ka,a=this.Lf;void 0===n&&(n=a.width,e=a.height),n=Math.max(n,a.width),e=Math.max(e,a.height);var h=this.se;isNaN(s.width)||(t=Math.min(s.width,h.width)),isNaN(s.height)||(i=Math.min(s.height,h.height)),t=Math.max(n,t),i=Math.max(e,i);var l=this.padding;t=Math.max(t-l.left-l.right,0),i=Math.max(i-l.top-l.bottom,0);var u=this.la.l;if(0!==u.length){var f=this.da.yb;switch(f){case"Position":var c=t,p=i,d=n,v=e,y=u.length;o.x=0,o.y=0,o.width=0;for(var g=o.height=0;y>g;g++){var m=u[g];if(m.visible||m===this.Jb){var x=m.margin,b=x.right+x.left,w=x.top+x.bottom;Or(m,c,p,d,v);var k=m.oa,M=Math.max(k.width+b,0),T=Math.max(k.height+w,0),S=m.position.x,N=m.position.y;if(isFinite(S)||(S=0),isFinite(N)||(N=0),m instanceof Ps){var D=m;if(D.hy)var A=D.Na/2,S=S-A,N=N-A}Li(o,S,N,M,T)}}break;case"Vertical":for(var F=t,B=n,q=u.length,I=E(),G=0;q>G;G++){var V=u[G];if(V.visible||V===this.Jb){var H=Hr(V,!1);if(H!==gp&&H!==xp)I.push(V);else{var U=V.margin,K=U.right+U.left,Y=U.top+U.bottom;Or(V,F,1/0,B,0);var W=V.oa,X=Math.max(W.width+K,0),J=Math.max(W.height+Y,0);o.width=Math.max(o.width,X),o.height+=J}}}var Z=I.length;if(0!==Z){for(this.ka.width?F=Math.min(this.ka.width,this.se.width):0!==o.width&&(F=Math.min(o.width,this.se.width)),G=0;Z>G;G++)V=I[G],(V.visible||V===this.Jb)&&(U=V.margin,K=U.right+U.left,Y=U.top+U.bottom,Or(V,F,1/0,B,0),W=V.oa,X=Math.max(W.width+K,0),J=Math.max(W.height+Y,0),o.width=Math.max(o.width,X),o.height+=J);R(I)}break;case"Horizontal":for(var Q=i,$=e,_=u.length,ti=E(),ii=0;_>ii;ii++){var ni=u[ii];if(ni.visible||ni===this.Jb){var ei=Hr(ni,!1);if(ei!==gp&&ei!==bp)ti.push(ni);else{var oi=ni.margin,ri=oi.right+oi.left,si=oi.top+oi.bottom;Or(ni,1/0,Q,0,$);var ai=ni.oa,hi=Math.max(ai.width+ri,0),li=Math.max(ai.height+si,0);o.width+=hi,o.height=Math.max(o.height,li)}}}var ui=ti.length;if(0!==ui){for(this.ka.height?Q=Math.min(this.ka.height,this.se.height):0!==o.height&&(Q=Math.min(o.height,this.se.height)),ii=0;ui>ii;ii++)ni=ti[ii],(ni.visible||ni===this.Jb)&&(oi=ni.margin,ri=oi.right+oi.left,si=oi.top+oi.bottom,Or(ni,1/0,Q,0,$),ai=ni.oa,hi=Math.max(ai.width+ri,0),li=Math.max(ai.height+si,0),o.width+=hi,o.height=Math.max(o.height,li));R(ti)}break;case"Spot":t:{var fi=t,ci=i,pi=n,di=e,vi=u.length,yi=this.Ze(),gi=yi.margin,mi=0,xi=0,bi=gi.right+gi.left,wi=gi.top+gi.bottom;Or(yi,fi,ci,pi,di);var ki=yi.oa,Mi=ki.width,Ti=ki.height,Ni=Math.max(Mi+bi,0),Pi=Math.max(Ti+wi,0);o.x=-gi.left,o.y=-gi.top,o.width=Ni,o.height=Pi;for(var ji=0;vi>ji;ji++){var Di=u[ji];if(Di!==yi&&(Di.visible||Di===this.Jb)){gi=Di.margin,mi=gi.right+gi.left,xi=gi.top+gi.bottom,Or(Di,fi,ci,0,0);var ki=Di.oa,Ni=Math.max(ki.width+mi,0),Pi=Math.max(ki.height+xi,0),Ai=Di.alignment;Ai.lc()&&(Ai=this.bk),Ai.Kc()||(Ai=Sf);var Fi=Di.Ti;Fi.lc()&&(Fi=Sf),Li(o,Ai.x*Mi+Ai.offsetX-(Fi.x*ki.width-Fi.offsetX)-gi.left,Ai.y*Ti+Ai.offsetY-(Fi.y*ki.height-Fi.offsetY)-gi.top,Ni,Pi)}}var Oi=yi.stretch;switch(Oi===mp&&(Oi=Hr(yi,!1)),Oi){case gp:break t;case wp:if(!isFinite(fi)&&!isFinite(ci))break t;break;case bp:if(!isFinite(fi))break t;break;case xp:if(!isFinite(ci))break t}for(ki=yi.oa,Mi=ki.width,Ti=ki.height,Ni=Math.max(Mi+bi,0),Pi=Math.max(Ti+wi,0),gi=yi.margin,o.x=-gi.left,o.y=-gi.top,o.width=Ni,o.height=Pi,ji=0;vi>ji;ji++)Di=u[ji],Di===yi||!Di.visible&&Di!==this.Jb||(gi=Di.margin,mi=gi.right+gi.left,xi=gi.top+gi.bottom,ki=Di.oa,Ni=Math.max(ki.width+mi,0),Pi=Math.max(ki.height+xi,0),Ai=Di.alignment,Ai.lc()&&(Ai=this.bk),Ai.Kc()||(Ai=Sf),Fi=Di.Ti,Fi.lc()&&(Fi=Sf),Li(o,Ai.x*Mi+Ai.offsetX-(Fi.x*ki.width-Fi.offsetX)-gi.left,Ai.y*Ti+Ai.offsetY-(Fi.y*ki.height-Fi.offsetY)-gi.top,Ni,Pi))}break;case"Auto":var zi=t,Bi=i,qi=n,Ei=e,Ri=u.length,Ii=this.Ze(),Gi=Ii.margin,Vi=Gi.right+Gi.left,Hi=Gi.top+Gi.bottom;Or(Ii,zi,Bi,qi,Ei);var Ui=Ii.oa,Ki=Math.max(Ui.width+Vi,0),Yi=Math.max(Ui.height+Hi,0),Wi=ms(Ii),Xi=Wi.x*Ki+Wi.offsetX,Ji=Wi.y*Yi+Wi.offsetY,Wi=xs(Ii),Zi=Wi.x*Ki+Wi.offsetX,Qi=Wi.y*Yi+Wi.offsetY,$i=zi,_i=Bi;isFinite(zi)&&($i=Math.abs(Xi-Zi)),isFinite(Bi)&&(_i=Math.abs(Ji-Qi));var tn=j();tn.k(0,0);for(var nn=0;Ri>nn;nn++){var en=u[nn];if(en!==Ii&&(en.visible||en===this.Jb)){var Gi=en.margin,on=Gi.right+Gi.left,rn=Gi.top+Gi.bottom;Or(en,$i,_i,0,0),Ui=en.oa,Ki=Math.max(Ui.width+on,0),Yi=Math.max(Ui.height+rn,0),tn.k(Math.max(Ki,tn.width),Math.max(Yi,tn.height))}}if(1===Ri)o.width=Ki,o.height=Yi,L(tn);else{var sn=ms(Ii),an=xs(Ii),hn=0,ln=0;an.x!==sn.x&&an.y!==sn.y&&(hn=tn.width/Math.abs(an.x-sn.x),ln=tn.height/Math.abs(an.y-sn.y)),L(tn);var un=0;if(Ii instanceof Ps){var fn=Ii,un=fn.Na*fn.scale;As(fn)===kp&&(hn=ln=Math.max(hn,ln))}var hn=hn+(Math.abs(sn.offsetX)+Math.abs(an.offsetX)+un),ln=ln+(Math.abs(sn.offsetY)+Math.abs(an.offsetY)+un),cn=Ii.stretch;switch(cn===mp&&(cn=Hr(Ii,!1)),cn){case gp:Ei=qi=0;break;case wp:isFinite(zi)&&(hn=zi),isFinite(Bi)&&(ln=Bi);break;case bp:isFinite(zi)&&(hn=zi),Ei=0;break;case xp:qi=0,isFinite(Bi)&&(ln=Bi)}Ii instanceof Ps&&!Ii.ka.w()&&(fn=Ii,fn.fg?fn.tj=null:fn.za=null),Ii.In(),Or(Ii,hn,ln,qi,Ei),o.width=Ii.oa.width+Vi,o.height=Ii.oa.height+Hi}break;case"Table":for(var pn=t,dn=i,vn=n,yn=e,gn=u.length,mn=E(),xn=E(),bn=0;gn>bn;bn++){var wn=u[bn],kn=wn instanceof rs?wn:null;if(null===kn||kn.type!==Fp&&kn.type!==Op||!wn.visible)mn.push(wn);else{xn.push(wn);for(var Mn=kn.la.l,Tn=Mn.length,Sn=0;Tn>Sn;Sn++){var Cn=Mn[Sn];kn.type===Fp?Cn.Tb=wn.Tb:kn.type===Op&&(Cn.column=wn.column),mn.push(Cn)}}}gn=mn.length,0===gn&&(this.Bc(0),this.Ac(0));for(var Nn=[],bn=0;gn>bn;bn++)wn=mn[bn],Qr(wn,!0),_r(wn,!0),Nn[wn.Tb]||(Nn[wn.Tb]=[]),Nn[wn.Tb][wn.column]||(Nn[wn.Tb][wn.column]=[]),Nn[wn.Tb][wn.column].push(wn);R(mn);for(var Pn=E(),jn=E(),Ln=E(),Dn={count:0},An={count:0},Fn=pn,On=dn,zn=this.Tc,gn=zn.length,bn=0;gn>bn;bn++){var Bn=zn[bn];void 0!==Bn&&(Bn.Aa=0)}for(zn=this.Mc,gn=zn.length,bn=0;gn>bn;bn++)Bn=zn[bn],void 0!==Bn&&(Bn.Aa=0);for(var qn=Nn.length,En=0,bn=0;qn>bn;bn++)Nn[bn]&&(En=Math.max(En,Nn[bn].length));for(var Rn=Math.min(this.Ih,qn-1),In=Math.min(this.vh,En-1),Gn=0,qn=Nn.length,bn=Rn;qn>bn;bn++)if(Nn[bn]){var En=Nn[bn].length,Vn=this.Bc(bn);for(Vn.Aa=0,Sn=In;En>Sn;Sn++)if(Nn[bn][Sn]){var Hn=this.Ac(Sn);void 0===Pn[Sn]&&(Hn.Aa=0,Pn[Sn]=!0);for(var Un=Nn[bn][Sn],Kn=Un.length,Yn=0;Kn>Yn;Yn++)if(wn=Un[Yn],wn.visible||wn===this.Jb){var Wn=1<wn.Fi||1<wn.hi;Wn&&jn.push(wn);var Xn=wn.margin,Jn=Xn.right+Xn.left,Zn=Xn.top+Xn.bottom,Qn=Ur(wn,Vn,Hn,!1),$n=wn.ka,_n=!isNaN($n.height),te=!isNaN($n.width)&&_n;Wn||Qn===gp||te||(void 0===Dn[Sn]&&(Dn[Sn]=-1,Dn.count++),void 0===An[bn]&&(An[bn]=-1,An.count++),Ln.push(wn)),Or(wn,1/0,1/0,0,0);var ie=wn.oa,ne=Math.max(ie.width+Jn,0),ee=Math.max(ie.height+Zn,0);1!==wn.Fi||Qn!==gp&&Qn!==bp||(Bn=this.Bc(bn),Gn=Math.max(ee-Bn.Aa,0),Gn>On&&(Gn=On),Bn.Aa+=Gn,On=Math.max(On-Gn,0)),1!==wn.hi||Qn!==gp&&Qn!==xp||(Bn=this.Ac(Sn),Gn=Math.max(ne-Bn.Aa,0),Gn>Fn&&(Gn=Fn),Bn.Aa+=Gn,Fn=Math.max(Fn-Gn,0)),Wn&&wn.In()}}}R(Pn);for(var oe=0,re=0,gn=this.pr,bn=0;gn>bn;bn++)void 0!==this.Mc[bn]&&(oe+=this.Ac(bn).bb);for(gn=this.ms,bn=0;gn>bn;bn++)void 0!==this.Tc[bn]&&(re+=this.Bc(bn).bb);for(var Fn=Math.max(pn-oe,0),se=On=Math.max(dn-re,0),ae=Fn,gn=Ln.length,bn=0;gn>bn;bn++){var wn=Ln[bn],Vn=this.Bc(wn.Tb),Hn=this.Ac(wn.column),he=wn.oa,Xn=wn.margin,Jn=Xn.right+Xn.left,Zn=Xn.top+Xn.bottom;Dn[wn.column]=0===Hn.Aa?Math.max(he.width+Jn,Dn[wn.column]):null,An[wn.Tb]=0===Vn.Aa?Math.max(he.height+Zn,An[wn.Tb]):null}var le=0,ue=0;for(bn in An)"count"!==bn&&(le+=An[bn]);for(bn in Dn)"count"!==bn&&(ue+=Dn[bn]);for(var fe=j(),bn=0;gn>bn;bn++)if(wn=Ln[bn],wn.visible||wn===this.Jb){var Vn=this.Bc(wn.Tb),Hn=this.Ac(wn.column),ce=0;isFinite(Hn.width)?ce=Hn.width:(ce=isFinite(Fn)&&null!==Dn[wn.column]?0===ue?Hn.Aa+Fn:Dn[wn.column]/ue*ae:null!==Dn[wn.column]?Fn:Hn.Aa||Fn,ce=Math.max(0,ce-Hn.Cf()));var pe=0;switch(isFinite(Vn.height)?pe=Vn.height:(pe=isFinite(On)&&null!==An[wn.Tb]?0===le?Vn.Aa+On:An[wn.Tb]/le*se:null!==An[wn.Tb]?On:Vn.Aa||On,pe=Math.max(0,pe-Vn.Cf())),fe.k(Math.max(Hn.Wh,Math.min(ce,Hn.af)),Math.max(Vn.Wh,Math.min(pe,Vn.af))),Qn=Ur(wn,Vn,Hn,!1)){case bp:fe.height=1/0;break;case xp:fe.width=1/0}Xn=wn.margin,Jn=Xn.right+Xn.left,Zn=Xn.top+Xn.bottom,wn.In(),Or(wn,fe.width,fe.height,Hn.Wh,Vn.Wh),ie=wn.oa,ne=Math.max(ie.width+Jn,0),ee=Math.max(ie.height+Zn,0),isFinite(Fn)&&(ne=Math.min(ne,fe.width)),isFinite(On)&&(ee=Math.min(ee,fe.height));var de=0,de=Vn.Aa;Vn.Aa=Math.max(Vn.Aa,ee),Gn=Vn.Aa-de,On=Math.max(On-Gn,0),de=Hn.Aa,Hn.Aa=Math.max(Hn.Aa,ne),Gn=Hn.Aa-de,Fn=Math.max(Fn-Gn,0)}R(Ln);for(var ve=j(),gn=jn.length,bn=0;gn>bn;bn++)if(wn=jn[bn],wn.visible||wn===this.Jb){switch(Vn=this.Bc(wn.Tb),Hn=this.Ac(wn.column),fe.k(Math.max(Hn.Wh,Math.min(pn,Hn.af)),Math.max(Vn.Wh,Math.min(dn,Vn.af))),Qn=Ur(wn,Vn,Hn,!1)){case wp:0!==Hn.Aa&&(fe.width=Math.min(fe.width,Hn.Aa)),0!==Vn.Aa&&(fe.height=Math.min(fe.height,Vn.Aa));break;case bp:0!==Hn.Aa&&(fe.width=Math.min(fe.width,Hn.Aa));break;case xp:0!==Vn.Aa&&(fe.height=Math.min(fe.height,Vn.Aa))}isFinite(Hn.width)&&(fe.width=Hn.width),isFinite(Vn.height)&&(fe.height=Vn.height),ve.k(0,0);for(var ye=1;ye<wn.Fi&&!(wn.Tb+ye>=this.ms);ye++)Bn=this.Bc(wn.Tb+ye),ve.height+=Math.max(Bn.Wh,isNaN(Bn.ie)?Bn.af:Math.min(Bn.ie,Bn.af));for(ye=1;ye<wn.hi&&!(wn.column+ye>=this.pr);ye++)Bn=this.Ac(wn.column+ye),ve.width+=Math.max(Bn.Wh,isNaN(Bn.ie)?Bn.af:Math.min(Bn.ie,Bn.af));fe.width+=ve.width,fe.height+=ve.height,Xn=wn.margin,Jn=Xn.right+Xn.left,Zn=Xn.top+Xn.bottom,Or(wn,fe.width,fe.height,vn,yn);for(var ie=wn.oa,ne=Math.max(ie.width+Jn,0),ee=Math.max(ie.height+Zn,0),ge=0,ye=0;ye<wn.Fi&&!(wn.Tb+ye>=this.ms);ye++)Bn=this.Bc(wn.Tb+ye),ge+=Bn.total||0;if(ee>ge)for(var me=ee-ge;me>0;){var xe=Bn.bb||0;if(isNaN(Bn.height)&&Bn.af>xe&&(Bn.Aa=Math.min(Bn.af,xe+me),Bn.bb!==xe&&(me-=Bn.bb-xe)),-1===Bn.index-1)break;Bn=this.Bc(Bn.index-1)}for(var be=0,ye=0;ye<wn.hi&&!(wn.column+ye>=this.pr);ye++)Bn=this.Ac(wn.column+ye),be+=Bn.total||0;if(ne>be)for(me=ne-be;me>0&&(xe=Bn.bb||0,isNaN(Bn.width)&&Bn.af>xe&&(Bn.Aa=Math.min(Bn.af,xe+me),Bn.bb!==xe&&(me-=Bn.bb-xe)),-1!==Bn.index-1);)Bn=this.Ac(Bn.index-1)}R(jn),L(ve),L(fe);for(var we=0,ke=0,Qn=Hr(this,!0),Me=this.ka,Te=this.se,Se=re=oe=0,Ce=0,gn=this.pr,bn=0;gn>bn;bn++)void 0!==this.Mc[bn]&&(Bn=this.Ac(bn),isFinite(Bn.width)?(Se+=Bn.width,Se+=Bn.Cf()):Ns(Bn)===Ip?(Se+=Bn.bb,Se+=Bn.Cf()):0!==Bn.bb&&(oe+=Bn.bb,oe+=Bn.Cf()));var we=isFinite(Me.width)?Math.min(Me.width,Te.width):Qn!==gp&&isFinite(pn)?pn:oe,we=Math.max(we,this.Lf.width),we=Math.max(we-Se,0),Ne=Math.max(we/oe,1);for(isFinite(Ne)||(Ne=1),bn=0;gn>bn;bn++)void 0!==this.Mc[bn]&&(Bn=this.Ac(bn),isFinite(Bn.width)||Ns(Bn)===Ip||(Bn.Aa=Bn.bb*Ne),Bn.position=o.width,0!==Bn.bb&&(o.width+=Bn.bb,o.width+=Bn.Cf()));for(gn=this.ms,bn=0;gn>bn;bn++)void 0!==this.Tc[bn]&&(Bn=this.Bc(bn),isFinite(Bn.height)?(Ce+=Bn.height,Ce+=Bn.Cf()):Ns(Bn)===Ip?(Ce+=Bn.bb,Ce+=Bn.Cf()):0!==Bn.bb&&(re+=Bn.bb,re+=Bn.Cf()));var ke=isFinite(Me.height)?Math.min(Me.height,Te.height):Qn!==gp&&isFinite(dn)?dn:re,ke=Math.max(ke,this.Lf.height),ke=Math.max(ke-Ce,0),Pe=Math.max(ke/re,1);for(isFinite(Pe)||(Pe=1),bn=0;gn>bn;bn++)void 0!==this.Tc[bn]&&(Bn=this.Bc(bn),isFinite(Bn.height)||Ns(Bn)===Ip||(Bn.Aa=Bn.bb*Pe),Bn.position=o.height,0!==Bn.bb&&(o.height+=Bn.bb,o.height+=Bn.Cf()));for(gn=xn.length,bn=0;gn>bn;bn++){var je=xn[bn];je.type===Fp?(ce=o.width,Bn=this.Bc(je.Tb),pe=Bn.Aa):(Bn=this.Ac(je.column),ce=Bn.Aa,pe=o.height),je.nc.k(0,0,ce,pe),Qr(je,!1),Nn[je.Tb]||(Nn[je.Tb]=[]),Nn[je.Tb][je.column]||(Nn[je.Tb][je.column]=[]),Nn[je.Tb][je.column].push(je)}R(xn),this.Bq=Nn;break;case"Viewbox":var Le=t,De=i,Ae=n,Fe=e;1<u.length&&r("Viewbox Panel cannot contain more than one GraphObject.");var Oe=u[0];Oe.Eb=1,Oe.In(),Or(Oe,1/0,1/0,Ae,Fe);var ze=Oe.oa,Be=Oe.margin,qe=Be.right+Be.left,Ee=Be.top+Be.bottom;if(isFinite(Le)||isFinite(De)){var Re=Oe.scale,Ie=ze.width,Ge=ze.height,Ve=Math.max(Le-qe,0),He=Math.max(De-Ee,0),Ue=1;this.mn===kp?0!==Ie&&0!==Ge&&(Ue=Math.min(Ve/Ie,He/Ge)):0!==Ie&&0!==Ge&&(Ue=Math.max(Ve/Ie,He/Ge)),0===Ue&&(Ue=1e-4),Oe.Eb*=Ue,Re!==Oe.scale&&(Qr(Oe,!0),Or(Oe,1/0,1/0,Ae,Fe))}ze=Oe.oa,o.width=isFinite(Le)?Le:Math.max(ze.width+qe,0),o.height=isFinite(De)?De:Math.max(ze.height+Ee,0);break;case"Link":var Ke=u.length,Ye=this instanceof Ca?this.Yg:this;if(Ye instanceof Ra)if(0===Ke){var We=this.hc;Ci(We,0,0);var Xe=this.oa;Xe.k(0,0,0,0)}else{var Je=this instanceof Ca?null:Ye.path,Ze=Ye.Rl,Qe=this.Jh;Qe.assign(Ze),Qe.x=0;var $e=Qe.y=0,_e=Ye.points,$e=void 0!==this.Z?this.Z:_e.count;this.bg.k(Ze.x,Ze.y),this.gi.clear(),null!==Je&&(Ds(Je,Ze.width,Ze.height),Xe=Je.oa,Qe.fh(Xe),this.gi.add(Xe));for(var to=O(),io=C(),no=C(),eo=0;Ke>eo;eo++){var oo=u[eo];if(oo!==Je)if(oo.Jf&&oo instanceof Ps)Ds(oo,Ze.width,Ze.height),Xe=oo.oa,Qe.fh(Xe),this.gi.add(Xe);else if(2>$e)Or(oo,1/0,1/0),Xe=oo.oa,Qe.fh(Xe),this.gi.add(Xe);else{var ro=oo.ff,so=oo.wv,ao=oo.Ti;ao.Gd()&&(ao=Sf);var ho=oo.xv,lo=oo.kD,uo=0,fo=0,co=0;if(-$e>ro||ro>=$e){var po=Ye.GC,vo=Ye.FC;ho!==gd&&(co=Ye.computeAngle(oo,ho,vo),oo.angle=co),uo=po.x-Ze.x,fo=po.y-Ze.y}else{var yo,go;if(ro>=0)yo=_e.Y(ro),go=$e-1>ro?_e.Y(ro+1):yo;else{var mo=$e+ro;yo=_e.Y(mo),go=mo>0?_e.Y(mo-1):yo}vo=ro>=0?yo.Rh(go):go.Rh(yo),ho!==gd&&(co=Ye.computeAngle(oo,ho,vo),oo.cm=co),uo=yo.x+(go.x-yo.x)*so-Ze.x,fo=yo.y+(go.y-yo.y)*so-Ze.y}Or(oo,1/0,1/0);var Xe=oo.oa,We=oo.sa,xo=0;oo instanceof Ps&&(xo=oo.Na);var bo=We.width+xo,wo=We.height+xo;to.reset(),to.translate(-Xe.x,-Xe.y),to.scale(oo.scale,oo.scale),to.rotate(ho===gd?oo.angle:vo,bo/2,wo/2);var ko=new Si(0,0,bo,wo);io.qs(ko,ao),to.Ka(io);var Mo=-io.x+xo/2,To=-io.y+xo/2;no.assign(lo),isNaN(no.x)&&(no.x=ro>=0?bo/2+3:-(bo/2+3)),isNaN(no.y)&&(no.y=-(wo/2+3)),no.rotate(vo),uo+=no.x,fo+=no.y,ko.set(Xe),ko.x=uo+Mo,ko.y=fo+To,this.gi.add(ko),Qe.fh(ko)}}if(this.Od)for(var So=this.Kf;So.next();)Or(So.value,1/0,1/0);this.Jh=Qe;var Co=this.bg;Co.k(Co.x+Qe.x,Co.y+Qe.y),Ci(o,Qe.width||0,Qe.height||0),z(to),P(io),P(no)}break;case"Grid":break;case"TableRow":case"TableColumn":r(this.toString()+" is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");break;default:r("Unknown panel type: "+f)}}var No=o.width,Po=o.height,jo=this.padding,Lo=jo.top+jo.bottom,No=No+(jo.left+jo.right),Po=Po+Lo;isFinite(s.width)&&(No=s.width),isFinite(s.height)&&(Po=s.height),No=Math.min(h.width,No),Po=Math.min(h.height,Po),No=Math.max(a.width,No),Po=Math.max(a.height,Po),No=Math.max(n,No),Po=Math.max(e,Po),o.width=No,o.height=Po,Ci(this.hc,No,Po),Ar(this,0,0,No,Po)},rs.prototype.findMainElement=rs.prototype.Ze=function(){if(null===this.ol){var t=this.la.l,i=t.length;if(0===i)return null;for(var n=0;i>n;n++){var e=t[n];if(!0===e.Jf)return this.ol=e}this.ol=t[0]}return this.ol},rs.prototype.Lh=function(t,i,n,e){var o=this.Jh,s=this.la.l,a=A(0,0,0,0);if(0===s.length){var h=this.Q;h.x=t,h.y=i,h.width=n,h.height=e}else{if(!this.ka.w()){var l=Hr(this,!0),u=this.nc,f=u.width,c=u.height,p=this.margin,d=p.left+p.right,v=p.top+p.bottom;switch(f===n&&c===e&&(l=gp),l){case gp:(f>n||c>e)&&(this.H(),Or(this,f>n?n:f,c>e?e:c));break;case wp:this.H(!0),Or(this,n+d,e+v,0,0);break;case bp:this.H(!0),Or(this,n+d,c+v,0,0);break;case xp:this.H(!0),Or(this,f+d,e+v,0,0)}}h=this.Q,h.x=t,h.y=i,h.width=n,h.height=e;var y=this.da.yb;switch(y){case"Position":for(var g=s.length,m=o.x-this.padding.left,x=o.y-this.padding.top,b=0;g>b;b++){var w=s[b],k=w.oa,M=w.margin,T=w.position.x,S=w.position.y;if(a.x=isNaN(T)?-m:T-m,a.y=isNaN(S)?-x:S-x,w instanceof Ps){var B=w;if(B.hy){var q=B.Na/2;a.x-=q,a.y-=q}}a.x+=M.left,a.y+=M.top,a.width=k.width,a.height=k.height,w.visible&&w.ac(a.x,a.y,a.width,a.height)}break;case"Vertical":for(var E=s.length,R=this.padding.left,I=this.padding.top,G=0;E>G;G++){var V=R,H=s[G];if(H.visible){var U=H.oa,K=H.margin,Y=K.left+K.right,W=R+this.padding.right,X=U.width,J=Hr(H,!1);(isNaN(H.ka.width)&&J===wp||J===bp)&&(X=Math.max(o.width-Y-W,0));var Z=X+Y+W,Q=H.alignment;Q.lc()&&(Q=this.bk),Q.Kc()||(Q=Sf),H.ac(V+Q.offsetX+K.left+(o.width*Q.x-Z*Q.x),I+Q.offsetY+K.top,X,U.height),I+=U.height+K.bottom+K.top}}break;case"Horizontal":for(var $=s.length,_=this.padding.top,ti=this.padding.left,ii=0;$>ii;ii++){var ni=_,ei=s[ii];if(ei.visible){var oi=ei.oa,ri=ei.margin,si=ri.top+ri.bottom,ai=_+this.padding.bottom,hi=oi.height,li=Hr(ei,!1);(isNaN(ei.ka.height)&&li===wp||li===xp)&&(hi=Math.max(o.height-si-ai,0));var ui=hi+si+ai,fi=ei.alignment;fi.lc()&&(fi=this.bk),fi.Kc()||(fi=Sf),ei.ac(ti+fi.offsetX+ri.left,ni+fi.offsetY+ri.top+(o.height*fi.y-ui*fi.y),oi.width,hi),ti+=oi.width+ri.left+ri.right}}break;case"Spot":var ci=s.length,pi=this.Ze(),di=pi.oa,vi=di.width,yi=di.height,gi=this.padding,mi=gi.left,xi=gi.top;a.x=mi-o.x,a.y=xi-o.y,pi.ac(a.x,a.y,vi,yi);for(var bi=0;ci>bi;bi++){var wi=s[bi];if(wi!==pi){var ki=wi.oa,Mi=ki.width,Ti=ki.height,Ci=wi.alignment;Ci.lc()&&(Ci=this.bk),Ci.Kc()||(Ci=Sf);var Ni=wi.Ti;Ni.lc()&&(Ni=Sf),a.x=Ci.x*vi+Ci.offsetX-(Ni.x*Mi-Ni.offsetX),a.y=Ci.y*yi+Ci.offsetY-(Ni.y*Ti-Ni.offsetY),a.x-=o.x,a.y-=o.y,wi.visible&&wi.ac(mi+a.x,xi+a.y,Mi,Ti)}}break;case"Auto":var Pi=s.length,ji=this.Ze(),Di=ji.oa,Ai=D();Ai.k(0,0,1,1);var Fi=ji.margin,Oi=Fi.left,zi=Fi.top,Bi=this.padding,qi=Bi.left,Ei=Bi.top;a.x=Oi,a.y=zi,a.width=Di.width,a.height=Di.height,ji.ac(qi+a.x,Ei+a.y,a.width,a.height);var Ri=ms(ji),Ii=xs(ji),Gi=0+Ri.y*Di.height+Ri.offsetY,Vi=0+Ii.x*Di.width+Ii.offsetX,Hi=0+Ii.y*Di.height+Ii.offsetY;Ai.x=0+Ri.x*Di.width+Ri.offsetX,Ai.y=Gi,Li(Ai,Vi,Hi,0,0),Ai.x+=Oi+qi,Ai.y+=zi+Ei;for(var Ui=0;Pi>Ui;Ui++){var Ki=s[Ui];if(Ki!==ji){var Yi=Ki.oa,Fi=Ki.margin,Wi=Math.max(Yi.width+Fi.right+Fi.left,0),Xi=Math.max(Yi.height+Fi.top+Fi.bottom,0),Ji=Ki.alignment;Ji.lc()&&(Ji=this.bk),Ji.Kc()||(Ji=Sf),a.x=Ai.width*Ji.x+Ji.offsetX-Wi*Ji.x+Fi.left+Ai.x,a.y=Ai.height*Ji.y+Ji.offsetY-Xi*Ji.y+Fi.top+Ai.y,a.width=Ai.width,a.height=Ai.height,Ki.visible&&(gf(Ai.x,Ai.y,Ai.width,Ai.height,a.x,a.y,Yi.width,Yi.height)?Ki.ac(a.x,a.y,Yi.width,Yi.height):Ki.ac(a.x,a.y,Yi.width,Yi.height,new Si(Ai.x,Ai.y,Ai.width,Ai.height)))}}F(Ai);break;case"Table":for(var Zi=s.length,Qi=this.padding,$i=Qi.left,_i=Qi.top,tn=this.Bq,nn=0,en=0,on=tn.length,rn=0,sn=0;on>sn;sn++)tn[sn]&&(rn=Math.max(rn,tn[sn].length));for(var an=Math.min(this.Ih,on-1);an!==on&&(void 0===this.Tc[an]||0===this.Tc[an].bb);)an++;for(var an=Math.min(an,on-1),hn=-this.Tc[an].xa,ln=Math.min(this.vh,rn-1);ln!==rn&&(void 0===this.Mc[ln]||0===this.Mc[ln].bb);)ln++;for(var ln=Math.min(ln,rn-1),un=-this.Mc[ln].xa,fn=j(),sn=0;on>sn;sn++)if(tn[sn])for(var rn=tn[sn].length,cn=this.Bc(sn),en=cn.xa+hn+_i+cn.MB(),pn=0;rn>pn;pn++)if(tn[sn][pn])for(var dn=this.Ac(pn),nn=dn.xa+un+$i+dn.MB(),vn=tn[sn][pn],yn=vn.length,gn=0;yn>gn;gn++){var mn=vn[gn],xn=mn.oa,bn=mn instanceof rs?mn:null;if(null===bn||bn.type!==Fp&&bn.type!==Op){fn.k(0,0);for(var wn=1;wn<mn.rowSpan&&!(sn+wn>=this.ms);wn++){var kn=this.Bc(sn+wn);fn.height+=kn.total}for(wn=1;wn<mn.HE&&!(pn+wn>=this.pr);wn++){var Mn=this.Ac(pn+wn);fn.width+=Mn.total}var Tn=dn.bb+fn.width,Sn=cn.bb+fn.height;a.x=nn,a.y=en,a.width=Tn,a.height=Sn;var Cn=nn,Nn=en,Pn=Tn,jn=Sn;nn+Tn>o.width&&(Pn=Math.max(o.width-nn,0)),en+Sn>o.height&&(jn=Math.max(o.height-en,0));var Ln=mn.alignment,Dn=0,An=0,Fn=0,On=0;if(Ln.lc()){Ln=this.bk,Ln.Kc()||(Ln=Sf);var Dn=Ln.x,An=Ln.y,Fn=Ln.offsetX,On=Ln.offsetY,zn=dn.alignment,Bn=cn.alignment;zn.Kc()&&(Dn=zn.x,Fn=zn.offsetX),Bn.Kc()&&(An=Bn.y,On=Bn.offsetY)}else Dn=Ln.x,An=Ln.y,Fn=Ln.offsetX,On=Ln.offsetY;(isNaN(Dn)||isNaN(An))&&(An=Dn=.5,On=Fn=0);var qn=xn.width,En=xn.height,Rn=mn.margin,In=Rn.left+Rn.right,Gn=Rn.top+Rn.bottom,Vn=Ur(mn,cn,dn,!1);!isNaN(mn.ka.width)||Vn!==wp&&Vn!==bp||(qn=Math.max(Tn-In,0)),!isNaN(mn.ka.height)||Vn!==wp&&Vn!==xp||(En=Math.max(Sn-Gn,0));var Hn=mn.se,Un=mn.Lf,qn=Math.min(Hn.width,qn),En=Math.min(Hn.height,En),qn=Math.max(Un.width,qn),En=Math.max(Un.height,En),Kn=En+Gn;a.x+=a.width*Dn-(qn+In)*Dn+Fn+Rn.left,a.y+=a.height*An-Kn*An+On+Rn.top,mn.visible&&(gf(Cn,Nn,Pn,jn,a.x,a.y,xn.width,xn.height)?mn.ac(a.x,a.y,qn,En):mn.ac(a.x,a.y,qn,En,new Si(Cn,Nn,Pn,jn)))}else{mn.Zf(),mn.Bb.wa();var Yn=mn.Bb;Yn.x=bn.type===Fp?$i:nn,Yn.y=bn.type===Op?_i:en,Yn.width=xn.width,Yn.height=xn.height,mn.Bb.freeze(),_r(mn,!1)}}for(L(fn),sn=0;Zi>sn;sn++)mn=s[sn],bn=mn instanceof rs?mn:null,null===bn||bn.type!==Fp&&bn.type!==Op||(Yn=mn.Bb,mn.hc.wa(),mn.hc.k(0,0,Yn.width,Yn.height),mn.hc.freeze());break;case"Viewbox":var Wn=s[0],Xn=Wn.oa,Jn=Wn.margin,Zn=Jn.top+Jn.bottom,Qn=Math.max(Xn.width+(Jn.right+Jn.left),0),$n=Math.max(Xn.height+Zn,0),_n=Wn.alignment;_n.lc()&&(_n=this.bk),_n.Kc()||(_n=Sf),a.x=o.width*_n.x-Qn*_n.x+_n.offsetX,a.y=o.height*_n.y-$n*_n.y+_n.offsetY,a.width=Xn.width,a.height=Xn.height,Wn.ac(a.x,a.y,a.width,a.height);break;case"Link":var te=s.length,ie=this instanceof Ca?this.Yg:this;if(ie instanceof Ra){var ne=this instanceof Ca?null:ie.path,ee=this.gi.l,oe=0;if(null!==ne&&oe<this.gi.count){var re=ee[oe];oe++,ne.ac(re.x-this.Jh.x,re.y-this.Jh.y,re.width,re.height)}for(var se=0;te>se;se++){var ae=s[se];ae!==ne&&oe<this.gi.count&&(re=ee[oe],oe++,ae.ac(re.x-this.Jh.x,re.y-this.Jh.y,re.width,re.height))}var he=ie.points,le=he.count;if(le>=2&&this.Od)for(var ue=this.Kf;ue.next();){var fe=ue.value,ce=le,pe=he,de=fe.ff,ve=fe.wv,ye=fe.Ti;ye.Gd()&&(ye=Sf);var ge=fe.xv,me=fe.kD,xe=0,be=0,we=0;if(-ce>de||de>=ce){var ke=this.GC,Me=this.FC;ge!==gd&&(we=this.computeAngle(fe,ge,Me),fe.angle=we),xe=ke.x,be=ke.y}else{var Te=void 0,Se=void 0;if(de>=0)Te=pe.l[de],Se=ce-1>de?pe.l[de+1]:Te;else var Ce=ce+de,Te=pe.l[Ce],Se=Ce>0?pe.l[Ce-1]:Te;Me=de>=0?Te.Rh(Se):Se.Rh(Te),ge!==gd&&(we=this.computeAngle(fe,ge,Me),fe.angle=we),xe=Te.x+(Se.x-Te.x)*ve,be=Te.y+(Se.y-Te.y)*ve
}var Ne=O();Ne.reset(),Ne.scale(fe.scale,fe.scale),Ne.rotate(fe.angle,0,0);var Pe=fe.sa,je=A(0,0,Pe.width,Pe.height),Le=C();Le.qs(je,ye),Ne.Ka(Le);var De=-Le.x,Ae=-Le.y,Fe=me.copy();isNaN(Fe.x)&&(Fe.x=de>=0?Le.x+3:-(Le.x+3)),isNaN(Fe.y)&&(Fe.y=-(Le.y+3)),Fe.rotate(Me),xe+=Fe.x,be+=Fe.y,Ne.FD(je);var De=De+je.x,Ae=Ae+je.y,Oe=N(xe+De,be+Ae);fe.move(Oe),P(Oe),P(Le),F(je),z(Ne)}this instanceof Ca?this.Xr():ie.Xr()}break;case"Grid":break;case"TableRow":case"TableColumn":r(this.toString()+" is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");break;default:r("Unknown panel type: "+y)}F(a)}},rs.prototype.Vi=function(t){var i=this.sa;if(gf(0,0,i.width,i.height,t.x,t.y)){for(var i=this.la.l,n=i.length,e=N(0,0);n--;){var o=i[n];if((o.visible||o===this.Jb)&&(Mi(e.set(t),o.transform),o.na(e)))return P(e),!0}return P(e),null===this.nb&&null===this.Nb?!1:!0}return!1},rs.prototype.Su=function(t){if(this.em===t)return this;for(var i=this.la.l,n=i.length,e=0;n>e;e++){var o=i[e].Su(t);if(null!==o)return o}return null},rs.prototype.walkVisualTree=function(t){ds(this,this,t)},rs.prototype.findInVisualTree=rs.prototype.vr=function(t){return vs(this,this,t)},rs.prototype.findObject=rs.prototype.Cd=function(t){if(this.name===t)return this;for(var i=this.la.l,n=i.length,e=0;n>e;e++){var o=i[e];if(o.name===t)return o;if(o instanceof rs)if(null===o.uh&&null===o.pf){if(o=o.Cd(t),null!==o)return o}else if(ks(o)&&(o=o.la.first(),null!==o&&(o=o.Cd(t),null!==o)))return o}return null},Wu=rs.prototype,Wu.jf=function(){return!(this.type===Fp||this.type===Op)},Wu.Dd=function(t,i,n){if(!1===this.Qf)return null;if(void 0===i&&(i=null),void 0===n&&(n=null),$r(this))return null;var e=this.sa,o=1/this.Th(),r=this.jf(),s=r?t:Mi(N(t.x,t.y),this.transform),a=this.g,h=10,l=5;if(null!==a&&(h=a.Ux("extraTouchArea"),l=h/2),gf(-(l*o),-(l*o),e.width+h*o,e.height+h*o,s.x,s.y)){if(!this.$f){var o=this.la.l,u=o.length,a=C(),l=(h=this.uC)?this.Ze():null;if(h&&(l.jf()?Mi(a.set(t),l.transform):a.set(t),!l.na(a)))return P(a),r||P(s),null;for(;u--;){var f=o[u];if((f.visible||f===this.Jb)&&(f.jf()?Mi(a.set(t),f.transform):a.set(t),!h||f!==l)){var c=null;if(f instanceof rs?c=f.Dd(a,i,n):!0===f.Qf&&f.na(a)&&(c=f),null!==c&&(null!==i&&(c=i(c)),null!==c&&(null===n||n(c))))return P(a),r||P(s),c}}P(a)}return null===this.background&&null===this.ul?(r||P(s),null):(t=gf(0,0,e.width,e.height,s.x,s.y)?this:null,r||P(s),t)}return r||P(s),null},Wu.yr=function(t,i,n,e){if(!1===this.Qf)return!1;void 0===i&&(i=null),void 0===n&&(n=null),e instanceof ci||e instanceof di||(e=new ci(Pr));var o=this.sa,r=this.jf(),s=r?t:Mi(N(t.x,t.y),this.transform);if(gf(0,0,o.width,o.height,s.x,s.y)){if(!this.$f){for(var o=this.la.l,a=o.length,h=C();a--;){var l=o[a];if(l.visible||l===this.Jb){l.jf()?Mi(h.set(t),l.transform):h.set(t);var u=l,l=l instanceof rs?l:null;(null!==l?l.yr(h,i,n,e):u.na(h))&&!1!==u.Qf&&(null!==i&&(u=i(u)),null===u||null!==n&&!n(u)||e.add(u))}}P(h)}return r||P(s),null!==this.background||null!==this.ul}return r||P(s),!1},Wu.Zi=function(t,i,n,e,o,r){if(!1===this.Qf)return!1;void 0===i&&(i=null),void 0===n&&(n=null);var s=r;if(void 0===r&&(s=O(),s.reset()),s.multiply(this.transform),this.zl(t,s))return gs(this,i,n,o),void 0===r&&z(s),!0;if(this.If(t,s)){if(!this.$f)for(var a=this.la.l,h=a.length;h--;){var l=a[h];if(l.visible||l===this.Jb){var u=l.Q,f=this.sa;u.x>f.width||u.y>f.height||0>u.x+u.width||0>u.y+u.height||(u=l,l=l instanceof rs?l:null,f=O(),f.set(s),(null!==l?l.Zi(t,i,n,e,o,f):Fr(u,t,e,f))&&(null!==i&&(u=i(u)),null===u||null!==n&&!n(u)||o.add(u)),z(f))}}return void 0===r&&z(s),e}return void 0===r&&z(s),!1},Wu.Fl=function(t,i,n,e,o,r){if(!1===this.Qf)return!1;void 0===n&&(n=null),void 0===e&&(e=null);var s=this.sa,a=this.jf(),h=a?t:Mi(N(t.x,t.y),this.transform),l=a?i:Mi(N(i.x,i.y),this.transform),u=h.Xi(l),f=0<h.x&&h.x<s.width&&0<h.y&&h.y<s.height||df(h.x,h.y,0,0,0,s.height)<u||df(h.x,h.y,0,s.height,s.width,s.height)<u||df(h.x,h.y,s.width,s.height,s.width,0)<u||df(h.x,h.y,s.width,0,0,0)<u,s=0<h.x&&h.x<s.width&&0<h.y&&h.y<s.height&&df(h.x,h.y,0,0,0,s.height)<u&&df(h.x,h.y,0,s.height,s.width,s.height)<u&&df(h.x,h.y,s.width,s.height,s.width,0)<u&&df(h.x,h.y,s.width,0,0,0)<u;if(a||(P(h),P(l)),f){if(!this.$f){for(a=C(),h=C(),l=this.la.l,u=l.length;u--;){var c=l[u];if(c.visible||c===this.Jb){var p=c.Q,d=this.sa;p.x>d.width||p.y>d.height||0>p.x+p.width||0>p.y+p.height||(c.jf()?(p=c.transform,Mi(a.set(t),p),Mi(h.set(i),p)):(a.set(t),h.set(i)),p=c,c=c instanceof rs?c:null,null!==c?!c.Fl(a,h,n,e,o,r):!p.cC(a,h,o))||(null!==n&&(p=n(p)),null===p||null!==e&&!e(p)||r.add(p))}}P(a),P(h)}return o?f:s}return!1},rs.prototype.add=rs.prototype.add=function(t){a(t,Pr,rs,"add:element"),this.qd(this.la.count,t)},rs.prototype.elt=rs.prototype.Y=function(t){return this.la.Y(t)},rs.prototype.insertAt=rs.prototype.qd=function(t,i){i instanceof sa&&r("Cannot add a Part to a Panel: "+i),(this===i||this.pk(i))&&(this===i&&r("Cannot make a Panel contain itself: "+this.toString()),r("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+i.toString()));var n=i.I;if(null!==n&&n!==this&&r("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+i.toString()+", already contained by "+n.toString()+", cannot be shared by this Panel: "+this.toString()),this.da!==Bp||i instanceof Ps||r("Can only add Shapes to a Grid Panel, not: "+i),i.zk(this),i.cl=null,null!==this.zC){var e=i.data;null!==e&&"object"==typeof e&&(null===this.of&&(this.of=new bi(Object,rs)),this.of.add(e,i))}var o=this.la,e=-1;if(n===this){for(var s=-1,a=this.la.l,h=a.length,l=0;h>l;l++)if(a[l]===i){s=l;break}if(-1!==s){if(s===t||s+1>=o.count&&t>=o.count)return;o.Dc(s),e=s}else r("element "+i.toString()+" has panel "+n.toString()+" but is not contained by it.")}(0>t||t>o.count)&&(t=o.count),o.qd(t,i),this.H(),i.H(),null!==i.cd?this.Jg=!0:i instanceof rs&&!0===i.Jg&&(this.Jg=!0),n=this.J,null!==n&&(n.Lj=null,n.wi=0/0,this.Jg&&n instanceof Na&&(n.Jg=!0),n.Jg&&(n.jd=null),o=this.g,null!==o&&o.V.Ua||(-1!==e&&n.ec(dc,"elements",this,i,null,e,null),n.ec(pc,"elements",this,null,i,null,t)))},rs.prototype.remove=rs.prototype.remove=function(t){a(t,Pr,rs,"remove:element");for(var i=this.la.l,n=i.length,e=-1,o=0;n>o;o++)if(i[o]===t){e=o;break}-1!==e&&this.Yd(e)},rs.prototype.removeAt=rs.prototype.Dc=function(t){t>=0&&this.Yd(t)},rs.prototype.Yd=function(t){var i=this.la,n=i.Y(t);if(n.cl=null,n.zk(null),null!==this.of){var e=n.data;"object"==typeof e&&this.of.remove(e)}i.Dc(t),Qr(this,!1),this.H(),this.ol===n&&(this.ol=null),i=this.J,null!==i&&(i.Lj=null,i.wi=0/0,e=this.g,null!==e&&e.V.Ua||i.ec(dc,"elements",this,n,null,t,null))},Y(rs,{ms:"rowCount"},function(){return void 0===this.Tc?0:this.Tc.length}),rs.prototype.getRowDefinition=rs.prototype.Bc=function(t){0>t&&c(t,">= 0",rs,"getRowDefinition:idx"),t=Math.round(t);var i=this.Tc;if(void 0===i[t]){var n=new Cs;n.zk(this),n.td=!0,n.index=t,i[t]=n}return i[t]},rs.prototype.removeRowDefinition=rs.prototype.YC=function(t){0>t&&c(t,">= 0",rs,"removeRowDefinition:idx"),t=Math.round(t);var i=this.Tc;this.ec(dc,"coldefs",this,i[t],null,t,null),i[t]&&delete i[t],this.H()},Y(rs,{pr:"columnCount"},function(){return void 0===this.Mc?0:this.Mc.length}),rs.prototype.getColumnDefinition=rs.prototype.Ac=function(t){0>t&&c(t,">= 0",rs,"getColumnDefinition:idx"),t=Math.round(t);var i=this.Mc;if(void 0===i[t]){var n=new Cs;n.zk(this),n.td=!1,n.index=t,i[t]=n}return i[t]},rs.prototype.removeColumnDefinition=rs.prototype.UC=function(t){0>t&&c(t,">= 0",rs,"removeColumnDefinition:idx"),t=Math.round(t);var i=this.Mc;this.ec(dc,"coldefs",this,i[t],null,t,null),i[t]&&delete i[t],this.H()},K(rs,{DG:"rowSizing"},function(){return void 0===this.hl?Gp:this.hl},function(t){if(void 0!==this.hl){var i=this.hl;i!==t&&(t!==Gp&&t!==Ip&&r("rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.hl=t,this.H(),this.h("rowSizing",i,t))}}),K(rs,{GE:"columnSizing"},function(){return void 0===this.Hk?Gp:this.Hk},function(t){if(void 0!==this.Hk){var i=this.Hk;i!==t&&(t!==Gp&&t!==Ip&&r("columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.Hk=t,this.H(),this.h("columnSizing",i,t))}}),K(rs,{cJ:"topIndex"},function(){return void 0===this.Ih?0:this.Ih},function(t){if(void 0!==this.Ih){var i=this.Ih;i!==t&&((!isFinite(t)||0>t)&&r("topIndex must be greater than zero and a real number. Was "+t),this.Ih=t,this.H(),this.h("topIndex",i,t))}}),K(rs,{nI:"leftIndex"},function(){return void 0===this.vh?0:this.vh},function(t){if(void 0!==this.vh){var i=this.vh;i!==t&&((!isFinite(t)||0>t)&&r("leftIndex must be greater than zero and a real number. Was "+t),this.vh=t,this.H(),this.h("leftIndex",i,t))}}),rs.prototype.findRowForLocalY=function(t){if(0>t)return-1;if(this.type!==Ap)return 0/0;for(var i=0,n=this.Tc,e=n.length,o=this.Ih;e>o;o++){var r=n[o];if(void 0!==r&&(i+=r.total,i>t))return o}return-1},rs.prototype.findColumnForLocalX=function(t){if(0>t)return-1;if(this.type!==Ap)return 0/0;for(var i=0,n=this.Mc,e=n.length,o=this.vh;e>o;o++){var r=n[o];if(void 0!==r&&(i+=r.total,i>t))return o}return-1},K(rs,{data:"data"},function(){return this.Cg},function(t){var i=this.Cg;if(i!==t){var n=this instanceof sa&&!(this instanceof Ca);n&&h(t,"object",rs,"data"),ws(this),this.Cg=t;var e=this.g;null!==e&&(n?this instanceof Ra?(null!==i&&e.vj.remove(i),null!==t&&e.vj.add(t,this)):(null!==i&&e.nh.remove(i),null!==t&&e.nh.add(t,this)):(n=this.I,null!==n&&null!==n.of&&(null!==i&&n.of.remove(i),null!==t&&n.of.add(t,this)))),this.h("data",i,t),null!==e&&e.V.Ua||null!==t&&this.rb()}}),K(rs,{LF:"itemIndex"},function(){return this.yp},function(t){var i=this.yp;i!==t&&(this.yp=t,this.h("itemIndex",i,t))}),rs.prototype.updateTargetBindings=rs.prototype.rb=function(t){var i=this.Fk;if(null!==i)for(void 0===t&&(t=""),i=i.i;i.next();){var n=i.value,e=n.uD;if((""===t||""===e||e===t)&&(e=n.Gv,null!==n.ME||""!==e)){var e=this.data,o=n.Sl;if(null!==o)e=""===o?this:"."===o?this:".."===o?this:this.Cd(o);else{var r=this.g;null!==r&&n.ys&&(e=r.U.Zr)}if(null!==e){var r=this,s=n.Ck;if(-1!==s){if(r=this.Su(s),null===r)continue}else null!==n.wf&&(r=n.wf);if("."===o?e=r:".."===o&&(e=r.I),o=n.nx,0!==o){if(!(r instanceof rs))continue;s=r,1===o?r=s.Ac(n.lu):2===o&&(r=s.Bc(n.lu))}void 0!==r&&n.JD(r,e)}}}},K(rs,{zC:"itemArray"},function(){return this.uh},function(t){var i=this.uh;if(i!==t){var n=this.g;null!==n&&null!==i&&qo(n,this),this.uh=t,null!==n&&null!==t&&Bo(n,this),this.h("itemArray",i,t),null!==n&&n.V.Ua||this.Iy()}}),rs.prototype.rebuildItemElements=rs.prototype.Iy=function(){var t=0;for(ks(this)&&(t=1);this.la.length>t;)this.Yd(t);if(t=this.zC,null!==t)for(var i=x(t),n=0;i>n;n++)Ms(this,w(t,n),n)},K(rs,{kI:"itemTemplate"},function(){return null===this.pf?null:this.pf.ha("")},function(t){if(null===this.pf){if(null===t)return;this.pf=new bi("string",rs)}var i=this.pf.ha("");i!==t&&(a(t,rs,rs,"itemTemplate"),(t instanceof sa||t.Jf)&&r("itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.pf.add("",t),this.h("itemTemplate",i,t),t=this.g,null!==t&&t.V.Ua||this.Iy())}),K(rs,{MF:"itemTemplateMap"},function(){return this.pf},function(t){var i=this.pf;if(i!==t){a(t,bi,rs,"itemTemplateMap");for(var n=t.i;n.next();){var e=n.value;(e instanceof sa||e.Jf)&&r("Template in itemTemplateMap must not be a Part or be Panel.isPanelMain: "+e)}this.pf=t,this.h("itemTemplateMap",i,t),t=this.g,null!==t&&t.V.Ua||this.Iy()}}),K(rs,{jI:"itemCategoryProperty"},function(){return this.Lm},function(t){var i=this.Lm;i!==t&&("string"!=typeof t&&"function"!=typeof t&&f(t,"string or function",rs,"itemCategoryProperty"),this.Lm=t,this.h("itemCategoryProperty",i,t))}),rs.prototype.getCategoryForItemData=function(t){if(null===t)return"";var i=this.Lm,n="";if("function"==typeof i)n=i(t);else{if("string"!=typeof i||"object"!=typeof t)return"";if(""===i)return"";n=Q(t,i)}return void 0===n?"":"string"==typeof n?n:(r("Panel.getCategoryForItemData found a non-string category for "+t+": "+n),"")};var qp=!1,Ep=null;rs.prototype.findTemplateForItemData=function(t,i,n){return t=this.MF,i=null,null!==t&&(i=t.ha(n)),null===i&&(qp||(qp=!0,v('No item template Panel found for category "'+n+'" on '+this),v("  Using default item template."),n=new rs,t=new qs,t.bind(new kn("text","",mc)),n.add(t),Ep=n),i=Ep),i},K(rs,{cI:"isAtomic"},function(){return this.$f},function(t){var i=this.$f;i!==t&&(h(t,"boolean",rs,"isAtomic"),this.$f=t,this.h("isAtomic",i,t))}),K(rs,{uC:"isClipping"},function(){return this.jp},function(t){var i=this.jp;i!==t&&(h(t,"boolean",rs,"isClipping"),this.jp=t,this.h("isClipping",i,t))}),H("RowColumnDefinition",Cs),Cs.prototype.copy=function(){var t=new Cs;return t.yt=this.yt,t.Pc=this.Pc,t.ie=this.ie,t.Ai=this.Ai,t.yi=this.yi,t.Md=this.Md,t.bb=this.bb,t.xa=this.xa,t.Vg=this.Vg,t.Nq=this.Nq,t.Ii=null===this.Ii?null:this.Ii.O(),t.Kq=this.Kq,t.Lq=this.Lq,t.Rg=null,null!==this.Rg&&(t.Rg=b(this.Rg)),t.nb=this.nb,t.Lo=this.Lo,t.gc=this.gc,t},Cs.prototype.qr=function(t){a(t,Cs,Cs,"copyFrom:pd"),t.td?this.height=t.height:this.width=t.width,this.Wh=t.Wh,this.af=t.af,this.alignment=t.alignment,this.stretch=t.stretch,this.ts=t.ts,this.Ii=null===t.Ii?null:t.Ii.O(),this.ho=t.ho,this.io=t.io,this.Rg=null,t.Rg&&(this.Rg=b(t.Rg)),this.background=t.background,this.Mx=t.Mx,this.gc=t.gc},Cs.prototype.toString=function(){return"RowColumnDefinition "+(this.td?"(Row ":"(Column ")+this.index+") #"+V(this)};var Rp;Cs.Default=Rp=Z(Cs,"Default",0);var Ip;Cs.None=Ip=Z(Cs,"None",1);var Gp;Cs.ProportionalExtra=Gp=Z(Cs,"ProportionalExtra",2),Cs.prototype.zk=function(t){this.eg=t},Cs.prototype.computeEffectiveSpacingTop=Cs.prototype.MB=function(){var t=0;if(0!==this.index){var i=this.eg,n=this.ho;null===n&&null!==i&&(n=this.td?i.oh:i.Dg),null!==n&&(t=this.io,isNaN(t)&&(t=null!==i?this.td?i.Fg:i.Eg:0))}if(i=this.mD,null===i){if(i=this.eg,null===i)return t;i=i.ii}return t+(this.td?i.top:i.left)},Cs.prototype.computeEffectiveSpacing=Cs.prototype.Cf=function(){var t=0;if(0!==this.index){var i=this.eg,n=this.ho;null===n&&null!==i&&(n=this.td?i.oh:i.Dg),null!==n&&(t=this.io,isNaN(t)&&(t=null!==i?this.td?i.Fg:i.Eg:0))}if(i=this.mD,null===i){if(i=this.eg,null===i)return t;i=i.ii}return t+(this.td?i.top+i.bottom:i.left+i.right)},Cs.prototype.pc=function(t,i,n,e,o){var r=this.eg;if(null!==r&&(r.ec(cc,t,this,i,n,e,o),null!==this.gc&&(i=r.Cn(),null!==i&&(i=i.data,null!==i))))for(n=this.gc.i;n.next();)n.value.Hv(this,i,t,null)},Y(Cs,{I:"panel"},function(){return this.eg}),K(Cs,{td:"isRow"},function(){return this.yt},function(t){this.yt=t}),K(Cs,{index:"index"},function(){return this.Pc},function(t){this.Pc=t}),K(Cs,{height:"height"},function(){return this.ie},function(t){var i=this.ie;i!==t&&(0>t&&c(t,">= 0",Cs,"height"),this.ie=t,this.Aa=this.bb,null!==this.I&&this.I.H(),this.pc("height",i,t))}),K(Cs,{width:"width"},function(){return this.ie},function(t){var i=this.ie;i!==t&&(0>t&&c(t,">= 0",Cs,"width"),this.ie=t,this.Aa=this.bb,null!==this.I&&this.I.H(),this.pc("width",i,t))}),K(Cs,{Wh:"minimum"},function(){return this.Ai},function(t){var i=this.Ai;i!==t&&((0>t||!isFinite(t))&&c(t,">= 0",Cs,"minimum"),this.Ai=t,this.Aa=this.bb,null!==this.I&&this.I.H(),this.pc("minimum",i,t))}),K(Cs,{af:"maximum"},function(){return this.yi},function(t){var i=this.yi;i!==t&&(0>t&&c(t,">= 0",Cs,"maximum"),this.yi=t,this.Aa=this.bb,null!==this.I&&this.I.H(),this.pc("maximum",i,t))}),K(Cs,{alignment:"alignment"},function(){return this.Md},function(t){var i=this.Md;i.A(t)||(this.Md=t.O(),null!==this.I&&this.I.H(),this.pc("alignment",i,t))}),K(Cs,{stretch:"stretch"},function(){return this.Vg},function(t){var i=this.Vg;i!==t&&(this.Vg=t,null!==this.I&&this.I.H(),this.pc("stretch",i,t))}),K(Cs,{mD:"separatorPadding"},function(){return this.Ii},function(t){"number"==typeof t&&(t=new Di(t));var i=this.Ii;null!==t&&null!==i&&i.A(t)||(null!==t&&(t=t.O()),this.Ii=t,null!==this.I&&this.I.H(),this.pc("separatorPadding",i,t))}),K(Cs,{ho:"separatorStroke"},function(){return this.Kq},function(t){var i=this.Kq;i!==t&&(null===t||"string"==typeof t||t instanceof Nr)&&(t instanceof Nr&&t.freeze(),this.Kq=t,null!==this.I&&this.I.H(),this.pc("separatorStroke",i,t))}),K(Cs,{io:"separatorStrokeWidth"},function(){return this.Lq},function(t){var i=this.Lq;i!==t&&(this.Lq=t,null!==this.I&&this.I.H(),this.pc("separatorStrokeWidth",i,t))}),K(Cs,{IG:"separatorDashArray"},function(){return this.Rg},function(t){var i=this.Rg;if(i!==t){if(null===t||Array.isArray(t)||f(t,"Array",Cs,"separatorDashArray:value"),null!==t){for(var n=t.length,e=0,o=0;n>o;o++){var s=t[o];"number"==typeof s&&s>=0&&isFinite(s)||r("separatorDashArray:value "+s+" must be a positive number or zero."),e+=s}if(0===e){if(null===i)return;t=null}}this.Rg=t,null!==this.I&&this.I.ba(),this.pc("separatorDashArray",i,t)}}),K(Cs,{background:"background"},function(){return this.nb},function(t){var i=this.nb;i!==t&&(null===t||"string"==typeof t||t instanceof Nr)&&(t instanceof Nr&&t.freeze(),this.nb=t,null!==this.I&&this.I.ba(),this.pc("background",i,t))}),K(Cs,{Mx:"coversSeparators"},function(){return this.Lo},function(t){var i=this.Lo;i!==t&&(h(t,"boolean",Cs,"coversSeparators"),this.Lo=t,null!==this.I&&this.I.ba(),this.pc("coversSeparators",i,t))}),K(Cs,{ts:"sizing"},function(){return this.Nq},function(t){var i=this.Nq;i!==t&&(this.Nq=t,null!==this.I&&this.I.H(),this.pc("sizing",i,t))}),K(Cs,{Aa:"actual"},function(){return this.bb},function(t){this.bb=isNaN(this.ie)?Math.max(Math.min(this.yi,t),this.Ai):Math.max(Math.min(this.yi,this.ie),this.Ai)}),K(Cs,{total:"total"},function(){return this.bb+this.Cf()},function(t){this.bb=isNaN(this.ie)?Math.max(Math.min(this.yi,t),this.Ai):Math.max(Math.min(this.yi,this.ie),this.Ai),this.bb=Math.max(0,this.bb-this.Cf())}),K(Cs,{position:"position"},function(){return this.xa},function(t){this.xa=t}),Cs.prototype.bind=Cs.prototype.bind=function(t){t.wf=this;var i=this.I;null!==i&&(i=i.Cn(),null!==i&&bs(i)&&r("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+t)),null===this.gc&&(this.gc=new ci(kn)),this.gc.add(t)},U(Ps,Pr),H("Shape",Ps),Ps.prototype.cloneProtected=function(t){Pr.prototype.cloneProtected.call(this,t),t.za=this.za,t.xm=this.xm,t.fg=this.fg,t.bp=this.bp,t.tj=this.tj,t.Ec=this.Ec,t.$b=this.$b,t.gg=this.gg,t.gn=this.gn,t.hn=this.hn,t.nl=this.nl,t.ml=null,null!==this.ml&&(t.ml=b(this.ml)),t.yc=this.yc,t.Fh=this.Fh.O(),t.Gh=this.Gh.O(),t.gq=this.gq,t.hq=this.hq,t.kp=this.kp,t.qp=this.qp,t.kq=this.kq,t.jn=this.jn,t.Am=this.Am,t.hp=this.hp},Ps.prototype.toString=function(){return"Shape("+("None"!==this.jb?this.jb:"None"!==this.no?this.no:this.Sx)+")#"+V(this)},Ps.prototype.Yi=function(t,i){if(null!==this.$b||null!==this.Ec){null!==this.Ec&&Rr(this,t,this.Ec,!0,!1),null!==this.$b&&Rr(this,t,this.$b,!1,!1);var n=this.gg;if(0===n){var e=this.J;e instanceof Ca&&e.type===zp&&e.Xb instanceof Ps&&(n=e.Xb.Na)}t.lineWidth=n,t.lineJoin=this.hn,t.lineCap=this.gn,t.miterLimit=this.nl;var o=!1;this.J&&i.Pg.drawShadows&&(o=this.J.rk);var s=!0;null!==this.$b&&null===this.Ec&&(s=!1);var e=!1,a=!0,h=this.Yy;null!==h&&(e=!0,void 0!==t.setLineDash?(t.setLineDash(h),t.lineDashOffset=this.yc):void 0!==t.webkitLineDash?(t.webkitLineDash=h,t.webkitLineDashOffset=this.yc):void 0!==t.mozDash?(t.mozDash=h,t.mozDashOffset=this.yc):a=!1);var l=this.za;if(null!==l){if(l.da===$f)t.beginPath(),e&&!a?Lr(t,l.Pb,l.Wb,l.Wa,l.fb,h,this.yc):(t.moveTo(l.Pb,l.Wb),t.lineTo(l.Wa,l.fb)),null!==this.Ec&&qr(t,this.Ec),0!==n&&null!==this.$b&&Er(t);else if(l.da===_f){var u=l.Pb,f=l.Wb,c=l.Wa,p=l.fb,l=Math.min(u,c),d=Math.min(f,p),u=Math.abs(c-u),f=Math.abs(p-f);if(null!==this.Ec&&(t.beginPath(),t.rect(l,d,u,f),qr(t,this.Ec)),null!==this.$b){var v=c=0,y=0;s&&o&&(c=t.shadowOffsetX,v=t.shadowOffsetY,y=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),e&&!a?(a=E(),a.push(l),a.push(d),a.push(l+u),a.push(d),a.push(l+u),a.push(d+f),a.push(l),a.push(d+f),a.push(l),a.push(d),t.beginPath(),Ls(t,a,h,this.yc),Er(t),R(a)):0!==n&&(t.beginPath(),t.rect(l,d,u,f),Er(t)),s&&o&&(t.shadowOffsetX=c,t.shadowOffsetY=v,t.shadowBlur=y)}}else if(l.da===tc)u=l.Pb,f=l.Wb,c=l.Wa,p=l.fb,l=Math.abs(c-u)/2,d=Math.abs(p-f)/2,u=Math.min(u,c)+l,f=Math.min(f,p)+d,t.beginPath(),t.moveTo(u,f-d),t.bezierCurveTo(u+Qf.ga*l,f-d,u+l,f-Qf.ga*d,u+l,f),t.bezierCurveTo(u+l,f+Qf.ga*d,u+Qf.ga*l,f+d,u,f+d),t.bezierCurveTo(u-Qf.ga*l,f+d,u-l,f+Qf.ga*d,u-l,f),t.bezierCurveTo(u-l,f-Qf.ga*d,u-Qf.ga*l,f-d,u,f-d),t.closePath(),null!==this.Ec&&qr(t,this.Ec),e&&!a&&(a=E(),Qf.Sd(u,f-d,u+Qf.ga*l,f-d,u+l,f-Qf.ga*d,u+l,f,.5,a),Qf.Sd(u+l,f,u+l,f+Qf.ga*d,u+Qf.ga*l,f+d,u,f+d,.5,a),Qf.Sd(u,f+d,u-Qf.ga*l,f+d,u-l,f+Qf.ga*d,u-l,f,.5,a),Qf.Sd(u-l,f,u-l,f-Qf.ga*d,u-Qf.ga*l,f-d,u,f-d,.5,a),t.beginPath(),Ls(t,a,h,this.yc),R(a)),0!==n&&null!==this.$b&&(y=v=c=0,s&&o&&(c=t.shadowOffsetX,v=t.shadowOffsetY,y=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),Er(t),s&&o&&(t.shadowOffsetX=c,t.shadowOffsetY=v,t.shadowBlur=y));else if(l.da===ic){for(d=l.ki,f=d.length,p=0;f>p;p++){u=d.l[p],t.beginPath(),t.moveTo(u.ia,u.ja);for(var c=u.ra.l,v=c.length,g=null,y=0;v>y;y++){var m=c[y];switch(m.da){case rc:t.moveTo(m.s,m.u);break;case sc:t.lineTo(m.s,m.u);break;case ac:t.bezierCurveTo(m.xc,m.Rd,m.uf,m.vf,m.Wa,m.fb);break;case hc:t.quadraticCurveTo(m.xc,m.Rd,m.Wa,m.fb);break;case lc:if(m.radiusX===m.radiusY)g=Math.PI/180,t.arc(m.xc,m.Rd,m.radiusX,m.be*g,(m.be+m.gf)*g,0>m.gf);else for(var g=tn(m,u),x=g.length,b=0;x>b;b++){var w=g[b];0===b&&t.lineTo(w[0],w[1]),t.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7])}break;case uc:for(b=x=0,null!==g&&g.type===lc?(g=tn(g,u),g=g[g.length-1]||null,null!==g&&(x=g[6],b=g[7])):(x=null!==g?g.s:u.ia,b=null!==g?g.u:u.ja),g=nn(m,u,x,b),x=g.length,b=0;x>b;b++)w=g[b],t.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7]);break;default:r("Segment not of valid type")}m.Lg&&t.closePath(),g=m}o?(y=v=c=0,u.Im?(!0===u.Pk&&null!==this.Ec?(qr(t,this.Ec),s=!0):s=!1,0!==n&&null!==this.$b&&(s&&(c=t.shadowOffsetX,v=t.shadowOffsetY,y=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),e&&!a||Er(t),s&&(t.shadowOffsetX=c,t.shadowOffsetY=v,t.shadowBlur=y))):(s&&(c=t.shadowOffsetX,v=t.shadowOffsetY,y=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),!0===u.Pk&&null!==this.Ec&&qr(t,this.Ec),0!==n&&null!==this.$b&&(e&&!a||Er(t)),s&&(t.shadowOffsetX=c,t.shadowOffsetY=v,t.shadowBlur=y))):(!0===u.Pk&&null!==this.Ec&&qr(t,this.Ec),0===n||null===this.$b||e&&!a||Er(t))}if(e&&!a)for(n=s,s=l.ki,a=s.length,l=0;a>l;l++){for(d=s.l[l],t.beginPath(),f=E(),f.push(d.ia),f.push(d.ja),p=d.ia,u=d.ja,c=p,v=u,y=d.ra.l,m=y.length,g=0;m>g;g++){switch(x=y[g],x.da){case rc:Ls(t,f,h,this.yc),f.length=0,f.push(x.s),f.push(x.u),p=x.s,u=x.u,c=p,v=u;break;case sc:f.push(x.s),f.push(x.u),p=x.s,u=x.u;break;case ac:Qf.Sd(p,u,x.xc,x.Rd,x.uf,x.vf,x.Wa,x.fb,.5,f),p=x.s,u=x.u;break;case hc:Qf.$n(p,u,x.xc,x.Rd,x.Wa,x.fb,.5,f),p=x.s,u=x.u;break;case lc:for(var b=tn(x,d),w=b.length,k=0;w>k;k++){var M=b[k];Qf.Sd(p,u,M[2],M[3],M[4],M[5],M[6],M[7],.5,f),p=M[6],u=M[7]}break;case uc:for(b=nn(x,d,p,u),w=b.length,k=0;w>k;k++)M=b[k],Qf.Sd(p,u,M[2],M[3],M[4],M[5],M[6],M[7],.5,f),p=M[6],u=M[7];break;default:r("Segment not of valid type")}x.Lg&&(f.push(c),f.push(v),Ls(t,f,h,this.yc))}Ls(t,f,h,this.yc),R(f),null!==this.$b&&(p=f=d=0,n&&o&&(d=t.shadowOffsetX,f=t.shadowOffsetY,p=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),Er(t),n&&o&&(t.shadowOffsetX=d,t.shadowOffsetY=f,t.shadowBlur=p))}}if(e&&(void 0!==t.setLineDash?(t.setLineDash(lf),t.lineDashOffset=0):void 0!==t.webkitLineDash?(t.webkitLineDash=lf,t.webkitLineDashOffset=0):void 0!==t.mozDash&&(t.mozDash=null,t.mozDashOffset=0)),null!==this.OC){for(e=this.OC,Or(e,1/0,1/0),h=e.oa,e.ac(0,0,h.width,h.height),t.save(),h=this.zc.Ya.first(),t.beginPath(),n=E(),n.push(h.ia),n.push(h.ja),o=h.ia,s=h.ja,a=o,l=s,d=h.ra.l,f=d.length,p=0;f>p;p++){switch(u=d[p],u.da){case rc:js(t,i,n,e),n.length=0,n.push(u.s),n.push(u.u),o=u.s,s=u.u,a=o,l=s;break;case sc:n.push(u.s),n.push(u.u),o=u.s,s=u.u;break;case ac:Qf.Sd(o,s,u.xc,u.Rd,u.uf,u.vf,u.Wa,u.fb,.5,n),o=u.s,s=u.u;break;case hc:Qf.$n(o,s,u.xc,u.Rd,u.Wa,u.fb,.5,n),o=u.s,s=u.u;break;case lc:for(c=tn(u,h),v=c.length,y=0;v>y;y++)m=c[y],Qf.Sd(o,s,m[2],m[3],m[4],m[5],m[6],m[7],.5,n),o=m[6],s=m[7];break;case uc:for(c=nn(u,h,o,s),v=c.length,y=0;v>y;y++)m=c[y],Qf.Sd(o,s,m[2],m[3],m[4],m[5],m[6],m[7],.5,n),o=m[6],s=m[7];break;default:r("Segment not of valid type")}u.Lg&&(n.push(a),n.push(l),js(t,i,n,e))}js(t,i,n,e),R(n),t.restore()}}}},Ps.prototype.getDocumentPoint=Ps.prototype.Ra=function(t,i){void 0===i&&(i=new wi),t.Gd()&&r("getDocumentPoint:s Spot must be real: "+t.toString());var n=this.sa,e=this.Na;return i.k(t.x*(n.width+e)-e/2+n.x+t.offsetX,t.y*(n.height+e)-e/2+n.y+t.offsetY),this.We.Ka(i),i},Ps.prototype.Vi=function(t,i){var n=this.za;if(null===n||null===this.fill&&null===this.stroke)return!1;var e=n.Qa,o=this.Na/2;n.type!==$f||i||(o+=2);var s=D();if(s.assign(e),s.$e(o+2,o+2),!s.na(t))return F(s),!1;if(e=o+1e-4,n.type===$f)return null===this.stroke?!1:(e=(n.s-n.ia)*(t.x-n.ia)+(n.u-n.ja)*(t.y-n.ja),0>(n.ia-n.s)*(t.x-n.s)+(n.ja-n.u)*(t.y-n.u)||0>e?!1:(F(s),Qf.bd(n.ia,n.ja,n.s,n.u,o,t.x,t.y)));if(n.type===_f){var a=n.ia,h=n.ja,l=n.s,u=n.u,n=Math.min(a,l),f=Math.min(h,u),a=Math.abs(l-a),h=Math.abs(u-h);if(s.x=n,s.y=f,s.width=a,s.height=h,null===this.fill){if(s.$e(-e,-e),s.na(t))return F(s),!1;s.$e(e,e)}return null!==this.stroke&&s.$e(o,o),o=s.na(t),F(s),o}if(n.type===tc){if(a=n.ia,h=n.ja,l=n.s,u=n.u,n=Math.min(a,l),f=Math.min(h,u),a=Math.abs(l-a),h=Math.abs(u-h),a/=2,h/=2,n=t.x-(n+a),f=t.y-(f+h),null===this.fill){if(a-=e,h-=e,0>=a||0>=h||1>=n*n/(a*a)+f*f/(h*h))return F(s),!1;a+=e,h+=e}return null!==this.stroke&&(a+=o,h+=o),F(s),0>=a||0>=h?!1:1>=n*n/(a*a)+f*f/(h*h)}return n.type===ic?(F(s),null===this.fill?Qi(n,t.x,t.y,o):n.na(t,o,1<this.Na,i)):(r("Unknown Geometry type"),!1)},Ps.prototype.Rn=function(t,i,n,e){var o=this.ka,s=this.gg;t=Math.max(t,0),i=Math.max(i,0);var a;if(this.fg)a=this.za.Qa;else{var h=this.jb,l=Qf.Pv[h];if(void 0===l){var u=Qf.Hf[h];"string"==typeof u&&(u=Qf.Hf[u]),"function"==typeof u?(l=u(null,100,100),Qf.Pv[h]=l):r("Unsupported Figure:"+h)}a=l.Qa}var h=a.width,l=a.height,u=a.width,f=a.height;switch(Hr(this,!0)){case gp:e=n=0;break;case wp:u=Math.max(t-s,0),f=Math.max(i-s,0);break;case bp:u=Math.max(t-s,0),e=0;break;case xp:n=0,f=Math.max(i-s,0)}switch(isFinite(o.width)&&(u=o.width),isFinite(o.height)&&(f=o.height),o=this.se,a=this.Lf,n=Math.max(n,a.width)-s,e=Math.max(e,a.height)-s,u=Math.min(o.width,u),f=Math.min(o.height,f),u=isFinite(u)?Math.max(n,u):Math.max(h,n),f=isFinite(f)?Math.max(e,f):Math.max(l,e),n=As(this)){case gp:break;case wp:h=u,l=f;break;case kp:n=Math.min(u/h,f/l),isFinite(n)||(n=1),h*=n,l*=n;break;default:r(n+" is not a valid geometryStretch.")}this.fg?(a=this.zc,o=h,e=l,n=a.copy(),a=a.Qa,o/=a.width,e/=a.height,isFinite(o)||(o=1),isFinite(e)||(e=1),1===o&&1===e||n.scale(o,e),this.za=n):(null===this.za||this.za.Hm!==t-s||this.za.Gm!==i-s)&&(this.za=Qf.makeGeometry(this,h,l)),a=this.za.Qa,1/0===t||1/0===i?Ar(this,a.x-s/2,a.y-s/2,0===t&&0===h?0:a.width+s,0===i&&0===l?0:a.height+s):Ar(this,-(s/2),-(s/2),u+s,f+s)},Ps.prototype.Lh=function(t,i,n,e){zr(this,t,i,n,e)},Ps.prototype.getNearestIntersectionPoint=Ps.prototype.kk=function(t,i,n){return this.Fn(t.x,t.y,i.x,i.y,n)},Ps.prototype.Fn=function(t,i,n,e,o){var s=this.transform,a=1/(s.m11*s.m22-s.m12*s.m21),h=s.m22*a,l=-s.m12*a,u=-s.m21*a,f=s.m11*a,c=a*(s.m21*s.dy-s.m22*s.dx),p=a*(s.m12*s.dx-s.m11*s.dy),s=t*h+i*u+c,a=t*l+i*f+p,h=n*h+e*u+c,l=n*l+e*f+p,u=this.Na/2,c=this.za;if(null===c&&(Or(this,1/0,1/0),c=this.za),p=c.Qa,f=!1,c.type===$f)if(1.5>=this.Na)f=Qf.og(c.Pb,c.Wb,c.Wa,c.fb,s,a,h,l,o);else{var d=0,v=0;if(c.Pb===c.Wa?(d=u,v=0):(i=(c.fb-c.Wb)/(c.Wa-c.Pb),v=u/Math.sqrt(1+i*i),d=v*i),e=E(),i=new wi,Qf.og(c.Pb+d,c.Wb+v,c.Wa+d,c.fb+v,s,a,h,l,i)&&e.push(i),i=new wi,Qf.og(c.Pb-d,c.Wb-v,c.Wa-d,c.fb-v,s,a,h,l,i)&&e.push(i),i=new wi,Qf.og(c.Pb+d,c.Wb+v,c.Pb-d,c.Wb-v,s,a,h,l,i)&&e.push(i),i=new wi,Qf.og(c.Wa+d,c.fb+v,c.Wa-d,c.fb-v,s,a,h,l,i)&&e.push(i),i=e.length,0===i)return R(e),!1;for(f=!0,v=1/0,d=0;i>d;d++){var h=e[d],y=(h.x-s)*(h.x-s)+(h.y-a)*(h.y-a);v>y&&(v=y,o.x=h.x,o.y=h.y)}R(e)}else if(c.type===_f)i=p.x-u,f=Qf.kk(i,p.y-u,p.x+p.width+u,p.y+p.height+u,s,a,h,l,o);else if(c.type===tc)t:if(i=p.copy().$e(u,u),0===i.width)f=Qf.og(i.x,i.y,i.x,i.y+i.height,s,a,h,l,o);else if(0===i.height)f=Qf.og(i.x,i.y,i.x+i.width,i.y,s,a,h,l,o);else{t=i.width/2;var g=i.height/2;if(e=i.x+t,i=i.y+g,n=9999,s!==h&&(n=(a-l)/(s-h)),9999>Math.abs(n)){if(f=a-i-n*(s-e),0>t*t*n*n+g*g-f*f){o.x=0/0,o.y=0/0,f=!1;break t}u=Math.sqrt(t*t*n*n+g*g-f*f),h=(-(t*t*n*f)+t*g*u)/(g*g+t*t*n*n)+e,t=(-(t*t*n*f)-t*g*u)/(g*g+t*t*n*n)+e,l=n*(h-e)+f+i,i=n*(t-e)+f+i,e=Math.abs((s-h)*(s-h))+Math.abs((a-l)*(a-l)),a=Math.abs((s-t)*(s-t))+Math.abs((a-i)*(a-i)),a>e?(o.x=h,o.y=l):(o.x=t,o.y=i)}else{if(h=g*g,l=s-e,h-=h/(t*t)*l*l,0>h){o.x=0/0,o.y=0/0,f=!1;break t}u=Math.sqrt(h),l=i+u,i-=u,e=Math.abs(l-a),a=Math.abs(i-a),a>e?(o.x=s,o.y=l):(o.x=s,o.y=i)}f=!0}else if(c.type===ic){var m=0,x=0,b=y=0,p=C(),d=h-s,v=l-a,v=d*d+v*v;for(o.x=h,o.y=l,d=0;d<c.Ya.count;d++)for(var w=c.Ya.l[d],k=w.ra,m=w.ia,x=w.ja,M=m,T=x,S=0;S<k.count;S++){var N=k.l[S],j=N.type,y=N.s,b=N.u,L=!1;switch(j){case rc:M=y,T=b;break;case sc:L=Os(m,x,y,b,s,a,h,l,p);break;case ac:var L=N.vb,j=N.Lb,D=N.ve,A=N.we,L=Qf.lr(m,x,L,j,D,A,y,b,s,a,h,l,.5,p);break;case hc:L=(m+2*N.vb)/3,j=(x+2*N.Lb)/3,D=(2*N.vb+y)/3,A=(2*N.vb+y)/3,L=Qf.lr(m,x,L,j,D,A,y,b,s,a,h,l,.5,p);break;case lc:case uc:for(b=N.type===lc?tn(N,w):nn(N,w,m,x),j=b.length,D=0;j>D;D++)g=b[D],0===D&&Os(m,x,g[0],g[1],s,a,h,l,p)&&(y=Fs(s,a,p,v,o),v>y&&(v=y,f=!0)),Qf.lr(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],s,a,h,l,.5,p)&&(y=Fs(s,a,p,v,o),v>y&&(v=y,f=!0));y=g[6],b=g[7];break;default:r("Unknown Segment type: "+N.type)}m=y,x=b,L&&(y=Fs(s,a,p,v,o),v>y&&(v=y,f=!0)),N.av&&(y=M,b=T,Os(m,x,y,b,s,a,h,l,p)&&(y=Fs(s,a,p,v,o),v>y&&(v=y,f=!0)))}s=n-t,a=e-i,i=Math.sqrt(s*s+a*a),0!==i&&(s/=i,a/=i),o.x-=s*u,o.y-=a*u,P(p)}else r("Invalid Geometry type");return f?(this.transform.Ka(o),!0):!1},Ps.prototype.containedInRect=Ps.prototype.zl=function(t,i){if(void 0===i)return t.Wi(this.Q);var n=this.za;null===n&&(Or(this,1/0,1/0),n=this.za);var n=n.Qa,e=this.Na/2,o=!1,r=C();return r.k(n.x-e,n.y-e),t.na(i.Ka(r))&&(r.k(n.x-e,n.bottom+e),t.na(i.Ka(r))&&(r.k(n.right+e,n.bottom+e),t.na(i.Ka(r))&&(r.k(n.right+e,n.y-e),t.na(i.Ka(r))&&(o=!0)))),P(r),o},Ps.prototype.intersectsRect=Ps.prototype.If=function(t,i){if(this.zl(t,i)||void 0===i&&(i=this.transform,t.Wi(this.Q)))return!0;var n=O();n.set(i),n.by();var e=t.left,o=t.right,r=t.top,s=t.bottom,a=C();if(a.k(e,r),n.Ka(a),this.Vi(a,!0))return P(a),!0;if(a.k(o,r),n.Ka(a),this.Vi(a,!0))return P(a),!0;if(a.k(e,s),n.Ka(a),this.Vi(a,!0))return P(a),!0;if(a.k(o,s),n.Ka(a),this.Vi(a,!0))return P(a),!0;var h=C(),l=C();n.set(i),n.KC(this.transform),n.by(),h.x=o,h.y=r,h.transform(n),a.x=e,a.y=r,a.transform(n);var u=!1;return zs(this,a,h,l)?u=!0:(a.x=o,a.y=s,a.transform(n),zs(this,a,h,l)?u=!0:(h.x=e,h.y=s,h.transform(n),zs(this,a,h,l)?u=!0:(a.x=e,a.y=r,a.transform(n),zs(this,a,h,l)&&(u=!0)))),P(a),z(n),P(h),P(l),u},Ps.prototype.cC=function(t,i,n){function e(t,i){for(var n=t.length,e=0;n>e;e+=2)if(i.sr(t[e],t[e+1])>o)return!0;return!1}if(n&&null!==this.fill&&this.Vi(t,!0))return!0;var o=t.Xi(i);i=o,1.5<this.Na&&(o=this.Na/2+Math.sqrt(o),o*=o);var s=this.za;if(null===s&&(Or(this,1/0,1/0),s=this.za),!n){var a=s.Qa,h=a.x,l=a.y,u=a.x+a.width,a=a.y+a.height;if(vf(t.x,t.y,h,l)<=o&&vf(t.x,t.y,u,l)<=o&&vf(t.x,t.y,h,a)<=o&&vf(t.x,t.y,u,a)<=o)return!0}if(h=s.Pb,l=s.Wb,u=s.Wa,a=s.fb,s.type===$f){if(n=df(t.x,t.y,h,l,u,a),s=(h-u)*(t.x-u)+(l-a)*(t.y-a),n<=(0<=(u-h)*(t.x-h)+(a-l)*(t.y-l)&&s>=0?o:i))return!0}else{if(s.type===_f)return i=!1,n&&(i=df(t.x,t.y,h,l,h,a)<=o||df(t.x,t.y,h,l,u,l)<=o||df(t.x,t.y,u,l,u,a)<=o||df(t.x,t.y,h,a,u,a)<=o),i;if(s.type===tc){i=t.x-(h+u)/2;
var s=t.y-(l+a)/2,f=Math.abs(u-h)/2,c=Math.abs(a-l)/2;if(0===f||0===c)return n=df(t.x,t.y,h,l,u,a),o>=n?!0:!1;if(!n)return vf(i,s,-f,0)>=o||vf(i,s,0,-c)>=o||vf(i,s,0,c)>=o||vf(i,s,f,0)>=o?!1:!0;if(t=Qf.$E(f,c,i,s),o>=t*t)return!0}else if(s.type===ic){if(a=s.Qa,h=a.x,l=a.y,u=a.x+a.width,a=a.y+a.height,t.x>u&&t.x<h&&t.y>a&&t.y<l&&df(t.x,t.y,h,l,h,a)>o&&df(t.x,t.y,h,l,u,l)>o&&df(t.x,t.y,u,a,h,a)>o&&df(t.x,t.y,u,a,u,l)>o)return!1;if(i=Math.sqrt(o),!n){for(n=s.Ya,i=0;i<n.count;i++){if(h=n.l[i],f=h.ia,c=h.ja,t.sr(f,c)>o)return!1;for(l=h.ra.l,u=l.length,a=0;u>a;a++){var p=l[a];switch(p.type){case rc:case sc:if(f=p.s,c=p.u,t.sr(f,c)>o)return!1;break;case ac:if(s=E(),Qf.Sd(f,c,p.vb,p.Lb,p.ve,p.we,p.s,p.u,.8,s),f=e(s,t),R(s),f)return!1;if(f=p.s,c=p.u,t.sr(f,c)>o)return!1;break;case hc:if(s=E(),Qf.$n(f,c,p.vb,p.Lb,p.s,p.u,.8,s),f=e(s,t),R(s),f)return!1;if(f=p.s,c=p.u,t.sr(f,c)>o)return!1;break;case lc:case uc:var p=p.type===lc?tn(p,h):nn(p,h,f,c),d=p.length,v=null,s=E();for(i=0;d>i;i++)if(v=p[i],s.length=0,Qf.Sd(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],.8,s),e(s,t))return R(s),!1;R(s),null!==v&&(f=v[6],c=v[7]);break;default:r("Unknown Segment type: "+p.type)}}}return!0}if(null===this.fill?Qi(s,t.x,t.y,i):s.na(t,i,!0))return!0}}return!1},K(Ps,{zc:"geometry"},function(){return this.tj?this.tj:this.za},function(t){var i=this.za;if(i!==t){this.tj=this.za=null!==t?t.freeze():null;var n=this.J;null!==n&&(n.wi=0/0),this.fg=!0,this.H(),this.h("geometry",i,t),t=this.J,null!==t&&0!==(1024&this.T)&&Dr(this,t,"geometryString")}}),K(Ps,{lF:"geometryString"},function(){return null===this.zc?"":this.zc.toString()},function(t){var i=oc(t);t=i.normalize(),this.zc=i;var i=C(),n=this.position;n.w()?i.k(n.x-t.x,n.y-t.y):i.k(-t.x,-t.y),this.position=i,P(i)}),K(Ps,{hy:"isGeometryPositioned"},function(){return this.kp},function(t){var i=this.kp;i!==t&&(this.kp=t,this.H(),this.h("isGeometryPositioned",i,t))}),Ps.prototype.Ed=function(){this.fg?this.tj=null:this.za=null,this.H()},K(Ps,{fill:"fill"},function(){return this.Ec},function(t){var i=this.Ec;i!==t&&(t instanceof Nr&&t.freeze(),this.Ec=t,this.ba(),this.h("fill",i,t))}),K(Ps,{stroke:"stroke"},function(){return this.$b},function(t){var i=this.$b;i!==t&&(t instanceof Nr&&t.freeze(),this.$b=t,this.ba(),this.h("stroke",i,t))}),K(Ps,{Na:"strokeWidth"},function(){return this.gg},function(t){var i=this.gg;if(i!==t)if(t>=0){this.gg=t,this.H();var n=this.J;null!==n&&(n.wi=0/0),this.h("strokeWidth",i,t)}else c(t,"value >= 0",Ps,"strokeWidth:value")}),K(Ps,{SG:"strokeCap"},function(){return this.gn},function(t){var i=this.gn;i!==t&&("string"!=typeof t||"butt"!==t&&"round"!==t&&"square"!==t?c(t,'"butt", "round", or "square"',Ps,"strokeCap"):(this.gn=t,this.ba(),this.h("strokeCap",i,t)))}),K(Ps,{XI:"strokeJoin"},function(){return this.hn},function(t){var i=this.hn;i!==t&&("string"!=typeof t||"miter"!==t&&"bevel"!==t&&"round"!==t?c(t,'"miter", "bevel", or "round"',Ps,"strokeJoin"):(this.hn=t,this.ba(),this.h("strokeJoin",i,t)))}),K(Ps,{YI:"strokeMiterLimit"},function(){return this.nl},function(t){var i=this.nl;if(i!==t)if(t>0){this.nl=t,this.ba();var n=this.J;null!==n&&(n.wi=0/0),this.h("strokeMiterLimit",i,t)}else c(t,"value > 0",Ps,"strokeWidth:value")}),K(Ps,{Yy:"strokeDashArray"},function(){return this.ml},function(t){var i=this.ml;if(i!==t){if(null===t||Array.isArray(t)||f(t,"Array",Ps,"strokeDashArray:value"),null!==t){for(var n=t.length,e=0,o=0;n>o;o++){var s=t[o];"number"==typeof s&&s>=0&&isFinite(s)||r("strokeDashArray:value "+s+" must be a positive number or zero."),e+=s}if(0===e){if(null===i)return;t=null}}this.ml=t,this.ba(),this.h("strokeDashArray",i,t)}}),K(Ps,{TG:"strokeDashOffset"},function(){return this.yc},function(t){var i=this.yc;i!==t&&t>=0&&(this.yc=t,this.ba(),this.h("strokeDashOffset",i,t))}),K(Ps,{jb:"figure"},function(){return this.xm},function(t){var i=this.xm;if(i!==t){var n=Qf.Hf[t];"function"==typeof n?n=t:(n=Qf.Hf[t.toLowerCase()])||r("Unknown Shape.figure: "+t),i!==n&&(t=this.J,null!==t&&(t.wi=0/0),this.xm=n,this.fg=!1,this.Ed(),this.h("figure",i,n))}}),K(Ps,{no:"toArrow"},function(){return this.jn},function(t){var i=this.jn;if(!0===t?t="Standard":!1===t&&(t=""),i!==t){var n=Qf.HB(t);null===n?r("Unknown Shape.toArrow: "+t):i!==n&&(this.jn=n,this.fg=!1,this.Ed(),Bs(this),this.h("toArrow",i,n))}}),K(Ps,{Sx:"fromArrow"},function(){return this.Am},function(t){var i=this.Am;if(!0===t?t="Standard":!1===t&&(t=""),i!==t){var n=Qf.HB(t);null===n?r("Unknown Shape.fromArrow: "+t):i!==n&&(this.Am=n,this.fg=!1,this.Ed(),Bs(this),this.h("fromArrow",i,n))}}),K(Ps,{o:"spot1"},function(){return this.Fh},function(t){a(t,Fi,Ps,"spot1");var i=this.Fh;i.A(t)||(this.Fh=t=t.O(),this.H(),this.h("spot1",i,t))}),K(Ps,{p:"spot2"},function(){return this.Gh},function(t){a(t,Fi,Ps,"spot2");var i=this.Gh;i.A(t)||(this.Gh=t=t.O(),this.H(),this.h("spot2",i,t))}),K(Ps,{Zb:"parameter1"},function(){return this.gq},function(t){var i=this.gq;i!==t&&(this.gq=t,this.Ed(),this.h("parameter1",i,t))}),K(Ps,{es:"parameter2"},function(){return this.hq},function(t){var i=this.hq;i!==t&&(this.hq=t,this.Ed(),this.h("parameter2",i,t))}),Y(Ps,{sa:"naturalBounds"},function(){if(null!==this.za)return this.hc.assign(this.za.Qa),this.hc;var t=this.ka;return new Si(0,0,t.width,t.height)}),K(Ps,{eI:"isRectangular"},function(){return this.qp},function(t){var i=this.qp;i!==t&&(this.qp=t,this.H(),this.h("isRectangular",i,t))}),K(Ps,{OC:"pathObject"},function(){return this.kq},function(t){var i=this.kq;i!==t&&(this.kq=t,this.ba(),this.h("pathObject",i,t))}),K(Ps,{iC:"geometryStretch"},function(){return this.bp},function(t){var i=this.bp;i!==t&&(u(t,Pr,Ps,"geometryStretch"),this.bp=t,this.h("geometryStretch",i,t))}),K(Ps,{interval:"interval"},function(){return this.hp},function(t){var i=this.hp;t=Math.floor(t),i!==t&&t>=0&&(this.hp=t,null!==this.g&&Lo(this.g),this.H(),this.h("interval",i,t))}),Ps.getFigureGenerators=function(){var t,i=new bi("string","function");for(t in Qf.Hf)if(t!==t.toLowerCase()){var n=Qf.Hf[t];"function"==typeof n&&i.add(t,n)}return i.freeze(),i},Ps.defineFigureGenerator=function(t,i){h(t,"string",Ps,"defineFigureGenerator:name"),"string"==typeof i?""!==i&&Qf.Hf[i]||r("Shape.defineFigureGenerator synonym must not be empty or None or not a defined figure name: "+i):h(i,"function",Ps,"defineFigureGenerator:func");var n=t.toLowerCase();""!==t&&"none"!==n&&t!==n||r("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+t);var e=Qf.Hf;e[t]=i,e[n]=t},Ps.getArrowheadGeometries=function(){var t,i=new bi("string",Yi);for(t in Qf.bi)if(t!==t.toLowerCase()){var n=Qf.bi[t];n instanceof Yi&&i.add(t,n)}return i.freeze(),i},Ps.defineArrowheadGeometry=function(t,i){h(t,"string",Ps,"defineArrowheadGeometry:name");var n=null;"string"==typeof i?(h(i,"string",Ps,"defineArrowheadGeometry:pathstr"),n=oc(i,!1)):(a(i,Yi,Ps,"defineArrowheadGeometry:pathstr"),n=i);var e=t.toLowerCase();""!==t&&"none"!==e&&t!==e||r("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t);var o=Qf.bi;o[t]=n,o[e]=t},U(qs,Pr),H("TextBlock",qs);var Vp=new si,Hp=0,Up=new si,Kp=0,Yp="...",Wp="",Xp=o("canvas").getContext("2d");qs.getEllipsis=function(){return Yp},qs.setEllipsis=function(t){Yp=t,Up=new si,Kp=0},qs.prototype.cloneProtected=function(t){Pr.prototype.cloneProtected.call(this,t),t.Bd=this.Bd,t.$b=this.$b,t.Xf=this.Xf,t.kd=this.kd,t.np=this.np,t.Sk=this.Sk,t.Rk=this.Rk,t.ql=this.ql,t.Oj=this.Oj,t.Pd=this.Pd,t.Ht=this.Ht,t.Qw=this.Qw,t.Pw=this.Pw,t.zm=this.zm,t.qi.qr(this.qi),t.Wo=this.Wo,t.Uq=this.Uq,t.Rj=this.Rj,t.Be=this.Be,t.Ki=this.Ki,t.Li=this.Li,t.wh=this.wh},qs.prototype.toString=function(){return 22<this.Bd.length?'TextBlock("'+this.Bd.substring(0,20)+'"...)':'TextBlock("'+this.Bd+'")'};var Jp;qs.None=Jp=Z(qs,"None",0);var Zp;qs.WrapFit=Zp=Z(qs,"WrapFit",1);var Qp;qs.WrapDesiredSize=Qp=Z(qs,"WrapDesiredSize",2);var $p;qs.OverflowClip=$p=Z(qs,"OverflowClip",0);var _p;qs.OverflowEllipsis=_p=Z(qs,"OverflowEllipsis",1),qs.prototype.H=function(){Pr.prototype.H.call(this),this.Pw=this.Qw=null},K(qs,{font:"font"},function(){return this.Xf},function(t){var i=this.Xf;i!==t&&(this.Xf=t,this.zm=null,this.H(),this.h("font",i,t))}),qs.isValidFont=function(t){var i=Xp.font;if(t===i||"10px sans-serif"===t)return!0;Xp.font="10px sans-serif";var n;Xp.font=t;var e=Xp.font;return"10px sans-serif"!==e?(Xp.font=i,!0):(Xp.font="19px serif",n=Xp.font,Xp.font=t,e=Xp.font,Xp.font=i,e!==n)},K(qs,{text:"text"},function(){return this.Bd},function(t){var i=this.Bd;t=null!==t&&void 0!==t?t.toString():"",i!==t&&(this.Bd=t,this.H(),this.h("text",i,t))}),K(qs,{textAlign:"textAlign"},function(){return this.kd},function(t){var i=this.kd;i!==t&&("start"===t||"end"===t||"left"===t||"right"===t||"center"===t?(this.kd=t,this.ba(),this.h("textAlign",i,t)):c(t,'"start", "end", "left", "right", or "center"',qs,"textAlign"))}),Y(qs,{sa:"naturalBounds"},function(){if(!this.hc.w()){var t=Rs(this,this.Bd,this.qi,999999).width,i=Us(this,t,this.qi),n=this.ka;isNaN(n.width)||(t=n.width),isNaN(n.height)||(i=n.height),Ci(this.hc,t,i)}return this.hc}),K(qs,{ly:"isMultiline"},function(){return this.np},function(t){var i=this.np;i!==t&&(this.np=t,this.H(),this.h("isMultiline",i,t))}),K(qs,{iI:"isUnderline"},function(){return this.Sk},function(t){var i=this.Sk;i!==t&&(this.Sk=t,this.ba(),this.h("isUnderline",i,t))}),K(qs,{fI:"isStrikethrough"},function(){return this.Rk},function(t){var i=this.Rk;i!==t&&(this.Rk=t,this.ba(),this.h("isStrikethrough",i,t))}),K(qs,{MD:"wrap"},function(){return this.ql},function(t){var i=this.ql;i!==t&&(this.ql=t,this.H(),this.h("wrap",i,t))}),K(qs,{overflow:"overflow"},function(){return this.Oj},function(t){var i=this.Oj;i!==t&&(this.Oj=t,this.H(),this.h("overflow",i,t))}),K(qs,{stroke:"stroke"},function(){return this.$b},function(t){var i=this.$b;i!==t&&(t instanceof Nr&&t.freeze(),this.$b=t,this.ba(),this.h("stroke",i,t))}),Y(qs,{RF:"lineCount"},function(){return this.Pd}),K(qs,{Px:"editable"},function(){return this.Wo},function(t){var i=this.Wo;i!==t&&(this.Wo=t,this.h("editable",i,t))}),K(qs,{wD:"textEditor"},function(){return this.Uq},function(t){var i=this.Uq;i!==t&&(t instanceof HTMLElement||r("textEditor must be an HTMLElement"),this.Uq=t,this.h("textEditor",i,t))}),K(qs,{Qx:"errorFunction"},function(){return this.Be},function(t){var i=this.Be;i!==t&&(null!==t&&h(t,"function",qs,"errorFunction"),this.Be=t,this.h("errorFunction",i,t))}),qs.prototype.Yi=function(t,i){if(null!==this.$b&&0!==this.Bd.length&&null!==this.Xf){var n=this.sa.width,e=Vs(this);t.textAlign=this.kd,Rr(this,t,this.$b,!0,!1),(this.Sk||this.Rk)&&Rr(this,t,this.$b,!1,!1);var o=this.qi,s=0,a=!1,h=N(0,0);this.We.Ka(h);var l=N(0,e);this.We.Ka(l);var u=h.Xi(l);P(h),P(l),h=i.scale,8>u*h*h&&(a=!0),i.Wf!==t&&(a=!1),!1===i.Wx("textGreeking")&&(a=!1);for(var u=this.Ki,h=this.Li,l=this.Pd,f=0;l>f;f++){var c=o.ye[f],p=o.Nd[f];c>n&&(c=n);var s=s+u,d=p,p=t,v=s,y=n,g=e,m=0;a?("start"===this.kd||"left"===this.kd?m=0:"end"===this.kd||"right"===this.kd?m=y-c:"center"===this.kd?m=(y-c)/2:r("textAlign must be start, end, left, right, or center"),p.fillRect(0+m,v+.25*g,c,1)):("start"===this.kd||"left"===this.kd?m=0:"end"===this.kd||"right"===this.kd?m=y:"center"===this.kd?m=y/2:r("textAlign must be start, end, left, right, or center"),p.fillText(d,0+m,v+g-.25*g),d=g/20|0,0===d&&(d=1),"end"===this.kd||"right"===this.kd?m-=c:"center"===this.kd&&(m-=c/2),this.Sk&&(p.beginPath(),p.lineWidth=d,p.moveTo(0+m,v+g-.2*g),p.lineTo(0+m+c,v+g-.2*g),p.stroke()),this.Rk&&(p.beginPath(),p.lineWidth=d,v=v+g-g/2.2|0,0!==d%2&&(v+=.5),p.moveTo(0+m,v),p.lineTo(0+m+c,v),p.stroke())),s+=e+h}}},qs.prototype.Rn=function(t,i,n,e){var o=this.qi;o.reset();var r=0,s=0;if(isNaN(this.ka.width)){if(r=this.Bd.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),0===r.length)r=0;else if(this.ly){for(var a=s=0,h=!1;!h;){var l=r.indexOf("\n",a);-1===l&&(l=r.length,h=!0),a=Gs(r.substr(a,l-a).replace(/^\s+|\s+$/g,""),this.Xf),a>s&&(s=a),a=l+1}r=s}else s=r.indexOf("\n",0),s>=0&&(r=r.substr(0,s)),r=a=Gs(r,this.Xf);r=Math.min(r,t/this.scale),r=Math.max(8,r)}else r=this.ka.width;if(null!==this.I&&(r=Math.min(r,this.I.se.width),r=Math.max(r,this.I.Lf.width)),s=Us(this,r,o),l=s=isNaN(this.ka.height)?Math.min(s,i/this.scale):this.ka.height,0!==o.ge&&1!==o.Nd.length&&this.Oj===_p&&(i=this.Xf,h=this.Oj===_p?Hs(i):0,a=this.Ki+this.Li,a=Math.max(0,Vs(this)+a),l=Math.max(Math.floor(l/a)-1,0),!(l+1>=o.Nd.length))){for(a=o.Nd[l],t=Math.max(1,t-h);Gs(a,i)>t&&1<a.length;)a=a.substr(0,a.length-1);a+=Yp,t=Gs(a,i),o.Nd[l]=a,o.Nd=o.Nd.slice(0,l+1),o.ye[l]=t,o.ye=o.ye.slice(0,l+1),o.Kh=o.Nd.length,o.ge=Math.max(o.ge,t),this.Pd=o.Kh}(this.MD===Zp||isNaN(this.ka.width))&&(r=o.ge,isNaN(this.ka.width)&&(r=Math.max(8,r))),r=Math.max(n,r),s=Math.max(e,s),Ci(this.hc,r,s),Ar(this,0,0,r,s)},qs.prototype.Lh=function(t,i,n,e){zr(this,t,i,n,e)},K(qs,{az:"textValidation"},function(){return this.Rj},function(t){var i=this.Rj;i!==t&&(null!==t&&h(t,"function",qs,"textValidation"),this.Rj=t,this.h("textValidation",i,t))}),K(qs,{UI:"spacingAbove"},function(){return this.Ki},function(t){var i=this.Ki;i!==t&&(this.Ki=t,this.h("spacingAbove",i,t))}),K(qs,{VI:"spacingBelow"},function(){return this.Li},function(t){var i=this.Li;i!==t&&(this.Li=t,this.h("spacingBelow",i,t))}),K(qs,{vI:"maxLines"},function(){return this.wh},function(t){var i=this.wh;i!==t&&(t=Math.floor(t),0>=t&&c(t,"> 0",qs,"maxLines"),this.wh=t,this.h("maxLines",i,t),this.H())}),Y(qs,{wI:"metrics"},function(){return this.qi}),Ks.prototype.reset=function(){this.ge=this.Kh=0,this.ye=[],this.Nd=[]},Ks.prototype.qr=function(t){this.Kh=t.Kh,this.ge=t.ge,this.ye=b(t.ye),this.Nd=b(t.Nd)},Y(Ks,{BH:"arrSize"},function(){return this.ye}),Y(Ks,{CH:"arrText"},function(){return this.Nd}),Y(Ks,{uI:"maxLineWidth"},function(){return this.ge}),U(Ys,Pr),H("Picture",Ys);var td,id=new si,nd=0,ed=[];Ys.clearCache=td=function(t){void 0===t&&(t=""),h(t,"string",Ys,"clearCache:url"),""!==t?id[t]&&(delete id[t],nd--):(id=new si,nd=0)},Ys.prototype.cloneProtected=function(t){Pr.prototype.cloneProtected.call(this,t),t.element=this.ee,t.Pq=this.Pq,t.Ji.assign(this.Ji),t.Dm=this.Dm,t.Be=this.Be,t.Mi=this.Mi,t.cn=this.cn},Ys.prototype.toString=function(){return"Picture("+this.source+")#"+V(this)},K(Ys,{element:"element"},function(){return this.ee},function(t){var i=this.ee;i!==t&&(t instanceof HTMLImageElement||t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||r("Picture.element must be an instance of Image, Canvas, or Video."),this.Gw=t instanceof HTMLCanvasElement,this.ee=t,!0===t.complete||void 0===t.complete?(t.pt instanceof Event&&null!==this.Be&&this.Be(this,t.pt),!0===t.Iw&&null!==this.Mi&&this.Mi(this,null),t.Iw=!0,this.ka.w()||(Qr(this,!1),this.H())):t.Xz||(t.addEventListener("load",function(i){Xs(t,i)}),t.addEventListener("error",function(i){Js(t,i)}),t.Xz=!0),this.h("element",i,t),this.ba())}),K(Ys,{source:"source"},function(){return this.Pq},function(t){var i=this.Pq;if(i!==t){h(t,"string",Ys,"source"),this.Pq=t;var n=id,e=this.g;if(void 0!==n[t])var r=n[t].pn[0].source;else{nd>30&&(td(),n=id),r=o("img"),r.addEventListener("load",function(t){Xs(r,t)}),r.addEventListener("error",function(t){Js(r,t)}),r.Xz=!0,r.src=t;var s=this.cn;null!==s&&(r.crossOrigin=s(this)),n[t]=new Zs(r),nd++}null!==e&&Go(e,this),this.element=r,null!==e&&Ro(e,this),this.ba(),this.h("source",i,t)}}),K(Ys,{TI:"sourceCrossOrigin"},function(){return this.cn},function(t){if(this.cn!==t&&(null!==t&&h(t,"function",Ys,"sourceCrossOrigin"),this.cn=t,null!==this.element)){var i=this.element.src;null===t&&"string"==typeof i?this.element.crossOrigin=null:null!==t&&(this.element.crossOrigin=t(this))}}),K(Ys,{Xh:"sourceRect"},function(){return this.Ji},function(t){var i=this.Ji;i.A(t)||(a(t,Si,Ys,"sourceRect"),this.Ji=t=t.O(),this.ba(),this.h("sourceRect",i,t))}),K(Ys,{xF:"imageStretch"},function(){return this.Dm},function(t){var i=this.Dm;i!==t&&(u(t,Pr,Ys,"imageStretch"),this.Dm=t,this.ba(),this.h("imageStretch",i,t))}),K(Ys,{Qx:"errorFunction"},function(){return this.Be},function(t){var i=this.Be;i!==t&&(null!==t&&h(t,"function",Ys,"errorFunction"),this.Be=t,this.h("errorFunction",i,t))}),K(Ys,{aJ:"successFunction"},function(){return this.Mi},function(t){var i=this.Mi;i!==t&&(null!==t&&h(t,"function",Ys,"successFunction"),this.Mi=t,this.h("successFunction",i,t))}),Ys.prototype.Yi=function(t,i){var n=this.ee;if(null!==n){var e=n.src;if(null!==e&&""!==e||r("Element has no source attribute: "+n),!(n.pt instanceof Event)&&!0===n.Iw){var e=this.sa,s=0,a=0,h=this.Gw,l=h?+n.width:n.naturalWidth,h=h?+n.height:n.naturalHeight;if(void 0===l&&n.videoWidth&&(l=n.videoWidth),void 0===h&&n.videoHeight&&(h=n.videoHeight),l=l||e.width,h=h||e.height,0!==l&&0!==h){this.Xh.w()&&(s=this.Ji.x,a=this.Ji.y,l=this.Ji.width,h=this.Ji.height);var u=l,f=h,c=this.Dm;switch(c){case gp:if(this.Xh.w())break;s+=Math.max((u-e.width)/2,0),a+=Math.max((f-e.height)/2,0),l=Math.min(e.width,u),h=Math.min(e.height,f);break;case wp:u=e.width,f=e.height;break;case kp:case Mp:var p=0;c===kp?(p=Math.min(e.height/f,e.width/u),u*=p,f*=p):c===Mp&&(p=Math.max(e.height/f,e.width/u),u*=p,f*=p,s+=(u-e.width)/2,a+=(f-e.height)/2,l*=1/(u/e.width),h*=1/(f/e.height),u=e.width,f=e.height)}this.xA=l*h;var c=this.Th()*i.scale,d=this.xA/(u*c*f*c),c=id[this.source],p=null;if(void 0!==c&&d>16){2>c.pn.length&&(Qs(c,4,l,h),Qs(c,16,l,h));for(var v=c.pn,y=v.length,p=v[0],g=0;y>g&&v[g].fs*v[g].fs<d;g++)p=v[g]}if(!i.um){if(null===this.Tq)if(null===this.ee)this.Tq=!1;else{d=o("canvas").getContext("2d"),d.drawImage(this.ee,0,0);try{d.getImageData(0,0,1,1),this.Tq=!1}catch(m){this.Tq=!0}}if(this.Tq)return}if(i.Hw||void 0===c||null===p||1===p.fs)try{t.drawImage(n,s,a,l,h,Math.max((e.width-u)/2,0),Math.max((e.height-f)/2,0),Math.min(e.width,u),Math.min(e.height,f))}catch(x){}else{t.save();try{t.drawImage(p.source,Math.max((e.width-u)/2,0),Math.max((e.height-f)/2,0),Math.min(e.width,u),Math.min(e.height,f))}catch(b){}t.restore()}}}}},Y(Ys,{sa:"naturalBounds"},function(){return this.hc}),Ys.prototype.Rn=function(t,i,n,e){var o=this.ka,r=Hr(this,!0),s=this.ee,a=this.Gw;(a||!this.Ow&&s&&s.complete)&&(this.Ow=!0),null===s&&(isFinite(t)||(t=0),isFinite(i)||(i=0)),isFinite(o.width)||r===wp||r===bp?(isFinite(t)||(t=this.Xh.w()?this.Xh.width:a?+s.width:s.naturalWidth),n=0):null!==s&&!1!==this.Ow&&(t=this.Xh.w()?this.Xh.width:a?+s.width:s.naturalWidth),isFinite(o.height)||r===wp||r===xp?(isFinite(i)||(i=this.Xh.w()?this.Xh.height:a?+s.height:s.naturalHeight),e=0):null!==s&&!1!==this.Ow&&(i=this.Xh.w()?this.Xh.height:a?+s.height:s.naturalHeight),isFinite(o.width)&&(t=o.width),isFinite(o.height)&&(i=o.height),o=this.se,r=this.Lf,n=Math.max(n,r.width),e=Math.max(e,r.height),t=Math.min(o.width,t),i=Math.min(o.height,i),t=Math.max(n,t),i=Math.max(e,i),null===s||s.complete||(isFinite(t)||(t=0),isFinite(i)||(i=0)),Ci(this.hc,t,i),Ar(this,0,0,t,i)},Ys.prototype.Lh=function(t,i,n,e){zr(this,t,i,n,e)},Wu=_s.prototype,Wu.reset=function(){this.m=new Yi,this.xb=null},Wu.Ja=function(t){null===this.m&&r("StreamGeometryContext has been closed"),null===this.xb&&r("Need to call beginFigure first"),this.xb.rk=t},Wu.moveTo=function(t,i,n){void 0===n&&(n=!1),null===this.m&&r("StreamGeometryContext has been closed"),null===this.xb&&r("Need to call beginFigure first");var e=new _i(rc);e.s=t,e.u=i,n&&e.close(),this.xb.ra.add(e)},Wu.lineTo=function(t,i,n){void 0===n&&(n=!1),null===this.m&&r("StreamGeometryContext has been closed"),null===this.xb&&r("Need to call beginFigure first");var e=new _i(sc);e.s=t,e.u=i,n&&e.close(),this.xb.ra.add(e)},Wu.arcTo=function(t,i,n,e,o,s,a){void 0===s&&(s=0),void 0===a&&(a=!1),null===this.m&&r("StreamGeometryContext has been closed"),null===this.xb&&r("Need to call beginFigure first");var h=new _i(lc);h.be=t,h.gf=i,h.ua=n,h.Da=e,h.radiusX=o,h.radiusY=0!==s?s:o,a&&h.close(),this.xb.ra.add(h)},Qf.makeGeometry=function(t,i,n){var e=t.ka,o=e.width,e=e.height;return void 0!==i&&!isNaN(i)&&isFinite(i)&&(o=i),void 0!==n&&!isNaN(n)&&isFinite(n)&&(e=n),isFinite(o)||(o=100),isFinite(e)||(e=100),i=null,"None"!==t.no?i=Qf.bi[t.no]:"None"!==t.Sx?i=Qf.bi[t.Sx]:(n=Qf.Hf[t.jb],"string"==typeof n&&(n=Qf.Hf[n]),void 0===n&&r("Unknown Shape.figure: "+t.jb),i=n(t,o,e),i.Hm=o,i.Gm=e),null===i&&(n=Qf.Hf.Rectangle,"function"==typeof n&&(i=n(t,o,e))),i},Qf.Mh=function(t,i,n,e,o,r,s,a,h,l,u,f,c,p){var d=1-h;t=t*d+n*h,i=i*d+e*h,n=n*d+o*h,e=e*d+r*h,o=o*d+s*h,r=r*d+a*h,a=t*d+n*h,s=i*d+e*h,n=n*d+o*h,e=e*d+r*h,l.x=t,l.y=i,u.x=a,u.y=s,f.x=a*d+n*h,f.y=s*d+e*h,c.x=n,c.y=e,p.x=o,p.y=r},Qf.xn=function(t){t=Qf.Dl(t);var i=E();i[0]=t[0];for(var n=1,e=1;e<t.length;)i[n]=t[e],i[n+1]=t[e],i[n+2]=t[e+1],e+=2,n+=3;return R(t),i},Qf.Dl=function(t){var i=Qf.Zj(t),n=E(),e=Math.floor(i.length/2),o=i.length-1;t=0===t%2?2:1;for(var r=0;o>r;r++){var s=i[r],a=i[r+1],h=i[(e+r-1)%o],l=i[(e+r+t)%o];n[2*r]=s,n[2*r+1]=Qf.jk(s.x,s.y,h.x,h.y,a.x,a.y,l.x,l.y,new wi)}return n[n.length]=n[0],R(i),n},Qf.jk=function(t,i,n,e,o,r,s,a,h){n=t-n;var l=o-s,u=s=0;return 0===n||0===l?0===n?(a=(r-a)/l,s=t,u=a*s+(r-a*o)):(e=(i-e)/n,s=o,u=e*s+(i-e*t)):(e=(i-e)/n,a=(r-a)/l,t=i-e*t,s=(r-a*o-t)/(e-a),u=e*s+t),h.k(s,u),h},Qf.Zj=function(t){for(var i=E(),n=1.5*Math.PI,e=0,o=0;t>o;o++)e=2*Math.PI/t*o+n,i[o]=new wi(.5+.5*Math.cos(e),.5+.5*Math.sin(e));return i.push(i[0]),i},Qf.jz=new Fi(.156,.156).va(),Qf.kz=new Fi(.844,.844).va(),Qf.Hf={None:"Rectangle",Rectangle:function(t,i,n){return t=new Yi,t.type=_f,t.ia=0,t.ja=0,t.s=i,t.u=n,t},Square:function(t,i,n){return t=new Yi,t.Wc=kp,t.type=_f,t.ia=0,t.ja=0,t.s=Math.min(i,n),t.u=Math.min(i,n),t},Ellipse:function(t,i,n){return t=new Yi,t.type=tc,t.ia=0,t.ja=0,t.s=i,t.u=n,t.o=Qf.jz,t.p=Qf.kz,t},Circle:function(t,i,n){return t=new Yi,t.Wc=kp,t.type=tc,t.ia=0,t.ja=0,t.s=Math.min(i,n),t.u=Math.min(i,n),t.o=Qf.jz,t.p=Qf.kz,t},Connector:"Ellipse",TriangleRight:function(t,i,n){t=new Yi;var e=new $i,o=new _i;return o.s=i,o.u=.5*n,e.ra.add(o),i=new _i,i.s=0,i.u=n,e.ra.add(i.close()),t.Ya.add(e),t.o=new Fi(0,.25),t.p=new Fi(.5,.75),t},TriangleDown:function(t,i,n){t=new Yi;var e=new $i,o=new _i;return o.s=i,o.u=0,e.ra.add(o),o=new _i,o.s=.5*i,o.u=n,e.ra.add(o.close()),t.Ya.add(e),t.o=new Fi(.25,0),t.p=new Fi(.75,.5),t},TriangleLeft:function(t,i,n){t=new Yi;var e=new $i;e.ia=i,e.ja=n;var o=new _i;return o.s=0,o.u=.5*n,e.ra.add(o),n=new _i,n.s=i,n.u=0,e.ra.add(n.close()),t.Ya.add(e),t.o=new Fi(.5,.25),t.p=new Fi(1,.75),t},TriangleUp:function(t,i,n){t=new Yi;var e=new $i;e.ia=i,e.ja=n;var o=new _i;return o.s=0,o.u=n,e.ra.add(o),n=new _i,n.s=.5*i,n.u=0,e.ra.add(n.close()),t.Ya.add(e),t.o=new Fi(.25,.5),t.p=new Fi(.75,1),t},Line1:function(t,i,n){return t=new Yi,t.type=$f,t.ia=0,t.ja=0,t.s=i,t.u=n,t},Line2:function(t,i,n){return t=new Yi,t.type=$f,t.ia=i,t.ja=0,t.s=0,t.u=n,t},MinusLine:"LineH",LineH:function(t,i,n){return t=new Yi,t.type=$f,t.ia=0,t.ja=n/2,t.s=i,t.u=n/2,t},LineV:function(t,i,n){return t=new Yi,t.type=$f,t.ia=i/2,t.ja=0,t.s=i/2,t.u=n,t},BarH:"Rectangle",BarV:"Rectangle",Curve1:function(t,i,n){var e=Qf.ga;return t=B(),ta(t,0,0,!1),ea(t,e*i,0,1*i,(1-e)*n,i,n),i=t.m,q(t),i},Curve2:function(t,i,n){var e=Qf.ga;return t=B(),ta(t,0,0,!1),ea(t,0,e*n,(1-e)*i,n,i,n),i=t.m,q(t),i},Curve3:function(t,i,n){var e=Qf.ga;return t=B(),ta(t,1*i,0,!1),ea(t,1*i,e*n,e*i,1*n,0,1*n),i=t.m,q(t),i},Curve4:function(t,i,n){var e=Qf.ga;return t=B(),ta(t,1*i,0,!1),ea(t,(1-e)*i,0,0,(1-e)*n,0,1*n),i=t.m,q(t),i},Alternative:"Triangle",Merge:"Triangle",Triangle:function(t,i,n){return t=B(),ta(t,.5*i,0*n,!0),t.lineTo(0*i,1*n),t.lineTo(1*i,1*n,!0),i=t.m,i.o=new Fi(.25,.5),i.p=new Fi(.75,1),q(t),i},Decision:"Diamond",Diamond:function(t,i,n){return t=B(),ta(t,.5*i,0,!0),t.lineTo(0,.5*n),t.lineTo(.5*i,1*n),t.lineTo(1*i,.5*n,!0),i=t.m,i.o=new Fi(.25,.25),i.p=new Fi(.75,.75),q(t),i},Pentagon:function(t,i,n){var e=Qf.Zj(5);t=B(),ta(t,e[0].x*i,e[0].y*n,!0);for(var o=1;5>o;o++)t.lineTo(e[o].x*i,e[o].y*n);return R(e),ia(t),i=t.m,i.o=new Fi(.2,.22),i.p=new Fi(.8,.9),q(t),i},DataTransmission:"Hexagon",Hexagon:function(t,i,n){var e=Qf.Zj(6);t=B(),ta(t,e[0].x*i,e[0].y*n,!0);for(var o=1;6>o;o++)t.lineTo(e[o].x*i,e[o].y*n);return R(e),ia(t),i=t.m,i.o=new Fi(.07,.25),i.p=new Fi(.93,.75),q(t),i},Heptagon:function(t,i,n){var e=Qf.Zj(7);t=B(),ta(t,e[0].x*i,e[0].y*n,!0);for(var o=1;7>o;o++)t.lineTo(e[o].x*i,e[o].y*n);return R(e),ia(t),i=t.m,i.o=new Fi(.2,.15),i.p=new Fi(.8,.85),q(t),i},Octagon:function(t,i,n){var e=Qf.Zj(8);t=B(),ta(t,e[0].x*i,e[0].y*n,!0);for(var o=1;8>o;o++)t.lineTo(e[o].x*i,e[o].y*n);return R(e),ia(t),i=t.m,i.o=new Fi(.15,.15),i.p=new Fi(.85,.85),q(t),i},Nonagon:function(t,i,n){var e=Qf.Zj(9);t=B(),ta(t,e[0].x*i,e[0].y*n,!0);for(var o=1;9>o;o++)t.lineTo(e[o].x*i,e[o].y*n);return R(e),ia(t),i=t.m,i.o=new Fi(.17,.13),i.p=new Fi(.82,.82),q(t),i},Decagon:function(t,i,n){var e=Qf.Zj(10);t=B(),ta(t,e[0].x*i,e[0].y*n,!0);for(var o=1;10>o;o++)t.lineTo(e[o].x*i,e[o].y*n);return R(e),ia(t),i=t.m,i.o=new Fi(.16,.16),i.p=new Fi(.84,.84),q(t),i},Dodecagon:function(t,i,n){var e=Qf.Zj(12);t=B(),ta(t,e[0].x*i,e[0].y*n,!0);for(var o=1;12>o;o++)t.lineTo(e[o].x*i,e[o].y*n);return R(e),ia(t),i=t.m,i.o=new Fi(.16,.16),i.p=new Fi(.84,.84),q(t),i},FivePointedStar:function(t,i,n){var e=Qf.Dl(5);t=B(),ta(t,e[0].x*i,e[0].y*n,!0);for(var o=1;10>o;o++)t.lineTo(e[o].x*i,e[o].y*n);return R(e),ia(t),i=t.m,i.o=new Fi(.312,.383),i.p=new Fi(.693,.765),q(t),i},SixPointedStar:function(t,i,n){var e=Qf.Dl(6);t=B(),ta(t,e[0].x*i,e[0].y*n,!0);for(var o=1;12>o;o++)t.lineTo(e[o].x*i,e[o].y*n);return R(e),ia(t),i=t.m,i.o=new Fi(.17,.251),i.p=new Fi(.833,.755),q(t),i},SevenPointedStar:function(t,i,n){var e=Qf.Dl(7);t=B(),ta(t,e[0].x*i,e[0].y*n,!0);for(var o=1;14>o;o++)t.lineTo(e[o].x*i,e[o].y*n);return R(e),ia(t),i=t.m,i.o=new Fi(.363,.361),i.p=new Fi(.641,.709),q(t),i},EightPointedStar:function(t,i,n){var e=Qf.Dl(8);t=B(),ta(t,e[0].x*i,e[0].y*n,!0);for(var o=1;16>o;o++)t.lineTo(e[o].x*i,e[o].y*n);return R(e),ia(t),i=t.m,i.o=new Fi(.252,.255),i.p=new Fi(.75,.75),q(t),i},NinePointedStar:function(t,i,n){var e=Qf.Dl(9);t=B(),ta(t,e[0].x*i,e[0].y*n,!0);for(var o=1;18>o;o++)t.lineTo(e[o].x*i,e[o].y*n);return R(e),ia(t),i=t.m,i.o=new Fi(.355,.361),i.p=new Fi(.645,.651),q(t),i},TenPointedStar:function(t,i,n){var e=Qf.Dl(10);t=B(),ta(t,e[0].x*i,e[0].y*n,!0);for(var o=1;20>o;o++)t.lineTo(e[o].x*i,e[o].y*n);return R(e),ia(t),i=t.m,i.o=new Fi(.281,.261),i.p=new Fi(.723,.748),q(t),i},FivePointedBurst:function(t,i,n){var e=Qf.xn(5);t=B(),ta(t,e[0].x*i,e[0].y*n,!0);for(var o=1;o<e.length;o+=3)ea(t,e[o].x*i,e[o].y*n,e[o+1].x*i,e[o+1].y*n,e[o+2].x*i,e[o+2].y*n);return R(e),ia(t),i=t.m,i.o=new Fi(.312,.383),i.p=new Fi(.693,.765),q(t),i},SixPointedBurst:function(t,i,n){var e=Qf.xn(6);t=B(),ta(t,e[0].x*i,e[0].y*n,!0);for(var o=1;o<e.length;o+=3)ea(t,e[o].x*i,e[o].y*n,e[o+1].x*i,e[o+1].y*n,e[o+2].x*i,e[o+2].y*n);return R(e),ia(t),i=t.m,i.o=new Fi(.17,.251),i.p=new Fi(.833,.755),q(t),i},SevenPointedBurst:function(t,i,n){var e=Qf.xn(7);t=B(),ta(t,e[0].x*i,e[0].y*n,!0);for(var o=1;o<e.length;o+=3)ea(t,e[o].x*i,e[o].y*n,e[o+1].x*i,e[o+1].y*n,e[o+2].x*i,e[o+2].y*n);return R(e),ia(t),i=t.m,i.o=new Fi(.363,.361),i.p=new Fi(.641,.709),q(t),i},EightPointedBurst:function(t,i,n){var e=Qf.xn(8);t=B(),ta(t,e[0].x*i,e[0].y*n,!0);for(var o=1;o<e.length;o+=3)ea(t,e[o].x*i,e[o].y*n,e[o+1].x*i,e[o+1].y*n,e[o+2].x*i,e[o+2].y*n);return R(e),ia(t),i=t.m,i.o=new Fi(.252,.255),i.p=new Fi(.75,.75),q(t),i},NinePointedBurst:function(t,i,n){var e=Qf.xn(9);t=B(),ta(t,e[0].x*i,e[0].y*n,!0);for(var o=1;o<e.length;o+=3)ea(t,e[o].x*i,e[o].y*n,e[o+1].x*i,e[o+1].y*n,e[o+2].x*i,e[o+2].y*n);return R(e),ia(t),i=t.m,i.o=new Fi(.355,.361),i.p=new Fi(.645,.651),q(t),i},TenPointedBurst:function(t,i,n){var e=Qf.xn(10);t=B(),ta(t,e[0].x*i,e[0].y*n,!0);for(var o=1;o<e.length;o+=3)ea(t,e[o].x*i,e[o].y*n,e[o+1].x*i,e[o+1].y*n,e[o+2].x*i,e[o+2].y*n);return R(e),ia(t),i=t.m,i.o=new Fi(.281,.261),i.p=new Fi(.723,.748),q(t),i},Cloud:function(t,i,n){return t=B(),ta(t,.08034461*i,.1944299*n,!0),ea(t,-.09239631*i,.07836421*n,.1406031*i,-.0542823*n,.2008615*i,.05349299*n),ea(t,.2450511*i,-.00697547*n,.3776197*i,-.01112067*n,.4338609*i,.074219*n),ea(t,.4539471*i,0,.6066018*i,-.02526587*n,.6558228*i,.07004196*n),ea(t,.6914277*i,-.01904177*n,.8921095*i,-.01220843*n,.8921095*i,.08370865*n),ea(t,1.036446*i,.04105738*n,1.020377*i,.3022052*n,.9147671*i,.3194596*n),ea(t,1.04448*i,.360238*n,.992256*i,.5219009*n,.9082935*i,.562044*n),ea(t,1.032337*i,.5771781*n,1.018411*i,.8120651*n,.9212406*i,.8217117*n),ea(t,1.028411*i,.9571472*n,.8556702*i,1.052487*n,.7592566*i,.9156953*n),ea(t,.7431877*i,1.009325*n,.5624123*i,1.021761*n,.5101666*i,.9310455*n),ea(t,.4820677*i,1.031761*n,.3030112*i,1.002796*n,.2609328*i,.9344623*n),ea(t,.2329994*i,1.01518*n,.03213784*i,1.01518*n,.08034461*i,.870098*n),ea(t,-.02812061*i,.9032597*n,-.01205169*i,.6835638*n,.06829292*i,.6545475*n),ea(t,-.01812061*i,.6089503*n,-.00606892*i,.4555777*n,.06427569*i,.4265613*n),ea(t,-.01606892*i,.3892545*n,-.01205169*i,.1944299*n,.08034461*i,.1944299*n),ia(t),i=t.m,i.o=new Fi(.1,.1),i.p=new Fi(.9,.9),q(t),i},Gate:"Crescent",Crescent:function(t,i,n){return t=B(),ta(t,0,0,!0),ea(t,1*i,0,1*i,1*n,0,1*n),ea(t,.5*i,.75*n,.5*i,.25*n,0,0),ia(t),i=t.m,i.o=new Fi(.511,.19),i.p=new Fi(.776,.76),q(t),i},FramedRectangle:function(t,i,n){var e=B(),o=t?t.Zb:0/0;return t=t?t.es:0/0,isNaN(o)&&(o=.1),isNaN(t)&&(t=.1),ta(e,0,0,!0),e.lineTo(1*i,0),e.lineTo(1*i,1*n),e.lineTo(0,1*n,!0),ta(e,o*i,t*n,!1,!0),e.lineTo(o*i,(1-t)*n),e.lineTo((1-o)*i,(1-t)*n),e.lineTo((1-o)*i,t*n,!0),i=e.m,i.o=new Fi(o,t),i.p=new Fi(1-o,1-t),q(e),i},Delay:"HalfEllipse",HalfEllipse:function(t,i,n){var e=Qf.ga;return t=B(),ta(t,0,0,!0),ea(t,e*i,0,1*i,(.5-e/2)*n,1*i,.5*n),ea(t,1*i,(.5+e/2)*n,e*i,1*n,0,1*n),ia(t),i=t.m,i.o=new Fi(0,.2),i.p=new Fi(.75,.8),q(t),i},Heart:function(t,i,n){return t=B(),ta(t,.5*i,1*n,!0),ea(t,.1*i,.8*n,0,.5*n,0*i,.3*n),ea(t,0*i,0,.45*i,0,.5*i,.3*n),ea(t,.55*i,0,1*i,0,1*i,.3*n),ea(t,i,.5*n,.9*i,.8*n,.5*i,1*n),ia(t),i=t.m,i.o=new Fi(.15,.29),i.p=new Fi(.86,.68),q(t),i},Spade:function(t,i,n){return t=B(),ta(t,.5*i,0,!0),t.lineTo(.51*i,.01*n),ea(t,.6*i,.2*n,i,.25*n,i,.5*n),ea(t,i,.8*n,.6*i,.8*n,.55*i,.7*n),ea(t,.5*i,.75*n,.55*i,.95*n,.75*i,n),t.lineTo(.25*i,n),ea(t,.45*i,.95*n,.5*i,.75*n,.45*i,.7*n),ea(t,.4*i,.8*n,0,.8*n,0,.5*n),ea(t,0,.25*n,.4*i,.2*n,.49*i,.01*n),ia(t),i=t.m,i.o=new Fi(.19,.26),i.p=new Fi(.8,.68),q(t),i},Club:function(t,i,n){t=B(),ta(t,.4*i,.6*n,!0),ea(t,.5*i,.75*n,.45*i,.95*n,.15*i,1*n),t.lineTo(.85*i,n),ea(t,.55*i,.95*n,.5*i,.75*n,.6*i,.6*n);var e=.2,o=.3,r=0,s=4*(Math.SQRT2-1)/3*e;return ea(t,(.5-e+o)*i,(.5+s+r)*n,(.5-s+o)*i,(.5+e+r)*n,(.5+o)*i,(.5+e+r)*n),ea(t,(.5+s+o)*i,(.5+e+r)*n,(.5+e+o)*i,(.5+s+r)*n,(.5+e+o)*i,(.5+r)*n),ea(t,(.5+e+o)*i,(.5-s+r)*n,(.5+s+o)*i,(.5-e+r)*n,(.5+o)*i,(.5-e+r)*n),ea(t,(.5-s+o)*i,(.5-e+r)*n,(.5-e+o+.05)*i,(.5-s+r-.02)*n,.65*i,.36771243*n),e=.2,o=0,r=-.3,s=4*(Math.SQRT2-1)/3*e,ea(t,(.5+s+o)*i,(.5+e+r)*n,(.5+e+o)*i,(.5+s+r)*n,(.5+e+o)*i,(.5+r)*n),ea(t,(.5+e+o)*i,(.5-s+r)*n,(.5+s+o)*i,(.5-e+r)*n,(.5+o)*i,(.5-e+r)*n),ea(t,(.5-s+o)*i,(.5-e+r)*n,(.5-e+o)*i,(.5-s+r)*n,(.5-e+o)*i,(.5+r)*n),ea(t,(.5-e+o)*i,(.5+s+r)*n,(.5-s+o)*i,(.5+e+r)*n,.35*i,.36771243*n),e=.2,o=-.3,r=0,s=4*(Math.SQRT2-1)/3*e,ea(t,(.5+e+o-.05)*i,(.5-s+r-.02)*n,(.5+s+o)*i,(.5-e+r)*n,(.5+o)*i,(.5-e+r)*n),ea(t,(.5-s+o)*i,(.5-e+r)*n,(.5-e+o)*i,(.5-s+r)*n,(.5-e+o)*i,(.5+r)*n),ea(t,(.5-e+o)*i,(.5+s+r)*n,(.5-s+o)*i,(.5+e+r)*n,(.5+o)*i,(.5+e+r)*n),ea(t,(.5+s+o)*i,(.5+e+r)*n,(.5+e+o)*i,(.5+s+r)*n,.4*i,.6*n),ia(t),i=t.m,i.o=new Fi(.06,.39),i.p=new Fi(.93,.58),q(t),i},Ring:function(t,i,n){t=B();var e=4*(Math.SQRT2-1)/3*.5;return ta(t,i,.5*n,!0),ea(t,i,(.5-e)*n,(.5+e)*i,0,.5*i,0),ea(t,(.5-e)*i,0,0,(.5-e)*n,0,.5*n),ea(t,0,(.5+e)*n,(.5-e)*i,n,.5*i,n),ea(t,(.5+e)*i,n,i,(.5+e)*n,i,.5*n),e=4*(Math.SQRT2-1)/3*.4,ta(t,.5*i,.1*n,!0,!0),ea(t,(.5+e)*i,.1*n,.9*i,(.5-e)*n,.9*i,.5*n),ea(t,.9*i,(.5+e)*n,(.5+e)*i,.9*n,.5*i,.9*n),ea(t,(.5-e)*i,.9*n,.1*i,(.5+e)*n,.1*i,.5*n),ea(t,.1*i,(.5-e)*n,(.5-e)*i,.1*n,.5*i,.1*n),i=t.m,i.o=new Fi(.146,.146),i.p=new Fi(.853,.853),i.Wc=kp,q(t),i
},YinYang:function(t,i,n){var e=.5;t=B(),e=.5,ta(t,.5*i,0,!0),t.arcTo(270,180,.5*i,.5*i,.5*i),ea(t,1*i,e*n,0,e*n,e*i,0,!0);var e=.1,o=.25;return ta(t,(.5+e)*i,o*n,!0,!0),t.arcTo(0,-360,.5*i,n*o,e*i),ia(t),ta(t,.5*i,0,!1),t.arcTo(270,-180,.5*i,.5*i,.5*i),t.Ja(!1),o=.75,ta(t,(.5+e)*i,o*n,!0),t.arcTo(0,360,.5*i,n*o,e*i),ia(t),i=t.m,i.Wc=kp,q(t),i},Peace:function(t,i,n){t=B();var e=4*(Math.SQRT2-1)/3*.5;ta(t,i,.5*n,!0),ea(t,i,(.5-e)*n,(.5+e)*i,0,.5*i,0),ea(t,(.5-e)*i,0,0,(.5-e)*n,0,.5*n),ea(t,0,(.5+e)*n,(.5-e)*i,n,.5*i,n),ea(t,(.5+e)*i,n,i,(.5+e)*n,i,.5*n),e=4*(Math.SQRT2-1)/3*.4,ta(t,.5*i,.1*n,!0,!0),ea(t,(.5+e)*i,.1*n,.9*i,(.5-e)*n,.9*i,.5*n),ea(t,.9*i,(.5+e)*n,(.5+e)*i,.9*n,.5*i,.9*n),ea(t,(.5-e)*i,.9*n,.1*i,(.5+e)*n,.1*i,.5*n),ea(t,.1*i,(.5-e)*n,(.5-e)*i,.1*n,.5*i,.1*n);var e=.07,o=0,r=.11*-.707,s=4*(Math.SQRT2-1)/3*e;return ta(t,(.5+e+o)*i,(.5+r)*n,!0),ea(t,(.5+e+o)*i,(.5-s+r)*n,(.5+s+o)*i,(.5-e+r)*n,(.5+o)*i,(.5-e+r)*n),ea(t,(.5-s+o)*i,(.5-e+r)*n,(.5-e+o)*i,(.5-s+r)*n,(.5-e+o)*i,(.5+r)*n),ea(t,(.5-e+o)*i,(.5+s+r)*n,(.5-s+o)*i,(.5+e+r)*n,(.5+o)*i,(.5+e+r)*n),ea(t,(.5+s+o)*i,(.5+e+r)*n,(.5+e+o)*i,(.5+s+r)*n,(.5+e+o)*i,(.5+r)*n),e=.07,o=.11*-.707,r=.707*.11,s=4*(Math.SQRT2-1)/3*e,ta(t,(.5+e+o)*i,(.5+r)*n,!0),ea(t,(.5+e+o)*i,(.5-s+r)*n,(.5+s+o)*i,(.5-e+r)*n,(.5+o)*i,(.5-e+r)*n),ea(t,(.5-s+o)*i,(.5-e+r)*n,(.5-e+o)*i,(.5-s+r)*n,(.5-e+o)*i,(.5+r)*n),ea(t,(.5-e+o)*i,(.5+s+r)*n,(.5-s+o)*i,(.5+e+r)*n,(.5+o)*i,(.5+e+r)*n),ea(t,(.5+s+o)*i,(.5+e+r)*n,(.5+e+o)*i,(.5+s+r)*n,(.5+e+o)*i,(.5+r)*n),e=.07,o=.707*.11,r=.707*.11,s=4*(Math.SQRT2-1)/3*e,ta(t,(.5+e+o)*i,(.5+r)*n,!0),ea(t,(.5+e+o)*i,(.5-s+r)*n,(.5+s+o)*i,(.5-e+r)*n,(.5+o)*i,(.5-e+r)*n),ea(t,(.5-s+o)*i,(.5-e+r)*n,(.5-e+o)*i,(.5-s+r)*n,(.5-e+o)*i,(.5+r)*n),ea(t,(.5-e+o)*i,(.5+s+r)*n,(.5-s+o)*i,(.5+e+r)*n,(.5+o)*i,(.5+e+r)*n),ea(t,(.5+s+o)*i,(.5+e+r)*n,(.5+e+o)*i,(.5+s+r)*n,(.5+e+o)*i,(.5+r)*n),i=t.m,i.o=new Fi(.146,.146),i.p=new Fi(.853,.853),i.Wc=kp,q(t),i},NotAllowed:function(t,i,n){var e=Qf.ga,o=.5*e,r=.5;t=B(),ta(t,.5*i,(.5-r)*n,!0),ea(t,(.5-o)*i,(.5-r)*n,(.5-r)*i,(.5-o)*n,(.5-r)*i,.5*n),ea(t,(.5-r)*i,(.5+o)*n,(.5-o)*i,(.5+r)*n,.5*i,(.5+r)*n),ea(t,(.5+o)*i,(.5+r)*n,(.5+r)*i,(.5+o)*n,(.5+r)*i,.5*n),ea(t,(.5+r)*i,(.5-o)*n,(.5+o)*i,(.5-r)*n,.5*i,(.5-r)*n);var r=.4,o=.4*e,e=C(),s=C(),a=C(),h=C();Qf.Mh(.5,.5-r,.5+o,.5-r,.5+r,.5-o,.5+r,.5,.42,e,s,a,h,h);var l=C(),u=C(),f=C();Qf.Mh(.5,.5-r,.5+o,.5-r,.5+r,.5-o,.5+r,.5,.58,h,h,f,l,u);var c=C(),p=C(),d=C();Qf.Mh(.5,.5+r,.5-o,.5+r,.5-r,.5+o,.5-r,.5,.42,c,p,d,h,h);var v=C(),y=C(),g=C();return Qf.Mh(.5,.5+r,.5-o,.5+r,.5-r,.5+o,.5-r,.5,.58,h,h,g,v,y),ta(t,g.x*i,g.y*n,!0,!0),ea(t,v.x*i,v.y*n,y.x*i,y.y*n,(.5-r)*i,.5*n),ea(t,(.5-r)*i,(.5-o)*n,(.5-o)*i,(.5-r)*n,.5*i,(.5-r)*n),ea(t,e.x*i,e.y*n,s.x*i,s.y*n,a.x*i,a.y*n),t.lineTo(g.x*i,g.y*n),ia(t),ta(t,d.x*i,d.y*n,!0,!0),t.lineTo(f.x*i,f.y*n),ea(t,l.x*i,l.y*n,u.x*i,u.y*n,(.5+r)*i,.5*n),ea(t,(.5+r)*i,(.5+o)*n,(.5+o)*i,(.5+r)*n,.5*i,(.5+r)*n),ea(t,c.x*i,c.y*n,p.x*i,p.y*n,d.x*i,d.y*n),ia(t),P(e),P(s),P(a),P(h),P(l),P(u),P(f),P(c),P(p),P(d),P(v),P(y),P(g),i=t.m,q(t),i.Wc=kp,i},Fragile:function(t,i,n){return t=B(),ta(t,0,0,!0),t.lineTo(.25*i,0),t.lineTo(.2*i,.15*n),t.lineTo(.3*i,.25*n),t.lineTo(.29*i,.33*n),t.lineTo(.35*i,.25*n),t.lineTo(.3*i,.15*n),t.lineTo(.4*i,0),t.lineTo(1*i,0),ea(t,1*i,.25*n,.75*i,.5*n,.55*i,.5*n),t.lineTo(.55*i,.9*n),t.lineTo(.7*i,.9*n),t.lineTo(.7*i,1*n),t.lineTo(.3*i,1*n),t.lineTo(.3*i,.9*n),t.lineTo(.45*i,.9*n),t.lineTo(.45*i,.5*n),ea(t,.25*i,.5*n,0,.25*n,0,0),ia(t),i=t.m,i.o=new Fi(.25,0),i.p=new Fi(.75,.4),q(t),i},HourGlass:function(t,i,n){return t=B(),ta(t,.65*i,.5*n,!0),t.lineTo(1*i,1*n),t.lineTo(0,1*n),t.lineTo(.35*i,.5*n),t.lineTo(0,0),t.lineTo(1*i,0),ia(t),i=t.m,q(t),i},Lightning:function(t,i,n){return t=B(),ta(t,0*i,.55*n,!0),t.lineTo(.75*i,0),t.lineTo(.25*i,.45*n),t.lineTo(.9*i,.48*n),t.lineTo(.4*i,1*n),t.lineTo(.65*i,.55*n),ia(t),i=t.m,q(t),i},Parallelogram1:function(t,i,n){t=t?t.Zb:0/0,isNaN(t)&&(t=.1);var e=B();return ta(e,t*i,0,!0),e.lineTo(1*i,0),e.lineTo((1-t)*i,1*n),e.lineTo(0,1*n),ia(e),i=e.m,i.o=new Fi(t,0),i.p=new Fi(1-t,1),q(e),i},Input:"Output",Output:function(t,i,n){return t=B(),ta(t,0,1*n,!0),t.lineTo(.1*i,0),t.lineTo(1*i,0),t.lineTo(.9*i,1*n),ia(t),i=t.m,i.o=new Fi(.1,0),i.p=new Fi(.9,1),q(t),i},Parallelogram2:function(t,i,n){t=t?t.Zb:0/0,isNaN(t)&&(t=.25);var e=B();return ta(e,t*i,0,!0),e.lineTo(1*i,0),e.lineTo((1-t)*i,1*n),e.lineTo(0,1*n),ia(e),i=e.m,i.o=new Fi(t,0),i.p=new Fi(1-t,1),q(e),i},ThickCross:function(t,i,n){t=t?t.Zb:0/0,isNaN(t)&&(t=.25);var e=B();return ta(e,(.5-t/2)*i,0,!0),e.lineTo((.5+t/2)*i,0),e.lineTo((.5+t/2)*i,(.5-t/2)*n),e.lineTo(1*i,(.5-t/2)*n),e.lineTo(1*i,(.5+t/2)*n),e.lineTo((.5+t/2)*i,(.5+t/2)*n),e.lineTo((.5+t/2)*i,1*n),e.lineTo((.5-t/2)*i,1*n),e.lineTo((.5-t/2)*i,(.5+t/2)*n),e.lineTo(0,(.5+t/2)*n),e.lineTo(0,(.5-t/2)*n),e.lineTo((.5-t/2)*i,(.5-t/2)*n),ia(e),i=e.m,i.o=new Fi(.5-t/2,.5-t/2),i.p=new Fi(.5+t/2,.5+t/2),q(e),i},ThickX:function(t,i,n){t=.25/Math.SQRT2;var e=B();return ta(e,.3*i,0,!0),e.lineTo(.5*i,.2*n),e.lineTo(.7*i,0),e.lineTo(1*i,.3*n),e.lineTo(.8*i,.5*n),e.lineTo(1*i,.7*n),e.lineTo(.7*i,1*n),e.lineTo(.5*i,.8*n),e.lineTo(.3*i,1*n),e.lineTo(0,.7*n),e.lineTo(.2*i,.5*n),e.lineTo(0,.3*n),ia(e),i=e.m,i.o=new Fi(.5-t,.5-t),i.p=new Fi(.5+t,.5+t),q(e),i},ThinCross:function(t,i,n){var e=t?t.Zb:0/0;return isNaN(e)&&(e=.1),t=B(),ta(t,(.5-e/2)*i,0,!0),t.lineTo((.5+e/2)*i,0),t.lineTo((.5+e/2)*i,(.5-e/2)*n),t.lineTo(1*i,(.5-e/2)*n),t.lineTo(1*i,(.5+e/2)*n),t.lineTo((.5+e/2)*i,(.5+e/2)*n),t.lineTo((.5+e/2)*i,1*n),t.lineTo((.5-e/2)*i,1*n),t.lineTo((.5-e/2)*i,(.5+e/2)*n),t.lineTo(0,(.5+e/2)*n),t.lineTo(0,(.5-e/2)*n),t.lineTo((.5-e/2)*i,(.5-e/2)*n),ia(t),i=t.m,q(t),i},ThinX:function(t,i,n){return t=B(),ta(t,.1*i,0,!0),t.lineTo(.5*i,.4*n),t.lineTo(.9*i,0),t.lineTo(1*i,.1*n),t.lineTo(.6*i,.5*n),t.lineTo(1*i,.9*n),t.lineTo(.9*i,1*n),t.lineTo(.5*i,.6*n),t.lineTo(.1*i,1*n),t.lineTo(0,.9*n),t.lineTo(.4*i,.5*n),t.lineTo(0,.1*n),ia(t),t.m},RightTriangle:function(t,i,n){return t=B(),ta(t,0,0,!0),t.lineTo(1*i,1*n),t.lineTo(0,1*n),ia(t),i=t.m,i.o=new Fi(0,.5),i.p=new Fi(.5,1),q(t),i},RoundedIBeam:function(t,i,n){return t=B(),ta(t,0,0,!0),t.lineTo(1*i,0),ea(t,.5*i,.25*n,.5*i,.75*n,1*i,1*n),t.lineTo(0,1*n),ea(t,.5*i,.75*n,.5*i,.25*n,0,0),ia(t),i=t.m,q(t),i},RoundedRectangle:function(t,i,n){var e=t?t.Zb:0/0;isNaN(e)&&(e=5),e=Math.min(e,i/3),e=Math.min(e,n/3),t=e*Qf.ga;var o=B();return ta(o,e,0,!0),o.lineTo(i-e,0),ea(o,i-t,0,i,t,i,e),o.lineTo(i,n-e),ea(o,i,n-t,i-t,n,i-e,n),o.lineTo(e,n),ea(o,t,n,0,n-t,0,n-e),o.lineTo(0,e),ea(o,0,t,t,0,e,0),ia(o),i=o.m,t>1?(i.o=new Fi(0,0,t,t),i.p=new Fi(1,1,-t,-t)):(i.o=wf,i.p=jf),q(o),i},Border:function(t,i,n){var e=t?t.Zb:0/0;return isNaN(e)&&(e=5),e=Math.min(e,i/3),e=Math.min(e,n/3),t=B(),ta(t,e,0,!0),t.lineTo(i-e,0),ea(t,i-0,0,i,0,i,e),t.lineTo(i,n-e),ea(t,i,n-0,i-0,n,i-e,n),t.lineTo(e,n),ea(t,0,n,0,n-0,0,n-e),t.lineTo(0,e),ea(t,0,0,0,0,e,0),ia(t),i=t.m,i.o=wf,i.p=jf,q(t),i},SquareIBeam:function(t,i,n){var e=t?t.Zb:0/0;return isNaN(e)&&(e=.2),t=B(),ta(t,0,0,!0),t.lineTo(1*i,0),t.lineTo(1*i,e*n),t.lineTo((.5+e/2)*i,e*n),t.lineTo((.5+e/2)*i,(1-e)*n),t.lineTo(1*i,(1-e)*n),t.lineTo(1*i,1*n),t.lineTo(0,1*n),t.lineTo(0,(1-e)*n),t.lineTo((.5-e/2)*i,(1-e)*n),t.lineTo((.5-e/2)*i,e*n),t.lineTo(0,e*n),ia(t),i=t.m,q(t),i},Trapezoid:function(t,i,n){t=t?t.Zb:0/0,isNaN(t)&&(t=.2);var e=B();return ta(e,t*i,0,!0),e.lineTo((1-t)*i,0),e.lineTo(1*i,1*n),e.lineTo(0,1*n),ia(e),i=e.m,i.o=new Fi(t,0),i.p=new Fi(1-t,1),q(e),i},ManualLoop:"ManualOperation",ManualOperation:function(t,i,n){var e=t?t.Zb:0/0;return isNaN(e)&&(e=0),t=B(),ta(t,e,0,!0),t.lineTo(0,0),t.lineTo(1*i,0),t.lineTo(.9*i,1*n),t.lineTo(.1*i,1*n),ia(t),i=t.m,i.o=new Fi(.1,0),i.p=new Fi(.9,1),q(t),i},GenderMale:function(t,i,n){t=B();var e=Qf.ga,o=.4*e,r=.4,s=C(),a=C(),h=C(),l=C();ta(t,(.5-r)*i,.5*n,!0),ea(t,(.5-r)*i,(.5-o)*n,(.5-o)*i,(.5-r)*n,.5*i,(.5-r)*n),Qf.Mh(.5,.5-r,.5+o,.5-r,.5+r,.5-o,.5+r,.5,.44,h,l,a,s,s),ea(t,h.x*i,h.y*n,l.x*i,l.y*n,a.x*i,a.y*n);var u=N(a.x,a.y);Qf.Mh(.5,.5-r,.5+o,.5-r,.5+r,.5-o,.5+r,.5,.56,s,s,a,h,l);var f=N(a.x,a.y);return t.lineTo((.1*u.x+.855)*i,.1*u.y*n),t.lineTo(.85*i,.1*u.y*n),t.lineTo(.85*i,0),t.lineTo(1*i,0),t.lineTo(1*i,.15*n),t.lineTo((.1*f.x+.9)*i,.15*n),t.lineTo((.1*f.x+.9)*i,(.1*f.y+.05*.9)*n),t.lineTo(f.x*i,f.y*n),ea(t,h.x*i,h.y*n,l.x*i,l.y*n,(.5+r)*i,.5*n),ea(t,(.5+r)*i,(.5+o)*n,(.5+o)*i,(.5+r)*n,.5*i,(.5+r)*n),ea(t,(.5-o)*i,(.5+r)*n,(.5-r)*i,(.5+o)*n,(.5-r)*i,.5*n),r=.35,o=.35*e,ta(t,.5*i,(.5-r)*n,!0,!0),ea(t,(.5-o)*i,(.5-r)*n,(.5-r)*i,(.5-o)*n,(.5-r)*i,.5*n),ea(t,(.5-r)*i,(.5+o)*n,(.5-o)*i,(.5+r)*n,.5*i,(.5+r)*n),ea(t,(.5+o)*i,(.5+r)*n,(.5+r)*i,(.5+o)*n,(.5+r)*i,.5*n),ea(t,(.5+r)*i,(.5-o)*n,(.5+o)*i,(.5-r)*n,.5*i,(.5-r)*n),ta(t,(.5-r)*i,.5*n,!0),P(s),P(a),P(h),P(l),P(u),P(f),i=t.m,i.o=new Fi(.202,.257),i.p=new Fi(.692,.839),i.Wc=kp,q(t),i},GenderFemale:function(t,i,n){t=B();var e=.375,o=0,r=-.125,s=4*(Math.SQRT2-1)/3*e;return ta(t,(.525+o)*i,(.5+e+r)*n,!0),ea(t,(.5+s+o)*i,(.5+e+r)*n,(.5+e+o)*i,(.5+s+r)*n,(.5+e+o)*i,(.5+r)*n),ea(t,(.5+e+o)*i,(.5-s+r)*n,(.5+s+o)*i,(.5-e+r)*n,(.5+o)*i,(.5-e+r)*n),ea(t,(.5-s+o)*i,(.5-e+r)*n,(.5-e+o)*i,(.5-s+r)*n,(.5-e+o)*i,(.5+r)*n),ea(t,(.5-e+o)*i,(.5+s+r)*n,(.5-s+o)*i,(.5+e+r)*n,(.475+o)*i,(.5+e+r)*n),t.lineTo(.475*i,.85*n),t.lineTo(.425*i,.85*n),t.lineTo(.425*i,.9*n),t.lineTo(.475*i,.9*n),t.lineTo(.475*i,1*n),t.lineTo(.525*i,1*n),t.lineTo(.525*i,.9*n),t.lineTo(.575*i,.9*n),t.lineTo(.575*i,.85*n),t.lineTo(.525*i,.85*n),ia(t),e=.325,o=0,r=-.125,s=4*(Math.SQRT2-1)/3*e,ta(t,(.5+e+o)*i,(.5+r)*n,!0,!0),ea(t,(.5+e+o)*i,(.5+s+r)*n,(.5+s+o)*i,(.5+e+r)*n,(.5+o)*i,(.5+e+r)*n),ea(t,(.5-s+o)*i,(.5+e+r)*n,(.5-e+o)*i,(.5+s+r)*n,(.5-e+o)*i,(.5+r)*n),ea(t,(.5-e+o)*i,(.5-s+r)*n,(.5-s+o)*i,(.5-e+r)*n,(.5+o)*i,(.5-e+r)*n),ea(t,(.5+s+o)*i,(.5-e+r)*n,(.5+e+o)*i,(.5-s+r)*n,(.5+e+o)*i,(.5+r)*n),ta(t,(.525+o)*i,(.5+e+r)*n,!0),i=t.m,i.o=new Fi(.232,.136),i.p=new Fi(.782,.611),i.Wc=kp,q(t),i},PlusLine:function(t,i,n){return t=B(),ta(t,0,.5*n,!1),t.lineTo(1*i,.5*n),t.moveTo(.5*i,0),t.lineTo(.5*i,1*n),i=t.m,q(t),i},XLine:function(t,i,n){return t=B(),ta(t,0,1*n,!1),t.lineTo(1*i,0),t.moveTo(0,0),t.lineTo(1*i,1*n),i=t.m,q(t),i},AsteriskLine:function(t,i,n){t=B();var e=.2/Math.SQRT2;return ta(t,e*i,(1-e)*n,!1),t.lineTo((1-e)*i,e*n),t.moveTo(e*i,e*n),t.lineTo((1-e)*i,(1-e)*n),t.moveTo(0*i,.5*n),t.lineTo(1*i,.5*n),t.moveTo(.5*i,0*n),t.lineTo(.5*i,1*n),i=t.m,q(t),i},CircleLine:function(t,i,n){var e=.5*Qf.ga;return t=B(),ta(t,1*i,.5*n,!1),ea(t,1*i,(.5+e)*n,(.5+e)*i,1*n,.5*i,1*n),ea(t,(.5-e)*i,1*n,0,(.5+e)*n,0,.5*n),ea(t,0,(.5-e)*n,(.5-e)*i,0,.5*i,0),ea(t,(.5+e)*i,0,1*i,(.5-e)*n,1*i,.5*n),i=t.m,i.o=new Fi(.146,.146),i.p=new Fi(.853,.853),i.Wc=kp,q(t),i},Pie:function(t,i,n){t=B();var e=4*(Math.SQRT2-1)/3*.5;return ta(t,(.5*Math.SQRT2/2+.5)*i,(.5-.5*Math.SQRT2/2)*n,!0),ea(t,.7*i,0*n,.5*i,0*n,.5*i,0*n),ea(t,(.5-e+0)*i,0*n,0*i,(.5-e+0)*n,0*i,.5*n),ea(t,0*i,(.5+e+0)*n,(.5-e+0)*i,1*n,.5*i,1*n),ea(t,(.5+e+0)*i,1*n,1*i,(.5+e+0)*n,1*i,.5*n),t.lineTo(.5*i,.5*n),ia(t),i=t.m,q(t),i},PiePiece:function(t,i,n){var e=Qf.ga/Math.SQRT2*.5,o=Math.SQRT2/2,r=1-Math.SQRT2/2;return t=B(),ta(t,i,n,!0),ea(t,i,(1-e)*n,(o+e)*i,(r+e)*n,o*i,r*n),t.lineTo(0,n),ia(t),i=t.m,q(t),i},StopSign:function(t,i,n){t=1/(Math.SQRT2+2);var e=B();return ta(e,t*i,0,!0),e.lineTo((1-t)*i,0),e.lineTo(1*i,t*n),e.lineTo(1*i,(1-t)*n),e.lineTo((1-t)*i,1*n),e.lineTo(t*i,1*n),e.lineTo(0,(1-t)*n),e.lineTo(0,t*n),ia(e),i=e.m,i.o=new Fi(t/2,t/2),i.p=new Fi(1-t/2,1-t/2),q(e),i},LogicImplies:function(t,i,n){var e=t?t.Zb:0/0;return isNaN(e)&&(e=.2),t=B(),ta(t,(1-e)*i,0*n,!1),t.lineTo(1*i,.5*n),t.lineTo((1-e)*i,n),t.moveTo(0,.5*n),t.lineTo(i,.5*n),i=t.m,i.o=wf,i.p=new Fi(.8,.5),q(t),i},LogicIff:function(t,i,n){var e=t?t.Zb:0/0;return isNaN(e)&&(e=.2),t=B(),ta(t,(1-e)*i,0*n,!1),t.lineTo(1*i,.5*n),t.lineTo((1-e)*i,n),t.moveTo(0,.5*n),t.lineTo(i,.5*n),t.moveTo(e*i,0),t.lineTo(0,.5*n),t.lineTo(e*i,n),i=t.m,i.o=new Fi(.2,0),i.p=new Fi(.8,.5),q(t),i},LogicNot:function(t,i,n){return t=B(),ta(t,0,0,!1),t.lineTo(1*i,0),t.lineTo(1*i,1*n),i=t.m,q(t),i},LogicAnd:function(t,i,n){return t=B(),ta(t,0,1*n,!1),t.lineTo(.5*i,0),t.lineTo(1*i,1*n),i=t.m,i.o=new Fi(.25,.5),i.p=new Fi(.75,1),q(t),i},LogicOr:function(t,i,n){return t=B(),ta(t,0,0,!1),t.lineTo(.5*i,1*n),t.lineTo(1*i,0),i=t.m,i.o=new Fi(.219,0),i.p=new Fi(.78,.409),q(t),i},LogicXor:function(t,i,n){t=B(),ta(t,.5*i,0,!1),t.lineTo(.5*i,1*n),t.moveTo(0,.5*n),t.lineTo(1*i,.5*n);var e=.5*Qf.ga;return ea(t,1*i,(.5+e)*n,(.5+e)*i,1*n,.5*i,1*n),ea(t,(.5-e)*i,1*n,0,(.5+e)*n,0,.5*n),ea(t,0,(.5-e)*n,(.5-e)*i,0,.5*i,0),ea(t,(.5+e)*i,0,1*i,(.5-e)*n,1*i,.5*n),i=t.m,i.Wc=kp,q(t),i},LogicTruth:function(t,i,n){return t=B(),ta(t,0,0,!1),t.lineTo(1*i,0),t.moveTo(.5*i,0),t.lineTo(.5*i,1*n),i=t.m,q(t),i},LogicFalsity:function(t,i,n){return t=B(),ta(t,0,1*n,!1),t.lineTo(1*i,1*n),t.moveTo(.5*i,1*n),t.lineTo(.5*i,0),i=t.m,q(t),i},LogicThereExists:function(t,i,n){return t=B(),ta(t,0,0,!1),t.lineTo(1*i,0),t.lineTo(1*i,.5*n),t.lineTo(0,.5*n),t.moveTo(1*i,.5*n),t.lineTo(1*i,1*n),t.lineTo(0,1*n),i=t.m,q(t),i},LogicForAll:function(t,i,n){return t=B(),ta(t,0,0,!1),t.lineTo(.5*i,1*n),t.lineTo(1*i,0),t.moveTo(.25*i,.5*n),t.lineTo(.75*i,.5*n),i=t.m,i.o=new Fi(.25,0),i.p=new Fi(.75,.5),q(t),i},LogicIsDefinedAs:function(t,i,n){return t=B(),ta(t,0,0,!1),t.lineTo(i,0),t.moveTo(0,.5*n),t.lineTo(i,.5*n),t.moveTo(0,n),t.lineTo(i,n),i=t.m,i.o=new Fi(.01,.01),i.p=new Fi(.99,.49),q(t),i},LogicIntersect:function(t,i,n){var e=.5*Qf.ga;return t=B(),ta(t,0,1*n,!1),t.lineTo(0,.5*n),ea(t,0,(.5-e)*n,(.5-e)*i,0,.5*i,0),ea(t,(.5+e)*i,0,1*i,(.5-e)*n,1*i,.5*n),t.lineTo(1*i,1*n),i=t.m,i.o=new Fi(0,.5),i.p=jf,q(t),i},LogicUnion:function(t,i,n){var e=.5*Qf.ga;return t=B(),ta(t,1*i,0,!1),t.lineTo(1*i,.5*n),ea(t,1*i,(.5+e)*n,(.5+e)*i,1*n,.5*i,1*n),ea(t,(.5-e)*i,1*n,0,(.5+e)*n,0,.5*n),t.lineTo(0,0),i=t.m,i.o=wf,i.p=new Fi(1,.5),q(t),i},Arrow:function(t,i,n){var e=t?t.Zb:0/0,o=t?t.es:0/0;return isNaN(e)&&(e=.3),isNaN(o)&&(o=.3),t=B(),ta(t,0,(.5-o/2)*n,!0),t.lineTo((1-e)*i,(.5-o/2)*n),t.lineTo((1-e)*i,0),t.lineTo(1*i,.5*n),t.lineTo((1-e)*i,1*n),t.lineTo((1-e)*i,(.5+o/2)*n),t.lineTo(0,(.5+o/2)*n),ia(t),i=t.m,i.o=new Fi(0,.5-o/2),e=Qf.jk(0,.5+o/2,1,.5+o/2,1-e,1,1,.5,C()),i.p=new Fi(e.x,e.y),P(e),q(t),i},ISOProcess:"Chevron",Chevron:function(t,i,n){return t=B(),ta(t,0,0,!0),t.lineTo(.5*i,0),t.lineTo(1*i,.5*n),t.lineTo(.5*i,1*n),t.lineTo(0,1*n),t.lineTo(.5*i,.5*n),ia(t),i=t.m,q(t),i},DoubleArrow:function(t,i,n){return t=B(),ta(t,0,0,!0),t.lineTo(.3*i,.214*n),t.lineTo(.3*i,0),t.lineTo(1*i,.5*n),t.lineTo(.3*i,1*n),t.lineTo(.3*i,.786*n),t.lineTo(0,1*n),ia(t),ta(t,.3*i,.214*n,!1),t.lineTo(.3*i,.786*n),t.Ja(!1),i=t.m,q(t),i},DoubleEndArrow:function(t,i,n){return t=B(),ta(t,1*i,.5*n,!0),t.lineTo(.7*i,1*n),t.lineTo(.7*i,.7*n),t.lineTo(.3*i,.7*n),t.lineTo(.3*i,1*n),t.lineTo(0,.5*n),t.lineTo(.3*i,0),t.lineTo(.3*i,.3*n),t.lineTo(.7*i,.3*n),t.lineTo(.7*i,0),ia(t),i=t.m,n=Qf.jk(0,.5,.3,0,0,.3,.3,.3,C()),i.o=new Fi(n.x,n.y),n=Qf.jk(.7,1,1,.5,.7,.7,1,.7,n),i.p=new Fi(n.x,n.y),P(n),q(t),i},IBeamArrow:function(t,i,n){return t=B(),ta(t,1*i,.5*n,!0),t.lineTo(.7*i,1*n),t.lineTo(.7*i,.7*n),t.lineTo(.2*i,.7*n),t.lineTo(.2*i,1*n),t.lineTo(0,1*n),t.lineTo(0,0),t.lineTo(.2*i,0),t.lineTo(.2*i,.3*n),t.lineTo(.7*i,.3*n),t.lineTo(.7*i,0),ia(t),i=t.m,i.o=new Fi(0,.3),n=Qf.jk(.7,1,1,.5,.7,.7,1,.7,C()),i.p=new Fi(n.x,n.y),P(n),q(t),i},Pointer:function(t,i,n){return t=B(),ta(t,1*i,.5*n,!0),t.lineTo(0,1*n),t.lineTo(.2*i,.5*n),t.lineTo(0,0),ia(t),i=t.m,i.o=new Fi(.2,.35),n=Qf.jk(.2,.65,1,.65,0,1,1,.5,C()),i.p=new Fi(n.x,n.y),P(n),q(t),i},RoundedPointer:function(t,i,n){return t=B(),ta(t,1*i,.5*n,!0),t.lineTo(0,1*n),ea(t,.5*i,.75*n,.5*i,.25*n,0,0),ia(t),i=t.m,i.o=new Fi(.4,.35),n=Qf.jk(.2,.65,1,.65,0,1,1,.5,C()),i.p=new Fi(n.x,n.y),P(n),q(t),i},SplitEndArrow:function(t,i,n){return t=B(),ta(t,1*i,.5*n,!0),t.lineTo(.7*i,1*n),t.lineTo(.7*i,.7*n),t.lineTo(0,.7*n),t.lineTo(.2*i,.5*n),t.lineTo(0,.3*n),t.lineTo(.7*i,.3*n),t.lineTo(.7*i,0),ia(t),i=t.m,i.o=new Fi(.2,.3),n=Qf.jk(.7,1,1,.5,.7,.7,1,.7,C()),i.p=new Fi(n.x,n.y),P(n),q(t),i},MessageToUser:"SquareArrow",SquareArrow:function(t,i,n){return t=B(),ta(t,1*i,.5*n,!0),t.lineTo(.7*i,1*n),t.lineTo(0,1*n),t.lineTo(0,0),t.lineTo(.7*i,0),ia(t),i=t.m,i.o=wf,i.p=new Fi(.7,1),q(t),i},Cone1:function(t,i,n){var e=Qf.ga;t=.5*e;var o=.1*e,e=B();return ta(e,0,.9*n,!0),e.lineTo(.5*i,0),e.lineTo(1*i,.9*n),ea(e,1*i,(.9+o)*n,(.5+t)*i,1*n,.5*i,1*n),ea(e,(.5-t)*i,1*n,0,(.9+o)*n,0,.9*n),ia(e),i=e.m,i.o=new Fi(.25,.5),i.p=new Fi(.75,.97),q(e),i},Cone2:function(t,i,n){return t=B(),ta(t,0,.9*n,!0),ea(t,(1-.85/.9)*i,1*n,.85/.9*i,1*n,1*i,.9*n),t.lineTo(.5*i,0),t.lineTo(0,.9*n),ia(t),ta(t,0,.9*n,!1),ea(t,(1-.85/.9)*i,.8*n,.85/.9*i,.8*n,1*i,.9*n),t.Ja(!1),i=t.m,i.o=new Fi(.25,.5),i.p=new Fi(.75,.82),q(t),i},Cube1:function(t,i,n){return t=B(),ta(t,.5*i,1*n,!0),t.lineTo(1*i,.85*n),t.lineTo(1*i,.15*n),t.lineTo(.5*i,0*n),t.lineTo(0*i,.15*n),t.lineTo(0*i,.85*n),ia(t),ta(t,.5*i,1*n,!1),t.lineTo(.5*i,.3*n),t.lineTo(0,.15*n),t.moveTo(.5*i,.3*n),t.lineTo(1*i,.15*n),t.Ja(!1),i=t.m,i.o=new Fi(0,.3),i.p=new Fi(.5,.85),q(t),i},Cube2:function(t,i,n){return t=B(),ta(t,0,.3*n,!0),t.lineTo(0*i,1*n),t.lineTo(.7*i,n),t.lineTo(1*i,.7*n),t.lineTo(1*i,0*n),t.lineTo(.3*i,0*n),ia(t),ta(t,0,.3*n,!1),t.lineTo(.7*i,.3*n),t.lineTo(1*i,0*n),t.moveTo(.7*i,.3*n),t.lineTo(.7*i,1*n),t.Ja(!1),i=t.m,i.o=new Fi(0,.3),i.p=new Fi(.7,1),q(t),i},MagneticData:"Cylinder1",Cylinder1:function(t,i,n){var e=Qf.ga;t=.5*e;var o=.1*e,e=B();return ta(e,0,.1*n,!0),ea(e,0,(.1-o)*n,(.5-t)*i,0,.5*i,0),ea(e,(.5+t)*i,0,1*i,(.1-o)*n,1*i,.1*n),e.lineTo(i,.9*n),ea(e,1*i,(.9+o)*n,(.5+t)*i,1*n,.5*i,1*n),ea(e,(.5-t)*i,1*n,0,(.9+o)*n,0,.9*n),e.lineTo(0,.1*n),ta(e,0,.1*n,!1),ea(e,0,(.1+o)*n,(.5-t)*i,.2*n,.5*i,.2*n),ea(e,(.5+t)*i,.2*n,1*i,(.1+o)*n,1*i,.1*n),e.Ja(!1),i=e.m,i.o=new Fi(0,.2),i.p=new Fi(1,.9),q(e),i},Cylinder2:function(t,i,n){var e=Qf.ga;t=.5*e;var o=.1*e,e=B();return ta(e,0,.9*n,!0),e.lineTo(0,.1*n),ea(e,0,(.1-o)*n,(.5-t)*i,0,.5*i,0),ea(e,(.5+t)*i,0,1*i,(.1-o)*n,1*i,.1*n),e.lineTo(1*i,.9*n),ea(e,1*i,(.9+o)*n,(.5+t)*i,1*n,.5*i,1*n),ea(e,(.5-t)*i,1*n,0,(.9+o)*n,0,.9*n),ta(e,0,.9*n,!1),ea(e,0,(.9-o)*n,(.5-t)*i,.8*n,.5*i,.8*n),ea(e,(.5+t)*i,.8*n,1*i,(.9-o)*n,1*i,.9*n),e.Ja(!1),i=e.m,i.o=new Fi(0,.1),i.p=new Fi(1,.8),q(e),i},Cylinder3:function(t,i,n){var e=Qf.ga;t=.1*e;var o=.5*e,e=B();return ta(e,.1*i,0,!0),e.lineTo(.9*i,0),ea(e,(.9+t)*i,0,1*i,(.5-o)*n,1*i,.5*n),ea(e,1*i,(.5+o)*n,(.9+t)*i,1*n,.9*i,1*n),e.lineTo(.1*i,1*n),ea(e,(.1-t)*i,1*n,0,(.5+o)*n,0,.5*n),ea(e,0,(.5-o)*n,(.1-t)*i,0,.1*i,0),ta(e,.1*i,0,!1),ea(e,(.1+t)*i,0,.2*i,(.5-o)*n,.2*i,.5*n),ea(e,.2*i,(.5+o)*n,(.1+t)*i,1*n,.1*i,1*n),e.Ja(!1),i=e.m,i.o=new Fi(.2,0),i.p=new Fi(.9,1),q(e),i},DirectData:"Cylinder4",Cylinder4:function(t,i,n){var e=Qf.ga;t=.1*e;var o=.5*e,e=B();return ta(e,.9*i,0,!0),ea(e,(.9+t)*i,0,1*i,(.5-o)*n,1*i,.5*n),ea(e,1*i,(.5+o)*n,(.9+t)*i,1*n,.9*i,1*n),e.lineTo(.1*i,1*n),ea(e,(.1-t)*i,1*n,0,(.5+o)*n,0,.5*n),ea(e,0,(.5-o)*n,(.1-t)*i,0,.1*i,0),e.lineTo(.9*i,0),ta(e,.9*i,0,!1),ea(e,(.9-t)*i,0,.8*i,(.5-o)*n,.8*i,.5*n),ea(e,.8*i,(.5+o)*n,(.9-t)*i,1*n,.9*i,1*n),e.Ja(!1),i=e.m,i.o=new Fi(.1,0),i.p=new Fi(.8,1),q(e),i},Prism1:function(t,i,n){return t=B(),ta(t,.25*i,.25*n,!0),t.lineTo(.75*i,0),t.lineTo(i,.5*n),t.lineTo(.5*i,n),t.lineTo(0,n),ia(t),ta(t,.25*i,.25*n,!1),t.lineTo(.5*i,n),t.Ja(!1),i=t.m,i.o=new Fi(.408,.172),i.p=new Fi(.833,.662),q(t),i},Prism2:function(t,i,n){return t=B(),ta(t,0,.25*n,!0),t.lineTo(.75*i,0),t.lineTo(1*i,.25*n),t.lineTo(.75*i,.75*n),t.lineTo(0,1*n),ia(t),ta(t,0,n,!1),t.lineTo(.25*i,.5*n),t.lineTo(i,.25*n),t.moveTo(0,.25*n),t.lineTo(.25*i,.5*n),t.Ja(!1),i=t.m,i.o=new Fi(.25,.5),i.p=new Fi(.75,.75),q(t),i},Pyramid1:function(t,i,n){return t=B(),ta(t,.5*i,0,!0),t.lineTo(i,.75*n),t.lineTo(.5*i,1*n),t.lineTo(0,.75*n),ia(t),ta(t,.5*i,0,!1),t.lineTo(.5*i,1*n),t.Ja(!1),i=t.m,i.o=new Fi(.25,.367),i.p=new Fi(.75,.875),q(t),i},Pyramid2:function(t,i,n){return t=B(),ta(t,.5*i,0,!0),t.lineTo(i,.85*n),t.lineTo(.5*i,1*n),t.lineTo(0,.85*n),ia(t),ta(t,.5*i,0,!1),t.lineTo(.5*i,.7*n),t.lineTo(0,.85*n),t.moveTo(.5*i,.7*n),t.lineTo(1*i,.85*n),t.Ja(!1),i=t.m,i.o=new Fi(.25,.367),i.p=new Fi(.75,.875),q(t),i},Actor:function(t,i,n){var e=Qf.ga,o=.2*e,r=.1*e,s=.5,a=.1;return t=B(),ta(t,s*i,(a+.1)*n,!0),ea(t,(s-o)*i,(a+.1)*n,(s-.2)*i,(a+r)*n,(s-.2)*i,a*n),ea(t,(s-.2)*i,(a-r)*n,(s-o)*i,(a-.1)*n,s*i,(a-.1)*n),ea(t,(s+o)*i,(a-.1)*n,(s+.2)*i,(a-r)*n,(s+.2)*i,a*n),ea(t,(s+.2)*i,(a+r)*n,(s+o)*i,(a+.1)*n,s*i,(a+.1)*n),o=.05,r=e*o,ta(t,.5*i,.2*n,!0),t.lineTo(.95*i,.2*n),s=.95,a=.25,ea(t,(s+r)*i,(a-o)*n,(s+o)*i,(a-r)*n,(s+o)*i,a*n),t.lineTo(1*i,.6*n),t.lineTo(.85*i,.6*n),t.lineTo(.85*i,.35*n),o=.025,r=e*o,s=.825,a=.35,ea(t,(s+o)*i,(a-r)*n,(s+r)*i,(a-o)*n,s*i,(a-o)*n),ea(t,(s-r)*i,(a-o)*n,(s-o)*i,(a-r)*n,(s-o)*i,a*n),t.lineTo(.8*i,1*n),t.lineTo(.55*i,1*n),t.lineTo(.55*i,.7*n),o=.05,r=e*o,s=.5,a=.7,ea(t,(s+o)*i,(a-r)*n,(s+r)*i,(a-o)*n,s*i,(a-o)*n),ea(t,(s-r)*i,(a-o)*n,(s-o)*i,(a-r)*n,(s-o)*i,a*n),t.lineTo(.45*i,1*n),t.lineTo(.2*i,1*n),t.lineTo(.2*i,.35*n),o=.025,r=e*o,s=.175,a=.35,ea(t,(s+o)*i,(a-r)*n,(s+r)*i,(a-o)*n,s*i,(a-o)*n),ea(t,(s-r)*i,(a-o)*n,(s-o)*i,(a-r)*n,(s-o)*i,a*n),t.lineTo(.15*i,.6*n),t.lineTo(0*i,.6*n),t.lineTo(0*i,.25*n),o=.05,r=e*o,s=.05,a=.25,ea(t,(s-o)*i,(a-r)*n,(s-r)*i,(a-o)*n,s*i,(a-o)*n),t.lineTo(.5*i,.2*n),i=t.m,i.o=new Fi(.2,.2),i.p=new Fi(.8,.65),q(t),i},Card:function(t,i,n){return t=B(),ta(t,1*i,0*n,!0),t.lineTo(1*i,1*n),t.lineTo(0*i,1*n),t.lineTo(0*i,.2*n),t.lineTo(.2*i,0*n),ia(t),i=t.m,i.o=new Fi(0,.2),i.p=jf,q(t),i},Collate:function(t,i,n){return t=B(),ta(t,.5*i,.5*n,!0),t.lineTo(0,0),t.lineTo(1*i,0),t.lineTo(.5*i,.5*n),ta(t,.5*i,.5*n,!0),t.lineTo(1*i,1*n),t.lineTo(0,1*n),t.lineTo(.5*i,.5*n),i=t.m,i.o=new Fi(.25,0),i.p=new Fi(.75,.25),q(t),i},CreateRequest:function(t,i,n){t=t?t.Zb:0/0,isNaN(t)&&(t=.1);var e=B();return ta(e,0,0,!0),e.lineTo(1*i,0),e.lineTo(1*i,1*n),e.lineTo(0,1*n),ia(e),ta(e,0,t*n,!1),e.lineTo(1*i,t*n),e.moveTo(0,(1-t)*n),e.lineTo(1*i,(1-t)*n),e.Ja(!1),i=e.m,i.o=new Fi(0,t),i.p=new Fi(1,1-t),q(e),i},Database:function(t,i,n){t=B();var e=Qf.ga,o=.5*e,e=.1*e;return ta(t,1*i,.1*n,!0),t.lineTo(1*i,.9*n),ea(t,1*i,(.9+e)*n,(.5+o)*i,1*n,.5*i,1*n),ea(t,(.5-o)*i,1*n,0,(.9+e)*n,0,.9*n),t.lineTo(0,.1*n),ea(t,0,(.1-e)*n,(.5-o)*i,0,.5*i,0),ea(t,(.5+o)*i,0,1*i,(.1-e)*n,1*i,.1*n),ta(t,1*i,.1*n,!1),ea(t,1*i,(.1+e)*n,(.5+o)*i,.2*n,.5*i,.2*n),ea(t,(.5-o)*i,.2*n,0,(.1+e)*n,0,.1*n),t.moveTo(1*i,.2*n),ea(t,1*i,(.2+e)*n,(.5+o)*i,.3*n,.5*i,.3*n),ea(t,(.5-o)*i,.3*n,0,(.2+e)*n,0,.2*n),t.moveTo(1*i,.3*n),ea(t,1*i,(.3+e)*n,(.5+o)*i,.4*n,.5*i,.4*n),ea(t,(.5-o)*i,.4*n,0,(.3+e)*n,0,.3*n),t.Ja(!1),i=t.m,i.o=new Fi(0,.4),i.p=new Fi(1,.9),q(t),i},StoredData:"DataStorage",DataStorage:function(t,i,n){return t=B(),ta(t,0,0,!0),t.lineTo(.75*i,0),ea(t,1*i,0,1*i,1*n,.75*i,1*n),t.lineTo(0,1*n),ea(t,.25*i,.9*n,.25*i,.1*n,0,0),ia(t),i=t.m,i.o=new Fi(.226,0),i.p=new Fi(.81,1),q(t),i},DiskStorage:function(t,i,n){t=B();var e=Qf.ga,o=.5*e,e=.1*e;return ta(t,1*i,.1*n,!0),t.lineTo(1*i,.9*n),ea(t,1*i,(.9+e)*n,(.5+o)*i,1*n,.5*i,1*n),ea(t,(.5-o)*i,1*n,0,(.9+e)*n,0,.9*n),t.lineTo(0,.1*n),ea(t,0,(.1-e)*n,(.5-o)*i,0,.5*i,0),ea(t,(.5+o)*i,0,1*i,(.1-e)*n,1*i,.1*n),ta(t,1*i,.1*n,!1),ea(t,1*i,(.1+e)*n,(.5+o)*i,.2*n,.5*i,.2*n),ea(t,(.5-o)*i,.2*n,0,(.1+e)*n,0,.1*n),t.moveTo(1*i,.2*n),ea(t,1*i,(.2+e)*n,(.5+o)*i,.3*n,.5*i,.3*n),ea(t,(.5-o)*i,.3*n,0,(.2+e)*n,0,.2*n),t.Ja(!1),i=t.m,i.o=new Fi(0,.3),i.p=new Fi(1,.9),q(t),i},Display:function(t,i,n){return t=B(),ta(t,.25*i,0,!0),t.lineTo(.75*i,0),ea(t,1*i,0,1*i,1*n,.75*i,1*n),t.lineTo(.25*i,1*n),t.lineTo(0,.5*n),ia(t),i=t.m,i.o=new Fi(.25,0),i.p=new Fi(.75,1),q(t),i},DividedEvent:function(t,i,n){t=t?t.Zb:0/0,isNaN(t)?t=.2:.15>t&&(t=.15);var e=B(),o=.2*Qf.ga;return ta(e,0,.2*n,!0),ea(e,0,(.2-o)*n,(.2-o)*i,0,.2*i,0),e.lineTo(.8*i,0),ea(e,(.8+o)*i,0,1*i,(.2-o)*n,1*i,.2*n),e.lineTo(1*i,.8*n),ea(e,1*i,(.8+o)*n,(.8+o)*i,1*n,.8*i,1*n),e.lineTo(.2*i,1*n),ea(e,(.2-o)*i,1*n,0,(.8+o)*n,0,.8*n),e.lineTo(0,.2*n),ta(e,0,t*n,!1),e.lineTo(1*i,t*n),e.Ja(!1),i=e.m,i.o=new Fi(0,t),i.p=new Fi(1,1-t),q(e),i},DividedProcess:function(t,i,n){t=t?t.Zb:0/0,(isNaN(t)||.1>t)&&(t=.1);var e=B();return ta(e,0,0,!0),e.lineTo(1*i,0),e.lineTo(1*i,1*n),e.lineTo(0,1*n),ia(e),ta(e,0,t*n,!1),e.lineTo(1*i,t*n),e.Ja(!1),i=e.m,i.o=new Fi(0,t),i.p=jf,q(e),i},Document:function(t,i,n){return n/=.8,t=B(),ta(t,0,.7*n,!0),t.lineTo(0,0),t.lineTo(1*i,0),t.lineTo(1*i,.7*n),ea(t,.5*i,.4*n,.5*i,1*n,0,.7*n),ia(t),i=t.m,i.o=wf,i.p=new Fi(1,.6),q(t),i},ExternalOrganization:function(t,i,n){t=t?t.Zb:0/0,(isNaN(t)||.2>t)&&(t=.2);var e=B();return ta(e,0,0,!0),e.lineTo(1*i,0),e.lineTo(1*i,1*n),e.lineTo(0,1*n),ia(e),ta(e,t*i,0,!1),e.lineTo(0,t*n),e.moveTo(1*i,t*n),e.lineTo((1-t)*i,0),e.moveTo(0,(1-t)*n),e.lineTo(t*i,1*n),e.moveTo((1-t)*i,1*n),e.lineTo(1*i,(1-t)*n),e.Ja(!1),i=e.m,i.o=new Fi(t/2,t/2),i.p=new Fi(1-t/2,1-t/2),q(e),i},ExternalProcess:function(t,i,n){return t=B(),ta(t,.5*i,0,!0),t.lineTo(1*i,.5*n),t.lineTo(.5*i,1*n),t.lineTo(0,.5*n),ia(t),ta(t,.1*i,.4*n,!1),t.lineTo(.1*i,.6*n),t.moveTo(.9*i,.6*n),t.lineTo(.9*i,.4*n),t.moveTo(.6*i,.1*n),t.lineTo(.4*i,.1*n),t.moveTo(.4*i,.9*n),t.lineTo(.6*i,.9*n),t.Ja(!1),i=t.m,i.o=new Fi(.25,.25),i.p=new Fi(.75,.75),q(t),i},File:function(t,i,n){return t=B(),ta(t,0,0,!0),t.lineTo(.75*i,0),t.lineTo(1*i,.25*n),t.lineTo(1*i,1*n),t.lineTo(0,1*n),ia(t),ta(t,.75*i,0,!1),t.lineTo(.75*i,.25*n),t.lineTo(1*i,.25*n),t.Ja(!1),i=t.m,i.o=new Fi(0,.25),i.p=jf,q(t),i},Interrupt:function(t,i,n){return t=B(),ta(t,1*i,.5*n,!0),t.lineTo(0,1*n),t.lineTo(0,0),t.lineTo(1*i,.5*n),ta(t,1*i,.5*n,!1),t.lineTo(1*i,1*n),ta(t,1*i,.5*n,!1),t.lineTo(1*i,0),i=t.m,i.o=new Fi(0,.25),i.p=new Fi(.5,.75),q(t),i},InternalStorage:function(t,i,n){var e=t?t.Zb:0/0;t=t?t.es:0/0,isNaN(e)&&(e=.1),isNaN(t)&&(t=.1);var o=B();return ta(o,0,0,!0),o.lineTo(1*i,0),o.lineTo(1*i,1*n),o.lineTo(0,1*n),ia(o),ta(o,e*i,0,!1),o.lineTo(e*i,1*n),o.moveTo(0,t*n),o.lineTo(1*i,t*n),o.Ja(!1),i=o.m,i.o=new Fi(e,t),i.p=jf,q(o),i},Junction:function(t,i,n){t=B();var e=1/Math.SQRT2,o=(1-1/Math.SQRT2)/2,r=.5*Qf.ga;return ta(t,1*i,.5*n,!0),ea(t,1*i,(.5+r)*n,(.5+r)*i,1*n,.5*i,1*n),ea(t,(.5-r)*i,1*n,0,(.5+r)*n,0,.5*n),ea(t,0,(.5-r)*n,(.5-r)*i,0,.5*i,0),ea(t,(.5+r)*i,0,1*i,(.5-r)*n,1*i,.5*n),ta(t,(o+e)*i,(o+e)*n,!1),t.lineTo(o*i,o*n),t.moveTo(o*i,(o+e)*n),t.lineTo((o+e)*i,o*n),t.Ja(!1),i=t.m,i.Wc=kp,q(t),i},LinedDocument:function(t,i,n){return n/=.8,t=B(),ta(t,0,.7*n,!0),t.lineTo(0,0),t.lineTo(1*i,0),t.lineTo(1*i,.7*n),ea(t,.5*i,.4*n,.5*i,1*n,0,.7*n),ia(t),ta(t,.1*i,0,!1),t.lineTo(.1*i,.75*n),t.Ja(!1),i=t.m,i.o=new Fi(.1,0),i.p=new Fi(1,.6),q(t),i},LoopLimit:function(t,i,n){return t=B(),ta(t,0,1*n,!0),t.lineTo(0,.25*n),t.lineTo(.25*i,0),t.lineTo(.75*i,0),t.lineTo(1*i,.25*n),t.lineTo(1*i,1*n),ia(t),i=t.m,i.o=new Fi(0,.25),i.p=jf,q(t),i},SequentialData:"MagneticTape",MagneticTape:function(t,i,n){t=B();var e=.5*Qf.ga;return ta(t,.5*i,1*n,!0),ea(t,(.5-e)*i,1*n,0,(.5+e)*n,0,.5*n),ea(t,0,(.5-e)*n,(.5-e)*i,0,.5*i,0),ea(t,(.5+e)*i,0,1*i,(.5-e)*n,1*i,.5*n),ea(t,1*i,(.5+e)*n,(.5+e)*i,.9*n,.6*i,.9*n),t.lineTo(1*i,.9*n),t.lineTo(1*i,1*n),t.lineTo(.5*i,1*n),i=t.m,i.o=new Fi(.15,.15),i.p=new Fi(.85,.8),q(t),i},ManualInput:function(t,i,n){return t=B(),ta(t,1*i,0,!0),t.lineTo(1*i,1*n),t.lineTo(0,1*n),t.lineTo(0,.25*n),ia(t),i=t.m,i.o=new Fi(0,.25),i.p=jf,q(t),i},MessageFromUser:function(t,i,n){t=t?t.Zb:0/0,isNaN(t)&&(t=.7);var e=B();return ta(e,0,0,!0),e.lineTo(1*i,0),e.lineTo(t*i,.5*n),e.lineTo(1*i,1*n),e.lineTo(0,1*n),ia(e),i=e.m,i.o=wf,i.p=new Fi(t,1),q(e),i},MicroformProcessing:function(t,i,n){t=t?t.Zb:0/0,isNaN(t)&&(t=.25);var e=B();return ta(e,0,0,!0),e.lineTo(.5*i,t*n),e.lineTo(1*i,0),e.lineTo(1*i,1*n),e.lineTo(.5*i,(1-t)*n),e.lineTo(0,1*n),ia(e),i=e.m,i.o=new Fi(0,t),i.p=new Fi(1,1-t),q(e),i},MicroformRecording:function(t,i,n){return t=B(),ta(t,0,0,!0),t.lineTo(.75*i,.25*n),t.lineTo(1*i,.15*n),t.lineTo(1*i,.85*n),t.lineTo(.75*i,.75*n),t.lineTo(0,1*n),ia(t),i=t.m,i.o=new Fi(0,.25),i.p=new Fi(1,.75),q(t),i},MultiDocument:function(t,i,n){return n/=.8,t=B(),ta(t,i,0,!0),t.lineTo(i,.5*n),ea(t,.96*i,.47*n,.93*i,.45*n,.9*i,.44*n),t.lineTo(.9*i,.6*n),ea(t,.86*i,.57*n,.83*i,.55*n,.8*i,.54*n),t.lineTo(.8*i,.7*n),ea(t,.4*i,.4*n,.4*i,1*n,0,.7*n),t.lineTo(0,.2*n),t.lineTo(.1*i,.2*n),t.lineTo(.1*i,.1*n),t.lineTo(.2*i,.1*n),t.lineTo(.2*i,0),ia(t),ta(t,.1*i,.2*n,!1),t.lineTo(.8*i,.2*n),t.lineTo(.8*i,.54*n),t.moveTo(.2*i,.1*n),t.lineTo(.9*i,.1*n),t.lineTo(.9*i,.44*n),t.Ja(!1),i=t.m,i.o=new Fi(0,.25),i.p=new Fi(.8,.77),q(t),i},MultiProcess:function(t,i,n){return t=B(),ta(t,.1*i,.1*n,!0),t.lineTo(.2*i,.1*n),t.lineTo(.2*i,0),t.lineTo(1*i,0),t.lineTo(1*i,.8*n),t.lineTo(.9*i,.8*n),t.lineTo(.9*i,.9*n),t.lineTo(.8*i,.9*n),t.lineTo(.8*i,1*n),t.lineTo(0,1*n),t.lineTo(0,.2*n),t.lineTo(.1*i,.2*n),ia(t),ta(t,.2*i,.1*n,!1),t.lineTo(.9*i,.1*n),t.lineTo(.9*i,.8*n),t.moveTo(.1*i,.2*n),t.lineTo(.8*i,.2*n),t.lineTo(.8*i,.9*n),t.Ja(!1),i=t.m,i.o=new Fi(0,.2),i.p=new Fi(.8,1),q(t),i},OfflineStorage:function(t,i,n){t=t?t.Zb:0/0,isNaN(t)&&(t=.1);var e=1-t,o=B();return ta(o,0,0,!0),o.lineTo(1*i,0),o.lineTo(.5*i,1*n),ia(o),ta(o,.5*t*i,t*n,!1),o.lineTo((1-.5*t)*i,t*n),o.Ja(!1),i=o.m,i.o=new Fi(e/4+.5*t,t),i.p=new Fi(3*e/4+.5*t,t+.5*e),q(o),i},OffPageConnector:function(t,i,n){return t=B(),ta(t,0,0,!0),t.lineTo(.75*i,0),t.lineTo(1*i,.5*n),t.lineTo(.75*i,1*n),t.lineTo(0,1*n),ia(t),i=t.m,i.o=wf,i.p=new Fi(.75,1),q(t),i},Or:function(t,i,n){t=B();var e=.5*Qf.ga;return ta(t,1*i,.5*n,!0),ea(t,1*i,(.5+e)*n,(.5+e)*i,1*n,.5*i,1*n),ea(t,(.5-e)*i,1*n,0,(.5+e)*n,0,.5*n),ea(t,0,(.5-e)*n,(.5-e)*i,0,.5*i,0),ea(t,(.5+e)*i,0,1*i,(.5-e)*n,1*i,.5*n),ta(t,1*i,.5*n,!1),t.lineTo(0,.5*n),t.moveTo(.5*i,1*n),t.lineTo(.5*i,0),t.Ja(!1),i=t.m,i.Wc=kp,q(t),i},PaperTape:function(t,i,n){return n/=.8,t=B(),ta(t,0,.7*n,!0),t.lineTo(0,.3*n),ea(t,.5*i,.6*n,.5*i,0,1*i,.3*n),t.lineTo(1*i,.7*n),ea(t,.5*i,.4*n,.5*i,1*n,0,.7*n),ia(t),i=t.m,i.o=new Fi(0,.49),i.p=new Fi(1,.75),q(t),i},PrimitiveFromCall:function(t,i,n){var e=t?t.Zb:0/0;t=t?t.es:0/0,isNaN(e)&&(e=.1),isNaN(t)&&(t=.3);var o=B();return ta(o,0,0,!0),o.lineTo(1*i,0),o.lineTo((1-t)*i,.5*n),o.lineTo(1*i,1*n),o.lineTo(0,1*n),ia(o),i=o.m,i.o=new Fi(e,0),i.p=new Fi(1-t,1),q(o),i},PrimitiveToCall:function(t,i,n){var e=t?t.Zb:0/0;t=t?t.es:0/0,isNaN(e)&&(e=.1),isNaN(t)&&(t=.3);var o=B();return ta(o,0,0,!0),o.lineTo((1-t)*i,0),o.lineTo(1*i,.5*n),o.lineTo((1-t)*i,1*n),o.lineTo(0,1*n),ia(o),i=o.m,i.o=new Fi(e,0),i.p=new Fi(1-t,1),q(o),i},Subroutine:"Procedure",Procedure:function(t,i,n){t=t?t.Zb:0/0,isNaN(t)&&(t=.1);var e=B();return ta(e,0,0,!0),e.lineTo(1*i,0),e.lineTo(1*i,1*n),e.lineTo(0,1*n),ia(e),ta(e,(1-t)*i,0,!1),e.lineTo((1-t)*i,1*n),e.moveTo(t*i,0),e.lineTo(t*i,1*n),e.Ja(!1),i=e.m,i.o=new Fi(t,0),i.p=new Fi(1-t,1),q(e),i},Process:function(t,i,n){t=t?t.Zb:0/0,isNaN(t)&&(t=.1);var e=B();return ta(e,0,0,!0),e.lineTo(1*i,0),e.lineTo(1*i,1*n),e.lineTo(0,1*n),ia(e),ta(e,t*i,0,!1),e.lineTo(t*i,1*n),e.Ja(!1),i=e.m,i.o=new Fi(t,0),i.p=jf,q(e),i},Sort:function(t,i,n){return t=B(),ta(t,.5*i,0,!0),t.lineTo(1*i,.5*n),t.lineTo(.5*i,1*n),t.lineTo(0,.5*n),ia(t),ta(t,0,.5*n,!1),t.lineTo(1*i,.5*n),t.Ja(!1),i=t.m,i.o=new Fi(.25,.25),i.p=new Fi(.75,.5),q(t),i},Start:function(t,i,n){return t=B(),ta(t,.25*i,0,!0),ta(t,.25*i,0,!0),t.arcTo(270,180,.75*i,.5*n,.25*i,.5*n),t.arcTo(90,180,.25*i,.5*n,.25*i,.5*n),ta(t,.25*i,0,!1),t.lineTo(.25*i,1*n),t.moveTo(.75*i,0),t.lineTo(.75*i,1*n),t.Ja(!1),i=t.m,i.o=new Fi(.25,0),i.p=new Fi(.75,1),q(t),i},Terminator:function(t,i,n){return t=B(),ta(t,.25*i,0,!0),t.arcTo(270,180,.75*i,.5*n,.25*i,.5*n),t.arcTo(90,180,.25*i,.5*n,.25*i,.5*n),i=t.m,i.o=new Fi(.23,0),i.p=new Fi(.77,1),q(t),i},TransmittalTape:function(t,i,n){t=t?t.Zb:0/0,isNaN(t)&&(t=.1);var e=B();return ta(e,0,0,!0),e.lineTo(1*i,0),e.lineTo(1*i,1*n),e.lineTo(.75*i,(1-t)*n),e.lineTo(0,(1-t)*n),ia(e),i=e.m,i.o=wf,i.p=new Fi(1,1-t),q(e),i},AndGate:function(t,i,n){t=B();var e=.5*Qf.ga;return ta(t,0,0,!0),t.lineTo(.5*i,0),ea(t,(.5+e)*i,0,1*i,(.5-e)*n,1*i,.5*n),ea(t,1*i,(.5+e)*n,(.5+e)*i,1*n,.5*i,1*n),t.lineTo(0,1*n),ia(t),i=t.m,i.o=wf,i.p=new Fi(.55,1),q(t),i},Buffer:function(t,i,n){return t=B(),ta(t,0,0,!0),t.lineTo(1*i,.5*n),t.lineTo(0,1*n),ia(t),i=t.m,i.o=new Fi(0,.25),i.p=new Fi(.5,.75),q(t),i
},Clock:function(t,i,n){t=B();var e=.5*Qf.ga;return ta(t,1*i,.5*n,!0),ea(t,1*i,(.5+e)*n,(.5+e)*i,1*n,.5*i,1*n),ea(t,(.5-e)*i,1*n,0,(.5+e)*n,0,.5*n),ea(t,0,(.5-e)*n,(.5-e)*i,0,.5*i,0),ea(t,(.5+e)*i,0,1*i,(.5-e)*n,1*i,.5*n),ta(t,1*i,.5*n,!1),t.lineTo(1*i,.5*n),ta(t,.8*i,.75*n,!1),t.lineTo(.8*i,.25*n),t.lineTo(.6*i,.25*n),t.lineTo(.6*i,.75*n),t.lineTo(.4*i,.75*n),t.lineTo(.4*i,.25*n),t.lineTo(.2*i,.25*n),t.lineTo(.2*i,.75*n),t.Ja(!1),i=t.m,i.Wc=kp,q(t),i},Ground:function(t,i,n){return t=B(),ta(t,.5*i,0,!1),t.lineTo(.5*i,.4*n),t.moveTo(.2*i,.6*n),t.lineTo(.8*i,.6*n),t.moveTo(.3*i,.8*n),t.lineTo(.7*i,.8*n),t.moveTo(.4*i,1*n),t.lineTo(.6*i,1*n),i=t.m,q(t),i},Inverter:function(t,i,n){t=B();var e=.1*Qf.ga;return ta(t,.8*i,.5*n,!0),t.lineTo(0,1*n),t.lineTo(0,0),t.lineTo(.8*i,.5*n),ta(t,1*i,.5*n,!0),ea(t,1*i,(.5+e)*n,(.9+e)*i,.6*n,.9*i,.6*n),ea(t,(.9-e)*i,.6*n,.8*i,(.5+e)*n,.8*i,.5*n),ea(t,.8*i,(.5-e)*n,(.9-e)*i,.4*n,.9*i,.4*n),ea(t,(.9+e)*i,.4*n,1*i,(.5-e)*n,1*i,.5*n),i=t.m,i.o=new Fi(0,.25),i.p=new Fi(.4,.75),q(t),i},NandGate:function(t,i,n){t=B();var e=Qf.ga,o=.5*e,r=.4*e,e=.1*e;return ta(t,.8*i,.5*n,!0),ea(t,.8*i,(.5+r)*n,(.4+o)*i,1*n,.4*i,1*n),t.lineTo(0,1*n),t.lineTo(0,0),t.lineTo(.4*i,0),ea(t,(.4+o)*i,0,.8*i,(.5-r)*n,.8*i,.5*n),ta(t,1*i,.5*n,!0),ea(t,1*i,(.5+e)*n,(.9+e)*i,.6*n,.9*i,.6*n),ea(t,(.9-e)*i,.6*n,.8*i,(.5+e)*n,.8*i,.5*n),ea(t,.8*i,(.5-e)*n,(.9-e)*i,.4*n,.9*i,.4*n),ea(t,(.9+e)*i,.4*n,1*i,(.5-e)*n,1*i,.5*n),i=t.m,i.o=new Fi(0,.05),i.p=new Fi(.55,.95),q(t),i},NorGate:function(t,i,n){t=B();var e=Qf.ga,o=.5,r=e*o,s=0,a=.5;return ta(t,.8*i,.5*n,!0),ea(t,.7*i,(a+r)*n,(s+r)*i,(a+o)*n,0,1*n),ea(t,.25*i,.75*n,.25*i,.25*n,0,0),ea(t,(s+r)*i,(a-o)*n,.7*i,(a-r)*n,.8*i,.5*n),o=.1,r=.1*e,s=.9,a=.5,ta(t,(s-o)*i,a*n,!0),ea(t,(s-o)*i,(a-r)*n,(s-r)*i,(a-o)*n,s*i,(a-o)*n),ea(t,(s+r)*i,(a-o)*n,(s+o)*i,(a-r)*n,(s+o)*i,a*n),ea(t,(s+o)*i,(a+r)*n,(s+r)*i,(a+o)*n,s*i,(a+o)*n),ea(t,(s-r)*i,(a+o)*n,(s-o)*i,(a+r)*n,(s-o)*i,a*n),i=t.m,i.o=new Fi(.2,.25),i.p=new Fi(.6,.75),q(t),i},OrGate:function(t,i,n){t=B();var e=.5*Qf.ga;return ta(t,0,0,!0),ea(t,(0+e+e)*i,0*n,.8*i,(.5-e)*n,1*i,.5*n),ea(t,.8*i,(.5+e)*n,(0+e+e)*i,1*n,0,1*n),ea(t,.25*i,.75*n,.25*i,.25*n,0,0),ia(t),i=t.m,i.o=new Fi(.2,.25),i.p=new Fi(.75,.75),q(t),i},XnorGate:function(t,i,n){t=B();var e=Qf.ga,o=.5,r=e*o,s=.2,a=.5;return ta(t,.1*i,0,!1),ea(t,.35*i,.25*n,.35*i,.75*n,.1*i,1*n),ta(t,.8*i,.5*n,!0),ea(t,.7*i,(a+r)*n,(s+r)*i,(a+o)*n,.2*i,1*n),ea(t,.45*i,.75*n,.45*i,.25*n,.2*i,0),ea(t,(s+r)*i,(a-o)*n,.7*i,(a-r)*n,.8*i,.5*n),o=.1,r=.1*e,s=.9,a=.5,ta(t,(s-o)*i,a*n,!0),ea(t,(s-o)*i,(a-r)*n,(s-r)*i,(a-o)*n,s*i,(a-o)*n),ea(t,(s+r)*i,(a-o)*n,(s+o)*i,(a-r)*n,(s+o)*i,a*n),ea(t,(s+o)*i,(a+r)*n,(s+r)*i,(a+o)*n,s*i,(a+o)*n),ea(t,(s-r)*i,(a+o)*n,(s-o)*i,(a+r)*n,(s-o)*i,a*n),i=t.m,i.o=new Fi(.4,.25),i.p=new Fi(.65,.75),q(t),i},XorGate:function(t,i,n){t=B();var e=.5*Qf.ga;return ta(t,.1*i,0,!1),ea(t,.35*i,.25*n,.35*i,.75*n,.1*i,1*n),ta(t,.2*i,0,!0),ea(t,(.2+e)*i,0*n,.9*i,(.5-e)*n,1*i,.5*n),ea(t,.9*i,(.5+e)*n,(.2+e)*i,1*n,.2*i,1*n),ea(t,.45*i,.75*n,.45*i,.25*n,.2*i,0),ia(t),i=t.m,i.o=new Fi(.4,.25),i.p=new Fi(.8,.75),q(t),i},Capacitor:function(t,i,n){return t=B(),ta(t,0,0,!1),t.lineTo(0,1*n),t.moveTo(1*i,0),t.lineTo(1*i,1*n),i=t.m,q(t),i},Resistor:function(t,i,n){return t=B(),ta(t,0,.5*n,!1),t.lineTo(.1*i,0),t.lineTo(.2*i,1*n),t.lineTo(.3*i,0),t.lineTo(.4*i,1*n),t.lineTo(.5*i,0),t.lineTo(.6*i,1*n),t.lineTo(.7*i,.5*n),i=t.m,q(t),i},Inductor:function(t,i,n){t=B();var e=.1*Qf.ga,o=.1;return ta(t,(o-.5*e)*i,n,!1),ea(t,(o-e)*i,n,(o-.1)*i,0,(o+.1)*i,0),o=.3,ea(t,(o+.1)*i,0,(o+e)*i,n,o*i,n),ea(t,(o-e)*i,n,(o-.1)*i,0,(o+.1)*i,0),o=.5,ea(t,(o+.1)*i,0,(o+e)*i,n,o*i,n),ea(t,(o-e)*i,n,(o-.1)*i,0,(o+.1)*i,0),o=.7,ea(t,(o+.1)*i,0,(o+e)*i,n,o*i,n),ea(t,(o-e)*i,n,(o-.1)*i,0,(o+.1)*i,0),o=.9,ea(t,(o+.1)*i,0,(o+e)*i,n,(o+.5*e)*i,n),i=t.m,q(t),i},ACvoltageSource:function(t,i,n){t=B();var e=.5*Qf.ga;return ta(t,0*i,.5*n,!1),ea(t,0*i,(.5-e)*n,(.5-e)*i,0*n,.5*i,0*n),ea(t,(.5+e)*i,0*n,1*i,(.5-e)*n,1*i,.5*n),ea(t,1*i,(.5+e)*n,(.5+e)*i,1*n,.5*i,1*n),ea(t,(.5-e)*i,1*n,0*i,(.5+e)*n,0*i,.5*n),t.moveTo(.1*i,.5*n),ea(t,.5*i,0*n,.5*i,1*n,.9*i,.5*n),i=t.m,i.Wc=kp,q(t),i},DCvoltageSource:function(t,i,n){return t=B(),ta(t,0,.75*n,!1),t.lineTo(0,.25*n),t.moveTo(1*i,0),t.lineTo(1*i,1*n),i=t.m,q(t),i},Diode:function(t,i,n){return t=B(),ta(t,1*i,0,!1),t.lineTo(1*i,.5*n),t.lineTo(0,1*n),t.lineTo(0,0),t.lineTo(1*i,.5*n),t.lineTo(1*i,1*n),i=t.m,i.o=new Fi(0,.25),i.p=new Fi(.5,.75),q(t),i},Wifi:function(t,i,n){var e=i,o=n;i*=.38,n*=.6,t=B();var r=Qf.ga,s=.8*r,a=.8,h=0,l=.5,e=(e-i)/2,o=(o-n)/2;return ta(t,h*i+e,(l+a)*n+o,!0),ea(t,(h-s)*i+e,(l+a)*n+o,(h-a)*i+e,(l+s)*n+o,(h-a)*i+e,l*n+o),ea(t,(h-a)*i+e,(l-s)*n+o,(h-s)*i+e,(l-a)*n+o,h*i+e,(l-a)*n+o),ea(t,h*i+e,(l-a)*n+o,(h-a+.5*s)*i+e,(l-s)*n+o,(h-a+.5*s)*i+e,l*n+o),ea(t,(h-a+.5*s)*i+e,(l+s)*n+o,h*i+e,(l+a)*n+o,h*i+e,(l+a)*n+o),ia(t),s=.4*r,a=.4,h=.2,l=.5,ta(t,h*i+e,(l+a)*n+o,!0),ea(t,(h-s)*i+e,(l+a)*n+o,(h-a)*i+e,(l+s)*n+o,(h-a)*i+e,l*n+o),ea(t,(h-a)*i+e,(l-s)*n+o,(h-s)*i+e,(l-a)*n+o,h*i+e,(l-a)*n+o),ea(t,h*i+e,(l-a)*n+o,(h-a+.5*s)*i+e,(l-s)*n+o,(h-a+.5*s)*i+e,l*n+o),ea(t,(h-a+.5*s)*i+e,(l+s)*n+o,h*i+e,(l+a)*n+o,h*i+e,(l+a)*n+o),ia(t),s=.2*r,a=.2,l=h=.5,ta(t,(h-a)*i+e,l*n+o,!0),ea(t,(h-a)*i+e,(l-s)*n+o,(h-s)*i+e,(l-a)*n+o,h*i+e,(l-a)*n+o),ea(t,(h+s)*i+e,(l-a)*n+o,(h+a)*i+e,(l-s)*n+o,(h+a)*i+e,l*n+o),ea(t,(h+a)*i+e,(l+s)*n+o,(h+s)*i+e,(l+a)*n+o,h*i+e,(l+a)*n+o),ea(t,(h-s)*i+e,(l+a)*n+o,(h-a)*i+e,(l+s)*n+o,(h-a)*i+e,l*n+o),s=.4*r,a=.4,h=.8,l=.5,ta(t,h*i+e,(l-a)*n+o,!0),ea(t,(h+s)*i+e,(l-a)*n+o,(h+a)*i+e,(l-s)*n+o,(h+a)*i+e,l*n+o),ea(t,(h+a)*i+e,(l+s)*n+o,(h+s)*i+e,(l+a)*n+o,h*i+e,(l+a)*n+o),ea(t,h*i+e,(l+a)*n+o,(h+a-.5*s)*i+e,(l+s)*n+o,(h+a-.5*s)*i+e,l*n+o),ea(t,(h+a-.5*s)*i+e,(l-s)*n+o,h*i+e,(l-a)*n+o,h*i+e,(l-a)*n+o),ia(t),s=.8*r,a=.8,h=1,l=.5,ta(t,h*i+e,(l-a)*n+o,!0),ea(t,(h+s)*i+e,(l-a)*n+o,(h+a)*i+e,(l-s)*n+o,(h+a)*i+e,l*n+o),ea(t,(h+a)*i+e,(l+s)*n+o,(h+s)*i+e,(l+a)*n+o,h*i+e,(l+a)*n+o),ea(t,h*i+e,(l+a)*n+o,(h+a-.5*s)*i+e,(l+s)*n+o,(h+a-.5*s)*i+e,l*n+o),ea(t,(h+a-.5*s)*i+e,(l-s)*n+o,h*i+e,(l-a)*n+o,h*i+e,(l-a)*n+o),ia(t),i=t.m,q(t),i},Email:function(t,i,n){return t=B(),ta(t,0,0,!0),t.lineTo(1*i,0),t.lineTo(1*i,1*n),t.lineTo(0,1*n),t.lineTo(0,0),ia(t),ta(t,0,0,!1),t.lineTo(.5*i,.6*n),t.lineTo(1*i,0),t.moveTo(0,1*n),t.lineTo(.45*i,.54*n),t.moveTo(1*i,1*n),t.lineTo(.55*i,.54*n),t.Ja(!1),i=t.m,q(t),i},Ethernet:function(t,i,n){return t=B(),ta(t,.35*i,0,!0),t.lineTo(.65*i,0),t.lineTo(.65*i,.4*n),t.lineTo(.35*i,.4*n),t.lineTo(.35*i,0),ia(t),ta(t,.1*i,1*n,!0,!0),t.lineTo(.4*i,1*n),t.lineTo(.4*i,.6*n),t.lineTo(.1*i,.6*n),t.lineTo(.1*i,1*n),ia(t),ta(t,.6*i,1*n,!0,!0),t.lineTo(.9*i,1*n),t.lineTo(.9*i,.6*n),t.lineTo(.6*i,.6*n),t.lineTo(.6*i,1*n),ia(t),ta(t,0,.5*n,!1),t.lineTo(1*i,.5*n),t.moveTo(.5*i,.5*n),t.lineTo(.5*i,.4*n),t.moveTo(.75*i,.5*n),t.lineTo(.75*i,.6*n),t.moveTo(.25*i,.5*n),t.lineTo(.25*i,.6*n),t.Ja(!1),i=t.m,q(t),i},Power:function(t,i,n){t=B();var e=Qf.ga,o=.4*e,r=.4,s=C(),a=C(),h=C(),l=C();Qf.Mh(.5,.5-r,.5+o,.5-r,.5+r,.5-o,.5+r,.5,.5,s,s,a,h,l);var u=N(a.x,a.y);return ta(t,a.x*i,a.y*n,!0),ea(t,h.x*i,h.y*n,l.x*i,l.y*n,(.5+r)*i,.5*n),ea(t,(.5+r)*i,(.5+o)*n,(.5+o)*i,(.5+r)*n,.5*i,(.5+r)*n),ea(t,(.5-o)*i,(.5+r)*n,(.5-r)*i,(.5+o)*n,(.5-r)*i,.5*n),Qf.Mh(.5-r,.5,.5-r,.5-o,.5-o,.5-r,.5,.5-r,.5,h,l,a,s,s),ea(t,h.x*i,h.y*n,l.x*i,l.y*n,a.x*i,a.y*n),o=.3*e,r=.3,Qf.Mh(.5-r,.5,.5-r,.5-o,.5-o,.5-r,.5,.5-r,.5,h,l,a,s,s),t.lineTo(a.x*i,a.y*n),ea(t,l.x*i,l.y*n,h.x*i,h.y*n,(.5-r)*i,.5*n),ea(t,(.5-r)*i,(.5+o)*n,(.5-o)*i,(.5+r)*n,.5*i,(.5+r)*n),ea(t,(.5+o)*i,(.5+r)*n,(.5+r)*i,(.5+o)*n,(.5+r)*i,.5*n),Qf.Mh(.5,.5-r,.5+o,.5-r,.5+r,.5-o,.5+r,.5,.5,s,s,a,h,l),ea(t,l.x*i,l.y*n,h.x*i,h.y*n,a.x*i,a.y*n),ia(t),ta(t,.45*i,0,!0),t.lineTo(.45*i,.5*n),t.lineTo(.55*i,.5*n),t.lineTo(.55*i,0),ia(t),P(s),P(a),P(h),P(l),P(u),i=t.m,i.o=new Fi(.25,.55),i.p=new Fi(.75,.8),q(t),i},Fallout:function(t,i,n){t=B();var e=.5*Qf.ga;ta(t,0*i,.5*n,!0),ea(t,0*i,(.5-e)*n,(.5-e)*i,0*n,.5*i,0*n),ea(t,(.5+e)*i,0*n,1*i,(.5-e)*n,1*i,.5*n),ea(t,1*i,(.5+e)*n,(.5+e)*i,1*n,.5*i,1*n),ea(t,(.5-e)*i,1*n,0*i,(.5+e)*n,0*i,.5*n);var o=e=0;return ta(t,(.3+e)*i,(.8+o)*n,!0,!0),t.lineTo((.5+e)*i,(.5+o)*n),t.lineTo((.1+e)*i,(.5+o)*n),t.lineTo((.3+e)*i,(.8+o)*n),e=.4,o=0,ia(t),ta(t,(.3+e)*i,(.8+o)*n,!0,!0),t.lineTo((.5+e)*i,(.5+o)*n),t.lineTo((.1+e)*i,(.5+o)*n),t.lineTo((.3+e)*i,(.8+o)*n),e=.2,o=-.3,ia(t),ta(t,(.3+e)*i,(.8+o)*n,!0,!0),t.lineTo((.5+e)*i,(.5+o)*n),t.lineTo((.1+e)*i,(.5+o)*n),t.lineTo((.3+e)*i,(.8+o)*n),ia(t),i=t.m,i.Wc=kp,q(t),i},IrritationHazard:function(t,i,n){return t=B(),ta(t,.2*i,0*n,!0),t.lineTo(.5*i,.3*n),t.lineTo(.8*i,0*n),t.lineTo(1*i,.2*n),t.lineTo(.7*i,.5*n),t.lineTo(1*i,.8*n),t.lineTo(.8*i,1*n),t.lineTo(.5*i,.7*n),t.lineTo(.2*i,1*n),t.lineTo(0*i,.8*n),t.lineTo(.3*i,.5*n),t.lineTo(0*i,.2*n),ia(t),i=t.m,i.o=new Fi(.3,.3),i.p=new Fi(.7,.7),q(t),i},ElectricalHazard:function(t,i,n){return t=B(),ta(t,.37*i,0*n,!0),t.lineTo(.5*i,.11*n),t.lineTo(.77*i,.04*n),t.lineTo(.33*i,.49*n),t.lineTo(1*i,.37*n),t.lineTo(.63*i,.86*n),t.lineTo(.77*i,.91*n),t.lineTo(.34*i,1*n),t.lineTo(.34*i,.78*n),t.lineTo(.44*i,.8*n),t.lineTo(.65*i,.56*n),t.lineTo(0*i,.68*n),ia(t),i=t.m,q(t),i},FireHazard:function(t,i,n){return t=B(),ta(t,.1*i,1*n,!0),ea(t,-.25*i,.63*n,.45*i,.44*n,.29*i,0*n),ea(t,.48*i,.17*n,.54*i,.35*n,.51*i,.42*n),ea(t,.59*i,.29*n,.58*i,.28*n,.59*i,.18*n),ea(t,.8*i,.34*n,.88*i,.43*n,.75*i,.6*n),ea(t,.87*i,.48*n,.88*i,.43*n,.88*i,.31*n),ea(t,1.17*i,.76*n,.82*i,.8*n,.9*i,1*n),ia(t),i=t.m,i.o=new Fi(.05,.645),i.p=new Fi(.884,.908),q(t),i},BpmnActivityLoop:function(t,i,n){t=B();var e=4*(Math.SQRT2-1)/3*.5;return ta(t,.65*i,1*n,!1),ea(t,(1-e+0)*i,1*n,1*i,(.5+e+0)*n,1*i,.5*n),ea(t,1*i,(.5-e+0)*n,(.5+e+0)*i,0*n,.5*i,0*n),ea(t,(.5-e+0)*i,0*n,0*i,(.5-e+0)*n,0*i,.5*n),ea(t,0*i,(.5+e+0)*n,(.5-e+0)*i,1*n,.35*i,.98*n),t.moveTo(.25*i,.8*n),t.lineTo(.35*i,1*n),t.lineTo(.1*i,1*n),i=t.m,q(t),i},BpmnActivityParallel:function(t,i,n){return t=B(),ta(t,0,0,!1),t.lineTo(0,1*n),t.moveTo(.5*i,0),t.lineTo(.5*i,1*n),t.moveTo(1*i,0),t.lineTo(1*i,1*n),i=t.m,q(t),i},BpmnActivitySequential:function(t,i,n){return t=B(),ta(t,0,0,!1),t.lineTo(1*i,0),t.moveTo(0,.5*n),t.lineTo(1*i,.5*n),t.moveTo(0,1*n),t.lineTo(1*i,1*n),i=t.m,q(t),i},BpmnActivityAdHoc:function(t,i,n){return t=B(),ta(t,0,0,!1),ta(t,1*i,1*n,!1),ta(t,0,.5*n,!1),ea(t,.2*i,.35*n,.3*i,.35*n,.5*i,.5*n),ea(t,.7*i,.65*n,.8*i,.65*n,1*i,.5*n),i=t.m,q(t),i},BpmnActivityCompensation:function(t,i,n){return t=B(),ta(t,0,.5*n,!0),t.lineTo(.5*i,0),t.lineTo(.5*i,.5*n),t.lineTo(1*i,1*n),t.lineTo(1*i,0),t.lineTo(.5*i,.5*n),t.lineTo(.5*i,1*n),ia(t),i=t.m,q(t),i},BpmnTaskMessage:function(t,i,n){return t=B(),ta(t,0,.2*n,!0),t.lineTo(1*i,.2*n),t.lineTo(1*i,.8*n),t.lineTo(0,.8*n),t.lineTo(0,.8*n),ia(t),ta(t,0,.2*n,!1),t.lineTo(.5*i,.5*n),t.lineTo(1*i,.2*n),t.Ja(!1),i=t.m,q(t),i},BpmnTaskScript:function(t,i,n){return t=B(),ta(t,.7*i,1*n,!0),t.lineTo(.3*i,1*n),ea(t,.6*i,.5*n,0,.5*n,.3*i,0),t.lineTo(.7*i,0),ea(t,.4*i,.5*n,1*i,.5*n,.7*i,1*n),ia(t),ta(t,.45*i,.73*n,!1),t.lineTo(.7*i,.73*n),t.moveTo(.38*i,.5*n),t.lineTo(.63*i,.5*n),t.moveTo(.31*i,.27*n),t.lineTo(.56*i,.27*n),t.Ja(!1),i=t.m,q(t),i},BpmnTaskUser:function(t,i,n){t=B(),ta(t,0,0,!1),ta(t,.335*i,(1-.555)*n,!0),t.lineTo(.335*i,.595*n),t.lineTo(.665*i,.595*n),t.lineTo(.665*i,(1-.555)*n),ea(t,.88*i,.46*n,.98*i,.54*n,1*i,.68*n),t.lineTo(1*i,1*n),t.lineTo(0,1*n),t.lineTo(0,.68*n),ea(t,.02*i,.54*n,.12*i,.46*n,.335*i,(1-.555)*n),t.lineTo(.365*i,.405*n);var e=.5-.285,o=Math.PI/4,r=4*(1-Math.cos(o))/(3*Math.sin(o)),o=r*e,r=r*e;return ea(t,(.5-(o+e)/2)*i,(e+(e+r)/2)*n,(.5-e)*i,(e+r)*n,(.5-e)*i,e*n),ea(t,(.5-e)*i,(e-r)*n,(.5-o)*i,(e-e)*n,.5*i,(e-e)*n),ea(t,(.5+o)*i,(e-e)*n,(.5+e)*i,(e-r)*n,(.5+e)*i,e*n),ea(t,(.5+e)*i,(e+r)*n,(.5+(o+e)/2)*i,(e+(e+r)/2)*n,.635*i,.405*n),t.lineTo(.635*i,.405*n),t.lineTo(.665*i,(1-.555)*n),t.lineTo(.665*i,.595*n),t.lineTo(.335*i,.595*n),ta(t,.2*i,1*n,!1),t.lineTo(.2*i,.8*n),ta(t,.8*i,1*n,!1),t.lineTo(.8*i,.8*n),i=t.m,q(t),i},BpmnEventConditional:function(t,i,n){return t=B(),ta(t,.1*i,0,!0),t.lineTo(.9*i,0),t.lineTo(.9*i,1*n),t.lineTo(.1*i,1*n),ia(t),ta(t,.2*i,.2*n,!1),t.lineTo(.8*i,.2*n),t.moveTo(.2*i,.4*n),t.lineTo(.8*i,.4*n),t.moveTo(.2*i,.6*n),t.lineTo(.8*i,.6*n),t.moveTo(.2*i,.8*n),t.lineTo(.8*i,.8*n),t.Ja(!1),i=t.m,q(t),i},BpmnEventError:function(t,i,n){return t=B(),ta(t,0,1*n,!0),t.lineTo(.33*i,0),t.lineTo(.66*i,.5*n),t.lineTo(1*i,0),t.lineTo(.66*i,1*n),t.lineTo(.33*i,.5*n),ia(t),i=t.m,q(t),i},BpmnEventEscalation:function(t,i,n){return t=B(),ta(t,0,0,!1),ta(t,1*i,1*n,!1),ta(t,.1*i,1*n,!0),t.lineTo(.5*i,0),t.lineTo(.9*i,1*n),t.lineTo(.5*i,.5*n),ia(t),i=t.m,q(t),i},BpmnEventTimer:function(t,i,n){t=B();var e=.5*Qf.ga;return ta(t,1*i,.5*n,!0),ea(t,1*i,(.5+e)*n,(.5+e)*i,1*n,.5*i,1*n),ea(t,(.5-e)*i,1*n,0,(.5+e)*n,0,.5*n),ea(t,0,(.5-e)*n,(.5-e)*i,0,.5*i,0),ea(t,(.5+e)*i,0,1*i,(.5-e)*n,1*i,.5*n),ta(t,.5*i,0,!1),t.lineTo(.5*i,.15*n),t.moveTo(.5*i,1*n),t.lineTo(.5*i,.85*n),t.moveTo(0,.5*n),t.lineTo(.15*i,.5*n),t.moveTo(1*i,.5*n),t.lineTo(.85*i,.5*n),t.moveTo(.5*i,.5*n),t.lineTo(.58*i,.1*n),t.moveTo(.5*i,.5*n),t.lineTo(.78*i,.54*n),t.Ja(!1),i=t.m,i.Wc=kp,q(t),i}};for(var od in Qf.Hf)Qf.Hf[od.toLowerCase()]=od;Qf.Fu={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"},Qf.LG=function(){if(null!==Qf.Fu){for(var t in Qf.Fu){var i=oc(Qf.Fu[t],!1);Qf.bi[t]=i,t.toLowerCase()!==t&&(Qf.bi[t.toLowerCase()]=t)}Qf.Fu=null}},Qf.HB=function(t){Qf.LG();var i=Qf.bi[t];if(void 0===i){if(i=t.toLowerCase(),"none"===i)return"None";i=Qf.bi[i]}return"string"==typeof i?i:i instanceof Yi?t:null},U(sa,rs),H("Part",sa),sa.prototype.cloneProtected=function(t){rs.prototype.cloneProtected.call(this,t),t.D=-4097&this.D|49152,t.ih=this.ih,t.Gj=this.Gj,t.Bp=this.Bp,t.Hq=this.Hq,t.vq=this.vq,t.yq=this.yq,t.Jq=this.Jq,t.Iq=this.Iq,t.gh=null,t.xq=this.xq,t.wq.assign(this.wq),t.zq=this.zq,t.Bd=this.Bd,t.Jo=this.Jo,t.bg.assign(this.bg),t.Ip=this.Ip,t.Jp=this.Jp.O(),t.Sp=this.Sp.O(),t.Lp=this.Lp.O(),t.To=this.To,t.Cp=this.Cp,t.ll.assign(this.ll),t.kl=this.kl,t.jl=this.jl},sa.prototype.Zg=function(t){rs.prototype.Zg.call(this,t),t.mk(),t.il=null,t.Zm=null,t.$m=null,t.Jj=null,t.Lj=null},sa.prototype.toString=function(){var t=J(Object.getPrototypeOf(this))+"#"+V(this);return null!==this.data&&(t+="("+mc(this.data)+")"),t},sa.LayoutNone=0;var rd;sa.LayoutAdded=rd=1;var sd;sa.LayoutRemoved=sd=2,sa.LayoutShown=4,sa.LayoutHidden=8,sa.LayoutNodeSized=16;var ad;sa.LayoutGroupLayout=ad=32,sa.LayoutNodeReplaced=64;var hd;sa.LayoutStandard=hd=rd|sd|28|ad|64,sa.LayoutAll=16777215,sa.prototype.Ql=function(t,i,n,e,o,r,s){var a=this.g;null!==a&&(t===pc&&"elements"===i?o instanceof rs?cs(o,function(t){Bo(a,t),Eo(a,t)}):o instanceof Ys&&Ro(a,o):t===dc&&"elements"===i&&(o instanceof rs?cs(o,function(t){qo(a,t),Io(a,t)}):o instanceof Ys&&Go(a,o)),a.ec(t,i,n,e,o,r,s))},sa.prototype.updateTargetBindings=sa.prototype.rb=function(t){if(rs.prototype.rb.call(this,t),null!==this.data){t=this.la.l;for(var i=t.length,n=0;i>n;n++){var e=t[n];e instanceof rs&&cs(e,function(t){null!==t.data&&t.rb()})}}},sa.prototype.updateRelationshipsFromData=function(){var t=this.data;if(null!==t){var i=this.g;if(null!==i){var n=i.U;if(n instanceof xn){var e=n.Il(t),i=i.gF(e),o=this.Ba;i!==o&&(i=null!==o?n.$a(o.data):void 0,o=n.Yn,"function"==typeof o?o(t,i):t[o]=i,n.Av(t,e))}}}},Y(sa,{xu:"adornments"},function(){return null===this.gh?pf:this.gh.AC}),sa.prototype.findAdornment=sa.prototype.An=function(t){var i=this.gh;return null===i?null:i.ha(t)},sa.prototype.addAdornment=sa.prototype.Uj=function(t,i){if(null!==i){var n=null,e=this.gh;if(null!==e&&(n=e.ha(t)),n!==i){if(null!==n){var o=n.g;null!==o&&o.remove(n)}null===e&&(this.gh=e=new bi("string",Ca)),i.ih!==t&&(i.kc=t),e.add(t,i),n=this.g,null!==n&&(n.add(i),i.data=this.data)}}},sa.prototype.removeAdornment=sa.prototype.xk=function(t){var i=this.gh;if(null!==i){var n=i.ha(t);if(null!==n){var e=n.g;null!==e&&e.remove(n)}i.remove(t),0===i.count&&(this.gh=null)}},sa.prototype.clearAdornments=sa.prototype.nr=function(){var t=this.gh;if(null!==t){for(var i=E(),t=t.i;t.next();)i.push(t.key);for(var t=i.length,n=0;t>n;n++)this.xk(i[n]);R(i)}},sa.prototype.updateAdornments=function(){var t=this.g;if(null!==t){t:{if(this.Ia&&this.FG){var i=this.ps;if(!(null!==i&&this.Q.w()&&this.qa()&&i.tk()&&i.Q.w()))break t;var n=this.An("Selection");if(null===n){if(n=this.GG,null===n&&(n=this instanceof Ra?t.VF:this instanceof Th?t.tF:t.jG),!(n instanceof Ca))break t;ws(n),n=n.copy(),null!==n&&(n.kc="Selection",n.Xb=i)}if(null!==n){var e=n.placeholder;if(null!==e){var o=i.Th(),r=0;i instanceof Ps&&(r=i.Na);var s=j();s.k((i.sa.width+r)*o,(i.sa.height+r)*o),e.ka=s,L(s)}n.angle=i.hk(),n.type!==zp&&(e=C(),n.location=i.Ra(wf,e),P(e)),this.Uj("Selection",n);break t}}this.xk("Selection")}for(aa(this,t),t=this.xu;t.next();)i=t.value,i.rb(),i.H()}},Y(sa,{layer:"layer"},function(){return this.Ct}),Y(sa,{g:"diagram"},function(){var t=this.Ct;return null!==t?t.g:null}),K(sa,{Ne:"layerName"},function(){return this.Gj},function(t){var i=this.Gj;if(i!==t){h(t,"string",sa,"layerName");var n=this.g;if((null===n||null!==n.wr(t)&&!n.$l)&&(this.Gj=t,null!==n&&n.Rb(),this.h("layerName",i,t),i=this.layer,null!==i&&i.name!==t&&(n=i.g,null!==n&&(t=n.wr(t),null!==t&&t!==i)))){var e=i.Yd(-1,this,!0);if(e>=0&&n.ec(dc,"parts",i,this,null,e,!0),e=t.Hn(99999999,this,!0),e>=0&&n.ec(pc,"parts",t,null,this,!0,e),e=this.Rr,null!==e){var o=n.ya;n.ya=!0,e(this,i,t),n.ya=o}}}}),K(sa,{Rr:"layerChanged"},function(){return this.Bp},function(t){var i=this.Bp;i!==t&&(null!==t&&h(t,"function",sa,"layerChanged"),this.Bp=t,this.h("layerChanged",i,t))}),sa.prototype.invalidateAdornments=sa.prototype.rd=function(){var t=this.g;null!==t&&(To(t),0!==(16384&this.D)!=!0&&(this.D|=16384,t.wd()))},K(sa,{location:"location"},function(){return this.bg},function(t){var i=this.bg;if(!(i.A(t)||this instanceof Ra)){t=t.O();var n=this.g;if(this.bg=t,!1===$r(this)){var e=this.xa,o=t.x-i.x,r=t.y-i.y,s=e.copy();e.k(s.x+o,s.y+r),la(this,!1),!e.A(s)&&n&&this.h("position",s,e)}this.h("location",i,t)}}),Y(sa,{Jb:"locationObject"},function(){if(null===this.Jj){var t=this.py;""!==t?(t=this.Cd(t),this.Jj=null!==t?t:this):this.Jj=this instanceof Ca&&this.type!==zp&&null!==this.placeholder?this.placeholder:this}return this.Jj.visible?this.Jj:this}),K(sa,{cG:"minLocation"},function(){return this.Sp},function(t){var i=this.Sp;i.A(t)||(this.Sp=t=t.O(),this.h("minLocation",i,t))}),K(sa,{YF:"maxLocation"},function(){return this.Lp},function(t){var i=this.Lp;i.A(t)||(this.Lp=t=t.O(),this.h("maxLocation",i,t))}),K(sa,{py:"locationObjectName"},function(){return this.Ip},function(t){var i=this.Ip;i!==t&&(this.Ip=t,this.Jj=null,Vr(this),this.h("locationObjectName",i,t))}),K(sa,{qe:"locationSpot"},function(){return this.Jp},function(t){var i=this.Jp;i.A(t)||(this.Jp=t=t.O(),Vr(this),this.h("locationSpot",i,t))}),sa.prototype.move=sa.prototype.move=function(t){this.position=t},sa.prototype.moveTo=sa.prototype.moveTo=function(t,i){var n=N(t,i);this.move(n),P(n)},sa.prototype.isVisible=sa.prototype.qa=function(){if(!this.visible)return!1;var t=this.layer;if(null!==t&&!t.visible)return!1;if(t=this.Ba,!(null===t||t.ud&&t.qa()))return!1;if(this instanceof Na){if(t=this.Gl(),null!==t&&!t.sc)return!1;if(t=this.vd,null!==t)return t.qa()}else if(this instanceof Ra){var i=!0,n=this.g;if(null!==n&&(i=n.Lc),n=this.M,null!==n){if(this.cc&&i&&!n.sc)return!1;if(n===t)return!0;if(n=n.findVisibleNode(),null===n||n===t)return!1}if(n=this.R,null!==n){if(this.cc&&!i&&!n.sc)return!1;if(n===t)return!0;if(i=n.findVisibleNode(),null===i||i===t)return!1}}return!0},sa.prototype.$d=function(t){var i=this.g;t?(this.v(4),this.rd(),null!==i&&i.nf.add(this)):(this.v(8),this.nr()),null!==i&&(i.Rb(),i.ba())},sa.prototype.findObject=sa.prototype.Cd=function(t){if(this.name===t)return this;var i=this.Lj;if(null===i&&(this.Lj=i=new si),void 0!==i[t])return i[t];for(var n=this.la.l,e=n.length,o=0;e>o;o++){var r=n[o];if(r.name===t)return i[t]=r;if(r instanceof rs)if(null===r.uh&&null===r.pf){if(r=r.Cd(t),null!==r)return i[t]=r}else if(ks(r)&&(r=r.la.first(),null!==r&&r.name===t))return i[t]=r}return i[t]=null},sa.prototype.ensureBounds=sa.prototype.Ge=function(){Or(this,1/0,1/0),this.ac()},Wu=sa.prototype,Wu.ac=function(){if(this.Zf(),!1===$r(this))ua(this);else{var t=D();t.assign(this.Bb),Ir(this),this.Bb.wa();var i=ba(this);this.Lh(0,0,this.nc.width,this.nc.height);var n=this.position;pa(this,n,this.location);var e=this.Bb;e.x=n.x,e.y=n.y,e.freeze(),this.Zf(),this.nv(t,e),t.A(e)?this.Oe(i):!this.$c()||Qf.q(t.width,e.width)&&Qf.q(t.height,e.height)||0<=this.pA&&this.v(16),F(t),ma(this,!1)}},Wu.nv=function(t,i){_r(this,!1);var n=this.g;if(null!==n){this.mk();var e=!1,o=t.w();if(!1===n.sh){var r=n.Xc,s=n.padding,a=r.x+s.left,h=r.y+s.top,l=r.width-2*s.right,r=r.height-2*s.bottom;o&&t.x>a&&t.y>h&&t.right<l&&t.bottom<r&&i.x>a&&i.y>h&&i.right<l&&i.bottom<r&&(e=!0)}0!==(65536&this.D)!=!0&&t.A(i)||da(this,e,n),n.ba()}},Wu.Vy=function(t,i){if(!t.w()||this instanceof Ra)return!1;if(this.g&&!(this instanceof Ca)){var n=this.g.hh;n.Gc&&Fe(n,this,"position",i.copy(),t.copy())}var n=this.bg,e=n.copy();return n.k(n.x+(t.x-i.x),n.y+(t.y-i.y)),this.xa=t,!1===ga(this)&&!1===$r(this)&&(la(this,!1),this.Zf(),ua(this)),n.A(e)||this.h("location",e,n),!0},Wu.pD=function(t,i){var n=this.bg;!1===ga(this)&&!1===$r(this)?(this.bg.k(n.x+t-this.xa.x,n.y+i-this.xa.y),this.xa.k(t,i),la(this,!0),this.Zf()):(n.k(0/0,0/0),this.xa.k(t,i))},Wu.qk=function(){return!0},Wu.$c=function(){return!0},K(sa,{kc:"category"},function(){return this.ih},function(t){var i=this.ih;if(i!==t){h(t,"string",sa,"category");var n=this.g,e=this.data,o=null;if(null!==n&&null!==e&&!(this instanceof Ca)){var r=n.U.V;r.isEnabled&&!r.Ua&&(o=this.clone(),o.la.md(this.la))}this.ih=t,this.h("category",i,t),null===n||null===e||this instanceof Ca?(o=this.Yg,null!==o&&(t=o.gh,null!==t&&t.remove(i),o.Uj(this.kc,this))):(r=n.U,r.V.Ua||(this instanceof Ra?(r instanceof xn?r.nD(e,t):r instanceof wn&&r.JG(e,t),n=Jo(n,t),null!==n&&(ws(n),n=n.copy(),null!==n&&ya(this,n,i,t))):(null!==r&&r.yv(e,t),n=Uo(n,e,t),null!==n&&(ws(n),n=n.copy(),null===n||n instanceof Ra||(n.location=this.location,ya(this,n,i,t)))),null!==o&&(i=this.clone(),i.la.md(this.la),this.h("self",o,i))))}}),K(sa,{self:"self"},function(){return this},function(t){ya(this,t,this.kc,t.kc)});var ld=!1;sa.prototype.canCopy=function(){if(!this.QE)return!1;var t=this.layer;return null===t?!0:t.Ui?(t=t.g,null===t?!0:t.Ui?!0:!1):!1},sa.prototype.canDelete=function(){if(!this.XE)return!1;var t=this.layer;return null===t?!0:t.sl?(t=t.g,null===t?!0:t.sl?!0:!1):!1},sa.prototype.canEdit=function(){if(!this.WG)return!1;var t=this.layer;return null===t?!0:t.Cu?(t=t.g,null===t?!0:t.Cu?!0:!1):!1},sa.prototype.canGroup=function(){if(!this.uF)return!1;var t=this.layer;return null===t?!0:t.zu?(t=t.g,null===t?!0:t.zu?!0:!1):!1},sa.prototype.canMove=function(){if(!this.hG)return!1;var t=this.layer;return null===t?!0:t.Xj?(t=t.g,null===t?!0:t.Xj?!0:!1):!1},sa.prototype.canReshape=function(){if(!this.uG)return!1;var t=this.layer;return null===t?!0:t.Au?(t=t.g,null===t?!0:t.Au?!0:!1):!1},sa.prototype.canResize=function(){if(!this.vG)return!1;var t=this.layer;return null===t?!0:t.kr?(t=t.g,null===t?!0:t.kr?!0:!1):!1},sa.prototype.canRotate=function(){if(!this.yG)return!1;var t=this.layer;return null===t?!0:t.Bu?(t=t.g,null===t?!0:t.Bu?!0:!1):!1},sa.prototype.canSelect=function(){if(!this.yk)return!1;var t=this.layer;return null===t?!0:t.Fe?(t=t.g,null===t?!0:t.Fe?!0:!1):!1},K(sa,{QE:"copyable"},function(){return 0!==(1&this.D)},function(t){var i=0!==(1&this.D);i!==t&&(this.D^=1,this.h("copyable",i,t))}),K(sa,{XE:"deletable"},function(){return 0!==(2&this.D)},function(t){var i=0!==(2&this.D);i!==t&&(this.D^=2,this.h("deletable",i,t))}),K(sa,{WG:"textEditable"},function(){return 0!==(4&this.D)},function(t){var i=0!==(4&this.D);i!==t&&(this.D^=4,this.h("textEditable",i,t),this.rd())}),K(sa,{uF:"groupable"},function(){return 0!==(8&this.D)},function(t){var i=0!==(8&this.D);i!==t&&(this.D^=8,this.h("groupable",i,t))}),K(sa,{hG:"movable"},function(){return 0!==(16&this.D)},function(t){var i=0!==(16&this.D);i!==t&&(this.D^=16,this.h("movable",i,t))}),K(sa,{FG:"selectionAdorned"},function(){return 0!==(32&this.D)},function(t){var i=0!==(32&this.D);i!==t&&(this.D^=32,this.h("selectionAdorned",i,t),this.rd())}),K(sa,{jy:"isInDocumentBounds"},function(){return 0!==(64&this.D)},function(t){var i=0!==(64&this.D);if(i!==t){this.D^=64;var n=this.g;null!==n&&n.Rb(),this.h("isInDocumentBounds",i,t)}}),K(sa,{xC:"isLayoutPositioned"},function(){return 0!==(128&this.D)},function(t){var i=0!==(128&this.D);i!==t&&(this.D^=128,this.h("isLayoutPositioned",i,t),this.v(t?4:8))}),K(sa,{yk:"selectable"},function(){return 0!==(256&this.D)},function(t){var i=0!==(256&this.D);i!==t&&(this.D^=256,this.h("selectable",i,t),this.rd())}),K(sa,{uG:"reshapable"},function(){return 0!==(512&this.D)},function(t){var i=0!==(512&this.D);i!==t&&(this.D^=512,this.h("reshapable",i,t),this.rd())}),K(sa,{vG:"resizable"},function(){return 0!==(1024&this.D)},function(t){var i=0!==(1024&this.D);i!==t&&(this.D^=1024,this.h("resizable",i,t),this.rd())}),K(sa,{yG:"rotatable"},function(){return 0!==(2048&this.D)},function(t){var i=0!==(2048&this.D);i!==t&&(this.D^=2048,this.h("rotatable",i,t),this.rd())}),K(sa,{Ia:"isSelected"},function(){return 0!==(4096&this.D)},function(t){var i=0!==(4096&this.D);if(i!==t){var n=this.g;if(!t||this.canSelect()&&!(null!==n&&n.selection.count>=n.ZF)){this.D^=4096;var e=!1;if(null!==n){e=n.Ma,n.Ma=!0;var o=n.selection;o.wa(),t?o.add(this):o.remove(this),o.freeze()}this.h("isSelected",i,t),this.rd(),t=this.HG,null!==t&&t(this),null!==n&&(n.wd(),n.Ma=e)}}}),K(sa,{kg:"isHighlighted"},function(){return 0!==(524288&this.D)},function(t){var i=0!==(524288&this.D);if(i!==t){this.D^=524288;var n=this.g;null!==n&&(n=n.Yu,n.wa(),t?n.add(this):n.remove(this),n.freeze()),this.h("isHighlighted",i,t),this.ba()}}),K(sa,{rk:"isShadowed"},function(){return 0!==(8192&this.D)},function(t){var i=0!==(8192&this.D);i!==t&&(this.D^=8192,this.h("isShadowed",i,t),this.ba())}),sa.prototype.Oe=function(t){this.D=t?131072|this.D:-131073&this.D},K(sa,{sC:"isAnimated"},function(){return 0!==(262144&this.D)},function(t){var i=0!==(262144&this.D);i!==t&&(this.D^=262144,this.h("isAnimated",i,t))}),K(sa,{Qy:"selectionObjectName"},function(){return this.Jq},function(t){var i=this.Jq;i!==t&&(this.Jq=t,this.il=null,this.h("selectionObjectName",i,t))}),K(sa,{GG:"selectionAdornmentTemplate"},function(){return this.Hq},function(t){var i=this.Hq;i!==t&&(this instanceof Ra&&(t.type=zp),this.Hq=t,this.h("selectionAdornmentTemplate",i,t))}),Y(sa,{ps:"selectionObject"},function(){if(null===this.il){var t=this.Qy;null!==t&&""!==t?(t=this.Cd(t),this.il=null!==t?t:this):this instanceof Ra?(t=this.path,this.il=null!==t?t:this):this.il=this}return this.il}),K(sa,{HG:"selectionChanged"},function(){return this.Iq},function(t){var i=this.Iq;i!==t&&(null!==t&&h(t,"function",sa,"selectionChanged"),this.Iq=t,this.h("selectionChanged",i,t))}),K(sa,{aD:"resizeAdornmentTemplate"},function(){return this.vq},function(t){var i=this.vq;i!==t&&(this.vq=t,this.h("resizeAdornmentTemplate",i,t))}),K(sa,{cD:"resizeObjectName"},function(){return this.xq},function(t){var i=this.xq;i!==t&&(this.xq=t,this.Zm=null,this.h("resizeObjectName",i,t))}),Y(sa,{bD:"resizeObject"},function(){if(null===this.Zm){var t=this.cD;null!==t&&""!==t?(t=this.Cd(t),this.Zm=null!==t?t:this):this.Zm=this}return this.Zm}),K(sa,{wG:"resizeCellSize"},function(){return this.wq},function(t){var i=this.wq;
i.A(t)||(this.wq=t=t.O(),this.h("resizeCellSize",i,t))}),K(sa,{zG:"rotateAdornmentTemplate"},function(){return this.yq},function(t){var i=this.yq;i!==t&&(this.yq=t,this.h("rotateAdornmentTemplate",i,t))}),K(sa,{AG:"rotateObjectName"},function(){return this.zq},function(t){var i=this.zq;i!==t&&(this.zq=t,this.$m=null,this.h("rotateObjectName",i,t))}),Y(sa,{eD:"rotateObject"},function(){if(null===this.$m){var t=this.AG;null!==t&&""!==t?(t=this.Cd(t),this.$m=null!==t?t:this):this.$m=this}return this.$m}),K(sa,{text:"text"},function(){return this.Bd},function(t){var i=this.Bd;i!==t&&(this.Bd=t,this.h("text",i,t))}),K(sa,{Ba:"containingGroup"},function(){return this.uj},function(t){if(this.$c()){var i=this.uj;if(i!==t){null===t||this!==t&&!t.bh(this)||(this===t&&r("Cannot make a Group a member of itself: "+this.toString()),r("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.v(sd);var n=this.g;if(null!==i?Ch(i,this):this instanceof Th&&null!==n&&n.Sj.remove(this),this.uj=t,null!==t?Sh(t,this):this instanceof Th&&null!==n&&n.Sj.add(this),this.v(rd),null!==n){var e=this.data,o=n.U;null!==e&&o instanceof xn&&o.Av(e,o.$a(null!==t?t.data:null))}if(e=this.OB,null!==e&&(o=!0,null!==n&&(o=n.ya,n.ya=!0),e(this,i,t),null!==n&&(n.ya=o)),this instanceof Th)for(n=new di(sa),Pn(n,this,!0,0,!0),n=n.i;n.next();)if(e=n.value,e instanceof Na)for(e=e.Hd;e.next();)Ia(e.value);if(this instanceof Na)for(e=this.Hd;e.next();)Ia(e.value);this.h("containingGroup",i,t),null!==t&&t.Ev()}}else r("cannot set the Part.containingGroup of a Link or Adornment")}),Wu=sa.prototype,Wu.mk=function(){var t=this.Ba;null!==t&&(t.H(),null!==t.tb&&t.tb.H(),t.Je())},Wu.ba=function(){var t=this.g;null!==t&&!$r(this)&&!ga(this)&&this.qa()&&this.Bb.w()&&t.ba(ca(this,this.Bb))},Wu.Ir=function(t){var i=this.uj;null===i||t||Sh(i,this)},Wu.Jr=function(t){var i=this.uj;null===i||t||Ch(i,this)},Wu.El=function(){var t=this.data;if(null!==t){var i=this.g;null!==i&&(i=i.U,null!==i&&i.My(t))}},K(sa,{OB:"containingGroupChanged"},function(){return this.Jo},function(t){var i=this.Jo;i!==t&&(null!==t&&h(t,"function",sa,"containingGroupChanged"),this.Jo=t,this.h("containingGroupChanged",i,t))}),sa.prototype.findSubGraphLevel=function(){return ka(this,this)},sa.prototype.findTopLevelPart=function(){return Ma(this,this)},Y(sa,{Kn:"isTopLevel"},function(){return null!==this.Ba||this instanceof Na&&this.Ke?!1:!0}),sa.prototype.isMemberOf=sa.prototype.bh=function(t){return t instanceof Th?Ta(this,this,t):!1},sa.prototype.findCommonContainingGroup=sa.prototype.fF=function(t){if(null===t)return null;if(this===t)return this instanceof Th?this:null;for(var i=this;null!==i;)i instanceof Th&&wa(i,!0),i=i.Ba;for(var n=null,i=t;null!==i;){if(0!==(1048576&i.D)){n=i;break}i=i.Ba}for(i=this;null!==i;)i instanceof Th&&wa(i,!1),i=i.Ba;return n},K(sa,{QF:"layoutConditions"},function(){return this.Cp},function(t){var i=this.Cp;i!==t&&(this.Cp=t,this.h("layoutConditions",i,t))}),sa.prototype.canLayout=function(){if(!this.xC||!this.qa())return!1;var t=this.layer;return null!==t&&t.bc||this instanceof Na&&this.Ke?!1:!0},sa.prototype.invalidateLayout=sa.prototype.v=function(t){void 0===t&&(t=16777215);var i;if(this.xC&&0!==(t&this.QF)?(i=this.layer,null!==i&&i.bc||this instanceof Na&&this.Ke?i=!1:(i=this.g,i=null!==i&&i.V.Ua?!1:!0)):i=!1,i)if(i=this.uj,null!==i){var n=i.ub;null!==n?n.v():i.v(t)}else t=this.g,null!==t&&(n=t.ub,null!==n&&n.v())},K(sa,{XB:"dragComputation"},function(){return this.To},function(t){var i=this.To;i!==t&&(null!==t&&h(t,"function",sa,"dragComputation"),this.To=t,this.h("dragComputation",i,t))}),K(sa,{MG:"shadowOffset"},function(){return this.ll},function(t){var i=this.ll;i.A(t)||(this.ll=t=t.O(),this.ba(),this.h("shadowOffset",i,t))}),K(sa,{shadowColor:"shadowColor"},function(){return this.kl},function(t){var i=this.kl;i!==t&&(this.kl=t,this.ba(),this.h("shadowColor",i,t))}),K(sa,{shadowBlur:"shadowBlur"},function(){return this.jl},function(t){var i=this.jl;i!==t&&(this.jl=t,this.ba(),this.h("shadowBlur",i,t))}),U(Ca,sa),H("Adornment",Ca),Ca.prototype.toString=function(){var t=this.Yg;return"Adornment("+this.kc+")"+(null!==t?t.toString():"")},Ca.prototype.updateRelationshipsFromData=function(){},Ca.prototype.Xr=function(){var t=this.Xb.J,i=this.Xb;if(t instanceof Ra&&i instanceof Ps){var n=t.path,i=n.za;t.Xr();for(var i=n.za,t=this.la.l,n=t.length,e=0;n>e;e++){var o=t[e];o.Jf&&o instanceof Ps&&(o.za=i)}}},Y(Ca,{placeholder:"placeholder"},function(){return this.tb}),K(Ca,{Xb:"adornedObject"},function(){return this.lb},function(t){var i=this.Yg,n=null;null!==t&&(n=t.J),null===i||null!==t&&i===n||i.xk(this.kc),this.lb=t,null!==n&&n.Uj(this.kc,this)}),Y(Ca,{Yg:"adornedPart"},function(){var t=this.lb;return null!==t?t.J:null}),Ca.prototype.qk=function(){var t=this.lb;return null===t?!0:(t=t.J,null===t||!$r(t))},Ca.prototype.$c=function(){return!1},Y(Ca,{Ba:"containingGroup"},function(){return null}),Ca.prototype.Ql=function(t,i,n,e,o,s,a){if(t===pc&&"elements"===i)if(o instanceof jh){var h=o;null===this.tb?this.tb=h:this.tb!==h&&r("Cannot insert a second Placeholder into the visual tree of an Adornment.")}else o instanceof rs&&(h=o.vr(function(t){return t instanceof jh}),h instanceof jh&&(null===this.tb?this.tb=h:this.tb!==h&&r("Cannot insert a second Placeholder into the visual tree of an Adornment.")));else t===dc&&"elements"===i&&null!==this.tb&&(e===this.tb?this.tb=null:e instanceof rs&&this.tb.pk(e)&&(this.tb=null));sa.prototype.Ql.call(this,t,i,n,e,o,s,a)},Ca.prototype.updateAdornments=function(){},Ca.prototype.El=function(){},U(Na,sa),H("Node",Na),Na.prototype.cloneProtected=function(t){sa.prototype.cloneProtected.call(this,t),t.Ep=this.Ep,t.Fp=this.Fp,t.Hj=this.Hj,t.tp=this.tp,t.cr=this.cr,t.Yq=this.Yq,t.vp=this.vp,t.Co=this.Co,t.Do=this.Do.O(),t.oq=this.oq},Na.prototype.Zg=function(t){sa.prototype.Zg.call(this,t),t.Je(),t.zg=this.zg,t.jd=null};var ud;Na.DirectionDefault=ud=Z(Na,"DirectionDefault",0),Na.DirectionAbsolute=Z(Na,"DirectionAbsolute",1);var fd;Na.DirectionRotatedNode=fd=Z(Na,"DirectionRotatedNode",2);var cd;Na.DirectionRotatedNodeOrthogonal=cd=Z(Na,"DirectionRotatedNodeOrthogonal",3),Na.SpreadingNone=Z(Na,"SpreadingNone",10);var pd;Na.SpreadingEvenly=pd=Z(Na,"SpreadingEvenly",11);var dd;Na.SpreadingPacked=dd=Z(Na,"SpreadingPacked",12),Na.prototype.Ql=function(t,i,n,e,o,r,s){t===pc&&"elements"===i?this.jd=null:t===dc&&"elements"===i&&(null===this.g?this.jd=null:e instanceof Pr&&fs(this,e,function(t,i){Oa(t,i,!0)})),sa.prototype.Ql.call(this,t,i,n,e,o,r,s)},Na.prototype.invalidateConnectedLinks=Na.prototype.Je=function(t){void 0===t&&(t=null);for(var i=this.Hd;i.next();){var n=i.value;null!==t&&t.contains(n)||(ja(this,n.Jc),ja(this,n.yd),n.zb())}},Na.prototype.qk=function(){return!0},K(Na,{pG:"portSpreading"},function(){return this.oq},function(t){var i=this.oq;i!==t&&(this.oq=t,this.h("portSpreading",i,t),t=this.g,null!==t&&t.V.Ua||this.Je())}),K(Na,{GB:"avoidable"},function(){return this.Co},function(t){var i=this.Co;if(i!==t){this.Co=t;var n=this.g;null!==n&&fr(n,this),this.h("avoidable",i,t)}}),K(Na,{AE:"avoidableMargin"},function(){return this.Do},function(t){"number"==typeof t?t=new Di(t):a(t,Di,Na,"avoidableMargin");var i=this.Do;if(!i.A(t)){this.Do=t=t.O();var n=this.g;null!==n&&fr(n,this),this.h("avoidableMargin",i,t)}}),Na.prototype.canAvoid=function(){return this.GB&&!this.Ke},Na.prototype.getAvoidableRect=function(t){return t.set(this.Q),t.wu(this.AE),t},Na.prototype.findVisibleNode=function(){for(var t=this;null!==t&&!t.qa();)t=t.Ba;return t},Na.prototype.$d=function(t){sa.prototype.$d.call(this,t);for(var i=this.Hd;i.next();)i.value.$d(t)},Y(Na,{Hd:"linksConnected"},function(){return this.Kb.i}),Na.prototype.findLinksConnected=Na.prototype.aC=function(t){if(void 0===t&&(t=null),null===t)return this.Kb.i;var i=new ui(this.Kb),n=this;return i.Pl=function(i){return i.M===n&&i.Gf===t||i.R===n&&i.yg===t},i},Na.prototype.findLinksOutOf=Na.prototype.Tu=function(t){void 0===t&&(t=null);var i=new ui(this.Kb),n=this;return i.Pl=function(i){return i.M!==n?!1:null===t?!0:i.Gf===t},i},Na.prototype.findLinksInto=Na.prototype.Ff=function(t){void 0===t&&(t=null);var i=new ui(this.Kb),n=this;return i.Pl=function(i){return i.R!==n?!1:null===t?!0:i.yg===t},i},Na.prototype.findNodesConnected=Na.prototype.bC=function(t){void 0===t&&(t=null);for(var i=null,n=null,e=this.Kb.i;e.next();){var o=e.value;o.M===this?(null===t||o.Gf===t)&&(o=o.R,null!==i?i.add(o):null!==n&&n!==o?(i=new di(Na),i.add(n),i.add(o)):n=o):o.R!==this||null!==t&&o.yg!==t||(o=o.M,null!==i?i.add(o):null!==n&&n!==o?(i=new di(Na),i.add(n),i.add(o)):n=o)}return null!==i?i.i:null!==n?new li(n):pf},Na.prototype.findNodesOutOf=function(t){void 0===t&&(t=null);for(var i=null,n=null,e=this.Kb.i;e.next();){var o=e.value;o.M!==this||null!==t&&o.Gf!==t||(o=o.R,null!==i?i.add(o):null!==n&&n!==o?(i=new di(Na),i.add(n),i.add(o)):n=o)}return null!==i?i.i:null!==n?new li(n):pf},Na.prototype.findNodesInto=function(t){void 0===t&&(t=null);for(var i=null,n=null,e=this.Kb.i;e.next();){var o=e.value;o.R!==this||null!==t&&o.yg!==t||(o=o.M,null!==i?i.add(o):null!==n&&n!==o?(i=new di(Na),i.add(n),i.add(o)):n=o)}return null!==i?i.i:null!==n?new li(n):pf},Na.prototype.findLinksBetween=function(t,i,n){void 0===i&&(i=null),void 0===n&&(n=null);var e=new ui(this.Kb),o=this;return e.Pl=function(e){return(e.M!==o||e.R!==t||null!==i&&e.Gf!==i||null!==n&&e.yg!==n)&&(e.M!==t||e.R!==o||null!==n&&e.Gf!==n||null!==i&&e.yg!==i)?!1:!0},e},Na.prototype.findLinksTo=function(t,i,n){void 0===i&&(i=null),void 0===n&&(n=null);var e=new ui(this.Kb),o=this;return e.Pl=function(e){return e.M!==o||e.R!==t||null!==i&&e.Gf!==i||null!==n&&e.yg===n?!1:!0},e},K(Na,{SF:"linkConnected"},function(){return this.Ep},function(t){var i=this.Ep;i!==t&&(null!==t&&h(t,"function",Na,"linkConnected"),this.Ep=t,this.h("linkConnected",i,t))}),K(Na,{TF:"linkDisconnected"},function(){return this.Fp},function(t){var i=this.Fp;i!==t&&(null!==t&&h(t,"function",Na,"linkDisconnected"),this.Fp=t,this.h("linkDisconnected",i,t))}),K(Na,{kv:"linkValidation"},function(){return this.Hj},function(t){var i=this.Hj;i!==t&&(null!==t&&h(t,"function",Na,"linkValidation"),this.Hj=t,this.h("linkValidation",i,t))}),Na.prototype.updateRelationshipsFromData=function(){sa.prototype.updateRelationshipsFromData.call(this);var t=this.data;if(null!==t){var i=this.g;if(null!==i){var n=i.U;if(n instanceof wn){var e=n.Jl(t),i=i.pe(e),o=this.Gl();i!==o&&(i=null!==o?n.$a(o.data):void 0,o=n.Zn,"function"==typeof o?o(t,i):t[o]=i,n.wg(t,e))}}}},Na.prototype.Ir=function(t){sa.prototype.Ir.call(this,t),t||Aa(this);var i=this.Om;null===i||t||Va(i,this)},Na.prototype.Jr=function(t){sa.prototype.Jr.call(this,t);var i=this.Om;null===i||t||null===i.Od||(i.Od.remove(this),i.H())},Na.prototype.El=function(){if(0<this.Kb.count){var t=this.g;if(null===t)return;for(var i=this.Kb.copy().i;i.next();)t.remove(i.value)}this.vd=null,sa.prototype.El.call(this)},Y(Na,{Ke:"isLinkLabel"},function(){return null!==this.Om}),K(Na,{vd:"labeledLink"},function(){return this.Om},function(t){var i=this.Om;if(i!==t){var n=this.g,e=this.data;if(null!==i&&(null!==i.Od&&(i.Od.remove(this),i.H()),null!==n&&null!==e&&!n.V.Ua)){var o=i.data,r=n.U;if(null!==o&&r instanceof xn){var s=r.$a(e);void 0!==s&&r.WC(o,s)}}this.Om=t,null!==t&&(Va(t,this),null===n||null===e||n.V.Ua||(o=t.data,r=n.U,null!==o&&r instanceof xn&&(s=r.$a(e),void 0!==s&&r.Ax(o,s)))),Vr(this),this.h("labeledLink",i,t)}}),Na.prototype.findPort=Na.prototype.fk=function(t){if(null===this.jd){if(""===t&&!1===this.Jg)return this;Fa(this)}var i=this.jd.ha(t);return null!==i||""!==t&&(i=this.jd.ha(""),null!==i)?i:this},Y(Na,{port:"port"},function(){return this.fk("")}),Y(Na,{ports:"ports"},function(){return null===this.jd&&Fa(this),this.jd.AC}),Na.prototype.isInTreeOf=function(t){if(null===t||t===this)return!1;var i=!0,n=this.g;if(null!==n&&(i=n.Lc),n=this,i)for(;n!==t;){for(var i=null,e=n.Kb.i;e.next();){var o=e.value;if(o.cc&&(i=o.M,i!==n&&i!==this))break}if(i===this||null===i||i===n)return!1;n=i}else for(;n!==t;){for(i=null,e=n.Kb.i;e.next()&&(o=e.value,!o.cc||(i=o.R,i===n||i===this)););if(i===this||null===i||i===n)return!1;n=i}return!0},Na.prototype.findTreeRoot=function(){var t=!0,i=this.g;if(null!==i&&(t=i.Lc),i=this,t)for(;;){for(var t=null,n=i.Kb.i;n.next();){var e=n.value;if(e.cc&&(t=e.M,t!==i&&t!==this))break}if(t===this)return this;if(null===t||t===i)return i;i=t}else for(;;){for(t=null,n=i.Kb.i;n.next()&&(e=n.value,!e.cc||(t=e.R,t===i||t===this)););if(t===this)return this;if(null===t||t===i)return i;i=t}},Na.prototype.findCommonTreeParent=function(t){if(null===t)return null;if(this===t)return this;for(var i=this;null!==i;)wa(i,!0),i=i.Gl();for(var n=null,i=t;null!==i;){if(0!==(1048576&i.D)){n=i;break}i=i.Gl()}for(i=this;null!==i;)wa(i,!1),i=i.Gl();return n},Na.prototype.findTreeParentLink=Na.prototype.Ar=function(){var t=!0,i=this.g;if(null!==i&&(t=i.Lc),i=this.Kb.i,t){for(;i.next();)if(t=i.value,t.cc&&t.M!==this)return t}else for(;i.next();)if(t=i.value,t.cc&&t.R!==this)return t;return null},Na.prototype.findTreeParentNode=Na.prototype.Gl=function(){var t=this.Ri;if(null===t)return null;if(t instanceof Na)return t;var i=!0,t=this.g;if(null!==t&&(i=t.Lc),t=this.Kb.i,i){for(;t.next();)if(i=t.value,i.cc&&(i=i.M,i!==this))return this.Ri=i}else for(;t.next();)if(i=t.value,i.cc&&(i=i.R,i!==this))return this.Ri=i;return this.Ri=null},Na.prototype.findTreeLevel=function(){return za(this,this)},Na.prototype.findTreeChildrenLinks=Na.prototype.Vu=function(){var t=!0,i=this.g;if(null!==i&&(t=i.Lc),t){var t=new ui(this.Kb),n=this;t.Pl=function(t){return t.cc&&t.M===n?!0:!1}}else t=new ui(this.Kb),n=this,t.Pl=function(t){return t.cc&&t.R===n?!0:!1};return t},Na.prototype.findTreeChildrenNodes=Na.prototype.dC=function(){var t=!0,i=this.g;null!==i&&(t=i.Lc);var n=i=null,e=this.Kb.i;if(t)for(;e.next();)t=e.value,t.cc&&t.M===this&&(t=t.R,null!==i?i.add(t):null!==n&&n!==t?(i=new ci(Na),i.add(n),i.add(t)):n=t);else for(;e.next();)t=e.value,t.cc&&t.R===this&&(t=t.M,null!==i?i.add(t):null!==n&&n!==t?(i=new ci(Na),i.add(n),i.add(t)):n=t);return null!==i?i.i:null!==n?new li(n):pf},Na.prototype.findTreeParts=function(t){void 0===t&&(t=1/0),h(t,"number",Na,"collapseTree:level");var i=new di(sa);return Pn(i,this,!1,t,!0),i},Na.prototype.collapseTree=Na.prototype.collapseTree=function(t){void 0===t&&(t=1),l(t,Na,"collapseTree:level"),1>t&&(t=1);var i=this.g;if(null!==i&&!i.Fd){var n=i.qb;0!==i.V.de&&n.vk(),i.Fd=!0;var n=i.Lc,e=new di(Na);e.add(this),Ba(this,e,n,t,this.sc),i.Fd=!1}},Na.prototype.expandTree=Na.prototype.expandTree=function(t){void 0===t&&(t=2),l(t,Na,"expandTree:level"),2>t&&(t=2);var i=this.g;if(null!==i&&!i.Fd){var n=i.qb;0!==i.V.de&&n.vk(),i.Fd=!0;var e=i.Lc,o=new di(Na);o.add(this),Ea(this,o,e,t,this.sc,n,this),i.Fd=!1}},K(Na,{sc:"isTreeExpanded"},function(){return this.tp},function(t){var i=this.tp;if(i!==t){this.tp=t;var n=this.g;if(this.h("isTreeExpanded",i,t),i=this.aH,null!==i){var e=!0;null!==n&&(e=n.ya,n.ya=!0),i(this),null!==n&&(n.ya=e)}t?null===n||n.Fd||(0!==n.V.de&&n.qb.vk(),n.Fd=!0,t=n.Lc,i=new di(Na),i.add(this),Ea(this,i,t,2,!1,n.qb,this),n.Fd=!1):null===n||n.Fd||(0!==n.V.de&&n.qb.vk(),n.Fd=!0,t=n.Lc,i=new di(Na),i.add(this),qa(this,i,t,!0),n.Fd=!1)}}),K(Na,{oo:"wasTreeExpanded"},function(){return this.cr},function(t){var i=this.cr;i!==t&&(this.cr=t,this.h("wasTreeExpanded",i,t))}),K(Na,{aH:"treeExpandedChanged"},function(){return this.Yq},function(t){var i=this.Yq;i!==t&&(null!==t&&h(t,"function",Na,"treeExpandedChanged"),this.Yq=t,this.h("treeExpandedChanged",i,t))}),K(Na,{Vh:"isTreeLeaf"},function(){return this.vp},function(t){var i=this.vp;i!==t&&(this.vp=t,this.h("isTreeLeaf",i,t))}),U(Ra,sa),H("Link",Ra),Ra.prototype.cloneProtected=function(t){sa.prototype.cloneProtected.call(this,t),t.Ig=this.Ig,t.ap=this.ap,t.Wg=this.Wg,t.Xq=this.Xq,t.sq=this.sq,t.tq=this.tq,t.uq=this.uq,t.wp=this.wp,t.xo=this.xo,t.Ko=this.Ko,t.No=this.No,t.Oo=this.Oo,t.el=this.el,t.Oq=this.Oq,t.G=null!==this.G?this.G.copy():null},Ra.prototype.Zg=function(t){sa.prototype.Zg.call(this,t),this.Ig=t.Ig,this.Wg=t.Wg,t.Qd=null,t.zb(),t.fm=this.fm,t.ze=this.ze};var vd;Ra.Normal=vd=Z(Ra,"Normal",1),Ra.Orthogonal=Z(Ra,"Orthogonal",2),Ra.AvoidsNodes=Z(Ra,"AvoidsNodes",6);var yd;Ra.AvoidsNodesStraight=yd=Z(Ra,"AvoidsNodesStraight",7);var gd;Ra.None=gd=Z(Ra,"None",0);var md;Ra.Bezier=md=Z(Ra,"Bezier",9);var xd;Ra.JumpGap=xd=Z(Ra,"JumpGap",10);var bd;Ra.JumpOver=bd=Z(Ra,"JumpOver",11);var wd;Ra.End=wd=Z(Ra,"End",17);var kd;Ra.Scale=kd=Z(Ra,"Scale",18);var Md;Ra.Stretch=Md=Z(Ra,"Stretch",19);var Td;Ra.OrientAlong=Td=Z(Ra,"OrientAlong",21);var Sd;Ra.OrientPlus90=Sd=Z(Ra,"OrientPlus90",22);var Cd;Ra.OrientMinus90=Cd=Z(Ra,"OrientMinus90",23);var Nd;Ra.OrientOpposite=Nd=Z(Ra,"OrientOpposite",24);var Pd;Ra.OrientUpright=Pd=Z(Ra,"OrientUpright",25);var jd;Ra.OrientPlus90Upright=jd=Z(Ra,"OrientPlus90Upright",26);var Ld;Ra.OrientMinus90Upright=Ld=Z(Ra,"OrientMinus90Upright",27);var Dd;Ra.OrientUpright45=Dd=Z(Ra,"OrientUpright45",28),Ra.prototype.Xd=function(){this.G=new Mh},Ra.prototype.qk=function(){var t=this.M;if(null!==t){var i=t.findVisibleNode();if(null!==i&&(t=i),$r(t)||ga(t))return!1}return t=this.R,null!==t&&(i=t.findVisibleNode(),null!==i&&(t=i),$r(t)||ga(t))?!1:!0},Ra.prototype.Vy=function(){return!1},Ra.prototype.$c=function(){return!1},Ra.prototype.computeAngle=function(t,i,n){switch(t=0,i){default:case gd:t=0;break;case Td:t=n;break;case Sd:t=n+90;break;case Cd:t=n-90;break;case Nd:t=n+180;break;case Pd:t=Qf.cs(n),t>90&&270>t&&(t-=180);break;case jd:t=Qf.cs(n+90),t>90&&270>t&&(t-=180);break;case Ld:t=Qf.cs(n-90),t>90&&270>t&&(t-=180);break;case Dd:if(t=Qf.cs(n),t>45&&135>t||t>225&&315>t)return 0;t>90&&270>t&&(t-=180)}return Qf.cs(t)},K(Ra,{M:"fromNode"},function(){return this.mf},function(t){var i=this.mf;if(i!==t){var n=this.Jc;null!==i&&(this.xf!==i&&Da(i,this,n),lh(this),this.v(sd)),this.mf=t,this.rh=null,this.zb();var e=this.g;if(null!==e){var o=this.data,r=e.U;if(null!==o)if(r instanceof xn){var s=null!==t?t.data:null;r.zv(o,r.$a(s))}else r instanceof wn&&(s=null!==t?t.data:null,e.Lc?r.wg(o,r.$a(s)):(null!==i&&r.wg(i.data,void 0),r.wg(s,r.$a(null!==this.xf?this.xf.data:null))))}o=this.Jc,r=this.gC,null!==r&&(s=!0,null!==e&&(s=e.ya,e.ya=!0),r(this,n,o),null!==e&&(e.ya=s)),null!==t&&(this.xf!==t&&La(t,this,o),hh(this),this.v(rd)),this.h("fromNode",i,t),Ia(this)}}),K(Ra,{Gf:"fromPortId"},function(){return this.Ig},function(t){var i=this.Ig;if(i!==t){var n=this.Jc;null!==n&&ja(this.M,n),lh(this),this.Ig=t;var e=this.Jc;null!==e&&ja(this.M,e);var o=this.g;if(null!==o){var r=this.data,s=o.U;null!==r&&s instanceof xn&&s.Sy(r,t)}n!==e&&(this.rh=null,this.zb(),r=this.gC,null!==r&&(s=!0,null!==o&&(s=o.ya,o.ya=!0),r(this,n,e),null!==o&&(o.ya=s))),hh(this),this.h("fromPortId",i,t)}}),Y(Ra,{Jc:"fromPort"},function(){var t=this.mf;return null===t?null:t.fk(this.Ig)}),K(Ra,{gC:"fromPortChanged"},function(){return this.ap},function(t){var i=this.ap;i!==t&&(null!==t&&h(t,"function",Ra,"fromPortChanged"),this.ap=t,this.h("fromPortChanged",i,t))}),K(Ra,{R:"toNode"},function(){return this.xf},function(t){var i=this.xf;if(i!==t){var n=this.yd;null!==i&&(this.mf!==i&&Da(i,this,n),lh(this),this.v(sd)),this.xf=t,this.rh=null,this.zb();var e=this.g;if(null!==e){var o=this.data,r=e.U;if(null!==o)if(r instanceof xn){var s=null!==t?t.data:null;r.Bv(o,r.$a(s))}else r instanceof wn&&(s=null!==t?t.data:null,e.Lc?(null!==i&&r.wg(i.data,void 0),r.wg(s,r.$a(null!==this.mf?this.mf.data:null))):r.wg(o,r.$a(s)))}o=this.yd,r=this.yD,null!==r&&(s=!0,null!==e&&(s=e.ya,e.ya=!0),r(this,n,o),null!==e&&(e.ya=s)),null!==t&&(this.mf!==t&&La(t,this,o),hh(this),this.v(rd)),this.h("toNode",i,t),Ia(this)}}),K(Ra,{yg:"toPortId"},function(){return this.Wg},function(t){var i=this.Wg;if(i!==t){var n=this.yd;null!==n&&ja(this.R,n),lh(this),this.Wg=t;var e=this.yd;null!==e&&ja(this.R,e);var o=this.g;if(null!==o){var r=this.data,s=o.U;null!==r&&s instanceof xn&&s.Wy(r,t)}n!==e&&(this.rh=null,this.zb(),r=this.yD,null!==r&&(s=!0,null!==o&&(s=o.ya,o.ya=!0),r(this,n,e),null!==o&&(o.ya=s))),hh(this),this.h("toPortId",i,t)}}),Y(Ra,{yd:"toPort"},function(){var t=this.xf;return null===t?null:t.fk(this.Wg)}),K(Ra,{yD:"toPortChanged"},function(){return this.Xq},function(t){var i=this.Xq;i!==t&&(null!==t&&h(t,"function",Ra,"toPortChanged"),this.Xq=t,this.h("toPortChanged",i,t))}),K(Ra,{Za:"fromSpot"},function(){return null!==this.G?this.G.oi:bf},function(t){null===this.G&&this.Xd();var i=this.G.oi;i.A(t)||(t=t.O(),this.G.oi=t,this.h("fromSpot",i,t),this.zb())}),K(Ra,{gk:"fromEndSegmentLength"},function(){return null!==this.G?this.G.mi:0/0},function(t){null===this.G&&this.Xd();var i=this.G.mi;i!==t&&(0>t&&c(t,">= 0",Ra,"fromEndSegmentLength"),this.G.mi=t,this.h("fromEndSegmentLength",i,t),this.zb())}),K(Ra,{Er:"fromEndSegmentDirection"},function(){return null!==this.G?this.G.li:ud},function(t){null===this.G&&this.Xd();var i=this.G.li;i!==t&&(this.G.li=t,this.h("fromEndSegmentDirection",i,t),this.zb())}),K(Ra,{Fr:"fromShortLength"},function(){return null!==this.G?this.G.ni:0/0},function(t){null===this.G&&this.Xd();var i=this.G.ni;i!==t&&(this.G.ni=t,this.h("fromShortLength",i,t),this.zb())}),K(Ra,{ab:"toSpot"},function(){return null!==this.G?this.G.Qi:bf},function(t){null===this.G&&this.Xd();var i=this.G.Qi;i.A(t)||(t=t.O(),this.G.Qi=t,this.h("toSpot",i,t),this.zb())}),K(Ra,{Dk:"toEndSegmentLength"},function(){return null!==this.G?this.G.Oi:0/0},function(t){null===this.G&&this.Xd();var i=this.G.Oi;i!==t&&(0>t&&c(t,">= 0",Ra,"toEndSegmentLength"),this.G.Oi=t,this.h("toEndSegmentLength",i,t),this.zb())}),K(Ra,{xs:"toEndSegmentDirection"},function(){return null!==this.G?this.G.Ni:ud},function(t){null===this.G&&this.Xd();var i=this.G.Ni;i!==t&&(this.G.Ni=t,this.h("toEndSegmentDirection",i,t),this.zb())}),K(Ra,{zs:"toShortLength"},function(){return null!==this.G?this.G.Pi:0/0},function(t){null===this.G&&this.Xd();var i=this.G.Pi;i!==t&&(this.G.Pi=t,this.h("toShortLength",i,t),this.zb())}),Ra.prototype.mk=function(){var t=this.Ba;null!==t&&this.M!==t&&this.R!==t&&sa.prototype.mk.call(this)},Ra.prototype.getOtherNode=Ra.prototype.Vx=function(t){var i=this.M;return t===i?this.R:i},Ra.prototype.getOtherPort=function(t){var i=this.Jc;return t===i?this.yd:i},Y(Ra,{dI:"isLabeledLink"},function(){return null===this.Od?!1:0<this.Od.count}),Y(Ra,{Kf:"labelNodes"},function(){return null===this.Od?pf:this.Od.i}),Ra.prototype.Ir=function(t){if(sa.prototype.Ir.call(this,t),oh(this)&&sh(this,this.Q),!t){t=this.mf;var i=this.xf;null!==t&&(La(t,this,this.Jc),hh(this)),null!==i&&(La(i,this,this.yd),hh(this))}},Ra.prototype.Jr=function(t){if(sa.prototype.Jr.call(this,t),oh(this)&&sh(this,this.Q),!t){t=this.mf;var i=this.xf;null!==t&&(Da(t,this,this.Jc),lh(this)),null!==i&&(Da(i,this,this.yd),lh(this))}},Ra.prototype.El=function(){if(this.yf=!0,null!==this.Od){var t=this.g;if(null===t)return;for(var i=this.Od.copy().i;i.next();)t.remove(i.value)}i=this.data,null!==i&&(t=this.g,null!==t&&(t=t.U,t instanceof xn?t.Ly(i):t instanceof wn&&t.wg(i,void 0)))},Ra.prototype.updateRelationshipsFromData=function(){var t=this.data;if(null!==t){var i=this.g;if(null!==i){var n=i.U;if(n instanceof xn){var e=n.ik(t),o=i.pe(e),r=this.M;o!==r&&(o=null!==r?n.$a(r.data):void 0,r=n.Nn,"function"==typeof r?r(t,o):t[r]=o,n.zv(t,e)),e=n.lk(t),o=i.pe(e),r=this.R,o!==r&&(o=null!==r?n.$a(r.data):void 0,r=n.Pn,"function"==typeof r?r(t,o):t[r]=o,n.Bv(t,e));var s=n.$i(t);if(0<s.length||0<this.Kf.count){if(1===s.length&&1===this.Kf.count&&(i=s[0],e=this.Kf.first(),n.$a(e.data)===i))return;var e=(new di).md(s),a=new di;this.Kf.each(function(t){null!==t.data&&(t=n.$a(t.data),void 0!==t&&a.add(t))}),i=a.copy(),i.TC(e),e=e.copy(),e.TC(a),(0<i.count||0<e.count)&&(s.length=0,a.each(function(t){s.push(t)}),i.each(function(i){n.WC(t,i)}),e.each(function(i){n.Ax(t,i)}))}}}}},Ra.prototype.move=Ra.prototype.move=function(t){var i=this.position,n=i.x;for(isNaN(n)&&(n=0),i=i.y,isNaN(i)&&(i=0),n=t.x-n,i=t.y-i,sa.prototype.move.call(this,t),this.uk(n,i),t=this.Kf;t.next();){var e=t.value,o=e.position;e.moveTo(o.x+n,o.y+i)}},K(Ra,{rG:"relinkableFrom"},function(){return this.sq},function(t){var i=this.sq;i!==t&&(this.sq=t,this.h("relinkableFrom",i,t),this.rd())}),K(Ra,{sG:"relinkableTo"},function(){return this.tq},function(t){var i=this.tq;i!==t&&(this.tq=t,this.h("relinkableTo",i,t),this.rd())}),Ra.prototype.canRelinkFrom=function(){if(!this.rG)return!1;var t=this.layer;return null===t?!0:t.tl?(t=t.g,null===t||t.tl?!0:!1):!1},Ra.prototype.canRelinkTo=function(){if(!this.sG)return!1;var t=this.layer;return null===t?!0:t.tl?(t=t.g,null===t||t.tl?!0:!1):!1},K(Ra,{ks:"resegmentable"},function(){return this.uq},function(t){var i=this.uq;i!==t&&(this.uq=t,this.h("resegmentable",i,t),this.rd())}),K(Ra,{cc:"isTreeLink"},function(){return this.wp},function(t){var i=this.wp;i!==t&&(this.wp=t,this.h("isTreeLink",i,t),null!==this.M&&Aa(this.M),null!==this.R&&Aa(this.R))}),Y(Ra,{path:"path"},function(){var t=this.Ze();return t instanceof Ps?t:null}),Y(Ra,{Rl:"routeBounds"},function(){this.updateRoute();var t=new Si,i=1/0,n=1/0,e=this.Z;if(0===e)t.k(0/0,0/0,0,0);else{if(1===e)e=this.j(0),i=Math.min(e.x,i),n=Math.min(e.y,n),t.k(e.x,e.y,0,0);else if(2===e){var o=this.j(0),r=this.j(1),i=Math.min(o.x,r.x),n=Math.min(o.y,r.y);t.k(o.x,o.y,0,0),t.$h(r)}else if(this.computeCurve()===md&&e>=3&&!this.Ib)if(o=this.j(0),i=o.x,n=o.y,t.k(i,n,0,0),3===e)e=this.j(1),i=Math.min(e.x,i),n=Math.min(e.y,n),r=this.j(2),i=Math.min(r.x,i),n=Math.min(r.y,n),Qf.rn(o.x,o.y,e.x,e.y,e.x,e.y,r.x,r.y,.5,t);else for(var s=3;e>s;s+=3){var a=this.j(s-2);s+3>=e&&(s=e-1);var h=this.j(s-1),r=this.j(s);Qf.rn(o.x,o.y,a.x,a.y,h.x,h.y,r.x,r.y,.5,t),i=Math.min(r.x,i),n=Math.min(r.y,n),o=r}else for(o=this.j(0),r=this.j(1),i=Math.min(o.x,r.x),n=Math.min(o.y,r.y),t.k(o.x,o.y,0,0),t.$h(r),s=2;e>s;s++)o=this.j(s),i=Math.min(o.x,i),n=Math.min(o.y,n),t.$h(o);this.qx.k(i-t.x,n-t.y)}return this.ax=t}),Y(Ra,{GC:"midPoint"},function(){return this.updateRoute(),this.computeMidPoint(new wi)}),Ra.prototype.computeMidPoint=function(t){var i=this.Z;if(0===i)return t.assign(Qf.RD),t;if(1===i)return t.assign(this.j(0)),t;if(2===i){var n=this.j(0),e=this.j(1);return t.k((n.x+e.x)/2,(n.y+e.y)/2),t}if(this.computeCurve()===md&&i>=3&&!this.Ib){if(3===i)return this.j(1);var i=(i-1)/3|0,o=3*(i/2|0);return 1===i%2?(n=this.j(o),e=this.j(o+1),i=this.j(o+2),o=this.j(o+3),Qf.DE(n.x,n.y,e.x,e.y,i.x,i.y,o.x,o.y,t)):t.assign(this.j(o)),t}for(var o=0,r=E(),s=0;i-1>s;s++)n=0,n=this.j(s),e=this.j(s+1),Qf.Sa(n.x,e.x)?(n=e.y-n.y,0>n&&(n=-n)):Qf.Sa(n.y,e.y)?(n=e.x-n.x,0>n&&(n=-n)):n=Math.sqrt(n.Xi(e)),r.push(n),o+=n;for(e=s=n=0;o/2>n&&i>s&&(e=r[s],!(n+e>o/2));)n+=e,s++;return R(r),i=this.j(s),r=this.j(s+1),i.x===r.x?i.y>r.y?t.k(i.x,i.y-(o/2-n)):t.k(i.x,i.y+(o/2-n)):i.y===r.y?i.x>r.x?t.k(i.x-(o/2-n),i.y):t.k(i.x+(o/2-n),i.y):(o=(o/2-n)/e,t.k(i.x+o*(r.x-i.x),i.y+o*(r.y-i.y))),t},Y(Ra,{FC:"midAngle"},function(){return this.updateRoute(),this.computeMidAngle()}),Ra.prototype.computeMidAngle=function(){var t=this.Z;if(2>t)return 0/0;if(this.computeCurve()===md&&t>=4&&!this.Ib){var i=(t-1)/3|0,n=3*(i/2|0);if(1===i%2){var n=Math.floor(n),t=this.j(n),i=this.j(n+1),e=this.j(n+2),n=this.j(n+3);return Qf.CE(t.x,t.y,i.x,i.y,e.x,e.y,n.x,n.y)}if(n>0&&t>n+1)return t=this.j(n-1),i=this.j(n+1),t.Rh(i)}if(e=t/2|0,0===t%2)return t=this.j(e-1),i=this.j(e),t.Rh(i);var t=this.j(e-1),i=this.j(e),e=this.j(e+1),n=t.Xi(i),o=i.Xi(e);return n>o?t.Rh(i):i.Rh(e)},K(Ra,{points:"points"},function(){return this.oc},function(t){var i=this.oc;if(i!==t){var n=null;if(Array.isArray(t)){var e=0===t.length%2;if(e)for(var o=0;o<t.length;o++)if("number"!=typeof t[o]||isNaN(t[o])){e=!1;break}if(e)for(n=new ci(wi),e=0;e<t.length/2;e++)o=new wi(t[2*e],t[2*e+1]).freeze(),n.add(o);else{for(var s=!0,e=0;e<t.length;e++)if(o=t[e],!y(o)||"number"!=typeof o.x||isNaN(o.x)||"number"!=typeof o.y||isNaN(o.y)){s=!1;break}if(s)for(n=new ci(wi),e=0;e<t.length;e++)o=t[e],n.add(new wi(o.x,o.y).freeze());else r("Link.points array must contain only an even number of numbers or objects with x and y properties, not: "+t)}}else if(t instanceof ci)for(n=t.copy(),t=n.i;t.next();)t.value.freeze();else r("Link.points value is not an instance of List or Array: "+t);n.freeze(),this.oc=n,this.Ed(),Ha(this),this.g&&this.g.qb.Gc&&(this.an=n),this.h("points",i,n)}}),Y(Ra,{Z:"pointsCount"},function(){return this.oc.count}),Ra.prototype.getPoint=Ra.prototype.j=function(t){return this.oc.l[t]},Ra.prototype.setPoint=Ra.prototype.Pe=function(t,i){null===this.Qd&&r("Call Link.startRoute before modifying the points of the route."),this.oc.Rf(t,i)},Ra.prototype.setPointAt=Ra.prototype.L=function(t,i,n){null===this.Qd&&r("Call Link.startRoute before modifying the points of the route."),this.oc.Rf(t,new wi(i,n))},Ra.prototype.insertPoint=function(t,i){null===this.Qd&&r("Call Link.startRoute before modifying the points of the route."),this.oc.qd(t,i)},Ra.prototype.insertPointAt=Ra.prototype.n=function(t,i,n){null===this.Qd&&r("Call Link.startRoute before modifying the points of the route."),this.oc.qd(t,new wi(i,n))},Ra.prototype.addPoint=Ra.prototype.Xg=function(t){null===this.Qd&&r("Call Link.startRoute before modifying the points of the route."),this.oc.add(t)},Ra.prototype.addPointAt=Ra.prototype.Vj=function(t,i){null===this.Qd&&r("Call Link.startRoute before modifying the points of the route."),this.oc.add(new wi(t,i))},Ra.prototype.removePoint=Ra.prototype.XC=function(t){null===this.Qd&&r("Call Link.startRoute before modifying the points of the route."),this.oc.Dc(t)},Ra.prototype.clearPoints=Ra.prototype.vn=function(){null===this.Qd&&r("Call Link.startRoute before modifying the points of the route."),this.oc.clear()},Ra.prototype.movePoints=Ra.prototype.uk=function(t,i){for(var n=new ci(wi),e=this.oc.i;e.next();){var o=e.value;n.add(new wi(o.x+t,o.y+i).freeze())}n.freeze(),e=this.oc,this.oc=n,this.Ed(),Ha(this),this.g&&this.g.qb.Gc&&(this.an=n),this.h("points",e,n)},Ra.prototype.startRoute=Ra.prototype.Ak=function(){null===this.Qd&&(this.Qd=this.oc,this.oc=this.oc.copy())},Ra.prototype.commitRoute=Ra.prototype.Nh=function(){if(null!==this.Qd){for(var t=this.Qd,i=this.oc,n=1/0,e=1/0,o=t.l,r=o.length,s=0;r>s;s++)var a=o[s],n=Math.min(a.x,n),e=Math.min(a.y,e);for(var h=1/0,l=1/0,u=i.l,f=u.length,s=0;f>s;s++)a=u[s],h=Math.min(a.x,h),l=Math.min(a.y,l),a.freeze();if(i.freeze(),f===r){for(s=0;f>s;s++)if(r=o[s],a=u[s],r.x-n!==a.x-h||r.y-e!==a.y-l){this.Ed();break}}else this.Ed();this.Qd=null,this.g&&this.g.qb.Gc&&(this.an=i),Ha(this),this.h("points",t,i)}},Ra.prototype.rollbackRoute=Ra.prototype.xG=function(){null!==this.Qd&&(this.oc=this.Qd,this.Qd=null)},Ra.prototype.invalidateRoute=Ra.prototype.zb=function(){if(!(this.mx||this.g&&this.g.V.Ua)){var t=this.path;null!==t&&(this.yf=!1,this.Ed(),t.H())}},K(Ra,{mo:null},function(){return this.mx},function(t){this.mx=t}),Ra.prototype.updateRoute=function(){if(!this.yf&&!this.Zv){var t=!0;try{this.Zv=!0,this.Ak(),t=this.computePoints()}finally{this.Zv=!1,t?this.Nh():this.xG()}}},Ra.prototype.computePoints=function(){var t=this.g;if(null===t)return!1;var i=this.M,n=null;if(null===i?(t.fl||(t.Xt=new Ps,t.Xt.ka=Qf.so,t.Xt.Na=0,t.fl=new Na,t.fl.add(t.Xt),t.fl.Ge()),this.nm&&(t.fl.position=t.fl.location=this.nm,t.fl.Ge(),i=t.fl,n=t.Xt)):n=this.Jc,null!==n){var e=ts(n);e!==i&&i.qa()?n=e:(e=i.findVisibleNode(),null!==e&&e!==i?(i=e,n=e.fk("")):i=e)}if(this.cB=i,null===i||null===n||!i.location.w())return!1;var e=this.R,o=null;if(null===e?(t.gl||(t.Yt=new Ps,t.Yt.ka=Qf.so,t.Yt.Na=0,t.gl=new Na,t.gl.add(t.Yt),t.gl.Ge()),this.rm&&(t.gl.position=t.gl.location=this.rm,t.gl.Ge(),e=t.gl,o=t.Yt)):o=this.yd,null!==o&&(t=ts(o),t!==e&&e.qa()?o=t:(t=e.findVisibleNode(),null!==t&&t!==e?(e=t,o=t.fk("")):e=t)),this.eB=e,null===e||null===o||!e.location.w())return!1;var t=this.Z,r=Ya(this,n),s=Wa(this,o),a=n===o&&null!==n,h=this.Ib,l=this.ne===md;
this.rh=a&&!h?l=!0:!1;var u=this.hr===gd||a;if(h||r!==xf||s!==xf||a){l=this.nk,u&&(h&&l||a)&&this.vn();var f=a?this.computeCurviness():0,c=this.getLinkPoint(i,n,r,!0,h,e,o),p=0,d=0,v=0;if(h||r!==xf||a){var y=this.computeEndSegmentLength(i,n,r,!0),v=this.getLinkDirection(i,n,c,r,!0,h,e,o);if(a&&(v-=h?90:30,0>f&&(v-=180)),0>v?v+=360:v>=360&&(v-=360),a&&(y+=Math.abs(f)),0===v?p=y:90===v?d=y:180===v?p=-y:270===v?d=-y:(p=y*Math.cos(v*Math.PI/180),d=y*Math.sin(v*Math.PI/180)),r.Gd()&&a){var g=n.Ra(Sf,C()),m=N(g.x+1e3*p,g.y+1e3*d);this.getLinkPointFromPoint(i,n,g,m,!0,c),P(g),P(m)}}var y=this.getLinkPoint(e,o,s,!1,h,i,n),x=0,b=0,w=0;(h||s!==xf||a)&&(g=this.computeEndSegmentLength(e,o,s,!1),w=this.getLinkDirection(e,o,y,s,!1,h,i,n),a&&(w+=h?0:30,0>f&&(w+=180)),0>w?w+=360:w>=360&&(w-=360),a&&(g+=Math.abs(f)),0===w?x=g:90===w?b=g:180===w?x=-g:270===w?b=-g:(x=g*Math.cos(w*Math.PI/180),b=g*Math.sin(w*Math.PI/180)),s.Gd()&&a&&(g=o.Ra(Sf,C()),m=N(g.x+1e3*x,g.y+1e3*b),this.getLinkPointFromPoint(e,o,g,m,!1,y),P(g),P(m))),o=c,(h||r!==xf||a)&&(o=new wi(c.x+p,c.y+d)),n=y,(h||s!==xf||a)&&(n=new wi(y.x+x,y.y+b)),!u&&!h&&r===xf&&t>3&&this.adjustPoints(0,c,t-2,n)?this.Pe(t-1,y):!u&&!h&&s===xf&&t>3&&this.adjustPoints(1,o,t-1,y)?this.Pe(0,c):!u&&!h&&t>4&&this.adjustPoints(1,o,t-2,n)?(this.Pe(0,c),this.Pe(t-1,y)):!u&&h&&t>=6&&!l&&this.adjustPoints(1,o,t-2,n)?(this.Pe(0,c),this.Pe(t-1,y)):(this.vn(),this.Xg(c),(h||r!==xf||a)&&this.Xg(o),h&&this.addOrthoPoints(o,v,n,w,i,e),(h||s!==xf||a)&&this.Xg(n),this.Xg(y))}else r=!1,!u&&t>=3&&(u=this.getLinkPoint(i,n,xf,!0,!1,e,o),s=this.getLinkPoint(e,o,xf,!1,!1,i,n),r=this.adjustPoints(0,u,t-1,s))&&(u=this.getLinkPoint(i,n,xf,!0,!1,e,o),s=this.getLinkPoint(e,o,xf,!1,!1,i,n),this.adjustPoints(0,u,t-1,s)),r||(this.vn(),l?(t=this.getLinkPoint(i,n,xf,!0,!1,e,o),u=this.getLinkPoint(e,o,xf,!1,!1,i,n),r=u.x-t.x,s=u.y-t.y,a=this.computeCurviness(),l=h=0,c=t.x+r/3,v=t.y+s/3,p=c,d=v,Qf.q(s,0)?d=r>0?d-a:d+a:(h=-r/s,l=Math.sqrt(a*a/(h*h+1)),0>a&&(l=-l),p=(0>s?-1:1)*l+c,d=h*(p-c)+v),c=t.x+2*r/3,v=t.y+2*s/3,y=c,x=v,Qf.q(s,0)?x=r>0?x-a:x+a:(y=(0>s?-1:1)*l+c,x=h*(y-c)+v),this.vn(),this.Xg(t),this.Vj(p,d),this.Vj(y,x),this.Xg(u),this.Pe(0,this.getLinkPoint(i,n,xf,!0,!1,e,o)),this.Pe(3,this.getLinkPoint(e,o,xf,!1,!1,i,n))):(t=e,e=this.getLinkPoint(i,n,xf,!0,!1,t,o),o=this.getLinkPoint(t,o,xf,!1,!1,i,n),this.hasCurviness()?(s=o.x-e.x,i=o.y-e.y,n=this.computeCurviness(),t=e.x+s/2,u=e.y+i/2,r=t,a=u,Qf.q(i,0)?a=s>0?a-n:a+n:(s=-s/i,r=Math.sqrt(n*n/(s*s+1)),0>n&&(r=-r),r=(0>i?-1:1)*r+t,a=s*(r-t)+u),this.Xg(e),this.Vj(r,a)):this.Xg(e),this.Xg(o)));return!0},Ra.prototype.getLinkPointFromPoint=function(t,i,n,e,o,r){if(void 0===r&&(r=new wi),null===t||null===i)return r.assign(n),r;t.qa()||(o=t.findVisibleNode(),null!==o&&o!==t&&(i=o.port));var s=o=0,a=0,h=0;if(t=null,o=i.I,null===o||o.jf()||(o=o.I),null===o)o=e.x,s=e.y,a=n.x,h=n.y;else{t=o.We,o=1/(t.m11*t.m22-t.m12*t.m21);var a=t.m22*o,h=-t.m12*o,l=-t.m21*o,u=t.m11*o,f=o*(t.m21*t.dy-t.m22*t.dx),c=o*(t.m12*t.dx-t.m11*t.dy);o=e.x*a+e.y*l+f,s=e.x*h+e.y*u+c,a=n.x*a+n.y*l+f,h=n.x*h+n.y*u+c}return i.Fn(o,s,a,h,r),null!==t&&r.transform(t),r},Ra.prototype.getLinkPoint=function(t,i,n,e,o,r,s,a){if(void 0===a&&(a=new wi),n.Kc())return i.Ra(n,a),a;if(n.Jn()&&(n=Ka(this,i),null!==n)){if(a.assign(n.On),o&&this.uv===yd){var h=Ka(this,s);if(n.Cl<h.Cl){n=C();var h=C(),l=new Si(i.Ra(wf,n),i.Ra(jf,h)),u=this.computeSpot(!e);t=this.getLinkPoint(r,s,u,!e,o,t,i,h),t.x>=l.x&&t.x<=l.x+l.width?a.x=t.x:t.y>=l.y&&t.y<=l.y+l.height&&(a.y=t.y),P(n),P(h)}}return a}return r=i.Ra(Sf,C()),h=n=null,this.Z>(o?6:2)?(h=this.j(e?1:this.Z-2),o&&(h=Ua(r,h.copy()))):(n=C(),h=s.Ra(Sf,n),o&&(h=Ua(r,h))),this.getLinkPointFromPoint(t,i,r,h,e,a),P(r),null!==n&&P(n),a},Ra.prototype.getLinkDirection=function(t,i,n,e,o,r,s,a){t:if(e.Kc())n=e.x>e.y?e.x>1-e.y?0:e.x<1-e.y?270:315:e.x<e.y?e.x>1-e.y?90:e.x<1-e.y?180:135:.5>e.x?225:.5<e.x?45:0;else{if(e.Jn()){var h=Ka(this,i);if(null!==h)switch(h.xd){case 1:n=270;break t;case 2:n=180;break t;default:case 4:n=0;break t;case 8:n=90;break t}}var h=i.Ra(Sf,C()),l=null,u=null;this.Z>(r?6:2)?(u=this.j(o?1:this.Z-2),u=r?Ua(h,u.copy()):n):(l=C(),u=a.Ra(Sf,l)),n=0,n=Math.abs(u.x-h.x)>Math.abs(u.y-h.y)?u.x>=h.x?0:180:u.y>=h.y?90:270,P(h),null!==l&&P(l)}switch(e.Gd()&&s.bh(t)&&(n+=180,n>=360&&(n-=360)),t=ud,t=o?this.Er:this.xs,t===ud&&(t=o?i.Er:i.xs),t){case fd:i=i.hk(),n+=i,n>=360&&(n-=360);break;case ud:case cd:if(i=i.hk(),0===i)break;i>=45&&135>i?n+=90:i>=135&&225>i?n+=180:i>=225&&315>i&&(n+=270),n>=360&&(n-=360)}return n},Ra.prototype.computeEndSegmentLength=function(t,i,n,e){return null!==i&&n.Jn()&&(t=Ka(this,i),null!==t)?t.Pu:(t=0/0,t=e?this.gk:this.Dk,null!==i&&isNaN(t)&&(t=e?i.gk:i.Dk),isNaN(t)&&(t=10),t)},Ra.prototype.computeSpot=function(t){return t?Ya(this,this.Jc):Wa(this,this.yd)},Ra.prototype.computeOtherPoint=function(t,i){var n,e=i.Ra(Sf);return n=i.nq,n=null!==n?wh(n,this):null,null!==n&&(e=n.On),e},Ra.prototype.computeShortLength=function(t){return t?Xa(this):Ja(this)},Ra.prototype.Zi=function(t,i,n,e,o,r){if(!1===this.Qf)return!1;void 0===i&&(i=null),void 0===n&&(n=null);var s=r;if(void 0===r&&(s=O(),s.reset()),s.multiply(this.transform),this.zl(t,s))return gs(this,i,n,o),void 0===r&&z(s),!0;if(this.If(t,s)){var a=!1;if(!this.$f)for(var h=this.la.l,l=h.length;l--;){var u=h[l];if(u.visible||u===this.Jb){var f=u.Q,c=this.sa;if(!(f.x>c.width||f.y>c.height||0>f.x+f.width||0>f.y+f.height)){if(f=O(),f.set(s),u instanceof rs)a=u.Zi(t,i,n,e,o,f);else if(this.path===u){var a=u,p=t,d=e,c=f;if(!1===a.Qf)a=!1;else if(c.multiply(a.transform),d)t:{var v=p,y=c;if(a.zl(v,y))a=!0;else{if(void 0===y&&(y=a.transform,v.Wi(a.Q))){a=!0;break t}var c=v.left,p=v.right,d=v.top,v=v.bottom,g=C(),m=C(),x=C(),b=O();b.set(y),b.KC(a.transform),b.by(),m.x=p,m.y=d,m.transform(b),g.x=c,g.y=d,g.transform(b),y=!1,zs(a,g,m,x)?y=!0:(g.x=p,g.y=v,g.transform(b),zs(a,g,m,x)?y=!0:(m.x=c,m.y=v,m.transform(b),zs(a,g,m,x)?y=!0:(g.x=c,g.y=d,g.transform(b),zs(a,g,m,x)&&(y=!0)))),z(b),P(g),P(m),P(x),a=y}}else a=a.zl(p,c)}else a=Fr(u,t,e,f);a&&(null!==i&&(u=i(u)),u&&(null===n||n(u))&&o.add(u)),z(f)}}}return void 0===r&&z(s),a||null!==this.background||null!==this.ul}return void 0===r&&z(s),!1},Y(Ra,{Ib:"isOrthogonal"},function(){return 2===(2&this.el.value)}),Y(Ra,{nk:"isAvoiding"},function(){return 4===(4&this.el.value)}),Ra.prototype.computeCurve=function(){if(null===this.rh){var t=this.Jc,i=this.Ib;this.rh=null!==t&&t===this.yd&&!i}return this.rh?md:this.ne},Ra.prototype.computeCorner=function(){if(this.ne===md)return 0;var t=this.Lx;return(isNaN(t)||0>t)&&(t=10),t},Ra.prototype.computeCurviness=function(){var t=this.Lu;if(isNaN(t)){var i=this.ze;if(0!==i){var t=10,n=this.g;null!==n&&(t=n.jv),n=Math.abs(i),t=t/2+((n-1)/2|0)*t,0===n%2&&(t=-t),0>i&&(t=-t)}else t=10}return t},Ra.prototype.computeThickness=function(){var t=this.path;return null!==t?Math.max(t.Na,1):1},Ra.prototype.hasCurviness=function(){return!isNaN(this.Lu)||0!==this.ze&&!this.Ib},Ra.prototype.adjustPoints=function(t,i,n,e){var o=this.hr;if(this.Ib){if(o===kd)return!1;o===Md&&(o=wd)}switch(o){case kd:var r=this.j(t),s=this.j(n);if(!r.A(i)||!s.A(e)){var o=r.x,r=r.y,a=s.x-o,h=s.y-r,l=Math.sqrt(a*a+h*h);if(!Qf.q(l,0)){var u=0;Qf.q(a,0)?u=0>h?-Math.PI/2:Math.PI/2:(u=Math.atan(h/Math.abs(a)),0>a&&(u=Math.PI-u));var s=i.x,f=i.y,h=e.x-s,c=e.y-f,p=Math.sqrt(h*h+c*c),a=0;for(Qf.q(h,0)?a=0>c?-Math.PI/2:Math.PI/2:(a=Math.atan(c/Math.abs(h)),0>h&&(a=Math.PI-a)),l=p/l,u=a-u,this.Pe(t,i),t+=1;n>t;t++)i=this.j(t),a=i.x-o,h=i.y-r,i=Math.sqrt(a*a+h*h),Qf.q(i,0)||(c=0,Qf.q(a,0)?c=0>h?-Math.PI/2:Math.PI/2:(c=Math.atan(h/Math.abs(a)),0>a&&(c=Math.PI-c)),a=c+u,i*=l,this.L(t,s+i*Math.cos(a),f+i*Math.sin(a)));this.Pe(n,e)}}return!0;case Md:if(r=this.j(t),f=this.j(n),!r.A(i)||!f.A(e)){var o=r.x,r=r.y,s=f.x,f=f.y,l=(s-o)*(s-o)+(f-r)*(f-r),a=i.x,u=i.y,h=e.x,c=e.y,p=0,d=1,p=0!==h-a?(c-u)/(h-a):9e9;for(0!==p&&(d=Math.sqrt(1+1/(p*p))),this.Pe(t,i),t+=1;n>t;t++){i=this.j(t);var v=i.x,y=i.y,g=.5;0!==l&&(g=((o-v)*(o-s)+(r-y)*(r-f))/l);var m=o+g*(s-o),x=r+g*(f-r);i=Math.sqrt((v-m)*(v-m)+(y-x)*(y-x)),p*(v-m)+x>y&&(i=-i),p>0&&(i=-i),v=a+g*(h-a),g=u+g*(c-u),0!==p?(i=v+i/d,this.L(t,i,g-(i-v)/p)):this.L(t,v,g+i)}this.Pe(n,e)}return!0;case wd:return this.Ib&&(o=this.j(t),r=this.j(t+1),s=this.j(t+2),Qf.q(o.y,r.y)?Qf.q(r.x,s.x)?this.L(t+1,r.x,i.y):Qf.q(r.y,s.y)&&this.L(t+1,i.x,r.y):Qf.q(o.x,r.x)&&(Qf.q(r.y,s.y)?this.L(t+1,i.x,r.y):Qf.q(r.x,s.x)&&this.L(t+1,r.x,i.y)),o=this.j(n),r=this.j(n-1),s=this.j(n-2),Qf.q(o.y,r.y)?Qf.q(r.x,s.x)?this.L(n-1,r.x,e.y):Qf.q(r.y,s.y)&&this.L(n-1,e.x,r.y):Qf.q(o.x,r.x)&&(Qf.q(r.y,s.y)?this.L(n-1,e.x,r.y):Qf.q(r.x,s.x)&&this.L(n-1,r.x,e.y))),this.Pe(t,i),this.Pe(n,e),!0;default:return!1}},Ra.prototype.addOrthoPoints=function(t,i,n,e,o,r){i=i>=-45&&45>i?0:i>=45&&135>i?90:i>=135&&225>i?180:270,e=e>=-45&&45>e?0:e>=45&&135>e?90:e>=135&&225>e?180:270;var s=o.Q.copy(),a=r.Q.copy();if(s.w()&&a.w()){s.$e(8,8),a.$e(8,8),s.$h(t),a.$h(n);var h,l;0===i?n.x>t.x||270===e&&n.y<t.y&&a.right>t.x||90===e&&n.y>t.y&&a.right>t.x?(h=new wi(n.x,t.y),l=new wi(n.x,(t.y+n.y)/2),180===e?(h.x=this.computeMidOrthoPosition(t.x,n.x,!1),l.x=h.x,l.y=n.y):270===e&&n.y<t.y||90===e&&n.y>t.y?(h.x=t.x<a.left?this.computeMidOrthoPosition(t.x,a.left,!1):t.x<a.right&&(270===e&&t.y<a.top||90===e&&t.y>a.bottom)?this.computeMidOrthoPosition(t.x,n.x,!1):a.right,l.x=h.x,l.y=n.y):0===e&&t.x<a.left&&t.y>a.top&&t.y<a.bottom&&(h.x=t.x,h.y=t.y<n.y?Math.min(n.y,a.top):Math.max(n.y,a.bottom),l.y=h.y)):(h=new wi(t.x,n.y),l=new wi((t.x+n.x)/2,n.y),(180===e||90===e&&n.y<s.top||270===e&&n.y>s.bottom)&&(180===e&&(a.na(t)||s.na(n))?h.y=this.computeMidOrthoPosition(t.y,n.y,!0):n.y<t.y&&(180===e||90===e)?h.y=this.computeMidOrthoPosition(s.top,Math.max(n.y,a.bottom),!0):n.y>t.y&&(180===e||270===e)&&(h.y=this.computeMidOrthoPosition(s.bottom,Math.min(n.y,a.top),!0)),l.x=n.x,l.y=h.y),h.y>s.top&&h.y<s.bottom&&(n.x>=s.left&&n.x<=t.x||t.x<=a.right&&t.x>=n.x?(90===e||270===e)&&(h=new wi(Math.max((t.x+n.x)/2,t.x),t.y),l=new wi(h.x,n.y)):(h.y=270===e||(0===e||180===e)&&n.y<t.y?Math.min(n.y,0===e?s.top:Math.min(s.top,a.top)):Math.max(n.y,0===e?s.bottom:Math.max(s.bottom,a.bottom)),l.x=n.x,l.y=h.y))):180===i?n.x<t.x||270===e&&n.y<t.y&&a.left<t.x||90===e&&n.y>t.y&&a.left<t.x?(h=new wi(n.x,t.y),l=new wi(n.x,(t.y+n.y)/2),0===e?(h.x=this.computeMidOrthoPosition(t.x,n.x,!1),l.x=h.x,l.y=n.y):270===e&&n.y<t.y||90===e&&n.y>t.y?(h.x=t.x>a.right?this.computeMidOrthoPosition(t.x,a.right,!1):t.x>a.left&&(270===e&&t.y<a.top||90===e&&t.y>a.bottom)?this.computeMidOrthoPosition(t.x,n.x,!1):a.left,l.x=h.x,l.y=n.y):180===e&&t.x>a.right&&t.y>a.top&&t.y<a.bottom&&(h.x=t.x,h.y=t.y<n.y?Math.min(n.y,a.top):Math.max(n.y,a.bottom),l.y=h.y)):(h=new wi(t.x,n.y),l=new wi((t.x+n.x)/2,n.y),(0===e||90===e&&n.y<s.top||270===e&&n.y>s.bottom)&&(0===e&&(a.na(t)||s.na(n))?h.y=this.computeMidOrthoPosition(t.y,n.y,!0):n.y<t.y&&(0===e||90===e)?h.y=this.computeMidOrthoPosition(s.top,Math.max(n.y,a.bottom),!0):n.y>t.y&&(0===e||270===e)&&(h.y=this.computeMidOrthoPosition(s.bottom,Math.min(n.y,a.top),!0)),l.x=n.x,l.y=h.y),h.y>s.top&&h.y<s.bottom&&(n.x<=s.right&&n.x>=t.x||t.x>=a.left&&t.x<=n.x?(90===e||270===e)&&(h=new wi(Math.min((t.x+n.x)/2,t.x),t.y),l=new wi(h.x,n.y)):(h.y=270===e||(0===e||180===e)&&n.y<t.y?Math.min(n.y,180===e?s.top:Math.min(s.top,a.top)):Math.max(n.y,180===e?s.bottom:Math.max(s.bottom,a.bottom)),l.x=n.x,l.y=h.y))):90===i?n.y>t.y||180===e&&n.x<t.x&&a.bottom>t.y||0===e&&n.x>t.x&&a.bottom>t.y?(h=new wi(t.x,n.y),l=new wi((t.x+n.x)/2,n.y),270===e?(h.y=this.computeMidOrthoPosition(t.y,n.y,!0),l.x=n.x,l.y=h.y):180===e&&n.x<t.x||0===e&&n.x>t.x?(h.y=t.y<a.top?this.computeMidOrthoPosition(t.y,a.top,!0):t.y<a.bottom&&(180===e&&t.x<a.left||0===e&&t.x>a.right)?this.computeMidOrthoPosition(t.y,n.y,!0):a.bottom,l.x=n.x,l.y=h.y):90===e&&t.y<a.top&&t.x>a.left&&t.x<a.right&&(h.x=t.x<n.x?Math.min(n.x,a.left):Math.max(n.x,a.right),h.y=t.y,l.x=h.x)):(h=new wi(n.x,t.y),l=new wi(n.x,(t.y+n.y)/2),(270===e||0===e&&n.x<s.left||180===e&&n.x>s.right)&&(270===e&&(a.na(t)||s.na(n))?h.x=this.computeMidOrthoPosition(t.x,n.x,!1):n.x<t.x&&(270===e||0===e)?h.x=this.computeMidOrthoPosition(s.left,Math.max(n.x,a.right),!1):n.x>t.x&&(270===e||180===e)&&(h.x=this.computeMidOrthoPosition(s.right,Math.min(n.x,a.left),!1)),l.x=h.x,l.y=n.y),h.x>s.left&&h.x<s.right&&(n.y>=s.top&&n.y<=t.y||t.y<=a.bottom&&t.y>=n.y?(0===e||180===e)&&(h=new wi(t.x,Math.max((t.y+n.y)/2,t.y)),l=new wi(n.x,h.y)):(h.x=180===e||(90===e||270===e)&&n.x<t.x?Math.min(n.x,90===e?s.left:Math.min(s.left,a.left)):Math.max(n.x,90===e?s.right:Math.max(s.right,a.right)),l.x=h.x,l.y=n.y))):n.y<t.y||180===e&&n.x<t.x&&a.top<t.y||0===e&&n.x>t.x&&a.top<t.y?(h=new wi(t.x,n.y),l=new wi((t.x+n.x)/2,n.y),90===e?(h.y=this.computeMidOrthoPosition(t.y,n.y,!0),l.x=n.x,l.y=h.y):180===e&&n.x<t.x||0===e&&n.x>=t.x?(h.y=t.y>a.bottom?this.computeMidOrthoPosition(t.y,a.bottom,!0):t.y>a.top&&(180===e&&t.x<a.left||0===e&&t.x>a.right)?this.computeMidOrthoPosition(t.y,n.y,!0):a.top,l.x=n.x,l.y=h.y):270===e&&t.y>a.bottom&&t.x>a.left&&t.x<a.right&&(h.x=t.x<n.x?Math.min(n.x,a.left):Math.max(n.x,a.right),h.y=t.y,l.x=h.x)):(h=new wi(n.x,t.y),l=new wi(n.x,(t.y+n.y)/2),(90===e||0===e&&n.x<s.left||180===e&&n.x>s.right)&&(90===e&&(a.na(t)||s.na(n))?h.x=this.computeMidOrthoPosition(t.x,n.x,!1):n.x<t.x&&(90===e||0===e)?h.x=this.computeMidOrthoPosition(s.left,Math.max(n.x,a.right),!1):n.x>t.x&&(90===e||180===e)&&(h.x=this.computeMidOrthoPosition(s.right,Math.min(n.x,a.left),!1)),l.x=h.x,l.y=n.y),h.x>s.left&&h.x<s.right&&(n.y<=s.bottom&&n.y>=t.y||t.y>=a.top&&t.y<=n.y?(0===e||180===e)&&(h=new wi(t.x,Math.min((t.y+n.y)/2,t.y)),l=new wi(n.x,h.y)):(h.x=180===e||(90===e||270===e)&&n.x<t.x?Math.min(n.x,270===e?s.left:Math.min(s.left,a.left)):Math.max(n.x,270===e?s.right:Math.max(s.right,a.right)),l.x=h.x,l.y=n.y)));var u=h,f=l;if(this.nk){var c,p=this.g;(c=null===p)||(p.qb.jg?c=!1:(c=p.Ea,c=c instanceof Fn?!c.iu||c.EF:!0),c=!c),c||s.na(n)&&!r.bh(o)||a.na(t)&&!o.bh(r)||o===r||this.layer.bc?t=!1:(o=lr(p,!0,this.Ba,null),o.Mn(Math.min(t.x,u.x),Math.min(t.y,u.y),Math.abs(t.x-u.x),Math.abs(t.y-u.y))&&o.Mn(Math.min(u.x,f.x),Math.min(u.y,f.y),Math.abs(u.x-f.x),Math.abs(u.y-f.y))&&o.Mn(Math.min(f.x,n.x),Math.min(f.y,n.y),Math.abs(f.x-n.x),Math.abs(f.y-n.y))?t=!1:(s=s.copy().fh(a),s.$e(2*o.un,2*o.sn),mh(o,t,i,n,e,s),a=ph(o,n.x,n.y),o.abort||999999!==a||(vh(o),a=o.tD,s.$e(o.un*a,o.sn*a),mh(o,t,i,n,e,s),a=ph(o,n.x,n.y)),o.abort||999999!==a||(vh(o),a=o.BC,s.$e(o.un*a,o.sn*a),mh(o,t,i,n,e,s),a=ph(o,n.x,n.y)),!o.abort&&999999===a&&o.KD&&(vh(o),mh(o,t,i,n,e,o.Qa),a=ph(o,n.x,n.y)),!o.abort&&999999>a&&0!==ph(o,n.x,n.y)?(Qa(this,o,n.x,n.y,e,!0),e=this.j(2),4>this.Z?(0===i||180===i?(e.x=t.x,e.y=n.y):(e.x=n.x,e.y=t.y),this.L(2,e.x,e.y),this.n(3,e.x,e.y)):(n=this.j(3),0===i||180===i?Qf.q(e.x,n.x)?(i=0===i?Math.max(e.x,t.x):Math.min(e.x,t.x),this.L(2,i,t.y),this.L(3,i,n.y)):Qf.q(e.y,n.y)?(Math.abs(t.y-e.y)<=o.sn/2&&(this.L(2,e.x,t.y),this.L(3,n.x,t.y)),this.n(2,e.x,t.y)):this.L(2,t.x,e.y):(90===i||270===i)&&(Qf.q(e.y,n.y)?(i=90===i?Math.max(e.y,t.y):Math.min(e.y,t.y),this.L(2,t.x,i),this.L(3,n.x,i)):Qf.q(e.x,n.x)?(Math.abs(t.x-e.x)<=o.un/2&&(this.L(2,t.x,e.y),this.L(3,t.x,n.y)),this.n(2,t.x,e.y)):this.L(2,e.x,t.y))),t=!0):t=!1))}else t=!1;t||(this.Xg(h),this.Xg(l))}},Ra.prototype.computeMidOrthoPosition=function(t,i){if(this.hasCurviness()){var n=this.computeCurviness();return(t+i)/2+n}return(t+i)/2},Ra.prototype.findClosestSegment=function(t){var i=t.x;t=t.y;for(var n=this.j(0),e=this.j(1),o=df(i,t,n.x,n.y,e.x,e.y),r=0,s=1;s<this.Z-1;s++){var n=this.j(s+1),a=df(i,t,e.x,e.y,n.x,n.y),e=n;o>a&&(r=s,o=a)}return r},Ra.prototype.invalidateGeometry=Ra.prototype.Ed=function(){this.za=null,this.H()},Y(Ra,{zc:"geometry"},function(){return null===this.za&&(this.updateRoute(),this.za=this.makeGeometry()),this.za}),Ra.prototype.Xr=function(){if(null===this.za&&!1!==this.yf){this.za=this.makeGeometry();var t=this.path;if(null!==t){t.za=this.za;for(var i=this.la.l,n=i.length,e=0;n>e;e++){var o=i[e];o!==t&&o.Jf&&o instanceof Ps&&(o.za=this.za)}}}},Ra.prototype.makeGeometry=function(){var t=this.Z;if(2>t){var i=new Yi(ic),n=new $i(0,0);return i.Ya.add(n),i}var e=!1,i=this.g;null!==i&&0!==i.V.de&&oh(this)&&(e=!0);var n=i=0,o=this.j(0).copy(),r=o.copy(),i=this.oc.l,s=this.computeCurve();if(s===md&&t>=3&&!Qf.Sa(this.ko,0))if(3===t)var a=this.j(1),i=Math.min(o.x,a.x),n=Math.min(o.y,a.y),a=this.j(2),i=Math.min(i,a.x),n=Math.min(n,a.y);else{if(this.Ib)for(a=0;t>a;a++)n=i[a],r.x=Math.min(n.x,r.x),r.y=Math.min(n.y,r.y);else for(a=3;t>a;a+=3)a+3>=t&&(a=t-1),i=this.j(a),r.x=Math.min(i.x,r.x),r.y=Math.min(i.y,r.y);i=r.x,n=r.y}else{for(a=0;t>a;a++)n=i[a],r.x=Math.min(n.x,r.x),r.y=Math.min(n.y,r.y);i=r.x,n=r.y}if(i-=this.qx.x,n-=this.qx.y,o.x-=i,o.y-=n,2===t){var h=this.j(1).copy();h.x-=i,h.y-=n,0!==Xa(this)&&_a(this,o,!0,r),0!==Ja(this)&&_a(this,h,!1,r),i=new Yi($f),i.ia=o.x,i.ja=o.y,i.s=h.x,i.u=h.y}else{if(h=B(),0!==Xa(this)&&_a(this,o,!0,r),ta(h,o.x,o.y,!1,!1),s===md&&t>=3&&!Qf.Sa(this.ko,0))if(3===t)a=this.j(1),t=a.x-i,e=a.y-n,a=this.j(2).copy(),a.x-=i,a.y-=n,0!==Ja(this)&&_a(this,a,!1,r),ea(h,t,e,t,e,a.x,a.y);else if(this.Ib){for(var r=new wi(i,n),o=this.j(1).copy(),s=new wi(i,n),t=new wi(i,n),e=this.j(0),l=null,u=this.ko/3,a=1;a<this.Z-1;a++){var l=this.j(a),f=e,c=l,p=this.j(th(this,l,a,!1));if(!(Qf.Sa(f.x,c.x)&&Qf.Sa(c.x,p.x)||Qf.Sa(f.y,c.y)&&Qf.Sa(c.y,p.y))){var d=u,v=s,y=t;isNaN(d)&&(d=this.ko/3);var g=f.x,f=f.y,m=c.x,c=c.y,x=p.x,p=p.y,b=d*$a(g,f,m,c),d=d*$a(m,c,x,p);Qf.Sa(f,c)&&Qf.Sa(m,x)&&(m>g?p>c?(v.x=m-b,v.y=c-b,y.x=m+d,y.y=c+d):(v.x=m-b,v.y=c+b,y.x=m+d,y.y=c-d):p>c?(v.x=m+b,v.y=c-b,y.x=m-d,y.y=c+d):(v.x=m+b,v.y=c+b,y.x=m-d,y.y=c-d)),Qf.Sa(g,m)&&Qf.Sa(c,p)&&(c>f?(x>m?(v.x=m-b,v.y=c-b,y.x=m+d):(v.x=m+b,v.y=c-b,y.x=m-d),y.y=c+d):(x>m?(v.x=m-b,v.y=c+b,y.x=m+d):(v.x=m+b,v.y=c+b,y.x=m-d),y.y=c-d)),(Qf.Sa(g,m)&&Qf.Sa(m,x)||Qf.Sa(f,c)&&Qf.Sa(c,p))&&(g=.5*(g+x),f=.5*(f+p),v.x=g,v.y=f,y.x=g,y.y=f),1===a?(o.x=.5*(e.x+l.x),o.y=.5*(e.y+l.y)):2===a&&Qf.Sa(e.x,this.j(0).x)&&Qf.Sa(e.y,this.j(0).y)&&(o.x=.5*(e.x+l.x),o.y=.5*(e.y+l.y)),ea(h,o.x-i,o.y-n,s.x-i,s.y-n,l.x-i,l.y-n),r.set(s),o.set(t),e=l}}a=e.x,e=e.y,r=this.j(this.Z-1),a=.5*(a+r.x),e=.5*(e+r.y),ea(h,t.x-i,t.y-n,a-i,e-n,r.x-i,r.y-n)}else for(a=3;t>a;a+=3)e=this.j(a-2),a+3>=t&&(a=t-1),r=this.j(a-1),o=this.j(a),a===t-1&&0!==Ja(this)&&(o=o.copy(),_a(this,o,!1,Qf.fj)),ea(h,e.x-i,e.y-n,r.x-i,r.y-n,o.x-i,o.y-n);else{for(r=C(),r.assign(this.j(0)),a=1;t>a;){if(a=th(this,r,a,a>1),v=this.j(a),a>=t-1){r!==v&&(0!==Ja(this)&&(v=v.copy(),_a(this,v,!1,Qf.fj)),ih(this,h,-i,-n,r,v,e));break}a=th(this,v,a+1,t-3>a),o=h,s=-i,l=-n,u=r,y=this.j(a),g=r,f=e,Qf.q(u.y,v.y)&&Qf.q(v.x,y.x)?(d=this.computeCorner(),d=Math.min(d,Math.abs(v.x-u.x)/2),d=m=Math.min(d,Math.abs(y.y-v.y)/2),Qf.q(d,0)?(ih(this,o,s,l,u,v,f),g.assign(v)):(c=v.x,x=v.y,p=c,b=x,c=v.x>u.x?v.x-d:v.x+d,b=y.y>v.y?v.y+m:v.y-m,ih(this,o,s,l,u,new wi(c,x),f),oa(o,v.x+s,v.y+l,p+s,b+l),g.k(p,b))):Qf.q(u.x,v.x)&&Qf.q(v.y,y.y)?(d=this.computeCorner(),m=Math.min(d,Math.abs(v.y-u.y)/2),m=d=Math.min(m,Math.abs(y.x-v.x)/2),Qf.q(d,0)?(ih(this,o,s,l,u,v,f),g.assign(v)):(c=v.x,b=x=v.y,x=v.y>u.y?v.y-m:v.y+m,p=y.x>v.x?v.x+d:v.x-d,ih(this,o,s,l,u,new wi(c,x),f),oa(o,v.x+s,v.y+l,p+s,b+l),g.k(p,b))):(ih(this,o,s,l,u,v,f),g.assign(v))}P(r)}i=h.m,q(h)}return i},Y(Ra,{Br:"firstPickIndex"},function(){return 2>=this.Z?0:this.Ib||Ya(this)!==xf?1:0}),Y(Ra,{gv:"lastPickIndex"},function(){var t=this.Z;return 0===t?0:2>=t?t-1:this.Ib||Wa(this)!==xf?t-2:t-1}),Ra.prototype.usesSamePort=function(t){var i=this.Z,n=t.Z;if(i>0&&n>0){var e=this.j(0),o=t.j(0);if(e.Wd(o))return!0;if(i=this.j(i-1),t=t.j(n-1),i.Wd(t)||e.Wd(t)||i.Wd(o))return!0}else if(this.M===t.M||this.R===t.R||this.M==t.R||this.R==t.M)return!0;return!1},Ra.prototype.$d=function(t){if(sa.prototype.$d.call(this,t),null!==this.Od)for(var i=this.Od.i;i.next();)i.value.$d(t)},K(Ra,{hr:"adjusting"},function(){return this.xo},function(t){var i=this.xo;i!==t&&(this.xo=t,this.h("adjusting",i,t))}),K(Ra,{Lx:"corner"},function(){return this.Ko},function(t){var i=this.Ko;i!==t&&(this.Ko=t,this.Ed(),this.h("corner",i,t))}),K(Ra,{ne:"curve"},function(){return this.No},function(t){var i=this.No;i!==t&&(this.No=t,this.zb(),rh(this,i===xd||i===bd||t===xd||t===bd),this.h("curve",i,t))}),K(Ra,{Lu:"curviness"},function(){return this.Oo},function(t){var i=this.Oo;i!==t&&(this.Oo=t,this.zb(),this.h("curviness",i,t))}),K(Ra,{uv:"routing"},function(){return this.el},function(t){var i=this.el;i!==t&&(this.el=t,this.rh=null,this.zb(),rh(this,2===(2&i.value)||2===(2&t.value)),this.h("routing",i,t))}),K(Ra,{ko:"smoothness"},function(){return this.Oq},function(t){var i=this.Oq;i!==t&&(this.Oq=t,this.Ed(),this.h("smoothness",i,t))}),W(uh,{Xn:!0,pv:!0,as:!0,qv:!0,links:!0,spacing:!0}),W(fh,{group:!0,Xy:!0,Kr:!0,abort:!0,KD:!0,tD:!0,BC:!0}),fh.prototype.initialize=function(t){if(!(0>=t.width||0>=t.height)){var i=t.y,n=t.x+t.width,e=t.y+t.height;if(this.rf=Math.floor((t.x-this.zd)/this.zd)*this.zd,this.sf=Math.floor((i-this.Ad)/this.Ad)*this.Ad,this.Mp=Math.ceil((n+2*this.zd)/this.zd)*this.zd,this.Np=Math.ceil((e+2*this.Ad)/this.Ad)*this.Ad,t=1+(0|Math.ceil((this.Mp-this.rf)/this.zd)),i=1+(0|Math.ceil((this.Np-this.sf)/this.Ad)),null===this.Ob||this.kn<t-1||this.ln<i-1){for(n=[],e=0;t>=e;e++){for(var o=[],r=0;i>=r;r++)o[r]=0;n[e]=o}this.Ob=n,this.kn=t-1,this.ln=i-1}if(null!==this.Ob)for(t=0;t<=this.kn;t++)for(i=0;i<=this.ln;i++)this.Ob[t][i]=999999}},Y(fh,{Qa:null},function(){return new Si(this.rf,this.sf,this.Mp-this.rf,this.Np-this.sf)}),K(fh,{un:null},function(){return this.zd},function(t){t>0&&t!==this.zd&&(this.zd=t,this.initialize(this.Qa))}),K(fh,{sn:null},function(){return this.Ad},function(t){t>0&&t!==this.Ad&&(this.Ad=t,this.initialize(this.Qa))}),fh.prototype.Mn=function(t,i,n,e){if(t>this.Mp||t+n<this.rf||i>this.Np||i+e<this.sf)return!0;t=(t-this.rf)/this.zd|0,i=(i-this.sf)/this.Ad|0,n=Math.max(0,n)/this.zd+1|0;var o=Math.max(0,e)/this.Ad+1|0;if(0>t&&(n+=t,t=0),0>i&&(o+=i,i=0),0>n||0>o)return!0;for(e=0|Math.min(t+n-1,this.kn),n=0|Math.min(i+o-1,this.ln);e>=t;t++)for(o=i;n>=o;o++)if(0===this.Ob[t][o])return!1;return!0},W(xh,{dc:!0,port:!0,Mf:!0,Wn:!0}),xh.prototype.toString=function(){for(var t=this.Mf,i=this.dc.toString()+" "+t.length.toString()+":",n=0;n<t.length;n++){var e=t[n];null!==e&&(i+="\n  "+e.toString())}return i},xh.prototype.iG=function(t,i){return t===i?0:null===t?-1:null===i?1:t.xd<i.xd?-1:t.xd>i.xd?1:t.angle<i.angle?-1:t.angle>i.angle?1:0},xh.prototype.computeEndSegmentLength=function(t){var i=t.link,n=i.computeEndSegmentLength(this.dc,this.port,xf,i.Jc===this.port),e=t.Gn;if(0>e)return n;var o=t.Cl;if(1>=o||!i.Ib)return n;var i=t.ov,r=t.On;return(2===t.xd||8===t.xd)&&(e=o-1-e),((t=2===t.xd||4===t.xd)?i.y<r.y:i.x<r.x)?n+8*e:(t?i.y===r.y:i.x===r.x)?n:n+8*(o-1-e)},W(kh,{link:!0,angle:!0,xd:!0,ov:!0,Gn:!0,Cl:!0,On:!0,Pu:!0}),kh.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.xd.toString()+":"+this.Gn.toString()+"/"+this.Cl.toString()+" "+this.On.toString()+" "+this.Pu.toString()+" "+this.ov.toString()},Mh.prototype.copy=function(){var t=new Mh;return t.oi=this.oi.O(),t.Qi=this.Qi.O(),t.mi=this.mi,t.Oi=this.Oi,t.li=this.li,t.Ni=this.Ni,t.ni=this.ni,t.Pi=this.Pi,t},U(Th,Na),H("Group",Th),Th.prototype.cloneProtected=function(t){Na.prototype.cloneProtected.call(this,t),t.Op=this.Op,t.Qp=this.Qp,t.Kj=this.Kj,t.ar=this.ar,t.sp=this.sp,t.br=this.br,t.Rq=this.Rq;var i=t.vr(function(t){return t instanceof jh});t.tb=i instanceof jh?i:null,t.Go=this.Go,t.Ho=this.Ho,t.Io=this.Io,t.fp=this.fp,null!==this.fd?(t.fd=this.fd.copy(),t.fd.group=t):(null!==t.fd&&(t.fd.group=null),t.fd=null)},Th.prototype.Zg=function(t){Na.prototype.Zg.call(this,t);var i=t.Bn();for(t=t.mc;t.next();){var n=t.value;if(n.H(),n.v(8),n.nr(),n instanceof Na)n.Je(i);else if(n instanceof Ra)for(n=n.Kf;n.next();)n.value.Je(i)}},Th.prototype.Ql=function(t,i,n,e,o,s,a){if(t===pc&&"elements"===i)if(o instanceof jh){var h=o;null===this.tb?this.tb=h:this.tb!==h&&r("Cannot insert a second Placeholder into the visual tree of a Group.")}else o instanceof rs&&(h=o.vr(function(t){return t instanceof jh}),h instanceof jh&&(null===this.tb?this.tb=h:this.tb!==h&&r("Cannot insert a second Placeholder into the visual tree of a Group.")));else t===dc&&"elements"===i&&null!==this.tb&&(e===this.tb?this.tb=null:e instanceof rs&&this.tb.pk(e)&&(this.tb=null));Na.prototype.Ql.call(this,t,i,n,e,o,s,a)},Th.prototype.Lh=function(t,i,n,e){this.Jj=this.tb,rs.prototype.Lh.call(this,t,i,n,e)},Th.prototype.qk=function(){if(!Na.prototype.qk.call(this))return!1;for(var t=this.mc;t.next();){var i=t.value;if(i instanceof Na){if(i.qa()&&$r(i))return!1}else if(i instanceof Ra&&i.qa()&&$r(i)&&i.M!==this&&i.R!==this)return!1}return!0},Y(Th,{placeholder:"placeholder"},function(){return this.tb}),K(Th,{NB:"computesBoundsAfterDrag"},function(){return this.Go},function(t){var i=this.Go;i!==t&&(h(t,"boolean",Th,"computesBoundsAfterDrag"),this.Go=t,this.h("computesBoundsAfterDrag",i,t))}),K(Th,{JE:"computesBoundsIncludingLinks"},function(){return this.Ho},function(t){h(t,"boolean",Th,"computesBoundsIncludingLinks");var i=this.Ho;i!==t&&(this.Ho=t,this.h("computesBoundsIncludingLinks",i,t))}),K(Th,{KE:"computesBoundsIncludingLocation"},function(){return this.Io},function(t){h(t,"boolean",Th,"computesBoundsIncludingLocation");var i=this.Io;i!==t&&(this.Io=t,this.h("computesBoundsIncludingLocation",i,t))}),K(Th,{vF:"handlesDragDropForMembers"},function(){return this.fp},function(t){h(t,"boolean",Th,"handlesDragDropForMembers");var i=this.fp;i!==t&&(this.fp=t,this.h("handlesDragDropForMembers",i,t))}),Y(Th,{mc:"memberParts"},function(){return this.Pp.i}),Th.prototype.El=function(){if(0<this.Pp.count){var t=this.g;if(null===t)return;for(var i=this.Pp.copy().i;i.next();)t.remove(i.value)}Na.prototype.El.call(this)},Th.prototype.Ev=function(){var t=this.layer;null!==t&&t.Ev(this)},K(Th,{ub:"layout"},function(){return this.fd},function(t){var i=this.fd;i!==t&&(null!==t&&a(t,Lh,Th,"layout"),null!==i&&(i.g=null,i.group=null),this.fd=t,null!==t&&(t.g=this.g,t.group=this),this.h("layout",i,t))}),K(Th,{$F:"memberAdded"},function(){return this.Op},function(t){var i=this.Op;i!==t&&(null!==t&&h(t,"function",Th,"memberAdded"),this.Op=t,this.h("memberAdded",i,t))}),K(Th,{aG:"memberRemoved"},function(){return this.Qp},function(t){var i=this.Qp;i!==t&&(null!==t&&h(t,"function",Th,"memberRemoved"),this.Qp=t,this.h("memberRemoved",i,t))}),K(Th,{sy:"memberValidation"},function(){return this.Kj},function(t){var i=this.Kj;i!==t&&(null!==t&&h(t,"function",Th,"memberValidation"),this.Kj=t,this.h("memberValidation",i,t))}),Th.prototype.canAddMembers=function(t){var i=this.g;if(null===i)return!1;for(i=i.ib,t=Ln(t).i;t.next();)if(!i.isValidMember(this,t.value))return!1;return!0},Th.prototype.addMembers=function(t,i){var n=this.g;if(null===n)return!1;for(var n=n.ib,e=!0,o=Ln(t).i;o.next();){var r=o.value;!i||n.isValidMember(this,r)?r.Ba=this:e=!1}return e},K(Th,{cH:"ungroupable"},function(){return this.ar},function(t){var i=this.ar;i!==t&&(h(t,"boolean",Th,"ungroupable"),this.ar=t,this.h("ungroupable",i,t))}),Th.prototype.canUngroup=function(){if(!this.cH)return!1;var t=this.layer;return null===t||t.Du?(t=t.g,null===t||t.Du?!0:!1):!1},Th.prototype.invalidateConnectedLinks=Th.prototype.Je=function(t){void 0===t&&(t=null),Na.prototype.Je.call(this,t);for(var i=this.$B();i.next();){var n=i.value;if(null===t||!t.contains(n)){var e=n.M;null!==e&&e.bh(this)&&!e.qa()?n.zb():(e=n.R,null!==e&&e.bh(this)&&!e.qa()&&n.zb())}}},Th.prototype.findExternalLinksConnected=Th.prototype.$B=function(){var t=this.Bn();t.add(this);for(var i=new di(Ra),n=t.i;n.next();){var e=n.value;if(e instanceof Na)for(e=e.Hd;e.next();){var o=e.value;t.contains(o)||i.add(o)}}return i.i},Th.prototype.findExternalNodesConnected=function(){var t=this.Bn();t.add(this);for(var i=new di(Na),n=t.i;n.next();){var e=n.value;if(e instanceof Na)for(e=e.Hd;e.next();){var o=e.value,r=o.M;t.contains(r)&&r!==this||i.add(r),o=o.R,t.contains(o)&&o!==this||i.add(o)}}return i.i},Th.prototype.findSubGraphParts=Th.prototype.Bn=function(){var t=new di(sa);return Pn(t,this,!0,0,!0),t.remove(this),t},Th.prototype.$d=function(t){Na.prototype.$d.call(this,t);for(var i=this.mc;i.next();)i.value.$d(t)},Th.prototype.collapseSubGraph=Th.prototype.collapseSubGraph=function(){var t=this.g;if(null!==t&&!t.Fd){t.Fd=!0;var i=this.Bn();Nh(this,i),t.Fd=!1}},Th.prototype.expandSubGraph=Th.prototype.expandSubGraph=function(){var t=this.g;if(null!==t&&!t.Fd){var i=t.qb;0!==t.V.de&&i.vk(),t.Fd=!0;var n=this.Bn();Ph(this,n,i,this),t.Fd=!1}},K(Th,{ud:"isSubGraphExpanded"},function(){return this.sp},function(t){var i=this.sp;if(i!==t){h(t,"boolean",Th,"isSubGraphExpanded"),this.sp=t;var n=this.g;if(this.h("isSubGraphExpanded",i,t),i=this.UG,null!==i){var e=!0;null!==n&&(e=n.ya,n.ya=!0),i(this),null!==n&&(n.ya=e)}null!==n&&n.V.Ua||(t?this.expandSubGraph():this.collapseSubGraph())}}),K(Th,{fz:"wasSubGraphExpanded"},function(){return this.br},function(t){var i=this.br;i!==t&&(h(t,"boolean",Th,"wasSubGraphExpanded"),this.br=t,this.h("wasSubGraphExpanded",i,t))}),K(Th,{UG:"subGraphExpandedChanged"},function(){return this.Rq},function(t){var i=this.Rq;i!==t&&(null!==t&&h(t,"function",Th,"subGraphExpandedChanged"),this.Rq=t,this.h("subGraphExpandedChanged",i,t))}),Th.prototype.move=Th.prototype.move=function(t){var i=this.position,n=i.x;isNaN(n)&&(n=0),i=i.y,isNaN(i)&&(i=0);var n=t.x-n,i=t.y-i,e=N(n,i);for(Na.prototype.move.call(this,t),t=this.Bn().i;t.next();){var o=t.value;if(!(o instanceof Ra||o instanceof Na&&o.Ke)){var r=o.position,s=o.location;r.w()?(e.x=r.x+n,e.y=r.y+i,o.position=e):s.w()&&(e.x=s.x+n,e.y=s.y+i,o.location=e)}}for(t.reset();t.next();)o=t.value,o instanceof Ra&&(r=o.position,e.x=r.x+n,e.y=r.y+i,o.move(e));P(e)},U(jh,Pr),H("Placeholder",jh),jh.prototype.cloneProtected=function(t){Pr.prototype.cloneProtected.call(this,t),t.he=this.he.O(),t.Cq=this.Cq.copy()},jh.prototype.Vi=function(t){if(null===this.background&&null===this.ul)return!1;var i=this.sa;return gf(0,0,i.width,i.height,t.x,t.y)},jh.prototype.Rn=function(){var t=this.J;if(null!==t&&(t instanceof Th||t instanceof Ca)||r("Placeholder is not inside a Group or Adornment."),t instanceof Th){var i=this.computeBorder(this.Cq),n=this.hc;Ci(n,i.width||0,i.height||0),Ar(this,0,0,n.width,n.height);for(var n=t.mc,e=!1;n.next();)if(n.value.qa()){e=!0;break}!e||isNaN(i.x)||isNaN(i.y)||(n=new wi,n.qs(i,t.qe),t.location=new wi(n.x,n.y))}else{var i=this.ka,n=this.hc,e=this.padding,o=e.left+e.right,s=e.top+e.bottom;if(i.w())Ci(n,i.width+o||0,i.height+s||0),Ar(this,-e.left,-e.top,n.width,n.height);else{var a=t.Xb,h=a.Ra(wf,C()),i=A(h.x,h.y,0,0);i.$h(a.Ra(jf,h)),i.$h(a.Ra(Mf,h)),i.$h(a.Ra(Nf,h)),t.bg.k(i.x,i.y),Ci(n,i.width+o||0,i.height+s||0),Ar(this,-e.left,-e.top,n.width,n.height),P(h),F(i)}}},jh.prototype.Lh=function(t,i,n,e){var o=this.Q;o.x=t,o.y=i,o.width=n,o.height=e},jh.prototype.computeBorder=function(t){var i=this.J;if(i instanceof Th){var n=i;if(n.NB&&this.Cq.w()){var e=n.g;if(null!==e&&(e=e.Ea,e instanceof Fn&&!e.Uo&&null!==e.Hb&&!e.Hb.contains(n)))return t.assign(this.Cq),t}}var n=D(),e=this.computeMemberBounds(n),o=this.padding;return t.k(e.x-o.left,e.y-o.top,e.width+o.left+o.right,e.height+o.top+o.bottom),F(n),i instanceof Th&&(n=i,n.KE&&n.location.w()&&t.$h(n.location)),t},jh.prototype.computeMemberBounds=function(t){if(!(this.J instanceof Th))return t.k(0,0,0,0),t;for(var i=this.J,n=1/0,e=1/0,o=-1/0,r=-1/0,s=i.mc;s.next();){var a=s.value;if(a.qa()){if(a instanceof Ra){var h=a;if(!i.JE)continue;if(Zr(h))continue;if(h.M===i||h.R===i)continue}a=a.Q,a.left<n&&(n=a.left),a.top<e&&(e=a.top),a.right>o&&(o=a.right),a.bottom>r&&(r=a.bottom)}}return isFinite(n)&&isFinite(e)?t.k(n,e,o-n,r-e):(i=i.location,n=this.padding,t.k(i.x+n.left,i.y+n.top,0,0)),t},K(jh,{padding:"padding"},function(){return this.he},function(t){"number"==typeof t?((isNaN(t)||0>t)&&c(t,">= 0",jh,"padding"),t=new Di(t)):(a(t,Di,jh,"padding"),(isNaN(t.left)||0>t.left)&&c(t.left,">= 0",jh,"padding:value.left"),(isNaN(t.right)||0>t.right)&&c(t.right,">= 0",jh,"padding:value.right"),(isNaN(t.top)||0>t.top)&&c(t.top,">= 0",jh,"padding:value.top"),(isNaN(t.bottom)||0>t.bottom)&&c(t.bottom,">= 0",jh,"padding:value.bottom"));
var i=this.he;i.A(t)||(this.he=t=t.O(),this.h("padding",i,t))}),H("Layout",Lh),Lh.prototype.cloneProtected=function(t){t.op=this.op,t.mp=this.mp,t.xp=this.xp,t.zo.assign(this.zo),t.rp=this.rp,t.pp=this.pp,t.Mz=this.Mz,this.mp||(t.Km=!0)},Lh.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},Lh.prototype.toString=function(){var t=J(Object.getPrototypeOf(this)),t=t+"(";return null!==this.group&&(t+=" in "+this.group),null!==this.g&&(t+=" for "+this.g),t+")"},K(Lh,{g:"diagram"},function(){return this.N},function(t){null!==t&&a(t,Ke,Lh,"diagram"),this.N=t}),K(Lh,{group:"group"},function(){return this.Dw},function(t){this.Dw!==t&&(null!==t&&a(t,Th,Lh,"group"),this.Dw=t,null!==t&&(this.N=t.g))}),K(Lh,{JF:"isOngoing"},function(){return this.op},function(t){this.op!==t&&(h(t,"boolean",Lh,"isOngoing"),this.op=t)}),K(Lh,{HF:"isInitial"},function(){return this.mp},function(t){h(t,"boolean",Lh,"isInitial"),this.mp=t,t||(this.Km=!0)}),K(Lh,{ev:"isViewportSized"},function(){return this.xp},function(t){this.xp!==t&&(h(t,"boolean",Lh,"isViewportSized"),(this.xp=t)&&this.v())}),K(Lh,{Qr:"isRouting"},function(){return this.rp},function(t){this.rp!==t&&(h(t,"boolean",Lh,"isRouting"),this.rp=t)}),K(Lh,{yC:"isRealtime"},function(){return this.pp},function(t){this.pp!==t&&(h(t,"boolean",Lh,"isRealtime"),this.pp=t)}),K(Lh,{Me:"isValidLayout"},function(){return this.Km},function(t){this.Km!==t&&(h(t,"boolean",Lh,"isValidLayout"),this.Km=t,t||(t=this.g,null!==t&&(t.Ps=!0)))}),Lh.prototype.invalidateLayout=Lh.prototype.v=function(){if(this.Km){var t=this.g;if(null!==t&&!t.V.Ua){var i=t.qb;!i.Jm&&(i.jg&&i.Yh(),this.JF&&t.Ce||this.HF&&!t.Ce)&&(this.Me=!1,t.wd())}}},K(Lh,{network:"network"},function(){return this.Ww},function(t){var i=this.Ww;i!==t&&(null!==t&&a(t,Ah,Lh,"network"),null!==i&&(i.ub=null),this.Ww=t,null!==t&&(t.ub=this))}),Lh.prototype.createNetwork=function(){return new Ah},Lh.prototype.makeNetwork=function(t){var i=this.createNetwork();return i.ub=this,t instanceof Ke?(i.Si(t.Of,!0),i.Si(t.links,!0)):i.Si(t instanceof Th?t.mc:t.i),i},Lh.prototype.updateParts=function(){var t=this.g;if(null===t&&null!==this.network)for(var i=this.network.vertexes.i;i.next();){var n=i.value.dc;if(null!==n&&(t=n.g,null!==t))break}this.Me=!0;try{null!==t&&t.Ab("Layout"),this.commitLayout()}finally{null!==t&&t.pd("Layout")}},Lh.prototype.commitLayout=function(){for(var t=this.network.vertexes.i;t.next();)t.value.commit();if(this.Qr)for(t=this.network.edges.i;t.next();)t.value.commit()},Lh.prototype.doLayout=function(t){null===t&&r("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");var i=new di(sa);t instanceof Ke?(Dh(this,i,t.Of,!0,this.xy,!0,!1,!0),Dh(this,i,t.cj,!0,this.xy,!0,!1,!0)):t instanceof Th?Dh(this,i,t.mc,!1,this.xy,!0,!1,!0):i.md(t.i);var n=i.count;if(n>0){t=this.g,null!==t&&t.Ab("Layout");for(var n=Math.ceil(Math.sqrt(n)),e=this.nd.x,o=e,s=this.nd.y,a=0,h=0,i=i.i;i.next();){var l=i.value;l.Ge();var u=l.oa,f=u.width,u=u.height;l.moveTo(o,s),l.Vw=!1,o+=Math.max(f,50)+20,h=Math.max(h,Math.max(u,50)),a>=n-1?(a=0,o=e,s+=h+20,h=0):a++}null!==t&&t.pd("Layout")}this.Me=!0},Lh.prototype.xy=function(t){return!t.location.w()||t instanceof Th&&t.Vw?!0:!1},Lh.prototype.collectParts=function(t){var i=new di(sa);return t instanceof Ke?(Dh(this,i,t.Of,!0,null,!0,!0,!0),Dh(this,i,t.links,!0,null,!0,!0,!0),Dh(this,i,t.cj,!0,null,!0,!0,!0)):t instanceof Th?Dh(this,i,t.mc,!1,null,!0,!0,!0):Dh(this,i,t.i,!1,null,!0,!0,!0),i},K(Lh,{nd:"arrangementOrigin"},function(){return this.zo},function(t){a(t,wi,Lh,"arrangementOrigin"),this.zo.A(t)||(this.zo.assign(t),this.v())}),Lh.prototype.initialOrigin=function(t){var i=this.group;if(null!==i){var n=i.position.copy();return(isNaN(n.x)||isNaN(n.y))&&n.set(t),i=i.placeholder,null!==i&&(n=i.Ra(wf),(isNaN(n.x)||isNaN(n.y))&&n.set(t),n.x+=i.padding.left,n.y+=i.padding.top),n}return t},H("LayoutNetwork",Ah),Ah.prototype.clear=function(){if(this.vertexes)for(var t=this.vertexes.i;t.next();){var i=t.value;i.clear(),i.network=null}if(this.edges)for(t=this.edges.i;t.next();)i=t.value,i.clear(),i.network=null;this.vertexes=new di(qh),this.edges=new di(Eh),this.By=new bi(Na,qh),this.oy=new bi(Ra,Eh)},Ah.prototype.toString=function(t){void 0===t&&(t=0);var i="LayoutNetwork"+(null!==this.ub?"("+this.ub.toString()+")":"");if(0>=t)return i;if(i+=" vertexes: "+this.vertexes.count+" edges: "+this.edges.count,t>1){for(var n=this.vertexes.i;n.next();)i+="\n    "+n.value.toString(t-1);for(n=this.edges.i;n.next();)i+="\n    "+n.value.toString(t-1)}return i},K(Ah,{ub:"layout"},function(){return this.fd},function(t){this.fd=t}),Ah.prototype.createVertex=function(){return new qh},Ah.prototype.createEdge=function(){return new Eh},Ah.prototype.addParts=Ah.prototype.Si=function(t,i,n){if(null!==t){for(void 0===i&&(i=!1),h(i,"boolean",Ah,"addParts:toplevelonly"),void 0===n&&(n=null),null===n&&(n=function(t){if(t instanceof Na)return!t.Ke;if(t instanceof Ra){var i=t.M;return null===i||i.Ke?!1:(t=t.R,null===t||t.Ke?!1:!0)}return!1}),t=t.i;t.next();){var e=t.value;if(e instanceof Na&&(!i||e.Kn)&&e.canLayout()&&n(e))if(e instanceof Th&&null===e.ub)this.Si(e.mc,!1);else if(null===this.Hl(e)){var o=this.createVertex();o.dc=e,this.Wj(o)}}for(t.reset();t.next();)if(e=t.value,e instanceof Ra&&(!i||e.Kn)&&e.canLayout()&&n(e)&&null===this.Ru(e)){var r=e.M,o=e.R;null!==r&&null!==o&&r!==o&&(r=this.findGroupVertex(r),o=this.findGroupVertex(o),null!==r&&null!==o&&this.Qn(r,o,e))}}},Ah.prototype.findGroupVertex=function(t){if(null===t)return null;var i=t.findVisibleNode();if(null===i)return null;if(t=this.Hl(i),null!==t)return t;for(i=i.Ba;null!==i;){if(t=this.Hl(i),null!==t)return t;i=i.Ba}return null},Ah.prototype.addVertex=Ah.prototype.Wj=function(t){if(null!==t){this.vertexes.add(t);var i=t.dc;null!==i&&this.By.add(i,t),t.network=this}},Ah.prototype.addNode=Ah.prototype.gr=function(t){if(null===t)return null;var i=this.Hl(t);return null===i&&(i=this.createVertex(),i.dc=t,this.Wj(i)),i},Ah.prototype.deleteVertex=Ah.prototype.WB=function(t){if(null!==t&&Fh(this,t)){for(var i=t.ae,n=i.count-1;n>=0;n--){var e=i.Y(n);this.yn(e)}for(i=t.Vd,n=i.count-1;n>=0;n--)e=i.Y(n),this.yn(e)}},Ah.prototype.deleteNode=function(t){null!==t&&(t=this.Hl(t),null!==t&&this.WB(t))},Ah.prototype.findVertex=Ah.prototype.Hl=function(t){return null===t?null:this.By.ha(t)},Ah.prototype.addEdge=Ah.prototype.nn=function(t){if(null!==t){this.edges.add(t);var i=t.link;null!==i&&null===this.Ru(i)&&this.oy.add(i,t),i=t.toVertex,null!==i&&i.zB(t),i=t.fromVertex,null!==i&&i.yB(t),t.network=this}},Ah.prototype.addLink=function(t){if(null===t)return null;var i=t.M,n=t.R,e=this.Ru(t);return null===e?(e=this.createEdge(),e.link=t,null!==i&&(e.fromVertex=this.gr(i)),null!==n&&(e.toVertex=this.gr(n)),this.nn(e)):(e.fromVertex=null!==i?this.gr(i):null,e.toVertex=null!==n?this.gr(n):null),e},Ah.prototype.deleteEdge=Ah.prototype.yn=function(t){if(null!==t){var i=t.toVertex;null!==i&&i.VB(t),i=t.fromVertex,null!==i&&i.UB(t),Oh(this,t)}},Ah.prototype.deleteLink=function(t){null!==t&&(t=this.Ru(t),null!==t&&this.yn(t))},Ah.prototype.findEdge=Ah.prototype.Ru=function(t){return null===t?null:this.oy.ha(t)},Ah.prototype.linkVertexes=Ah.prototype.Qn=function(t,i,n){if(null===t||null===i)return null;if(t.network===this&&i.network===this){var e=this.createEdge();return e.link=n,e.fromVertex=t,e.toVertex=i,this.nn(e),e}return null},Ah.prototype.reverseEdge=Ah.prototype.tv=function(t){if(null!==t){var i=t.fromVertex,n=t.toVertex;null!==i&&null!==n&&(i.UB(t),n.VB(t),t.tv(),i.zB(t),n.yB(t))}},Ah.prototype.deleteSelfEdges=Ah.prototype.Nu=function(){for(var t=E(),i=this.edges.i;i.next();){var n=i.value;n.fromVertex===n.toVertex&&t.push(n)}for(i=t.length,n=0;i>n;n++)this.yn(t[n]);R(t)},Ah.prototype.deleteArtificialVertexes=function(){for(var t=E(),i=this.vertexes.i;i.next();){var n=i.value;null===n.dc&&t.push(n)}for(n=t.length,i=0;n>i;i++)this.WB(t[i]);for(n=E(),i=this.edges.i;i.next();){var e=i.value;null===e.link&&n.push(e)}for(e=n.length,i=0;e>i;i++)this.yn(n[i]);R(t),R(n)},Ah.prototype.splitIntoSubNetworks=Ah.prototype.QG=function(){this.deleteArtificialVertexes(),zh(this),this.Nu();for(var t=new ci(Ah),i=!0;i;)for(var i=!1,n=this.vertexes.i;n.next();){var e=n.value;if(0<e.ae.count||0<e.Vd.count){i=this.ub.createNetwork(),t.add(i),Bh(this,i,e),i=!0;break}}return t.sort(function(t,i){return null===t||null===i||t===i?0:i.vertexes.count-t.vertexes.count}),t},Ah.prototype.findAllParts=function(){for(var t=new di(sa),i=this.vertexes.i;i.next();)t.add(i.value.dc);for(i=this.edges.i;i.next();)t.add(i.value.link);return t},H("LayoutVertex",qh),qh.prototype.clear=function(){this.Fc=this.Cg=null,this.ae=new ci(Eh),this.Vd=new ci(Eh)},qh.prototype.toString=function(t){void 0===t&&(t=0);var i="LayoutVertex#"+V(this);if(t>0&&(i+=null!==this.dc?"("+this.dc.toString()+")":"",t>1)){t="";for(var n=!0,e=this.ae.i;e.next();){var o=e.value;n?n=!1:t+=",",t+=o.toString(0)}for(o="",n=!0,e=this.Vd.i;e.next();){var r=e.value;n?n=!1:o+=",",o+=r.toString(0)}i+=" sources: "+t+" destinations: "+o}return i},K(qh,{data:"data"},function(){return this.Cg},function(t){if(this.Cg=t,null!==t){var i=t.bounds;t=i.x;var n=i.y,e=i.width,i=i.height;this.B.k(e/2,i/2),this.P.k(t,n,e,i)}}),K(qh,{dc:"node"},function(){return this.Fc},function(t){if(this.Fc!==t){this.Fc=t,t.Ge();var i=t.Q,n=i.x,e=i.y,o=i.width,i=i.height;if(isNaN(n)&&(n=0),isNaN(e)&&(e=0),this.P.k(n,e,o,i),!(t instanceof Th)&&(t=t.Jb.Ra(Sf),t.w()))return void this.B.k(t.x-n,t.y-e);this.B.k(o/2,i/2)}}),K(qh,{Qa:"bounds"},function(){return this.P},function(t){this.P.A(t)||this.P.assign(t)}),K(qh,{focus:"focus"},function(){return this.B},function(t){this.B.A(t)||this.B.assign(t)}),K(qh,{ua:"centerX"},function(){return this.P.x+this.B.x},function(t){var i=this.P;i.x+this.B.x!==t&&(i.wa(),i.x=t-this.B.x,i.freeze())}),K(qh,{Da:"centerY"},function(){return this.P.y+this.B.y},function(t){var i=this.P;i.y+this.B.y!==t&&(i.wa(),i.y=t-this.B.y,i.freeze())}),K(qh,{Cr:"focusX"},function(){return this.B.x},function(t){var i=this.B;i.x!==t&&(i.wa(),i.x=t,i.freeze())}),K(qh,{Dr:"focusY"},function(){return this.B.y},function(t){var i=this.B;i.y!==t&&(i.wa(),i.y=t,i.freeze())}),K(qh,{x:"x"},function(){return this.P.x},function(t){var i=this.P;i.x!==t&&(i.wa(),i.x=t,i.freeze())}),K(qh,{y:"y"},function(){return this.P.y},function(t){var i=this.P;i.y!==t&&(i.wa(),i.y=t,i.freeze())}),K(qh,{width:"width"},function(){return this.P.width},function(t){var i=this.P;i.width!==t&&(i.wa(),i.width=t,i.freeze())}),K(qh,{height:"height"},function(){return this.P.height},function(t){var i=this.P;i.height!==t&&(i.wa(),i.height=t,i.freeze())}),qh.prototype.commit=function(){var t=this.Cg;if(null!==t){var i=this.Qa,n=t.bounds;y(n)?(n.x=i.x,n.y=i.y,n.width=i.width,n.height=i.height):t.bounds=i.copy()}else if(t=this.dc,null!==t){if(i=this.Qa,!(t instanceof Th)){var n=t.Q,e=t.Jb.Ra(Sf);if(n.w()&&e.w())return void t.moveTo(i.x+this.Cr-(e.x-n.x),i.y+this.Dr-(e.y-n.y))}t.moveTo(i.x,i.y)}},qh.prototype.addSourceEdge=qh.prototype.zB=function(t){null!==t&&(this.ae.contains(t)||this.ae.add(t))},qh.prototype.deleteSourceEdge=qh.prototype.VB=function(t){null!==t&&this.ae.remove(t)},qh.prototype.addDestinationEdge=qh.prototype.yB=function(t){null!==t&&(this.Vd.contains(t)||this.Vd.add(t))},qh.prototype.deleteDestinationEdge=qh.prototype.UB=function(t){null!==t&&this.Vd.remove(t)},Y(qh,{PG:"sourceVertexes"},function(){for(var t=new di(qh),i=this.Mb;i.next();)t.add(i.value.fromVertex);return t.i}),Y(qh,{ZE:"destinationVertexes"},function(){for(var t=new di(qh),i=this.Gb;i.next();)t.add(i.value.toVertex);return t.i}),Y(qh,{vertexes:"vertexes"},function(){for(var t=new di(qh),i=this.Mb;i.next();)t.add(i.value.fromVertex);for(i=this.Gb;i.next();)t.add(i.value.toVertex);return t.i}),Y(qh,{Mb:"sourceEdges"},function(){return this.ae.i}),Y(qh,{Gb:"destinationEdges"},function(){return this.Vd.i}),Y(qh,{edges:"edges"},function(){for(var t=new ci(Eh),i=this.Mb;i.next();)t.add(i.value);for(i=this.Gb;i.next();)t.add(i.value);return t.i}),Y(qh,{eF:"edgesCount"},function(){return this.ae.count+this.Vd.count});var Ad;qh.standardComparer=Ad=function(t,i){var n=t.Fc,e=i.Fc;return n?e?(n=n.text,e=e.text,e>n?-1:n>e?1:0):1:null!==e?-1:0},qh.smartComparer=function(t,i){if(null!==t){if(null!==i){var n=t.Fc,e=i.Fc;if(null!==n){if(null!==e){for(var n=n.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e=e.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),o=0;o<n.length;o++)if(""!==e[o]&&void 0!==e[o]){var r=parseFloat(n[o]),s=parseFloat(e[o]);if(isNaN(r)){if(!isNaN(s))return 1;if(0!==n[o].localeCompare(e[o]))return n[o].localeCompare(e[o])}else{if(isNaN(s))return-1;if(0!==r-s)return r-s}}else if(""!==n[o])return 1;return""!==e[o]&&void 0!==e[o]?-1:0}return 1}return null!==e?-1:0}return 1}return null!==i?-1:0},H("LayoutEdge",Eh),Eh.prototype.clear=function(){this.toVertex=this.fromVertex=this.link=this.data=null},Eh.prototype.toString=function(t){void 0===t&&(t=0);var i="LayoutEdge#"+V(this);return t>0&&(i+=null!==this.link?"("+this.link.toString()+")":"",t>1&&(i+=" "+(this.fromVertex?this.fromVertex.toString():"null")+" --> "+(this.toVertex?this.toVertex.toString():"null"))),i},Eh.prototype.tv=function(){var t=this.fromVertex;this.fromVertex=this.toVertex,this.toVertex=t},Eh.prototype.commit=function(){},Eh.prototype.getOtherVertex=Eh.prototype.nF=function(t){return this.toVertex===t?this.fromVertex:this.fromVertex===t?this.toVertex:null},U(Rh,Lh),H("GridLayout",Rh),Rh.prototype.cloneProtected=function(t){Lh.prototype.cloneProtected.call(this,t),t.er=this.er,t.dr=this.dr,t.ei.assign(this.ei),t.Ug.assign(this.Ug),t.Md=this.Md,t.tc=this.tc,t.Tg=this.Tg,t.Bg=this.Bg},Rh.prototype.doLayout=function(t){null===t&&r("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),this.nd=this.initialOrigin(this.nd);var i=this.g,n=new di(sa);for(t instanceof Ke?(i=t,Dh(this,n,t.Of,!0,null,!0,!0,!0),Dh(this,n,t.links,!0,null,!0,!0,!0),Dh(this,n,t.cj,!0,null,!0,!0,!0)):t instanceof Th?(i=t.g,Dh(this,n,t.mc,!1,null,!0,!0,!0)):n.md(t.i),t=n.copy().i;t.next();){var e=t.value;if(e instanceof Ra){var o=e;if(null!==o.M||null!==o.R){n.remove(o);continue}}if(e.Ge(),e instanceof Th)for(e=e.mc;e.next();)n.remove(e.value)}if(o=n.ce(),0!==o.length){switch(this.sorting){case Rd:o.reverse();break;case Id:o.sort(this.comparer);break;case Gd:o.sort(this.comparer),o.reverse()}var s=this.fH;isNaN(s)&&(s=0);var a=this.ND,a=isNaN(a)&&null!==i?Math.max(i.Va.width-i.padding.left-i.padding.right,0):Math.max(this.ND,0);switch(0>=s&&0>=a&&(s=1),n=this.spacing.width,isFinite(n)||(n=0),t=this.spacing.height,isFinite(t)||(t=0),null!==i&&i.Ab("Layout"),e=[],this.alignment){case Od:var h=n,l=t,u=Math.max(this.tn.width,1);if(!isFinite(u))for(var f=u=0;f<o.length;f++)var c=o[f],p=c.oa,u=Math.max(u,p.width);var u=Math.max(u+h,1),d=Math.max(this.tn.height,1);if(!isFinite(d))for(f=d=0;f<o.length;f++)c=o[f],p=c.oa,d=Math.max(d,p.height);for(var d=Math.max(d+l,1),v=this.Xe,y=this.nd.x,g=y,m=this.nd.y,x=0,b=0,f=0;f<o.length;f++){var c=o[f],p=c.oa,w=Math.ceil((p.width+h)/u)*u,k=Math.ceil((p.height+l)/d)*d,M=0;switch(v){case qd:M=Math.abs(g-p.width);break;default:M=g+p.width}switch((s>0&&x>s-1||a>0&&x>0&&M>a)&&(e.push(new Si(0,m,a+h,b)),x=0,g=y,m+=b,b=0),b=Math.max(b,k),k=0,v){case qd:k=-p.width;break;default:k=0}switch(c.moveTo(g+k,m),v){case qd:g-=w;break;default:g+=w}x++}e.push(new Si(0,m,a+h,b));break;case zd:for(h=s,l=n,u=t,f=Math.max(this.tn.width,1),c=m=w=0,p=C(),s=0;s<o.length;s++)d=o[s],v=d.oa,y=fa(d,d.Jb,d.qe,p),w=Math.max(w,y.x),m=Math.max(m,v.width-y.x),c=Math.max(c,y.y);switch(g=this.Xe){case qd:w+=l;break;default:m+=l}var f=isFinite(f)?Math.max(f+l,1):Math.max(w+m,1),T=m=this.nd.x,x=this.nd.y,b=0;a>=w&&(a-=w);for(var w=k=0,M=Math.max(this.tn.height,1),S=c=0,N=!0,j=C(),s=0;s<o.length;s++){if(d=o[s],v=d.oa,y=fa(d,d.Jb,d.qe,p),b>0)switch(g){case qd:T=Math.floor((T-m-(v.width-y.x))/f)*f+m;break;default:T=Math.ceil((T-m+y.x)/f)*f+m}else switch(g){case qd:k=T+y.x+v.width;break;default:k=T-y.x}var L=0;switch(g){case qd:L=-(T+y.x)+k;break;default:L=T+v.width-y.x-k}if(h>0&&b>h-1||a>0&&b>0&&L>a){for(e.push(new Si(0,N?x-c:x,a+l,S+c+u)),T=0;b>T&&s!==b;T++){var L=o[s-b+T],D=fa(L,L.Jb,L.qe,j);L.moveTo(L.position.x,L.position.y+c-D.y)}S+=u,x=N?x+S:x+(S+c),b=S=c=0,T=m,N=!1}switch(T===m&&(w=g===qd?Math.max(w,v.width-y.x):Math.min(w,-y.x)),c=Math.max(c,y.y),S=Math.max(S,v.height-y.y),isFinite(M)&&(S=Math.max(S,Math.max(v.height,M)-y.y)),N?d.moveTo(T-y.x,x-y.y):d.moveTo(T-y.x,x),g){case qd:T-=y.x+l;break;default:T+=v.width-y.x+l}b++}for(e.push(new Si(0,x,a+l,(N?S:S+c)+u)),T=0;b>T&&s!==b;T++)L=o[s-b+T],D=fa(L,L.Jb,L.qe,p),L.moveTo(L.position.x,L.position.y+c-D.y);if(P(p),P(j),g===qd)for(s=0;s<e.length;s++)o=e[s],o.width+=w,o.x-=w;else for(s=0;s<e.length;s++)o=e[s],o.x>w&&(o.width+=o.x-w,o.x=w)}for(h=s=a=o=0;h<e.length;h++)l=e[h],o=Math.min(o,l.x),a=Math.min(a,l.y),s=Math.max(s,l.x+l.width);this.Xe===qd?this.commitLayers(e,new wi(o+n/2-(s+o),a-t/2)):this.commitLayers(e,new wi(o-n/2,a-t/2)),null!==i&&i.pd("Layout"),this.Me=!0}},Rh.prototype.commitLayers=function(){},K(Rh,{ND:"wrappingWidth"},function(){return this.er},function(t){this.er!==t&&(h(t,"number",Rh,"wrappingWidth"),t>0||isNaN(t))&&(this.er=t,this.ev=isNaN(t),this.v())}),K(Rh,{fH:"wrappingColumn"},function(){return this.dr},function(t){this.dr!==t&&(h(t,"number",Rh,"wrappingColumn"),t>0||isNaN(t))&&(this.dr=t,this.v())}),K(Rh,{tn:"cellSize"},function(){return this.ei},function(t){a(t,Ti,Rh,"cellSize"),this.ei.A(t)||(this.ei.assign(t),this.v())}),K(Rh,{spacing:"spacing"},function(){return this.Ug},function(t){a(t,Ti,Rh,"spacing"),this.Ug.A(t)||(this.Ug.assign(t),this.v())}),K(Rh,{alignment:"alignment"},function(){return this.Md},function(t){this.Md!==t&&(u(t,Rh,Rh,"alignment"),t===zd||t===Od)&&(this.Md=t,this.v())}),K(Rh,{Xe:"arrangement"},function(){return this.tc},function(t){this.tc!==t&&(u(t,Rh,Rh,"arrangement"),t===Bd||t===qd)&&(this.tc=t,this.v())}),K(Rh,{sorting:"sorting"},function(){return this.Tg},function(t){this.Tg!==t&&(u(t,Rh,Rh,"sorting"),t===Ed||t===Rd||t===Id||t===Gd)&&(this.Tg=t,this.v())}),K(Rh,{comparer:"comparer"},function(){return this.Bg},function(t){this.Bg!==t&&(h(t,"function",Rh,"comparer"),this.Bg=t,this.v())});var Fd;Rh.standardComparer=Fd=function(t,i){var n=t.text,e=i.text;return e>n?-1:n>e?1:0},Rh.smartComparer=function(t,i){if(null!==t){if(null!==i){for(var n=t.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e=i.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),o=0;o<n.length;o++)if(""!==e[o]&&void 0!==e[o]){var r=parseFloat(n[o]),s=parseFloat(e[o]);if(isNaN(r)){if(!isNaN(s))return 1;if(0!==n[o].localeCompare(e[o]))return n[o].localeCompare(e[o])}else{if(isNaN(s))return-1;if(0!==r-s)return r-s}}else if(""!==n[o])return 1;return""!==e[o]&&void 0!==e[o]?-1:0}return 1}return null!==i?-1:0};var Od;Rh.Position=Od=Z(Rh,"Position",0);var zd;Rh.Location=zd=Z(Rh,"Location",1);var Bd;Rh.LeftToRight=Bd=Z(Rh,"LeftToRight",2);var qd;Rh.RightToLeft=qd=Z(Rh,"RightToLeft",3);var Ed;Rh.Forward=Ed=Z(Rh,"Forward",4);var Rd;Rh.Reverse=Rd=Z(Rh,"Reverse",5);var Id;Rh.Ascending=Id=Z(Rh,"Ascending",6);var Gd;Rh.Descending=Gd=Z(Rh,"Descending",7),U(Ih,Lh),H("CircularLayout",Ih),Ih.prototype.cloneProtected=function(t){Lh.prototype.cloneProtected.call(this,t),t.pq=this.pq,t.Bo=this.Bo,t.Qq=this.Qq,t.Sq=this.Sq,t.tc=this.tc,t.aa=this.aa,t.Tg=this.Tg,t.Bg=this.Bg,t.Ug=this.Ug,t.cq=this.cq},Ih.prototype.createNetwork=function(){return new _h},Ih.prototype.doLayout=function(t){if(null===t&&r("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(t)),t=this.network.vertexes,1>=t.count)1===t.count&&(t=t.first(),t.ua=0,t.Da=0);else{var i=new ci(tl);i.md(t.i),t=new ci(tl);var n,e=new ci(tl);n=this.sort(i);var o=this.tw,s=this.Tz,a=this.Oc,h=this.vm,l=this.uw,u=this.Vo,i=this.wj,f=this.mB,c=this.Af,p=this.Ws,o=this.Xe,s=this.lv,a=this.qG;if((!isFinite(a)||0>=a)&&(a=0/0),h=this.zE,(!isFinite(h)||0>=h)&&(h=1),l=this.be,isFinite(l)||(l=0),u=this.gf,(!isFinite(u)||u>360||1>u)&&(u=360),i=this.spacing,isFinite(i)||(i=0/0),o===Kd&&s===nv?o=Vd:o===Kd&&s!==nv&&(s=nv,o=this.Xe),(this.direction===Xd||this.direction===Jd)&&this.sorting!==tv){for(var d=0;!(d>=n.length)&&(t.add(n.Y(d)),!(d+1>=n.length));d+=2)e.add(n.Y(d+1));this.direction===Xd?(this.Xe===Kd&&t.reverse(),n=new ci(tl),n.md(t),n.md(e)):(this.Xe===Kd&&e.reverse(),n=new ci(tl),n.md(e),n.md(t))}for(var v=n.length,y=f=0,d=0;d<n.length;d++){var c=l+u*y*(this.direction===Yd?1:-1)/v,g=n.Y(d).diameter;isNaN(g)&&(g=il(n.Y(d),c)),360>u&&(0===d||d===n.length-1)&&(g/=2),f+=g,y++}if(isNaN(a)||o===Kd){if(isNaN(i)&&(i=6),o!==Vd&&o!==Kd){for(g=-1/0,d=0;v>d;d++){var p=n.Y(d),m=n.Y(d===v-1?0:d+1);isNaN(p.diameter)&&il(p,0),isNaN(m.diameter)&&il(m,0),g=Math.max(g,(p.diameter+m.diameter)/2)}p=g+i,o===Ud?(c=2*Math.PI/v,a=(g+i)/c):a=Zh(this,p*(u>=360?v:v-1),h,l*Math.PI/180,u*Math.PI/180)}else a=Zh(this,f+(u>=360?v:v-1)*(o!==Kd?i:1.6*i),h,l*Math.PI/180,u*Math.PI/180);c=a*h}else if(c=a*h,y=Jh(this,a,c,l*Math.PI/180,u*Math.PI/180),isNaN(i))(o===Vd||o===Kd)&&(i=(y-f)/(u>=360?v:v-1));else if(o===Vd||o===Kd)d=(y-f)/(u>=360?v:v-1),i>d?(a=Zh(this,f+i*(u>=360?v:v-1),h,l*Math.PI/180,u*Math.PI/180),c=a*h):i=d;else{for(g=-1/0,d=0;v>d;d++)p=n.Y(d),m=n.Y(d===v-1?0:d+1),isNaN(p.diameter)&&il(p,0),isNaN(m.diameter)&&il(m,0),g=Math.max(g,(p.diameter+m.diameter)/2);p=g+i,d=Zh(this,p*(u>=360?v:v-1),h,l*Math.PI/180,u*Math.PI/180),d>a?(a=d,c=a*h):p=y/(u>=360?v:v-1)}if(this.tw=o,this.Tz=s,this.Oc=a,this.vm=h,this.uw=l,this.Vo=u,this.wj=i,this.mB=f,this.Af=c,this.Ws=p,i=n,n=this.tw,o=this.Oc,s=this.uw,h=this.Vo,l=this.wj,u=this.Af,f=this.Ws,this.direction!==Xd&&this.direction!==Jd||n!==Kd)if(this.direction===Xd||this.direction===Jd){switch(a=0,n){case Hd:a=180*Qh(this,o,u,s,f)/Math.PI;break;case Vd:f=i=0,a=t.first(),null!==a&&(i=il(a,Math.PI/2)),a=e.first(),null!==a&&(f=il(a,Math.PI/2)),a=180*Qh(this,o,u,s,l+(i+f)/2)/Math.PI;break;case Ud:a=h/i.length}if(this.direction===Xd){switch(n){case Hd:Hh(this,t,s,Wd);break;case Vd:Vh(this,t,s,Wd);break;case Ud:Gh(this,t,h/2,s,Wd)}switch(n){case Hd:Hh(this,e,s+a,Yd);break;case Vd:Vh(this,e,s+a,Yd);break;case Ud:Gh(this,e,h/2,s+a,Yd)}}else{switch(n){case Hd:Hh(this,e,s,Wd);break;case Vd:Vh(this,e,s,Wd);break;case Ud:Gh(this,e,h/2,s,Wd)}switch(n){case Hd:Hh(this,t,s+a,Yd);break;case Vd:Vh(this,t,s+a,Yd);break;case Ud:Gh(this,t,h/2,s+a,Yd)}}}else switch(n){case Hd:Hh(this,i,s,this.direction);break;case Vd:Vh(this,i,s,this.direction);break;case Ud:Gh(this,i,h,s,this.direction);break;case Kd:Uh(this,i,h,s,this.direction)}else Uh(this,i,h,s-h/2,Yd)}this.updateParts(),this.network=null,this.Me=!0},Ih.prototype.commitLayout=function(){this.commitNodes(),this.Qr&&this.commitLinks()},Ih.prototype.commitNodes=function(){for(var t=this.rE,i=this.network.vertexes.i;i.next();){var n=i.value;n.x+=t.x,n.y+=t.y,n.commit()}},Ih.prototype.commitLinks=function(){for(var t=this.network.edges.i;t.next();)t.value.commit()},Ih.prototype.sort=function(t){switch(this.sorting){case Zd:break;case Qd:t.reverse();break;case $d:t.sort(this.comparer);break;case _d:t.sort(this.comparer),t.reverse();break;case tv:for(var i=[],n=0;n<t.length;n++)i.push(0);for(var e=new ci(tl),n=0;n<t.length;n++){var o=-1,s=-1;if(0===n)for(var a=0;a<t.length;a++){var h=t.Y(a).eF;h>o&&(o=h,s=a)}else for(a=0;a<t.length;a++)h=i[a],h>o&&(o=h,s=a);for(e.add(t.Y(s)),i[s]=-1,s=t.Y(s),o=0,a=s.Mb;a.next();)o=t.indexOf(a.value.fromVertex),0>o||0<=i[o]&&i[o]++;for(s=s.Gb;s.next();)o=t.indexOf(s.value.toVertex),0>o||0<=i[o]&&i[o]++}for(t=[],i=0;i<e.length;i++){a=e.Y(i),t[i]=[];for(var l=0,n=a.Gb;n.next();)l=e.indexOf(n.value.toVertex),l!==i&&0>t[i].indexOf(l)&&t[i].push(l);for(n=a.Mb;n.next();)l=e.indexOf(n.value.fromVertex),l!==i&&0>t[i].indexOf(l)&&t[i].push(l)}for(a=[],i=0;i<t.length;i++)a[i]=0;for(var n=[],h=[],u=[],o=[],s=new ci(tl),f=0,i=0;i<t.length;i++){var c=t[i].length;if(1===c)o.push(i);else if(0===c)s.add(e.Y(i));else{if(0===f)n.push(i);else{for(var p=1/0,d=1/0,v=-1,y=[],c=0;c<n.length;c++)0>t[n[c]].indexOf(n[c===n.length-1?0:c+1])&&y.push(c===n.length-1?0:c+1);if(0===y.length)for(c=0;c<n.length;c++)y.push(c);for(c=0;c<y.length;c++){var g,m=y[c],l=t[i];g=h;for(var x=u,b=a,w=m,k=n,M=0,T=0;T<g.length;T++){var S=b[g[T]],C=b[x[T]],N=0,P=0;if(C>S?(N=S,P=C):(N=C,P=S),w>N&&P>=w)for(S=0;S<l.length;S++)C=l[S],0>k.indexOf(C)||N<b[C]&&b[C]<P||N===b[C]||P===b[C]||M++;else for(S=0;S<l.length;S++)C=l[S],0>k.indexOf(C)||N<b[C]&&b[C]<P&&N!==b[C]&&P!==b[C]&&M++}for(g=M,b=x=0;b<t[i].length;b++)l=n.indexOf(t[i][b]),l>=0&&(l=Math.abs(m-(l>=m?l+1:l)),x+=l<n.length+1-l?l:n.length+1-l);for(b=0;b<h.length;b++)l=a[h[b]],w=a[u[b]],l>=m&&l++,w>=m&&w++,l>w&&(k=w,w=l,l=k),w-l<(n.length+2)/2==(m>l&&w>=m)&&x++;(p>g||g===p&&d>x)&&(p=g,d=x,v=m)}for(n.splice(v,0,i),c=0;c<n.length;c++)a[n[c]]=c;for(c=0;c<t[i].length;c++)p=t[i][c],0<=n.indexOf(p)&&(h.push(i),u.push(p))}f++}}for(h=!1,u=n.length;;){for(h=!0,a=0;a<o.length;a++)if(i=o[a],f=t[i][0],l=n.indexOf(f),l>=0){for(d=c=0;d<t[f].length;d++)p=t[f][d],p=n.indexOf(p),0>p||p===l||(v=p>l?p-l:l-p,c+=l>p!=v>u-v?1:-1);n.splice(0>c?l:l+1,0,i),o.splice(a,1),a--}else h=!1;if(h)break;n.push(o[0]),o.splice(0,1)}for(i=0;i<n.length;i++)l=n[i],s.add(e.Y(l));return s;default:r("Invalid sorting type.")}return t},K(Ih,{qG:"radius"},function(){return this.pq},function(t){this.pq!==t&&(h(t,"number",Ih,"radius"),t>0||isNaN(t))&&(this.pq=t,this.v())}),K(Ih,{zE:"aspectRatio"},function(){return this.Bo},function(t){this.Bo!==t&&(h(t,"number",Ih,"aspectRatio"),t>0&&(this.Bo=t,this.v()))}),K(Ih,{be:"startAngle"},function(){return this.Qq},function(t){this.Qq!==t&&(h(t,"number",Ih,"startAngle"),this.Qq=t,this.v())}),K(Ih,{gf:"sweepAngle"},function(){return this.Sq},function(t){this.Sq!==t&&(h(t,"number",Ih,"sweepAngle"),this.Sq=t>0&&360>=t?t:360,this.v())}),K(Ih,{Xe:"arrangement"},function(){return this.tc},function(t){this.tc!==t&&(u(t,Ih,Ih,"arrangement"),t===Kd||t===Vd||t===Hd||t===Ud)&&(this.tc=t,this.v())}),K(Ih,{direction:"direction"},function(){return this.aa},function(t){this.aa!==t&&(u(t,Ih,Ih,"direction"),t===Yd||t===Wd||t===Xd||t===Jd)&&(this.aa=t,this.v())}),K(Ih,{sorting:"sorting"},function(){return this.Tg},function(t){this.Tg!==t&&(u(t,Ih,Ih,"sorting"),t===Zd||t===Qd||t===$d||_d||t===tv)&&(this.Tg=t,this.v())}),K(Ih,{comparer:"comparer"},function(){return this.Bg},function(t){this.Bg!==t&&(h(t,"function",Ih,"comparer"),this.Bg=t,this.v())}),K(Ih,{spacing:"spacing"},function(){return this.Ug},function(t){this.Ug!==t&&(h(t,"number",Ih,"spacing"),this.Ug=t,this.v())}),K(Ih,{lv:"nodeDiameterFormula"},function(){return this.cq},function(t){this.cq!==t&&(u(t,Ih,Ih,"nodeDiameterFormula"),t===iv||t===nv)&&(this.cq=t,this.v())}),Y(Ih,{sE:"actualXRadius"},function(){return this.Oc}),Y(Ih,{tE:"actualYRadius"},function(){return this.Af}),Y(Ih,{gH:"actualSpacing"},function(){return this.wj}),Y(Ih,{rE:"actualCenter"},function(){return isNaN(this.nd.x)||isNaN(this.nd.y)?new wi(0,0):new wi(this.nd.x+this.sE,this.nd.y+this.tE)});var Vd;Ih.ConstantSpacing=Vd=Z(Ih,"ConstantSpacing",0);var Hd;Ih.ConstantDistance=Hd=Z(Ih,"ConstantDistance",1);var Ud;Ih.ConstantAngle=Ud=Z(Ih,"ConstantAngle",2);var Kd;Ih.Packed=Kd=Z(Ih,"Packed",3);var Yd;Ih.Clockwise=Yd=Z(Ih,"Clockwise",4);var Wd;Ih.Counterclockwise=Wd=Z(Ih,"Counterclockwise",5);var Xd;Ih.BidirectionalLeft=Xd=Z(Ih,"BidirectionalLeft",6);var Jd;Ih.BidirectionalRight=Jd=Z(Ih,"BidirectionalRight",7);var Zd;Ih.Forwards=Zd=Z(Ih,"Forwards",8);var Qd;Ih.Reverse=Qd=Z(Ih,"Reverse",9);var $d;Ih.Ascending=$d=Z(Ih,"Ascending",10);var _d;Ih.Descending=_d=Z(Ih,"Descending",11);var tv;Ih.Optimized=tv=Z(Ih,"Optimized",12);var iv;Ih.Pythagorean=iv=Z(Ih,"Pythagorean",13);var nv;Ih.Circular=nv=Z(Ih,"Circular",14),$h.prototype.compare=function(t,i){if(t>0&&0>this.Dn||Math.abs(t)<Math.abs(this.Dn)&&!(0>t&&0<this.Dn)){this.Dn=t,this.Vl=[],this.po=[];for(var n=0;n<i.length;n++)this.Vl[n]=i[n].Qa.x,this.po[n]=i[n].Qa.y}},$h.prototype.commit=function(t){if(null!==this.Vl&&null!==this.po)for(var i=0;i<this.Vl.length;i++){var n=t.Y(i);n.x=this.Vl[i],n.y=this.po[i]}},U(_h,Ah),H("CircularNetwork",_h),_h.prototype.createVertex=function(){return new tl},_h.prototype.createEdge=function(){return new nl},U(tl,qh),H("CircularVertex",tl),U(nl,Eh),H("CircularEdge",nl),U(el,Lh),H("ForceDirectedLayout",el),el.prototype.cloneProtected=function(t){Lh.prototype.cloneProtected.call(this,t),t.kf.assign(this.kf),t.Ao=this.Ao,t.Sg=this.Sg,t.Ag=this.Ag,t.Sm=this.Sm,t.Xo=this.Xo,t.Kg=this.Kg,t.qq=this.qq,t.qm=this.qm,t.pm=this.pm,t.mm=this.mm,t.om=this.om,t.Ro=this.Ro,t.Qo=this.Qo},el.prototype.createNetwork=function(){return new dl},el.prototype.doLayout=function(t){if(null===t&&r("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(t)),t=this.qy,0<this.network.vertexes.count){this.network.Nu();for(var i=this.network.vertexes.i;i.next();){var n=i.value;n.charge=this.electricalCharge(n),n.mass=this.gravitationalMass(n)}for(i=this.network.edges.i;i.next();)n=i.value,n.stiffness=this.springStiffness(n),n.length=this.springLength(n);if(this.Cx(),this.zp=0,this.needsClusterLayout()){for(i=this.network,n=i.QG().i;n.next();){this.network=n.value;for(var e=this.network.vertexes.i;e.next();){var o=e.value;o.ef=o.vertexes.count,o.bj=1,o.yl=null,o.vg=null}ol(this,0,t)}this.network=i,n.reset();for(var e=this.EB,s=n.count,a=!0,h=o=0,l=E(),u=0;u<s+i.vertexes.count+2;u++)l[u]=null;s=0,n.reset();for(var f=D();n.next();)if(u=n.value,this.Bf(u,f),a)a=!1,o=f.x+f.width/2,h=f.y+f.height/2,l[0]=new wi(f.x+f.width+e.width,f.y),l[1]=new wi(f.x,f.y+f.height+e.height),s=2;else{var c=ll(l,s,o,h,f.width,f.height,e),p=l[c],d=new wi(p.x+f.width+e.width,p.y),v=new wi(p.x,p.y+f.height+e.height);for(s>c+1&&l.splice(c+1,0,null),l[c]=d,l[c+1]=v,s++,c=p.x-f.x,p=p.y-f.y,u=u.vertexes.i;u.next();)d=u.value,d.ua+=c,d.Da+=p}for(F(f),u=i.vertexes.i;u.next();)a=u.value,f=a.Qa,2>s?(o=f.x+f.width/2,h=f.y+f.height/2,l[0]=new wi(f.x+f.width+e.width,f.y),l[1]=new wi(f.x,f.y+f.height+e.height),s=2):(c=ll(l,s,o,h,f.width,f.height,e),p=l[c],d=new wi(p.x+f.width+e.width,p.y),v=new wi(p.x,p.y+f.height+e.height),s>c+1&&l.splice(c+1,0,null),l[c]=d,l[c+1]=v,s++,a.ua=p.x+a.width/2,a.Da=p.y+a.height/2);for(R(l),n.reset();n.next();){for(e=n.value,o=e.vertexes.i;o.next();)i.Wj(o.value);for(e=e.edges.i;e.next();)i.nn(e.value)}}fl(this,t),this.updateParts()}this.Sm=t,this.network=null,this.Me=!0},el.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var t=0,i=0,n=this.network.vertexes.first().Qa,e=this.network.vertexes.i;e.next();){if(e.value.Qa.If(n)&&(t++,t>2))return!0;if(i>10)break;i++}return!1},el.prototype.Bf=function(t,i){for(var n=!0,e=t.vertexes.i;e.next();){var o=e.value;n?(n=!1,i.set(o.Qa)):i.fh(o.Qa)}return i},el.prototype.Cx=function(){if(this.comments)for(var t=this.network.vertexes.i;t.next();)this.addComments(t.value)},el.prototype.addComments=function(t){var i=t.dc;if(null!==i)for(i=i.bC();i.next();){var n=i.value;if("Comment"===n.kc&&n.qa()){var e=this.network.Hl(n);null===e&&(e=this.network.gr(n)),e.charge=this.TE;for(var n=null,o=e.Gb;o.next();){var r=o.value;if(r.toVertex===t){n=r;break}}if(null===n)for(o=e.Mb;o.next();)if(r=o.value,r.fromVertex===t){n=r;break}null===n&&(n=this.network.Qn(t,e,null)),n.length=this.UE}}},el.prototype.moveFixedVertex=function(){},el.prototype.commitLayout=function(){this.Uy(),this.commitNodes(),this.Qr&&this.commitLinks()},el.prototype.Uy=function(){if(this.jo)for(var t=this.network.edges.i;t.next();){var i=t.value.link;null!==i&&(i.Za=bf,i.ab=bf)}},el.prototype.commitNodes=function(){var t=0,i=0;
if(this.yE){var n=D();this.Bf(this.network,n),i=this.nd,t=i.x-n.x,i=i.y-n.y,F(n)}for(var n=D(),e=this.network.vertexes.i;e.next();){var o=e.value;(0!==t||0!==i)&&(n.assign(o.Qa),n.x+=t,n.y+=i,o.Qa=n),o.commit()}F(n)},el.prototype.commitLinks=function(){for(var t=this.network.edges.i;t.next();)t.value.commit()},el.prototype.springStiffness=function(t){return t=t.stiffness,isNaN(t)?this.qm:t},el.prototype.springLength=function(t){return t=t.length,isNaN(t)?this.pm:t},el.prototype.electricalCharge=function(t){return t=t.charge,isNaN(t)?this.mm:t},el.prototype.electricalFieldX=function(){return 0},el.prototype.electricalFieldY=function(){return 0},el.prototype.gravitationalMass=function(t){return t=t.mass,isNaN(t)?this.om:t},el.prototype.gravitationalFieldX=function(){return 0},el.prototype.gravitationalFieldY=function(){return 0},el.prototype.isFixed=function(t){return t.isFixed},Y(el,{GH:"currentIteration"},function(){return this.zp}),K(el,{EB:"arrangementSpacing"},function(){return this.kf},function(t){a(t,Ti,el,"arrangementSpacing"),this.kf.A(t)||(this.kf.assign(t),this.v())}),K(el,{yE:"arrangesToOrigin"},function(){return this.Ao},function(t){this.Ao!==t&&(h(t,"boolean",el,"arrangesToOrigin"),this.Ao=t,this.v())}),K(el,{jo:"setsPortSpots"},function(){return this.Sg},function(t){this.Sg!==t&&(h(t,"boolean",el,"setsPortSpots"),this.Sg=t,this.v())}),K(el,{comments:"comments"},function(){return this.Ag},function(t){this.Ag!==t&&(h(t,"boolean",el,"comments"),this.Ag=t,this.v())}),K(el,{qy:"maxIterations"},function(){return this.Sm},function(t){this.Sm!==t&&(h(t,"number",el,"maxIterations"),t>=0&&(this.Sm=t,this.v()))}),K(el,{ZB:"epsilonDistance"},function(){return this.Xo},function(t){this.Xo!==t&&(h(t,"number",el,"epsilonDistance"),t>0&&(this.Xo=t,this.v()))}),K(el,{$H:"infinityDistance"},function(){return this.Kg},function(t){this.Kg!==t&&(h(t,"number",el,"infinityDistance"),t>1&&(this.Kg=t,this.v()))}),K(el,{sv:"randomNumberGenerator"},function(){return this.qq},function(t){this.qq!==t&&(null!==t&&"function"!=typeof t.random&&r('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.qq=t)}),K(el,{TH:"defaultSpringStiffness"},function(){return this.qm},function(t){this.qm!==t&&(h(t,"number",el,"defaultSpringStiffness"),this.qm=t,this.v())}),K(el,{SH:"defaultSpringLength"},function(){return this.pm},function(t){this.pm!==t&&(h(t,"number",el,"defaultSpringLength"),this.pm=t,this.v())}),K(el,{MH:"defaultElectricalCharge"},function(){return this.mm},function(t){this.mm!==t&&(h(t,"number",el,"defaultElectricalCharge"),this.mm=t,this.v())}),K(el,{NH:"defaultGravitationalMass"},function(){return this.om},function(t){this.om!==t&&(h(t,"number",el,"defaultGravitationalMass"),this.om=t,this.v())}),K(el,{UE:"defaultCommentSpringLength"},function(){return this.Ro},function(t){this.Ro!==t&&(h(t,"number",el,"defaultCommentSpringLength"),this.Ro=t,this.v())}),K(el,{TE:"defaultCommentElectricalCharge"},function(){return this.Qo},function(t){this.Qo!==t&&(h(t,"number",el,"defaultCommentElectricalCharge"),this.Qo=t,this.v())}),U(dl,Ah),H("ForceDirectedNetwork",dl),dl.prototype.createVertex=function(){return new vl},dl.prototype.createEdge=function(){return new yl},U(vl,qh),H("ForceDirectedVertex",vl),U(yl,Eh),H("ForceDirectedEdge",yl),U(gl,Lh),H("LayeredDigraphLayout",gl),gl.prototype.cloneProtected=function(t){Lh.prototype.cloneProtected.call(this,t),t.Xk=this.Xk,t.Nc=this.Nc,t.aa=this.aa,t.lm=this.lm,t.Qm=this.Qm,t.Fm=this.Fm,t.Uk=this.Uk,t.am=this.am,t.Ch=this.Ch,t.Sg=this.Sg,t.si=this.si},gl.prototype.createNetwork=function(){return new Ql},gl.prototype.doLayout=function(t){for(null===t&&r("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(t)),this.nd=this.initialOrigin(this.nd),this.Gt=-1,this.Te=this.Rp=0,this.Zp=this.Xp=this.Zk=null,t=0;t<this.cg.length;t++)this.cg[t]=null;if(0<this.network.vertexes.count){for(this.network.Nu(),t=this.network.edges.i;t.next();)t.value.rev=!1;switch(this.lm){default:case ov:var i=0,n=this.network.vertexes.count-1;t=[],t.length=n+1;for(var e=this.network.vertexes.i;e.next();)e.value.valid=!0;for(;null!==Nl(this.network);){for(e=Pl(this.network);null!==e;)t[n]=e,n--,e.valid=!1,e=Pl(this.network);for(e=jl(this.network);null!==e;)t[i]=e,i++,e.valid=!1,e=jl(this.network);for(var e=null,o=0,s=this.network.vertexes.i;s.next();){var a=s.value;if(a.valid){for(var h=0,l=a.Gb;l.next();)l.value.toVertex.valid&&h++;for(var l=0,u=a.Mb;u.next();)u.value.fromVertex.valid&&l++;(null===e||h-l>o)&&(e=a,o=h-l)}}null!==e&&(t[i]=e,i++,e.valid=!1)}for(i=0;i<this.network.vertexes.count;i++)t[i].index=i;for(t=this.network.edges.i;t.next();)i=t.value,i.fromVertex.index>i.toVertex.index&&(this.network.tv(i),i.rev=!0);break;case ev:for(i=this.network.vertexes.i;i.next();)t=i.value,t.zn=-1,t.finish=-1;for(t=this.network.edges.i;t.next();)t.value.forest=!1;for(this.Yp=0,i.reset();i.next();)n=i.value,0===n.Mb.count&&Ll(this,n);for(i.reset();i.next();)n=i.value,-1===n.zn&&Ll(this,n);for(t.reset();t.next();)i=t.value,i.forest||(n=i.fromVertex,e=n.finish,o=i.toVertex,s=o.finish,o.zn<n.zn&&s>e&&(this.network.tv(i),i.rev=!0))}for(t=this.network.vertexes.i;t.next();)t.value.layer=-1;for(this.Pa=-1,this.assignLayers(),t.reset();t.next();)this.Pa=Math.max(this.Pa,t.value.layer);for(t=[],n=this.network.edges.i;n.next();)i=n.value,i.valid=!1,t.push(i);for(n=0;n<t.length;n++)if(i=t[n],!i.valid&&(null!==i.fromVertex.Fc&&null!==i.toVertex.Fc||i.fromVertex.layer!==i.toVertex.layer)){if(l=a=h=s=0,o=i.fromVertex,e=i.toVertex,null!==i.link){if(h=i.link,null===h)continue;var f=o.Fc,s=e.Fc;if(null===f||null===s)continue;var c=h.M,a=h.R,p=h.Jc,l=h.yd;i.rev&&(h=c,u=p,c=a,p=l,a=h,l=u);var d=o.B,h=i.toVertex.B,v=i.rev?e.P:o.P,u=C();v.w()?(fa(c,p,Sf,u),u.w()||u.assign(d)):u.assign(d),f!==c&&v.w()&&c.qa()&&(f=o.P,f.w()&&(u.x+=v.x-f.x,u.y+=v.y-f.y)),c=i.rev?o.P:e.P,f=C(),c.w()?(fa(a,l,Sf,f),f.w()||f.assign(h)):f.assign(h),s!==a&&c.w()&&a.qa()&&(s=e.P,s.w()&&(f.x+=c.x-s.x,f.y+=c.y-s.y)),90===this.aa||270===this.aa?(s=Math.round((u.x-d.x)/this.Nc),a=u.x,h=Math.round((f.x-h.x)/this.Nc),l=f.x):(s=Math.round((u.y-d.y)/this.Nc),a=u.y,h=Math.round((f.y-h.y)/this.Nc),l=f.y),P(u),P(f),i.portFromColOffset=s,i.portFromPos=a,i.portToColOffset=h,i.portToPos=l}else i.portFromColOffset=0,i.portFromPos=0,i.portToColOffset=0,i.portToPos=0;if(u=o.layer,d=e.layer,f=i,c=0,v=f.link,null!==v){var y=v.Jc,g=v.yd;if(null!==y&&null!==g){var m=v.M,p=v.R;if(null!==m&&null!==p){var x=y.Za,b=g.ab;this.jo||(v.Za.lc()||(x=v.Za),v.ab.lc()||(b=v.ab)),(x.lc()||x===xf)&&(x=Wl(this,!0)),(b.lc()||b===xf)&&(b=Wl(this,!1));var w=v.Ib,k=v.getLinkPoint(m,y,x,!0,w,p,g,C()),x=v.getLinkDirection(m,y,k,x,!0,w,p,g);P(k),x===zl(this,f,!0)?c+=1:this.jo&&null!==m&&1===m.ports.count&&f.rev&&(c+=1),k=v.getLinkPoint(p,g,b,!1,w,m,y,C()),v=v.getLinkDirection(p,g,k,b,!1,w,m,y),P(k),v===zl(this,f,!1)?c+=2:this.jo&&null!==p&&1===p.ports.count&&f.rev&&(c+=2)}}}if(f=1===c||3===c?!0:!1,(c=2===c||3===c?!0:!1)&&(p=this.network.createVertex(),p.Fc=null,p.vl=1,p.layer=u,p.near=o,this.network.Wj(p),o=this.network.Qn(o,p,i.link),o.valid=!1,o.rev=i.rev,o.portFromColOffset=s,o.portToColOffset=0,o.portFromPos=a,o.portToPos=0,o=p),v=1,f&&v--,u-d>v&&u>0){for(i.valid=!1,p=this.network.createVertex(),p.Fc=null,p.vl=2,p.layer=u-1,this.network.Wj(p),o=this.network.Qn(o,p,i.link),o.valid=!0,o.rev=i.rev,o.portFromColOffset=c?0:s,o.portToColOffset=0,o.portFromPos=c?0:a,o.portToPos=0,o=p,u--;u-d>v&&u>0;)p=this.network.createVertex(),p.Fc=null,p.vl=3,p.layer=u-1,this.network.Wj(p),o=this.network.Qn(o,p,i.link),o.valid=!0,o.rev=i.rev,o.portFromColOffset=0,o.portToColOffset=0,o.portFromPos=0,o.portToPos=0,o=p,u--;o=this.network.Qn(p,e,i.link),o.valid=!f,f&&(p.near=e),o.rev=i.rev,o.portFromColOffset=0,o.portToColOffset=h,o.portFromPos=0,o.portToPos=l}else i.valid=!0}for(i=this.dd=[],n=0;n<=this.Pa;n++)i[n]=0;for(t=this.network.vertexes.i;t.next();)n=t.value,n.index=-1;for(this.initializeIndices(),this.Gt=-1,n=this.Te=this.Rp=0;n<=this.Pa;n++)i[n]>i[this.Te]&&(this.Gt=i[n]-1,this.Te=n),i[n]<i[this.Rp]&&(this.Rp=n);for(this.Zp=[],n=0;n<i.length;n++)this.Zp[n]=[];for(t.reset();t.next();)i=t.value,n=this.Zp[i.layer],n[i.index]=i;for(this.mb=-1,t=0;t<=this.Pa;t++){for(i=Xl(this,t),n=0,e=this.dd[t],o=0;e>o;o++)s=i[o],n+=this.nodeMinColumnSpace(s,!0),s.column=n,n+=1,n+=this.nodeMinColumnSpace(s,!1);this.mb=Math.max(this.mb,n-1),Jl(this,t,i)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.Me=!0},gl.prototype.linkMinLength=function(t){var i=t.toVertex,n=0;for(t=t.fromVertex.Gb;t.next();)t.value.toVertex===i&&n++;return n>1?2:1},gl.prototype.nodeMinLayerSpace=function(t,i){return null===t.Fc?0:90===this.aa||270===this.aa?i?t.B.y+10:t.P.height-t.B.y+10:i?t.B.x+10:t.P.width-t.B.x+10},gl.prototype.nodeMinColumnSpace=function(t,i){if(null===t.Fc)return 0;var n=i?t.zy:t.yy;return null!==n?n:(n=this.aa,90===n||270===n?i?t.zy=t.B.x/this.Nc+1|0:t.yy=(t.P.width-t.B.x)/this.Nc+1|0:i?t.zy=t.B.y/this.Nc+1|0:t.yy=(t.P.height-t.B.y)/this.Nc+1|0)},gl.prototype.countCrossings=function(){for(var t=0,i=0;i<=this.Pa;i++)for(var n=wl(this,i,1),e=this.dd[i],o=0;e>o;o++)for(var r=o;e>r;r++)t+=n[o*e+r];return t},gl.prototype.normalize=function(){var t=1/0;this.mb=-1;for(var i=this.network.vertexes.i;i.next();){var n=i.value,t=Math.min(t,n.column-this.nodeMinColumnSpace(n,!0));this.mb=Math.max(this.mb,n.column+this.nodeMinColumnSpace(n,!1))}for(i.reset();i.next();)i.value.column-=t;this.mb-=t},gl.prototype.assignLayers=function(){switch(this.Qm){case sv:Dl(this);break;case av:for(var t=0,i=this.network.vertexes.i;i.next();)t=Fl(this,i.value),this.Pa=Math.max(t,this.Pa);for(i.reset();i.next();)t=i.value,t.layer=this.Pa-t.layer;break;default:case rv:for(Dl(this),i=this.network.vertexes.i;i.next();)i.value.valid=!1;for(i.reset();i.next();)t=i.value,0===t.Mb.count&&Ol(this,t);for(t=1/0,i.reset();i.next();)t=Math.min(t,i.value.layer);for(this.Pa=-1,i.reset();i.next();){var n=i.value;n.layer-=t,this.Pa=Math.max(this.Pa,n.layer)}}},gl.prototype.initializeIndices=function(){switch(this.Fm){default:case uv:for(var t=this.network.vertexes.i;t.next();){var i=t.value,n=i.layer;i.index=this.dd[n],this.dd[n]++}break;case hv:for(t=this.network.vertexes.i,i=this.Pa;i>=0;i--)for(t.reset();t.next();)n=t.value,n.layer===i&&-1===n.index&&Bl(this,n);break;case lv:for(t=this.network.vertexes.i,i=0;i<=this.Pa;i++)for(t.reset();t.next();)n=t.value,n.layer===i&&-1===n.index&&ql(this,n)}},gl.prototype.reduceCrossings=function(){for(var t=this.countCrossings(),i=xl(this),n=0,e=0,o=0,n=0;n<this.Uk;n++){for(e=0;e<=this.Pa;e++)El(this,e,1),Rl(this,e,1);for(o=this.countCrossings(),t>o&&(t=o,i=xl(this)),e=this.Pa;e>=0;e--)El(this,e,-1),Rl(this,e,-1);o=this.countCrossings(),t>o&&(t=o,i=xl(this))}for(bl(this,i),n=0;n<this.Uk;n++){for(e=0;e<=this.Pa;e++)El(this,e,0),Rl(this,e,0);for(o=this.countCrossings(),t>o&&(t=o,i=xl(this)),e=this.Pa;e>=0;e--)El(this,e,0),Rl(this,e,0);o=this.countCrossings(),t>o&&(t=o,i=xl(this))}bl(this,i);var r=!1,s=n=0,a=0,e=0;switch(this.am){case fv:break;case pv:for(a=t+1;(e=this.countCrossings())<a;)for(a=e,n=this.Pa;n>=0;n--)for(s=0;n>=s;s++){for(r=!0;r;)for(r=!1,e=n;e>=s;e--)r=Rl(this,e,-1)||r;for(o=this.countCrossings(),o>=t?bl(this,i):(t=o,i=xl(this)),r=!0;r;)for(r=!1,e=n;e>=s;e--)r=Rl(this,e,1)||r;for(o=this.countCrossings(),o>=t?bl(this,i):(t=o,i=xl(this)),r=!0;r;)for(r=!1,e=s;n>=e;e++)r=Rl(this,e,1)||r;for(o>=t?bl(this,i):(t=o,i=xl(this)),r=!0;r;)for(r=!1,e=s;n>=e;e++)r=Rl(this,e,-1)||r;for(o>=t?bl(this,i):(t=o,i=xl(this)),r=!0;r;)for(r=!1,e=n;e>=s;e--)r=Rl(this,e,0)||r;for(o>=t?bl(this,i):(t=o,i=xl(this)),r=!0;r;)for(r=!1,e=s;n>=e;e++)r=Rl(this,e,0)||r;o>=t?bl(this,i):(t=o,i=xl(this))}break;default:case cv:for(n=this.Pa,s=0,a=t+1;(e=this.countCrossings())<a;){for(a=e,r=!0;r;)for(r=!1,e=n;e>=s;e--)r=Rl(this,e,-1)||r;for(o=this.countCrossings(),o>=t?bl(this,i):(t=o,i=xl(this)),r=!0;r;)for(r=!1,e=n;e>=s;e--)r=Rl(this,e,1)||r;for(o=this.countCrossings(),o>=t?bl(this,i):(t=o,i=xl(this)),r=!0;r;)for(r=!1,e=s;n>=e;e++)r=Rl(this,e,1)||r;for(o>=t?bl(this,i):(t=o,i=xl(this)),r=!0;r;)for(r=!1,e=s;n>=e;e++)r=Rl(this,e,-1)||r;for(o>=t?bl(this,i):(t=o,i=xl(this)),r=!0;r;)for(r=!1,e=n;e>=s;e--)r=Rl(this,e,0)||r;for(o>=t?bl(this,i):(t=o,i=xl(this)),r=!0;r;)for(r=!1,e=s;n>=e;e++)r=Rl(this,e,0)||r;o>=t?bl(this,i):(t=o,i=xl(this))}}bl(this,i)},gl.prototype.straightenAndPack=function(){var t=0,i=!1,n=0!==(this.Ch&dv),t=this.Ch===gv;if(1e3<this.network.edges.count&&!t&&(n=!1),n){for(i=[],t=t=0;t<=this.Pa;t++)i[t]=0;for(var e=0,o=this.network.vertexes.i;o.next();){var r=o.value,t=r.layer,e=r.column,r=this.nodeMinColumnSpace(r,!1);i[t]=Math.max(i[t],e+r)}for(o.reset();o.next();)r=o.value,t=r.layer,e=r.column,r.column=(8*(this.mb-i[t])>>1)+8*e;this.mb*=8}if(0!==(this.Ch&vv))for(i=!0;i;){for(i=!1,t=this.Te+1;t<=this.Pa;t++)i=Il(this,t,1)||i;for(t=this.Te-1;t>=0;t--)i=Il(this,t,-1)||i;i=Il(this,this.Te,0)||i}if(0!==(this.Ch&yv)){for(t=this.Te+1;t<=this.Pa;t++)Vl(this,t,1);for(t=this.Te-1;t>=0;t--)Vl(this,t,-1);Vl(this,this.Te,0)}if(n&&(Kl(this,-1),Kl(this,1)),0!==(this.Ch&vv))for(i=!0;i;){for(i=!1,i=Il(this,this.Te,0)||i,t=this.Te+1;t<=this.Pa;t++)i=Il(this,t,0)||i;for(t=this.Te-1;t>=0;t--)i=Il(this,t,0)||i}},gl.prototype.commitLayout=function(){if(this.jo)for(var t=Wl(this,!0),i=Wl(this,!1),n=this.network.edges.i;n.next();){var e=n.value.link;null!==e&&(e.Za=t,e.ab=i)}this.commitNodes(),this.Fx(),this.Qr&&this.commitLinks()},gl.prototype.commitNodes=function(){this.ag=[],this.qf=[],this.Se=[],this.pb=[];for(var t=0;t<=this.Pa;t++)this.ag[t]=0,this.qf[t]=0,this.Se[t]=0,this.pb[t]=0;for(t=this.network.vertexes.i;t.next();){var i=t.value,n=i.layer;this.ag[n]=Math.max(this.ag[n],this.nodeMinLayerSpace(i,!0)),this.qf[n]=Math.max(this.qf[n],this.nodeMinLayerSpace(i,!1))}for(var i=0,e=this.Xk,n=0;n<=this.Pa;n++){var o=e;0>=this.ag[n]+this.qf[n]&&(o=0),n>0&&(i+=o/2),90===this.aa||0===this.aa?(i+=this.qf[n],this.Se[n]=i,i+=this.ag[n]):(i+=this.ag[n],this.Se[n]=i,i+=this.qf[n]),n<this.Pa&&(i+=o/2),this.pb[n]=i}for(e=i,i=this.nd,n=0;n<=this.Pa;n++)270===this.aa?this.Se[n]=i.y+this.Se[n]:90===this.aa?(this.Se[n]=i.y+e-this.Se[n],this.pb[n]=e-this.pb[n]):180===this.aa?this.Se[n]=i.x+this.Se[n]:(this.Se[n]=i.x+e-this.Se[n],this.pb[n]=e-this.pb[n]);for(t.reset();t.next();){var n=t.value,e=n.layer,o=0|n.column,r=0,s=0;270===this.aa||90===this.aa?(r=i.x+this.Nc*o,s=this.Se[e]):(r=this.Se[e],s=i.y+this.Nc*o),n.ua=r,n.Da=s,n.commit()}},gl.prototype.Fx=function(){for(var t=0,i=this.Xk,n=0;n<=this.Pa;n++)t+=this.ag[n],t+=this.qf[n];for(var t=t+this.Pa*i,i=[],n=this.Nc*this.mb,e=this.XF;e>=0;e--)i.push(270===this.aa?0===e?new Si(0,0,n,Math.abs(this.pb[0])):new Si(0,this.pb[e-1],n,Math.abs(this.pb[e-1]-this.pb[e])):90===this.aa?0===e?new Si(0,this.pb[0],n,Math.abs(this.pb[0]-t)):new Si(0,this.pb[e],n,Math.abs(this.pb[e-1]-this.pb[e])):180===this.aa?0===e?new Si(0,0,Math.abs(this.pb[0]),n):new Si(this.pb[e-1],0,Math.abs(this.pb[e-1]-this.pb[e]),n):0===e?new Si(this.pb[0],0,Math.abs(this.pb[0]-t),n):new Si(this.pb[e],0,Math.abs(this.pb[e-1]-this.pb[e]),n));this.commitLayers(i,Qf.fj)},gl.prototype.commitLayers=function(){},gl.prototype.commitLinks=function(){for(var t,i=this.network.edges.i;i.next();)t=i.value.link,null!==t&&(t.Ak(),t.vn(),t.Nh());for(i.reset();i.next();)t=i.value.link,null!==t&&t.updateRoute();for(i.reset();i.next();){var n=i.value;if(t=n.link,null!==t){t.Ak();var e=t,o=e.M,r=e.R,s=e.Jc,a=e.yd;if(n.valid){if(t.ne===md&&4===t.Z){if(n.rev)var h=o,o=r,r=h,l=s,s=a,a=l;if(n.fromVertex.column===n.toVertex.column){var u=t.getLinkPoint(o,s,t.computeSpot(!0),!0,!1,r,a),f=t.getLinkPoint(r,a,t.computeSpot(!1),!1,!1,o,s);u.w()||u.set(o.Q.Yj),f.w()||f.set(r.Q.Yj),t.vn(),t.Vj(u.x,u.y),t.Vj((2*u.x+f.x)/3,(2*u.y+f.y)/3),t.Vj((u.x+2*f.x)/3,(u.y+2*f.y)/3),t.Vj(f.x,f.y)}else{var c=!1,p=!1;if(null!==s&&t.computeSpot(!0)===xf&&(c=!0),null!==a&&t.computeSpot(!1)===xf&&(p=!0),c||p){var d=t.j(0).x,v=t.j(0).y,y=t.j(1).x,g=t.j(1).y,m=t.j(2).x,x=t.j(2).y,b=t.j(3).x,w=t.j(3).y;if(c){90===this.aa||270===this.aa?(y=d,g=(v+w)/2):(y=(d+b)/2,g=v),t.L(1,y,g);var k=t.getLinkPoint(o,s,t.computeSpot(!0),!0,!1,r,a);k.w()||k.set(o.Q.Yj),t.L(0,k.x,k.y)}p&&(90===this.aa||270===this.aa?(m=b,x=(v+w)/2):(m=(d+b)/2,x=w),t.L(2,m,x),k=t.getLinkPoint(r,a,t.computeSpot(!1),!1,!1,o,s),k.w()||k.set(r.Q.Yj),t.L(3,k.x,k.y))}}}t.Nh()}else if(n.fromVertex.layer===n.toVertex.layer)t.Nh();else{var M=!1,T=!1,S=0,C=t.Br+1;if(t.Ib)T=!0,S=t.Z,S>4&&t.points.removeRange(2,S-3);else if(t.ne===md)M=!0,S=t.Z,S>4&&t.points.removeRange(2,S-3),C=2;else{var S=t.Z,N=t.computeSpot(!0)===xf,P=t.computeSpot(!1)===xf;S>2&&N&&P?t.points.removeRange(1,S-2):S>3&&N&&!P?t.points.removeRange(1,S-3):S>3&&!N&&P?t.points.removeRange(2,S-2):S>4&&!N&&!P&&t.points.removeRange(2,S-3)}var j,L,D=n.fromVertex,A=n.toVertex;if(n.rev){for(var F=0;null!==A&&D!==A;){L=j=null;for(var O=A.Mb.i;O.next();){var z=O.value;if(z.link===n.link&&(j=z.fromVertex,L=z.toVertex,null===j.Fc))break}j!==D&&(I=t.j(C-1).x,G=t.j(C-1).y,V=j.ua,H=j.Da,T?180===this.aa||0===this.aa?2===C?(t.n(C++,I,G),t.n(C++,I,H)):(W=null!==L?L.Da:G,W!==H&&(U=this.pb[j.layer-1],t.n(C++,U,G),t.n(C++,U,H))):2===C?(t.n(C++,I,G),t.n(C++,V,G)):(X=null!==L?L.ua:I,X!==V&&(U=this.pb[j.layer-1],t.n(C++,I,U),t.n(C++,V,U))):2===C?M?(K=Math.max(10,this.ag[A.layer]),Y=Math.max(10,this.qf[A.layer]),180===this.aa?(F=A.P.x,t.n(C++,F-K,H),t.n(C++,F,H),t.n(C++,F+Y,H)):90===this.aa?(F=A.P.y+A.P.height,t.n(C++,V,F+Y),t.n(C++,V,F),t.n(C++,V,F-K)):270===this.aa?(F=A.P.y,t.n(C++,V,F-K),t.n(C++,V,F),t.n(C++,V,F+Y)):(F=A.P.x+A.P.width,t.n(C++,F+Y,H),t.n(C++,F,H),t.n(C++,F-K,H))):(t.n(C++,I,G),180===this.aa||0===this.aa?t.n(C++,I,H):t.n(C++,V,G),t.n(C++,V,H)):(K=Math.max(10,this.ag[j.layer]),Y=Math.max(10,this.qf[j.layer]),180===this.aa?(M&&t.n(C++,V-K,H),t.n(C++,V,H),M&&t.n(C++,V+Y,H)):90===this.aa?(M&&t.n(C++,V,H+Y),t.n(C++,V,H),M&&t.n(C++,V,H-K)):270===this.aa?(M&&t.n(C++,V,H-K),t.n(C++,V,H),M&&t.n(C++,V,H+Y)):(M&&t.n(C++,V+Y,H),t.n(C++,V,H),M&&t.n(C++,V-K,H)))),A=j}if(null===a||t.computeSpot(!1)!==xf)if(I=t.j(C-1).x,G=t.j(C-1).y,V=t.j(C).x,H=t.j(C).y,T){var B=this.qf[D.layer],q=0;180===this.aa||0===this.aa?(q=G,q>=D.P.y&&q<=D.P.bottom&&(F=D.ua+B,q=q<D.P.y+D.P.height/2?D.P.y-this.Nc/2:D.P.bottom+this.Nc/2,t.n(C++,F,G),t.n(C++,F,q)),t.n(C++,V,q)):(q=I,q>=D.P.x&&q<=D.P.right&&(F=D.Da+B,q=q<D.P.x+D.P.width/2?D.P.x-this.Nc/2:D.P.right+this.Nc/2,t.n(C++,I,F),t.n(C++,q,F)),t.n(C++,q,H)),t.n(C++,V,H)}else M?(K=Math.max(10,this.ag[D.layer]),Y=Math.max(10,this.qf[D.layer]),180===this.aa?(F=D.P.x+D.P.width,t.L(C-2,F,G),t.L(C-1,F+Y,G)):90===this.aa?(F=D.P.y,t.L(C-2,I,F),t.L(C-1,I,F-K)):270===this.aa?(F=D.P.y+D.P.height,t.L(C-2,I,F),t.L(C-1,I,F+Y)):(F=D.P.x,t.L(C-2,F,G),t.L(C-1,F-K,G))):(180===this.aa||0===this.aa?t.n(C++,V,G):t.n(C++,I,H),t.n(C++,V,H))}else{for(;null!==D&&D!==A;){L=j=null;for(var E=D.Gb.i;E.next();){var R=E.value;if(R.link===n.link&&(j=R.toVertex,L=R.fromVertex,null!==L.Fc&&(L=null),null===j.Fc))break}var I=0,G=0,V=0,H=0,U=0,K=0,Y=0;if(j!==A)if(I=t.j(C-1).x,G=t.j(C-1).y,V=j.ua,H=j.Da,T)if(180===this.aa||0===this.aa){var W=null!==L?L.Da:G;W!==H&&(U=this.pb[j.layer],2===C&&(U=0===this.aa?Math.max(U,I):Math.min(U,I)),t.n(C++,U,G),t.n(C++,U,H))}else{var X=null!==L?L.ua:I;X!==V&&(U=this.pb[j.layer],2===C&&(U=90===this.aa?Math.max(U,G):Math.min(U,G)),t.n(C++,I,U),t.n(C++,V,U))}else K=Math.max(10,this.ag[j.layer]),Y=Math.max(10,this.qf[j.layer]),180===this.aa?(t.n(C++,V+Y,H),M&&t.n(C++,V,H),t.n(C++,V-K,H)):90===this.aa?(t.n(C++,V,H-K),M&&t.n(C++,V,H),t.n(C++,V,H+Y)):270===this.aa?(t.n(C++,V,H+Y),M&&t.n(C++,V,H),t.n(C++,V,H-K)):(t.n(C++,V-K,H),M&&t.n(C++,V,H),t.n(C++,V+Y,H));D=j}T&&(I=t.j(C-1).x,G=t.j(C-1).y,V=t.j(C).x,H=t.j(C).y,180===this.aa||0===this.aa?G!==H&&(U=0===this.aa?Math.min(Math.max((V+I)/2,this.pb[A.layer]),V):Math.max(Math.min((V+I)/2,this.pb[A.layer]),V),t.n(C++,U,G),t.n(C++,U,H)):I!==V&&(U=90===this.aa?Math.min(Math.max((H+G)/2,this.pb[A.layer]),H):Math.max(Math.min((H+G)/2,this.pb[A.layer]),H),t.n(C++,I,U),t.n(C++,V,U)))}if(null!==e&&M){if(null!==s){if(t.computeSpot(!0)===xf){var J=t.j(0),Z=t.j(2);J.A(Z)||t.L(1,(J.x+Z.x)/2,(J.y+Z.y)/2)}k=t.getLinkPoint(o,s,xf,!0,!1,r,a),k.w()||k.set(o.Q.Yj),t.L(0,k.x,k.y)}null!==a&&(t.computeSpot(!1)===xf&&(J=t.j(t.Z-1),Z=t.j(t.Z-3),J.A(Z)||t.L(t.Z-2,(J.x+Z.x)/2,(J.y+Z.y)/2)),k=t.getLinkPoint(r,a,xf,!1,!1,o,s),k.w()||k.set(r.Q.Yj),t.L(t.Z-1,k.x,k.y))}t.Nh(),n.commit()}}}for(var Q=new ci(Ra),$=this.network.edges.i;$.next();){var _=$.value.link;null!==_&&_.Ib&&!Q.contains(_)&&Q.add(_)}if(0<Q.count)if(90===this.aa||270===this.aa){for(var ti,ii,ni=0,ei=new ci(Zl),oi=Q.i;oi.next();){var ri=oi.value;if(null!==ri&&ri.Ib)for(var si=2;si<ri.Z-3;si++)if(ti=ri.j(si),ii=ri.j(si+1),this.q(ti.y,ii.y)&&!this.q(ti.x,ii.x)){var ai=new Zl;ai.layer=Math.floor(ti.y/2);var hi=ri.j(0),li=ri.j(ri.Z-1);if(ai.first=hi.x*hi.x+hi.y,ai.ad=li.x*li.x+li.y,ai.Ud=Math.min(ti.x,ii.x),ai.od=Math.max(ti.x,ii.x),ai.index=si,ai.link=ri,si+2<ri.Z){var ui=ri.j(si-1),fi=ri.j(si+2),pi=0;ui.y<ti.y?pi=fi.y<ti.y?3:ti.x<ii.x?2:1:ui.y>ti.y&&(pi=fi.y>ti.y?0:ii.x<ti.x?2:1),ai.eh=pi}ei.add(ai)}}if(1<ei.count){ei.sort(this.jD);for(var di=0;di<ei.count;){for(var vi=ei.l[di].layer,yi=di+1;yi<ei.count&&ei.l[yi].layer===vi;)yi++;if(yi-di>1)for(var gi=di;yi>gi;){for(var mi=ei.l[gi].od,xi=di+1;yi>xi&&ei.l[xi].Ud<mi;)mi=Math.max(mi,ei.l[xi].od),xi++;var bi=xi-gi;if(bi>1){ei.lo(this.vv,gi,gi+bi);for(var wi=1,ki=ei.l[gi].ad,si=gi;xi>si;si++){var Mi=ei.l[si];Mi.ad!==ki&&(wi++,ki=Mi.ad)}ei.lo(this.iD,gi,gi+bi);for(var Ti=1,ki=ei.l[gi].first,si=gi;xi>si;si++)Mi=ei.l[si],Mi.first!==ki&&(Ti++,ki=Mi.first);var Si=!0,Ci=Ti;Ti>wi?(Si=!1,Ci=wi,ki=ei.l[gi].ad,ei.lo(this.vv,gi,gi+bi)):ki=ei.l[gi].first;for(var Ni=0,si=gi;xi>si;si++){Mi=ei.l[si],(Si?Mi.first:Mi.ad)!==ki&&(Ni++,ki=Si?Mi.first:Mi.ad),ri=Mi.link,ti=ri.j(Mi.index),ii=ri.j(Mi.index+1);var Pi=this.jv*(Ni-(Ci-1)/2);ni++,ri.Ak(),ri.L(Mi.index,ti.x,ti.y+Pi),ri.L(Mi.index+1,ii.x,ii.y+Pi),ri.Nh()}}gi=xi}di=yi}}}else{for(var ji,Li,Di=0,Ai=new ci(Zl),Fi=Q.i;Fi.next();){var Oi=Fi.value;if(null!==Oi&&Oi.Ib)for(var zi=2;zi<Oi.Z-3;zi++)if(ji=Oi.j(zi),Li=Oi.j(zi+1),this.q(ji.x,Li.x)&&!this.q(ji.y,Li.y)){var Bi=new Zl;Bi.layer=Math.floor(ji.x/2);var qi=Oi.j(0),Ei=Oi.j(Oi.Z-1);if(Bi.first=qi.x+qi.y*qi.y,Bi.ad=Ei.x+Ei.y*Ei.y,Bi.Ud=Math.min(ji.y,Li.y),Bi.od=Math.max(ji.y,Li.y),Bi.index=zi,Bi.link=Oi,zi+2<Oi.Z){var Ri=Oi.j(zi-1),Ii=Oi.j(zi+2),Gi=0;Ri.x<ji.x?Gi=Ii.x<ji.x?3:ji.y<Li.y?2:1:Ri.x>ji.x&&(Gi=Ii.x>ji.x?0:Li.y<ji.y?2:1),Bi.eh=Gi}Ai.add(Bi)}}if(1<Ai.count){Ai.sort(this.jD);for(var Vi=0;Vi<Ai.count;){for(var Hi=Ai.l[Vi].layer,Ui=Vi+1;Ui<Ai.count&&Ai.l[Ui].layer===Hi;)Ui++;if(Ui-Vi>1)for(var Ki=Vi;Ui>Ki;){for(var Yi=Ai.l[Ki].od,Wi=Vi+1;Ui>Wi&&Ai.l[Wi].Ud<Yi;)Yi=Math.max(Yi,Ai.l[Wi].od),Wi++;var Xi=Wi-Ki;if(Xi>1){Ai.lo(this.vv,Ki,Ki+Xi);for(var Ji=1,Zi=Ai.l[Ki].ad,zi=Ki;Wi>zi;zi++){var Qi=Ai.l[zi];Qi.ad!==Zi&&(Ji++,Zi=Qi.ad)}Ai.lo(this.iD,Ki,Ki+Xi);for(var $i=1,Zi=Ai.l[Ki].first,zi=Ki;Wi>zi;zi++)Qi=Ai.l[zi],Qi.first!==Zi&&($i++,Zi=Qi.first);var _i=!0,tn=$i;$i>Ji?(_i=!1,tn=Ji,Zi=Ai.l[Ki].ad,Ai.lo(this.vv,Ki,Ki+Xi)):Zi=Ai.l[Ki].first;for(var nn=0,zi=Ki;Wi>zi;zi++){Qi=Ai.l[zi],(_i?Qi.first:Qi.ad)!==Zi&&(nn++,Zi=_i?Qi.first:Qi.ad),Oi=Qi.link,ji=Oi.j(Qi.index),Li=Oi.j(Qi.index+1);var en=this.jv*(nn-(tn-1)/2);Di++,Oi.Ak(),Oi.L(Qi.index,ji.x+en,ji.y),Oi.L(Qi.index+1,Li.x+en,Li.y),Oi.Nh()}}Ki=Wi}Vi=Ui}}}},gl.prototype.jD=function(t,i){return t instanceof Zl&&i instanceof Zl&&t!==i?t.layer<i.layer?-1:t.layer>i.layer?1:t.Ud<i.Ud?-1:t.Ud>i.Ud?1:t.od<i.od?-1:t.od>i.od?1:0:0},gl.prototype.iD=function(t,i){return t instanceof Zl&&i instanceof Zl&&t!==i?t.first<i.first?-1:t.first>i.first||t.eh<i.eh?1:t.eh>i.eh||t.Ud<i.Ud?-1:t.Ud>i.Ud?1:t.od<i.od?-1:t.od>i.od?1:0:0},gl.prototype.vv=function(t,i){return t instanceof Zl&&i instanceof Zl&&t!==i?t.ad<i.ad?-1:t.ad>i.ad||t.eh<i.eh?1:t.eh>i.eh||t.Ud<i.Ud?-1:t.Ud>i.Ud?1:t.od<i.od?-1:t.od>i.od?1:0:0},gl.prototype.q=function(t,i){var n=t-i;return n>-1&&1>n},K(gl,{layerSpacing:"layerSpacing"},function(){return this.Xk},function(t){this.Xk!==t&&(h(t,"number",gl,"layerSpacing"),t>=0&&(this.Xk=t,this.v()))}),K(gl,{DH:"columnSpacing"},function(){return this.Nc},function(t){this.Nc!==t&&(h(t,"number",gl,"columnSpacing"),t>=0&&(this.Nc=t,this.v()))}),K(gl,{direction:"direction"},function(){return this.aa},function(t){this.aa!==t&&(h(t,"number",gl,"direction"),this.aa=t,this.v())}),K(gl,{SE:"cycleRemoveOption"},function(){return this.lm},function(t){this.lm!==t&&(u(t,gl,gl,"cycleRemoveOption"),t===ov||t===ev)&&(this.lm=t,this.v())}),K(gl,{PF:"layeringOption"},function(){return this.Qm},function(t){this.Qm!==t&&(u(t,gl,gl,"layeringOption"),t===rv||t===sv||t===av)&&(this.Qm=t,this.v())}),K(gl,{CF:"initializeOption"},function(){return this.Fm},function(t){this.Fm!==t&&(u(t,gl,gl,"initializeOption"),t===hv||t===lv||t===uv)&&(this.Fm=t,this.v())}),K(gl,{lI:"iterations"},function(){return this.Uk},function(t){this.Uk!==t&&(l(t,Ql,"iterations"),t>=0&&(this.Uk=t,this.v()))}),K(gl,{wE:"aggressiveOption"},function(){return this.am},function(t){this.am!==t&&(u(t,gl,gl,"aggressiveOption"),t===fv||t===cv||t===pv)&&(this.am=t,this.v())}),K(gl,{KI:"packOption"},function(){return this.Ch},function(t){this.Ch!==t&&(h(t,"number",gl,"packOption"),t>=0&&8>t&&(this.Ch=t,this.v()))}),K(gl,{jo:"setsPortSpots"},function(){return this.Sg},function(t){this.Sg!==t&&(h(t,"boolean",gl,"setsPortSpots"),this.Sg=t,this.v())}),K(gl,{jv:"linkSpacing"},function(){return this.si},function(t){this.si!==t&&(h(t,"number",gl,"linkSpacing"),t>=0&&(this.si=t,this.v()))}),Y(gl,{XF:"maxLayer"},function(){return this.Pa}),Y(gl,{sI:"maxIndex"},function(){return this.Gt}),Y(gl,{rI:"maxColumn"},function(){return this.mb}),Y(gl,{yI:"minIndexLayer"},function(){return this.Rp}),Y(gl,{tI:"maxIndexLayer"},function(){return this.Te});var ev;gl.CycleDepthFirst=ev=Z(gl,"CycleDepthFirst",0);var ov;gl.CycleGreedy=ov=Z(gl,"CycleGreedy",1);var rv;gl.LayerOptimalLinkLength=rv=Z(gl,"LayerOptimalLinkLength",0);var sv;gl.LayerLongestPathSink=sv=Z(gl,"LayerLongestPathSink",1);var av;gl.LayerLongestPathSource=av=Z(gl,"LayerLongestPathSource",2);var hv;gl.InitDepthFirstOut=hv=Z(gl,"InitDepthFirstOut",0);var lv;gl.InitDepthFirstIn=lv=Z(gl,"InitDepthFirstIn",1);var uv;gl.InitNaive=uv=Z(gl,"InitNaive",2);var fv;gl.AggressiveNone=fv=Z(gl,"AggressiveNone",0);var cv;gl.AggressiveLess=cv=Z(gl,"AggressiveLess",1);var pv;gl.AggressiveMore=pv=Z(gl,"AggressiveMore",2),gl.PackNone=0;var dv;gl.PackExpand=dv=1;var vv;gl.PackStraighten=vv=2;var yv;gl.PackMedian=yv=4;var gv;gl.PackAll=gv=7,W(Zl,{layer:!0,first:!0,ad:!0,Ud:!0,od:!0,index:!0,link:!0,eh:!0}),U(Ql,Ah),H("LayeredDigraphNetwork",Ql),Ql.prototype.createVertex=function(){return new $l},Ql.prototype.createEdge=function(){return new _l},U($l,qh),H("LayeredDigraphVertex",$l),U(_l,Eh),H("LayeredDigraphEdge",_l),U(tu,Lh),H("TreeLayout",tu),tu.prototype.cloneProtected=function(t){Lh.prototype.cloneProtected.call(this,t),t.jq=this.jq,t.Zq=this.Zq,t.Dt=this.Dt,t.Ag=this.Ag,t.tc=this.tc,t.kf.assign(this.kf),t.fa.copyInheritedPropertiesFrom(this.fa),t.ea.copyInheritedPropertiesFrom(this.ea)},tu.prototype.createNetwork=function(){return new Du},tu.prototype.makeNetwork=function(t){function i(t){if(t instanceof Na)return!t.Ke&&"Comment"!==t.kc;if(t instanceof Ra){var i=t.M;return null===i||i.Ke||"Comment"===i.kc?!1:(t=t.R,null===t||t.Ke||"Comment"===t.kc?!1:!0)}return!1}var n=this.createNetwork();return n.ub=this,t instanceof Ke?(n.Si(t.Of,!0,i),n.Si(t.links,!0,i)):t instanceof Th?n.Si(t.mc,!1,i):n.Si(t.i,!1,i),n},tu.prototype.doLayout=function(t){null===t&&r("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(t)),this.Xe!==Gv&&(this.nd=this.initialOrigin(this.nd));var i=this.g;if(null===i&&t instanceof Ke&&(i=t),this.Re=this.path===mv&&null!==i?i.Lc?xv:bv:this.path===mv?xv:this.path,0<this.network.vertexes.count){for(this.network.Nu(),t=this.network.vertexes.i;t.next();)i=t.value,i.initialized=!1,i.level=0,i.parent=null,i.children=[];if(0<this.Ic.count){for(t=new di(Au),i=this.Ic.i;i.next();){var n=i.value;n instanceof Na?(n=this.network.Hl(n),null!==n&&t.add(n)):n instanceof Au&&t.add(n)}this.Ic=t}for(0===this.Ic.count&&this.findRoots(),t=this.Ic.copy().i;t.next();)i=t.value,i.initialized||(i.initialized=!0,iu(this,i));for(t=this.Ic.i;t.next();)i=t.value,i instanceof Au&&eu(this,i);for(t=this.Ic.i;t.next();)i=t.value,i instanceof Au&&ru(this,i);for(t=this.Ic.i;t.next();)i=t.value,i instanceof Au&&su(this,i);if(this.Cx(),this.my===Uv){for(n=[],t=this.network.vertexes.i;t.next();){var e=t.value,i=e.parent;null==i&&(i=e);var i=0===i.angle||180===i.angle,o=n[e.level];void 0===o&&(o=0),n[e.level]=Math.max(o,i?e.width:e.height)}for(e=0;e<n.length;e++)void 0===n[e]&&(n[e]=0);for(this.oz=n,t=this.network.vertexes.i;t.next();)e=t.value,i=e.parent,null===i&&(i=e),0===i.angle||180===i.angle?(180===i.angle&&(e.Cr+=n[e.level]-e.width),e.width=n[e.level]):(270===i.angle&&(e.Dr+=n[e.level]-e.height),e.height=n[e.level])}else if(this.my===Hv)for(t=this.network.vertexes.i;t.next();){for(n=t.value,i=0===n.angle||180===n.angle,o=-1,e=0;e<n.children.length;e++)var s=n.children[e],o=Math.max(o,i?s.width:s.height);if(o>=0)for(e=0;e<n.children.length;e++)s=n.children[e],i?(180===n.angle&&(s.Cr+=o-s.width),s.width=o):(270===n.angle&&(s.Dr+=o-s.height),s.height=o)}for(t=this.Ic.i;t.next();)i=t.value,i instanceof Au&&this.layoutTree(i);this.arrangeTrees(),this.updateParts()}this.network=null,this.Ic=new di(Object),this.Me=!0},tu.prototype.findRoots=function(){for(var t=this.network.vertexes.i;t.next();){var i=t.value;switch(this.Re){case xv:0===i.Mb.count&&this.Ic.add(i);break;case bv:0===i.Gb.count&&this.Ic.add(i);break;default:r("Unhandled path value "+this.Re.toString())}}if(0===this.Ic.count){for(var t=999999,i=null,n=this.network.vertexes.i;n.next();){var e=n.value;switch(this.Re){case xv:e.Mb.count<t&&(t=e.Mb.count,i=e);break;case bv:e.Gb.count<t&&(t=e.Gb.count,i=e);break;default:r("Unhandled path value "+this.Re.toString())}}null!==i&&this.Ic.add(i)}},tu.prototype.removeChild=function(t,i){if(null!==t&&null!==i){for(var n=t.children,e=0,o=0;o<n.length;o++)n[o]===i&&e++;if(e>0){for(var e=Array(n.length-e),r=0,o=0;o<n.length;o++)n[o]!==i&&(e[r++]=n[o]);t.children=e}}},tu.prototype.initializeTreeVertexValues=function(t){var i=ou(this,t);if(t.copyInheritedPropertiesFrom(i),null!==t.parent&&t.parent.alignment===Lv){for(var i=t.angle,n=t.parent.children,e=0;e<n.length&&t!==n[e];)e++;0===e%2?e!==n.length-1&&(i=90===i?180:180===i?270:270===i?180:270):i=90===i?0:180===i?90:270===i?0:90,t.angle=i}t.initialized=!0},tu.prototype.assignTreeVertexValues=function(){},tu.prototype.sortTreeVertexChildren=function(t){switch(t.sorting){case wv:break;case kv:t.children.reverse();break;case Mv:t.children.sort(t.comparer);break;case Tv:t.children.sort(t.comparer),t.children.reverse();break;default:r("Unhandled sorting value "+t.sorting.toString())}},tu.prototype.Cx=function(){if(this.comments)for(var t=this.network.vertexes.i;t.next();)this.addComments(t.value)},tu.prototype.addComments=function(t){var i=t.angle,n=t.parent,e=0,o=Cv,o=!1;null!==n&&(e=n.angle,o=n.alignment,o=au(o));var i=90===i||270===i,e=90===e||270===e,n=0===t.xl,r=0,s=0,a=0,h=t.commentSpacing;if(null!==t.dc)for(var l=t.dc.bC();l.next();){var u=l.value;"Comment"===u.kc&&u.qa()&&(null===t.comments&&(t.comments=[]),t.comments.push(u),u.Ge(),u=u.oa,i&&!n||!o&&!e&&n||o&&e&&n?(r=Math.max(r,u.width),s+=u.height+Math.abs(a)):(r+=u.width+Math.abs(a),s=Math.max(s,u.height)),a=h)}null!==t.comments&&(i&&!n||!o&&!e&&n||o&&e&&n?(r+=Math.abs(t.commentMargin),s=Math.max(0,s-t.height)):(s+=Math.abs(t.commentMargin),r=Math.max(0,r-t.width)),o=A(0,0,t.P.width+r,t.P.height+s),t.Qa=o,F(o))},tu.prototype.layoutComments=function(t){if(null!==t.comments){var i=t.dc.oa,n=t.parent,e=t.angle,o=0,r=Cv,r=!1;
null!==n&&(o=n.angle,r=n.alignment,r=au(r));for(var n=90===e||270===e,e=90===o||270===o,s=0===t.xl,a=lu(t),h=0,l=t.comments,u=l.length,f=C(),c=0;u>c;c++){var p=l[c],d=p.oa;if(n&&!s||!r&&!e&&s||r&&e&&s){if(o>135&&!r||e&&a)if(0<=t.commentMargin)for(f.k(t.P.x-t.commentMargin-d.width,t.P.y+h),p.move(f),p=p.Ff();p.next();){var v=p.value;v.Za=Df,v.ab=Af}else for(f.k(t.P.x+2*t.B.x-t.commentMargin,t.P.y+h),p.move(f),p=p.Ff();p.next();)v=p.value,v.Za=Af,v.ab=Df;else if(0<=t.commentMargin)for(f.k(t.P.x+2*t.B.x+t.commentMargin,t.P.y+h),p.move(f),p=p.Ff();p.next();)v=p.value,v.Za=Af,v.ab=Df;else for(f.k(t.P.x+t.commentMargin-d.width,t.P.y+h),p.move(f),p=p.Ff();p.next();)v=p.value,v.Za=Df,v.ab=Af;h=0<=t.commentSpacing?h+(d.height+t.commentSpacing):h+(t.commentSpacing-d.height)}else{if(o>135&&!r||!e&&a)if(0<=t.commentMargin)for(f.k(t.P.x+h,t.P.y-t.commentMargin-d.height),p.move(f),p=p.Ff();p.next();)v=p.value,v.Za=Lf,v.ab=Ff;else for(f.k(t.P.x+h,t.P.y+2*t.B.y-t.commentMargin),p.move(f),p=p.Ff();p.next();)v=p.value,v.Za=Ff,v.ab=Lf;else if(0<=t.commentMargin)for(f.k(t.P.x+h,t.P.y+2*t.B.y+t.commentMargin),p.move(f),p=p.Ff();p.next();)v=p.value,v.Za=Ff,v.ab=Lf;else for(f.k(t.P.x+h,t.P.y+t.commentMargin-d.height),p.move(f),p=p.Ff();p.next();)v=p.value,v.Za=Lf,v.ab=Ff;h=0<=t.commentSpacing?h+(d.width+t.commentSpacing):h+(t.commentSpacing-d.width)}}if(P(f),i=h-t.commentSpacing-(n?i.height:i.width),this.Re===xv)for(o=t.Gb;o.next();)t=o.value.link,null===t||t.nk||(t.gk=i>0?i:0/0);else for(o=t.Mb;o.next();)t=o.value.link,null===t||t.nk||(t.Dk=i>0?i:0/0)}},tu.prototype.layoutTree=function(t){if(null!==t){for(var i=t.children,n=i.length,e=0;n>e;e++)this.layoutTree(i[e]);switch(t.compaction){case Fv:uu(this,t);break;case Ov:if(t.alignment===Lv)uu(this,t);else if(0===t.xl){var e=t.parent,i=!1,n=0,o=Cv;null!==e&&(n=e.angle,o=e.alignment,i=au(o)),e=lu(t),t.W.k(0,0),t.Ha.k(t.width,t.height),null===t.parent||null===t.comments||(180!==n&&270!==n||i)&&!e?t.ta.k(0,0):180===n&&!i||(90===n||270===n)&&e?t.ta.k(t.width-2*t.B.x,0):t.ta.k(0,t.height-2*t.B.y),t.Sr=null,t.ls=null}else{for(var s=Pu(t),i=90===s||270===s,a=0,h=t.children,l=h.length,u=0;l>u;u++)var f=h[u],a=Math.max(a,i?f.Ha.width:f.Ha.height);var c=t.alignment,e=c===Nv,p=c===Pv,d=au(c),v=Math.max(0,t.breadthLimit),n=ju(t),y=t.nodeSpacing,g=Lu(t),m=t.rowSpacing,x=0;(e||p||t.eo||t.fo&&1===t.maxGenerationCount)&&(x=Math.max(0,t.rowIndent));var e=t.width,o=t.height,b=0,w=0,k=0,M=null,T=null,S=0,C=0,N=0,P=0,j=0,L=0,D=0,A=0,f=0;if(d&&!hu(c)&&s>135&&h.reverse(),hu(c))if(l>1)for(u=0;l>u;u++)0===u%2&&u!==l-1?A=Math.max(A,i?h[u].Ha.width:h[u].Ha.height):0!==u%2&&(f=Math.max(f,i?h[u].Ha.width:h[u].Ha.height));else 1===l&&(A=i?h[0].Ha.width:h[0].Ha.height);if(d){switch(c){case jv:C=135>s?fu(t,h,A,b,w):cu(t,h,A,b,w),A=C.x,b=C.width,w=C.height;break;case Dv:for(u=0;l>u;u++){var f=h[u],F=f.Ha,M=0===L?0:m;i?(f.W.k(a-F.width,P+M),b=Math.max(b,F.width),w=Math.max(w,P+M+F.height),P+=M+F.height):(f.W.k(N+M,a-F.height),b=Math.max(b,N+M+F.width),w=Math.max(w,F.height),N+=M+F.width),L++}break;case Av:for(u=0;l>u;u++)f=h[u],F=f.Ha,M=0===L?0:m,i?(f.W.k(y/2+t.B.x,P+M),b=Math.max(b,F.width),w=Math.max(w,P+M+F.height),P+=M+F.height):(f.W.k(N+M,y/2+t.B.y),b=Math.max(b,N+M+F.width),w=Math.max(w,F.height),N+=M+F.width),L++}M=Tu(this,2),T=Tu(this,2),i?(M[0].k(0,0),M[1].k(0,w),T[0].k(b,0)):(M[0].k(0,0),M[1].k(b,0),T[0].k(0,w)),T[1].k(b,w)}else for(u=0;l>u;u++){if(f=h[u],F=f.Ha,i){v>0&&L>0&&N+y+F.width>v&&(a>N&&xu(t,c,a-N,0,D,u-1),j++,L=0,D=u,k=w,N=0,P=s>135?-w-m:w+m),wu(this,f,0,P);var O=0;if(0===L)M=f.Sr,T=f.ls,S=F.width,C=F.height,(null===M||null===T||s!==Pu(f))&&(M=Tu(this,2),T=Tu(this,2),M[0].k(0,0),M[1].k(0,C),T[0].k(S,0),T[1].k(S,C));else{var z=E(),C=Mu(this,t,f,M,T,S,C,z),O=C.x,M=z[0],T=z[1],S=C.width,C=C.height;R(z),N<F.width&&0>O&&(bu(t,-O,0,D,u-1),ku(M,-O,0),ku(T,-O,0),O=0)}f.W.k(O,P),b=Math.max(b,S),w=Math.max(w,k+(0===j?0:m)+F.height),N=S}else v>0&&L>0&&P+y+F.height>v&&(a>P&&xu(t,c,0,a-P,D,u-1),j++,L=0,D=u,k=b,P=0,N=s>135?-b-m:b+m),wu(this,f,N,0),O=0,0===L?(M=f.Sr,T=f.ls,S=F.width,C=F.height,(null===M||null===T||s!==Pu(f))&&(M=Tu(this,2),T=Tu(this,2),M[0].k(0,0),M[1].k(S,0),T[0].k(0,C),T[1].k(S,C))):(z=E(),C=Mu(this,t,f,M,T,S,C,z),O=C.x,M=z[0],T=z[1],S=C.width,C=C.height,R(z),P<F.height&&0>O&&(bu(t,0,-O,D,u-1),ku(M,0,-O),ku(T,0,-O),O=0)),f.W.k(N,O),w=Math.max(w,C),b=Math.max(b,k+(0===j?0:m)+F.width),P=C;L++}switch(j>0&&(i?(w+=Math.max(0,n),b>N&&xu(t,c,b-N,0,D,l-1),x>0&&(p||bu(t,x,0,0,l-1),b+=x)):(b+=Math.max(0,n),w>P&&xu(t,c,0,w-P,D,l-1),x>0&&(p||bu(t,0,x,0,l-1),w+=x))),p=a=0,c){case Sv:i?a+=b/2-t.B.x-g/2:p+=w/2-t.B.y-g/2;break;case Cv:j>0?i?a+=b/2-t.B.x-g/2:p+=w/2-t.B.y-g/2:i?(u=h[0].W.x+h[0].ta.x,A=h[l-1].W.x+h[l-1].ta.x+2*h[l-1].B.x,a+=u+(A-u)/2-t.B.x-g/2):(u=h[0].W.y+h[0].ta.y,A=h[l-1].W.y+h[l-1].ta.y+2*h[l-1].B.y,p+=u+(A-u)/2-t.B.y-g/2);break;case Nv:i?(a-=g,b+=g):(p-=g,w+=g);break;case Pv:i?(a+=b-t.width+g,b+=g):(p+=w-t.height+g,w+=g);break;case jv:i?a=l>1?a+(A+y/2-t.B.x):a+(h[0].B.x-t.B.x+h[0].ta.x):p=l>1?p+(A+y/2-t.B.y):p+(h[0].B.y-t.B.y+h[0].ta.y);break;case Dv:i?a+=b+y/2-t.B.x:p+=w+y/2-t.B.y;break;case Av:break;default:r("Unhandled alignment value "+c.toString())}for(u=0;l>u;u++)f=h[u],i?f.W.k(f.W.x+f.ta.x-a,f.W.y+(s>135?(d?-w:-f.Ha.height)+f.ta.y-n:o+n+f.ta.y)):f.W.k(f.W.x+(s>135?(d?-b:-f.Ha.width)+f.ta.x-n:e+n+f.ta.x),f.W.y+f.ta.y-p);if(l=h=0,d?i?(b=yu(t,b,a),0>a&&(a=0),s>135&&(p+=w+n),w+=o+n,c===Av&&(h+=y/2+t.B.x),l+=o+n):(s>135&&(a+=b+n),b+=e+n,w=gu(t,w,p),0>p&&(p=0),c===Av&&(l+=y/2+t.B.y),h+=e+n):i?(null===t.comments?e>b&&(c=mu(c,e-b,0),h=c.x,l=c.y,b=e,a=0):b=yu(t,b,a),0>a&&(h-=a,a=0),s>135&&(p+=w+n),w=Math.max(Math.max(w,o),w+o+n),l+=o+n):(s>135&&(a+=b+n),b=Math.max(Math.max(b,e),b+e+n),null===t.comments?o>w&&(c=mu(c,0,o-w),h=c.x,l=c.y,w=o,p=0):w=gu(t,w,p),0>p&&(l-=p,p=0),h+=e+n),j>0)s=Tu(this,4),c=Tu(this,4),i?(s[2].k(0,o+n),s[3].k(s[2].x,w),c[2].k(b,s[2].y),c[3].k(c[2].x,s[3].y)):(s[2].k(e+n,0),s[3].k(b,s[2].y),c[2].k(s[2].x,w),c[3].k(s[3].x,c[2].y));else{for(s=Tu(this,M.length+2),c=Tu(this,T.length+2),u=0;u<M.length;u++)d=M[u],s[u+2].k(d.x+h,d.y+l);for(u=0;u<T.length;u++)d=T[u],c[u+2].k(d.x+h,d.y+l)}i?(s[0].k(a,0),s[1].k(s[0].x,o),s[2].y<s[1].y&&(s[2].x>s[0].x?s[2].assign(s[1]):s[1].assign(s[2])),s[3].y<s[2].y&&(s[3].x>s[0].x?s[3].assign(s[2]):s[2].assign(s[3])),c[0].k(a+e,0),c[1].k(c[0].x,o),c[2].y<c[1].y&&(c[2].x<c[0].x?c[2].assign(c[1]):c[1].assign(c[2])),c[3].y<c[2].y&&(c[3].x<c[0].x?c[3].assign(c[2]):c[2].assign(c[3])),s[2].y-=n/2,c[2].y-=n/2):(s[0].k(0,p),s[1].k(e,s[0].y),s[2].x<s[1].x&&(s[2].y>s[0].y?s[2].assign(s[1]):s[1].assign(s[2])),s[3].x<s[2].x&&(s[3].y>s[0].y?s[3].assign(s[2]):s[2].assign(s[3])),c[0].k(0,p+o),c[1].k(e,c[0].y),c[2].x<c[1].x&&(c[2].y<c[0].y?c[2].assign(c[1]):c[1].assign(c[2])),c[3].x<c[2].x&&(c[3].y<c[0].y?c[3].assign(c[2]):c[2].assign(c[3])),s[2].x-=n/2,c[2].x-=n/2),Su(this,M),Su(this,T),t.Sr=s,t.ls=c,t.ta.k(a,p),t.Ha.k(b,w)}break;default:r("Unhandled compaction value "+t.compaction.toString())}}},tu.prototype.arrangeTrees=function(){if(this.tc===Gv)for(var t=this.Ic.i;t.next();){var i=t.value;if(i instanceof Au){var n=i.dc;if(null!==n){var e=n.position,n=e.x,e=e.y;isFinite(n)||(n=0),isFinite(e)||(e=0),Cu(this,i,n,e)}}}else for(t=this.nd,i=t.x,n=t.y,t=this.Ic.i;t.next();)if(e=t.value,e instanceof Au)switch(Cu(this,e,i+e.ta.x,n+e.ta.y),this.tc){case Rv:n+=e.Ha.height+this.kf.height;break;case Iv:i+=e.Ha.width+this.kf.width;break;default:r("Unhandled arrangement value "+this.tc.toString())}},tu.prototype.commitLayout=function(){this.Uy(),this.commitNodes(),this.Fx(),this.Qr&&this.commitLinks()},tu.prototype.commitNodes=function(){for(var t=this.network.vertexes.i;t.next();)t.value.commit();for(t.reset();t.next();)this.layoutComments(t.value)},tu.prototype.Fx=function(){if(this.my===Uv){for(var t=this.oz,i=[],n=null,e=this.network.vertexes.i;e.next();){var o=e.value;null===n?n=o.Qa.copy():n.fh(o.Qa);var r=i[o.level],r=void 0===r?ju(o):Math.max(r,ju(o));i[o.level]=r}for(e=0;e<i.length;e++)void 0===i[e]&&(i[e]=0);90===this.angle||270===this.angle?(n.$e(this.nodeSpacing/2,this.layerSpacing),o=new wi(-this.nodeSpacing/2,-this.layerSpacing/2)):(n.$e(this.layerSpacing,this.nodeSpacing/2),o=new wi(-this.layerSpacing/2,-this.nodeSpacing/2));var r=[],n=90===this.angle||270===this.angle?n.width:n.height,s=0;if(180===this.angle||270===this.angle)for(e=0;e<t.length;e++)s+=t[e]+i[e];for(e=0;e<t.length;e++){var a=t[e]+i[e];270===this.angle?(s-=a,r.push(new Si(0,s,n,a))):90===this.angle?(r.push(new Si(0,s,n,a)),s+=a):180===this.angle?(s-=a,r.push(new Si(s,0,a,n))):(r.push(new Si(s,0,a,n)),s+=a)}this.commitLayers(r,o)}},tu.prototype.commitLayers=function(){},tu.prototype.commitLinks=function(){for(var t=this.network.edges.i;t.next();)t.value.commit()},tu.prototype.Uy=function(){for(var t=this.Ic.i;t.next();){var i=t.value;i instanceof Au&&Nu(this,i)}},tu.prototype.setPortSpots=function(t){var i=t.alignment;if(au(i)){var n,e=this.Re===xv,o=Pu(t);switch(o){case 0:n=Af;break;case 90:n=Ff;break;case 180:n=Df;break;default:n=Lf}var r=t.children,s=r.length;switch(i){case jv:case Lv:for(i=0;s>i;i++){var a=r[i],a=(e?a.Mb:a.Gb).first();if(null!==a&&(a=a.link,null!==a)){var h=90===o||270===o?Df:Lf;if(1===s||i===s-1&&1===s%2)switch(o){case 0:h=Df;break;case 90:h=Lf;break;case 180:h=Af;break;default:h=Ff}else 0===i%2&&(h=90===o||270===o?Af:Ff);e?(t.setsPortSpot&&(a.Za=n),t.setsChildPortSpot&&(a.ab=h)):(t.setsPortSpot&&(a.Za=h),t.setsChildPortSpot&&(a.ab=n))}}break;case Dv:for(h=90===o||270===o?Af:Ff,o=e?t.Gb:t.Mb;o.next();)a=o.value.link,null!==a&&(e?(t.setsPortSpot&&(a.Za=n),t.setsChildPortSpot&&(a.ab=h)):(t.setsPortSpot&&(a.Za=h),t.setsChildPortSpot&&(a.ab=n)));break;case Av:for(h=90===o||270===o?Df:Lf,o=e?t.Gb:t.Mb;o.next();)a=o.value.link,null!==a&&(e?(t.setsPortSpot&&(a.Za=n),t.setsChildPortSpot&&(a.ab=h)):(t.setsPortSpot&&(a.Za=h),t.setsChildPortSpot&&(a.ab=n)))}}else if(e=Pu(t),this.Re===xv){for(n=t.Gb;n.next();)if(o=n.value.link,null!==o){if(t.setsPortSpot)if(t.portSpot.lc())switch(e){case 0:o.Za=Af;break;case 90:o.Za=Ff;break;case 180:o.Za=Df;break;default:o.Za=Lf}else o.Za=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.lc())switch(e){case 0:o.ab=Df;break;case 90:o.ab=Lf;break;case 180:o.ab=Af;break;default:o.ab=Ff}else o.ab=t.childPortSpot}}else for(n=t.Mb;n.next();)if(o=n.value.link,null!==o){if(t.setsPortSpot)if(t.portSpot.lc())switch(e){case 0:o.ab=Af;break;case 90:o.ab=Ff;break;case 180:o.ab=Df;break;default:o.ab=Lf}else o.ab=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.lc())switch(e){case 0:o.Za=Df;break;case 90:o.Za=Lf;break;case 180:o.Za=Af;break;default:o.Za=Ff}else o.Za=t.childPortSpot}},K(tu,{SI:"roots"},function(){return this.Ic},function(t){this.Ic!==t&&(a(t,di,tu,"roots"),this.Ic=t,this.v())}),K(tu,{path:"path"},function(){return this.jq},function(t){this.jq!==t&&(u(t,tu,tu,"path"),this.jq=t,this.v())}),K(tu,{bH:"treeStyle"},function(){return this.Zq},function(t){this.tc!==t&&(u(t,tu,tu,"treeStyle"),t===zv||t===qv||t===Bv||t===Ev)&&(this.Zq=t,this.v())}),K(tu,{my:"layerStyle"},function(){return this.Dt},function(t){this.tc!==t&&(u(t,tu,tu,"layerStyle"),t===Vv||t===Hv||t===Uv)&&(this.Dt=t,this.v())}),K(tu,{comments:"comments"},function(){return this.Ag},function(t){this.Ag!==t&&(h(t,"boolean",tu,"comments"),this.Ag=t,this.v())}),K(tu,{Xe:"arrangement"},function(){return this.tc},function(t){this.tc!==t&&(u(t,tu,tu,"arrangement"),t===Rv||t===Iv||t===Gv)&&(this.tc=t,this.v())}),K(tu,{EB:"arrangementSpacing"},function(){return this.kf},function(t){a(t,Ti,tu,"arrangementSpacing"),this.kf.A(t)||(this.kf.assign(t),this.v())}),K(tu,{RI:"rootDefaults"},function(){return this.fa},function(t){this.fa!==t&&(a(t,Au,tu,"rootDefaults"),this.fa=t,this.v())}),K(tu,{pH:"alternateDefaults"},function(){return this.ea},function(t){this.ea!==t&&(a(t,Au,tu,"alternateDefaults"),this.ea=t,this.v())}),K(tu,{sorting:"sorting"},function(){return this.fa.sorting},function(t){this.fa.sorting!==t&&(u(t,tu,tu,"sorting"),t===wv||t===kv||t===Mv||Tv)&&(this.fa.sorting=t,this.v())}),K(tu,{comparer:"comparer"},function(){return this.fa.comparer},function(t){this.fa.comparer!==t&&(h(t,"function",tu,"comparer"),this.fa.comparer=t,this.v())}),K(tu,{angle:"angle"},function(){return this.fa.angle},function(t){this.fa.angle!==t&&(h(t,"number",tu,"angle"),0===t||90===t||180===t||270===t)&&(this.fa.angle=t,this.v())}),K(tu,{alignment:"alignment"},function(){return this.fa.alignment},function(t){this.fa.alignment!==t&&(u(t,tu,tu,"alignment"),this.fa.alignment=t,this.v())}),K(tu,{nodeIndent:"nodeIndent"},function(){return this.fa.nodeIndent},function(t){this.fa.nodeIndent!==t&&(h(t,"number",tu,"nodeIndent"),t>=0&&(this.fa.nodeIndent=t,this.v()))}),K(tu,{nodeIndentPastParent:"nodeIndentPastParent"},function(){return this.fa.nodeIndentPastParent},function(t){this.fa.nodeIndentPastParent!==t&&(h(t,"number",tu,"nodeIndentPastParent"),t>=0&&1>=t&&(this.fa.nodeIndentPastParent=t,this.v()))}),K(tu,{nodeSpacing:"nodeSpacing"},function(){return this.fa.nodeSpacing},function(t){this.fa.nodeSpacing!==t&&(h(t,"number",tu,"nodeSpacing"),this.fa.nodeSpacing=t,this.v())}),K(tu,{layerSpacing:"layerSpacing"},function(){return this.fa.layerSpacing},function(t){this.fa.layerSpacing!==t&&(h(t,"number",tu,"layerSpacing"),this.fa.layerSpacing=t,this.v())}),K(tu,{layerSpacingParentOverlap:"layerSpacingParentOverlap"},function(){return this.fa.layerSpacingParentOverlap},function(t){this.fa.layerSpacingParentOverlap!==t&&(h(t,"number",tu,"layerSpacingParentOverlap"),t>=0&&1>=t&&(this.fa.layerSpacingParentOverlap=t,this.v()))}),K(tu,{compaction:"compaction"},function(){return this.fa.compaction},function(t){this.fa.compaction!==t&&(u(t,tu,tu,"compaction"),t===Fv||t===Ov)&&(this.fa.compaction=t,this.v())}),K(tu,{breadthLimit:"breadthLimit"},function(){return this.fa.breadthLimit},function(t){this.fa.breadthLimit!==t&&(h(t,"number",tu,"breadthLimit"),t>=0&&(this.fa.breadthLimit=t,this.v()))}),K(tu,{rowSpacing:"rowSpacing"},function(){return this.fa.rowSpacing},function(t){this.fa.rowSpacing!==t&&(h(t,"number",tu,"rowSpacing"),this.fa.rowSpacing=t,this.v())}),K(tu,{rowIndent:"rowIndent"},function(){return this.fa.rowIndent},function(t){this.fa.rowIndent!==t&&(h(t,"number",tu,"rowIndent"),t>=0&&(this.fa.rowIndent=t,this.v()))}),K(tu,{commentSpacing:"commentSpacing"},function(){return this.fa.commentSpacing},function(t){this.fa.commentSpacing!==t&&(h(t,"number",tu,"commentSpacing"),this.fa.commentSpacing=t,this.v())}),K(tu,{commentMargin:"commentMargin"},function(){return this.fa.commentMargin},function(t){this.fa.commentMargin!==t&&(h(t,"number",tu,"commentMargin"),this.fa.commentMargin=t,this.v())}),K(tu,{setsPortSpot:"setsPortSpot"},function(){return this.fa.setsPortSpot},function(t){this.fa.setsPortSpot!==t&&(h(t,"boolean",tu,"setsPortSpot"),this.fa.setsPortSpot=t,this.v())}),K(tu,{portSpot:"portSpot"},function(){return this.fa.portSpot},function(t){a(t,Fi,tu,"portSpot"),this.fa.portSpot.A(t)||(this.fa.portSpot=t,this.v())}),K(tu,{setsChildPortSpot:"setsChildPortSpot"},function(){return this.fa.setsChildPortSpot},function(t){this.fa.setsChildPortSpot!==t&&(h(t,"boolean",tu,"setsChildPortSpot"),this.fa.setsChildPortSpot=t,this.v())}),K(tu,{childPortSpot:"childPortSpot"},function(){return this.fa.childPortSpot},function(t){a(t,Fi,tu,"childPortSpot"),this.fa.childPortSpot.A(t)||(this.fa.childPortSpot=t,this.v())}),K(tu,{AH:"alternateSorting"},function(){return this.ea.sorting},function(t){this.ea.sorting!==t&&(u(t,tu,tu,"alternateSorting"),t===wv||t===kv||t===Mv||Tv)&&(this.ea.sorting=t,this.v())}),K(tu,{oH:"alternateComparer"},function(){return this.ea.comparer},function(t){this.ea.comparer!==t&&(h(t,"function",tu,"alternateComparer"),this.ea.comparer=t,this.v())}),K(tu,{iH:"alternateAngle"},function(){return this.ea.angle},function(t){this.ea.angle!==t&&(h(t,"number",tu,"alternateAngle"),0===t||90===t||180===t||270===t)&&(this.ea.angle=t,this.v())}),K(tu,{hH:"alternateAlignment"},function(){return this.ea.alignment},function(t){this.ea.alignment!==t&&(u(t,tu,tu,"alternateAlignment"),this.ea.alignment=t,this.v())}),K(tu,{sH:"alternateNodeIndent"},function(){return this.ea.nodeIndent},function(t){this.ea.nodeIndent!==t&&(h(t,"number",tu,"alternateNodeIndent"),t>=0&&(this.ea.nodeIndent=t,this.v()))}),K(tu,{tH:"alternateNodeIndentPastParent"},function(){return this.ea.nodeIndentPastParent},function(t){this.ea.nodeIndentPastParent!==t&&(h(t,"number",tu,"alternateNodeIndentPastParent"),t>=0&&1>=t&&(this.ea.nodeIndentPastParent=t,this.v()))}),K(tu,{uH:"alternateNodeSpacing"},function(){return this.ea.nodeSpacing},function(t){this.ea.nodeSpacing!==t&&(h(t,"number",tu,"alternateNodeSpacing"),this.ea.nodeSpacing=t,this.v())}),K(tu,{qH:"alternateLayerSpacing"},function(){return this.ea.layerSpacing},function(t){this.ea.layerSpacing!==t&&(h(t,"number",tu,"alternateLayerSpacing"),this.ea.layerSpacing=t,this.v())}),K(tu,{rH:"alternateLayerSpacingParentOverlap"},function(){return this.ea.layerSpacingParentOverlap},function(t){this.ea.layerSpacingParentOverlap!==t&&(h(t,"number",tu,"alternateLayerSpacingParentOverlap"),t>=0&&1>=t&&(this.ea.layerSpacingParentOverlap=t,this.v()))}),K(tu,{nH:"alternateCompaction"},function(){return this.ea.compaction},function(t){this.ea.compaction!==t&&(u(t,tu,tu,"alternateCompaction"),t===Fv||t===Ov)&&(this.ea.compaction=t,this.v())}),K(tu,{jH:"alternateBreadthLimit"},function(){return this.ea.breadthLimit},function(t){this.ea.breadthLimit!==t&&(h(t,"number",tu,"alternateBreadthLimit"),t>=0&&(this.ea.breadthLimit=t,this.v()))}),K(tu,{xH:"alternateRowSpacing"},function(){return this.ea.rowSpacing},function(t){this.ea.rowSpacing!==t&&(h(t,"number",tu,"alternateRowSpacing"),this.ea.rowSpacing=t,this.v())}),K(tu,{wH:"alternateRowIndent"},function(){return this.ea.rowIndent},function(t){this.ea.rowIndent!==t&&(h(t,"number",tu,"alternateRowIndent"),t>=0&&(this.ea.rowIndent=t,this.v()))}),K(tu,{mH:"alternateCommentSpacing"},function(){return this.ea.commentSpacing},function(t){this.ea.commentSpacing!==t&&(h(t,"number",tu,"alternateCommentSpacing"),this.ea.commentSpacing=t,this.v())}),K(tu,{lH:"alternateCommentMargin"},function(){return this.ea.commentMargin},function(t){this.ea.commentMargin!==t&&(h(t,"number",tu,"alternateCommentMargin"),this.ea.commentMargin=t,this.v())}),K(tu,{zH:"alternateSetsPortSpot"},function(){return this.ea.setsPortSpot},function(t){this.ea.setsPortSpot!==t&&(h(t,"boolean",tu,"alternateSetsPortSpot"),this.ea.setsPortSpot=t,this.v())}),K(tu,{vH:"alternatePortSpot"},function(){return this.ea.portSpot},function(t){a(t,Fi,tu,"alternatePortSpot"),this.ea.portSpot.A(t)||(this.ea.portSpot=t,this.v())}),K(tu,{yH:"alternateSetsChildPortSpot"},function(){return this.ea.setsChildPortSpot},function(t){this.ea.setsChildPortSpot!==t&&(h(t,"boolean",tu,"alternateSetsChildPortSpot"),this.ea.setsChildPortSpot=t,this.v())}),K(tu,{kH:"alternateChildPortSpot"},function(){return this.ea.childPortSpot},function(t){a(t,Fi,tu,"alternateChildPortSpot"),this.ea.childPortSpot.A(t)||(this.ea.childPortSpot=t,this.v())});var mv;tu.PathDefault=mv=Z(tu,"PathDefault",-1);var xv;tu.PathDestination=xv=Z(tu,"PathDestination",0);var bv;tu.PathSource=bv=Z(tu,"PathSource",1);var wv;tu.SortingForwards=wv=Z(tu,"SortingForwards",10);var kv;tu.SortingReverse=kv=Z(tu,"SortingReverse",11);var Mv;tu.SortingAscending=Mv=Z(tu,"SortingAscending",12);var Tv;tu.SortingDescending=Tv=Z(tu,"SortingDescending",13);var Sv;tu.AlignmentCenterSubtrees=Sv=Z(tu,"AlignmentCenterSubtrees",20);var Cv;tu.AlignmentCenterChildren=Cv=Z(tu,"AlignmentCenterChildren",21);var Nv;tu.AlignmentStart=Nv=Z(tu,"AlignmentStart",22);var Pv;tu.AlignmentEnd=Pv=Z(tu,"AlignmentEnd",23);var jv;tu.AlignmentBus=jv=Z(tu,"AlignmentBus",24);var Lv;tu.AlignmentBusBranching=Lv=Z(tu,"AlignmentBusBranching",25);var Dv;tu.AlignmentTopLeftBus=Dv=Z(tu,"AlignmentTopLeftBus",26);var Av;tu.AlignmentBottomRightBus=Av=Z(tu,"AlignmentBottomRightBus",27);var Fv;tu.CompactionNone=Fv=Z(tu,"CompactionNone",30);var Ov;tu.CompactionBlock=Ov=Z(tu,"CompactionBlock",31);var zv;tu.StyleLayered=zv=Z(tu,"StyleLayered",40);var Bv;tu.StyleLastParents=Bv=Z(tu,"StyleLastParents",41);var qv;tu.StyleAlternating=qv=Z(tu,"StyleAlternating",42);var Ev;tu.StyleRootOnly=Ev=Z(tu,"StyleRootOnly",43);var Rv;tu.ArrangementVertical=Rv=Z(tu,"ArrangementVertical",50);var Iv;tu.ArrangementHorizontal=Iv=Z(tu,"ArrangementHorizontal",51);var Gv;tu.ArrangementFixedRoots=Gv=Z(tu,"ArrangementFixedRoots",52);var Vv;tu.LayerIndividual=Vv=Z(tu,"LayerIndividual",60);var Hv;tu.LayerSiblings=Hv=Z(tu,"LayerSiblings",61);var Uv;tu.LayerUniform=Uv=Z(tu,"LayerUniform",62),U(Du,Ah),H("TreeNetwork",Du),Du.prototype.createVertex=function(){return new Au},Du.prototype.createEdge=function(){return new Fu},U(Au,qh),H("TreeVertex",Au),Au.prototype.copyInheritedPropertiesFrom=function(t){null!==t&&(this.sorting=t.sorting,this.comparer=t.comparer,this.angle=t.angle,this.alignment=t.alignment,this.nodeIndent=t.nodeIndent,this.nodeIndentPastParent=t.nodeIndentPastParent,this.nodeSpacing=t.nodeSpacing,this.layerSpacing=t.layerSpacing,this.layerSpacingParentOverlap=t.layerSpacingParentOverlap,this.compaction=t.compaction,this.breadthLimit=t.breadthLimit,this.rowSpacing=t.rowSpacing,this.rowIndent=t.rowIndent,this.commentSpacing=t.commentSpacing,this.commentMargin=t.commentMargin,this.setsPortSpot=t.setsPortSpot,this.portSpot=t.portSpot,this.setsChildPortSpot=t.setsChildPortSpot,this.childPortSpot=t.childPortSpot)},Y(Au,{xl:"childrenCount"},function(){return this.children.length}),K(Au,{QI:"relativePosition"},function(){return this.W},function(t){this.W.set(t)}),K(Au,{$I:"subtreeSize"},function(){return this.Ha},function(t){this.Ha.set(t)}),K(Au,{ZI:"subtreeOffset"},function(){return this.ta},function(t){this.ta.set(t)}),U(Fu,Eh),H("TreeEdge",Fu),Fu.prototype.commit=function(){var t=this.link;if(null!==t&&!t.nk){var i=this.network.ub,n=null,e=null;switch(i.Re){case xv:n=this.fromVertex,e=this.toVertex;break;case bv:n=this.toVertex,e=this.fromVertex;break;default:r("Unhandled path value "+i.Re.toString())}if(null!==n&&null!==e)if(i=this.rq,0!==i.x||0!==i.y||n.CG){var e=n.Qa,o=Pu(n),s=ju(n),a=n.rowSpacing;t.updateRoute();var h,l,u=t.ne===md,f=t.Ib,c=0;if(t.Ak(),f||u){for(c=2;4<t.Z;)t.XC(2);h=t.j(1),l=t.j(2)}else{for(c=1;3<t.Z;)t.XC(1);h=t.j(0),l=t.j(t.Z-1)}var p=t.j(t.Z-1),d=0;0===o?(n.alignment===Pv?(d=e.bottom+i.y,0===i.y&&h.y>p.y+n.rowIndent&&(d=Math.min(d,Math.max(h.y,d-Lu(n))))):n.alignment===Nv?(d=e.top+i.y,0===i.y&&h.y<p.y-n.rowIndent&&(d=Math.max(d,Math.min(h.y,d+Lu(n))))):d=n.eo||n.fo&&1===n.maxGenerationCount?e.top-n.ta.y+i.y:e.y+e.height/2+i.y,u?(t.n(c,h.x,d),c++,t.n(c,e.right+s,d),c++,t.n(c,e.right+s+(i.x-a)/3,d),c++,t.n(c,e.right+s+2*(i.x-a)/3,d),c++,t.n(c,e.right+s+(i.x-a),d),c++,t.n(c,l.x,d)):(f&&(t.n(c,e.right+s/2,h.y),c++),t.n(c,e.right+s/2,d),c++,t.n(c,e.right+s+i.x-(f?a/2:a),d),c++,f&&t.n(c,t.j(c-1).x,l.y))):90===o?(n.alignment===Pv?(d=e.right+i.x,0===i.x&&h.x>p.x+n.rowIndent&&(d=Math.min(d,Math.max(h.x,d-Lu(n))))):n.alignment===Nv?(d=e.left+i.x,0===i.x&&h.x<p.x-n.rowIndent&&(d=Math.max(d,Math.min(h.x,d+Lu(n))))):d=n.eo||n.fo&&1===n.maxGenerationCount?e.left-n.ta.x+i.x:e.x+e.width/2+i.x,u?(t.n(c,d,h.y),c++,t.n(c,d,e.bottom+s),c++,t.n(c,d,e.bottom+s+(i.y-a)/3),c++,t.n(c,d,e.bottom+s+2*(i.y-a)/3),c++,t.n(c,d,e.bottom+s+(i.y-a)),c++,t.n(c,d,l.y)):(f&&(t.n(c,h.x,e.bottom+s/2),c++),t.n(c,d,e.bottom+s/2),c++,t.n(c,d,e.bottom+s+i.y-(f?a/2:a)),c++,f&&t.n(c,l.x,t.j(c-1).y))):180===o?(n.alignment===Pv?(d=e.bottom+i.y,0===i.y&&h.y>p.y+n.rowIndent&&(d=Math.min(d,Math.max(h.y,d-Lu(n))))):n.alignment===Nv?(d=e.top+i.y,0===i.y&&h.y<p.y-n.rowIndent&&(d=Math.max(d,Math.min(h.y,d+Lu(n))))):d=n.eo||n.fo&&1===n.maxGenerationCount?e.top-n.ta.y+i.y:e.y+e.height/2+i.y,u?(t.n(c,h.x,d),c++,t.n(c,e.left-s,d),c++,t.n(c,e.left-s+(i.x+a)/3,d),c++,t.n(c,e.left-s+2*(i.x+a)/3,d),c++,t.n(c,e.left-s+(i.x+a),d),c++,t.n(c,l.x,d)):(f&&(t.n(c,e.left-s/2,h.y),c++),t.n(c,e.left-s/2,d),c++,t.n(c,e.left-s+i.x+(f?a/2:a),d),c++,f&&t.n(c,t.j(c-1).x,l.y))):270===o?(n.alignment===Pv?(d=e.right+i.x,0===i.x&&h.x>p.x+n.rowIndent&&(d=Math.min(d,Math.max(h.x,d-Lu(n))))):n.alignment===Nv?(d=e.left+i.x,0===i.x&&h.x<p.x-n.rowIndent&&(d=Math.max(d,Math.min(h.x,d+Lu(n))))):d=n.eo||n.fo&&1===n.maxGenerationCount?e.left-n.ta.x+i.x:e.x+e.width/2+i.x,u?(t.n(c,d,h.y),c++,t.n(c,d,e.top-s),c++,t.n(c,d,e.top-s+(i.y+a)/3),c++,t.n(c,d,e.top-s+2*(i.y+a)/3),c++,t.n(c,d,e.top-s+(i.y+a)),c++,t.n(c,d,l.y)):(f&&(t.n(c,h.x,e.top-s/2),c++),t.n(c,d,e.top-s/2),c++,t.n(c,d,e.top-s+i.y+(f?a/2:a)),c++,f&&t.n(c,l.x,t.j(c-1).y))):r("Invalid angle "+o),t.Nh()}else o=n,s=e,t=this.link,n=Pu(o),n!==Pu(s)&&(i=ju(o),e=o.Qa,o=s.Qa,0===n&&o.left-e.right<i+1||90===n&&o.top-e.bottom<i+1||180===n&&e.left-o.right<i+1||270===n&&e.top-o.bottom<i+1||(t.updateRoute(),o=t.ne===md,s=t.Ib,a=au(this.fromVertex.alignment),t.Ak(),0===n?(n=e.right+i/2,o?4===t.Z&&(i=t.j(3).y,t.L(1,n-20,t.j(1).y),t.n(2,n-20,i),t.n(3,n,i),t.n(4,n+20,i),t.L(5,t.j(5).x,i)):s?a?t.L(3,t.j(2).x,t.j(4).y):6===t.Z&&(t.L(2,n,t.j(2).y),t.L(3,n,t.j(3).y)):4===t.Z?t.n(2,n,t.j(2).y):3===t.Z?t.L(1,n,t.j(2).y):2===t.Z&&t.n(1,n,t.j(1).y)):90===n?(i=e.bottom+i/2,o?4===t.Z&&(n=t.j(3).x,t.L(1,t.j(1).x,i-20),t.n(2,n,i-20),t.n(3,n,i),t.n(4,n,i+20),t.L(5,n,t.j(5).y)):s?a?t.L(3,t.j(2).x,t.j(4).y):6===t.Z&&(t.L(2,t.j(2).x,i),t.L(3,t.j(3).x,i)):4===t.Z?t.n(2,t.j(2).x,i):3===t.Z?t.L(1,t.j(2).x,i):2===t.Z&&t.n(1,t.j(1).x,i)):180===n?(n=e.left-i/2,o?4===t.Z&&(i=t.j(3).y,t.L(1,n+20,t.j(1).y),t.n(2,n+20,i),t.n(3,n,i),t.n(4,n-20,i),t.L(5,t.j(5).x,i)):s?a?t.L(3,t.j(2).x,t.j(4).y):6===t.Z&&(t.L(2,n,t.j(2).y),t.L(3,n,t.j(3).y)):4===t.Z?t.n(2,n,t.j(2).y):3===t.Z?t.L(1,n,t.j(2).y):2===t.Z&&t.n(1,n,t.j(1).y)):270===n&&(i=e.top-i/2,o?4===t.Z&&(n=t.j(3).x,t.L(1,t.j(1).x,i+20),t.n(2,n,i+20),t.n(3,n,i),t.n(4,n,i-20),t.L(5,n,t.j(5).y)):s?a?t.L(3,t.j(2).x,t.j(4).y):6===t.Z&&(t.L(2,t.j(2).x,i),t.L(3,t.j(3).x,i)):4===t.Z?t.n(2,t.j(2).x,i):3===t.Z?t.L(1,t.j(2).x,i):2===t.Z&&t.n(1,t.j(1).x,i)),t.Nh()))}},K(Fu,{OI:"relativePoint"},function(){return this.rq},function(t){this.rq.set(t)}),Ou.prototype.$q=function(t){var i=t.ia,n=t.ja,e=t.s,o=t.u,r=Math.min(i,e),s=Math.min(n,o),i=Math.abs(e-i),n=Math.abs(o-n),o=new $i(r,s);return o.ra.add(new _i(sc,r+i,s)),o.ra.add(new _i(sc,r+i,s+n)),o.ra.add(new _i(sc,r,s+n).close()),t.type=ic,t.Ya.add(o),t},U(Yu,Pr),Yu.prototype.cloneProtected=function(t){Pr.prototype.cloneProtected.call(this,t),t.element=this.ee.cloneNode(!0)},Yu.prototype.toString=function(){return"HTMLHost("+this.ee.toString()+")#"+V(this)},Yu.prototype.Yi=function(t,i){var n=this.ee;if(null!==n){var e=this.Ra(Sf);e.x-=this.Q.width/2,e.y-=this.Q.height/2,e.x-=this.Q.x,e.y-=this.Q.y;var e=i.ED(e),o=i.dk;null===o||o.contains(n)||o.appendChild(n),o=this.transform,n.style.transform="matrix("+o.m11+","+o.m12+","+o.m21+","+o.m22+","+o.dx+","+o.dy+")",n.style.transformOrigin="0 0",o=e.y,n.style.left=e.x+"px",n.style.top=o+"px"}},Yu.prototype.Rn=function(t,i,n,e){var o=this.ka;isFinite(o.width)&&(t=o.width),isFinite(o.height)&&(i=o.height);var o=this.se,r=this.Lf;n=Math.max(n,r.width),e=Math.max(e,r.height),t=Math.min(o.width,t),i=Math.min(o.height,i),t=Math.max(n,t),i=Math.max(e,i),n=this.ee,null!==n&&(i=n.getBoundingClientRect(),t=i.width,i=i.height),Ci(this.hc,t,i),Ar(this,0,0,t,i)},Yu.prototype.Lh=function(t,i,n,e){zr(this,t,i,n,e)},Y(Yu,{sa:"naturalBounds"},function(){return this.hc}),K(Yu,{element:"element"},function(){return this.ee},function(t){var i=this.ee;i!==t&&(t instanceof HTMLElement||r("HTMLHost.element must be an instance of HTMLElement."),this.ee=t,t.className="HTMLHost",this.h("element",i,t),this.ba())}),Xu.version="1.5.8",t&&(t.module&&"object"==typeof t.module&&"object"==typeof t.module.exports?t.module.exports=Xu:t.define&&"function"==typeof t.define&&t.define.amd?(t.go=Xu,t.define(Xu)):t.go=Xu)}(window);
//# sourceMappingURL=go.min.js.map